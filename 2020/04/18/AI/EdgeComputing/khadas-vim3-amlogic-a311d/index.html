<!DOCTYPE html>
<html lang="English">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"longervision.ca","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Today’s concert: ONE WORLD : TOGETHER AT HOME. Yup, today, I’ve my previous blog updated. A lot of modifications. Khadas VIM3 is really a good product. With Amlogic‘s A311D with 5.0 TOPS NPU, the b">
<meta property="og:type" content="article">
<meta property="og:title" content="Khadas VIM3">
<meta property="og:url" content="http://longervision.ca/2020/04/18/AI/EdgeComputing/khadas-vim3-amlogic-a311d/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="Today’s concert: ONE WORLD : TOGETHER AT HOME. Yup, today, I’ve my previous blog updated. A lot of modifications. Khadas VIM3 is really a good product. With Amlogic‘s A311D with 5.0 TOPS NPU, the b">
<meta property="og:locale">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_lake_01.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_lake_02.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_park_in_the_snow.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/01_KrescueDefault.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/02_ImageWriteToEMMC.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/03_PrebuiltOSSelection.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/04_StartDownloading.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/05_StartInstallation.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/06_InstallationComplete.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/07_KrescueReboot.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/08_Ubuntu_XFCE_Desktop.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/dog_299x299.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/goldfish_299x299.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/manjaro.png">
<meta property="article:published_time" content="2020-04-18T07:00:00.000Z">
<meta property="article:modified_time" content="2021-06-06T04:18:22.158Z">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Khadas VIM3, Amlogic A311D, Edge Computing">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_lake_01.jpg">


<link rel="canonical" href="http://longervision.ca/2020/04/18/AI/EdgeComputing/khadas-vim3-amlogic-a311d/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"English","comments":true,"permalink":"http://longervision.ca/2020/04/18/AI/EdgeComputing/khadas-vim3-amlogic-a311d/","path":"2020/04/18/AI/EdgeComputing/khadas-vim3-amlogic-a311d/","title":"Khadas VIM3"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Khadas VIM3 | Longer Vision Technology</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Longer Vision Technology</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Github Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-About-Khadas-VIM3"><span class="nav-number">1.</span> <span class="nav-text">1. About Khadas VIM3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-Raspberry-Pi-4-Model-B-vs-Khadas-VIM3-vs-Jetson-Nano-Developer-Kit"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 Raspberry Pi 4 Model B vs. Khadas VIM3 vs. Jetson Nano Developer Kit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Amlogic-A311D-amp-S922X-B-vs-Rockchip-RK3399-Pro-vs-Amlogic-S912"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 Amlogic A311D &amp; S922X-B vs. Rockchip RK3399 (Pro) vs. Amlogic S912</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Install-Prebuilt-Operating-System-To-EMMC-Via-Krescue"><span class="nav-number">2.</span> <span class="nav-text">2. Install Prebuilt Operating System To EMMC Via Krescue</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-WIRED-Connection-Preferred"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 WIRED Connection Preferred</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-Flash-Krescue-Onto-SD-Card"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 Flash Krescue Onto SD Card</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-Setup-Wifi-From-Within-Krescue-Shell"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 Setup Wifi From Within Krescue Shell</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-SSH-Into-Krescue-Via-Wireless-Connection"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 SSH Into Krescue Via Wireless Connection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-Flash-OS-onto-EMMC-WIRED-Connection-Preferred"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 Flash OS onto EMMC (WIRED Connection Preferred)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-1-Install-OS-Using-Shell-Command"><span class="nav-number">2.5.1.</span> <span class="nav-text">2.5.1 Install OS Using Shell Command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-2-Install-OS-Using-Krescue-GUI"><span class="nav-number">2.5.2.</span> <span class="nav-text">2.5.2 Install OS Using Krescue GUI</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-6-Boot-From-EMMC"><span class="nav-number">2.6.</span> <span class="nav-text">2.6. Boot From EMMC</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-1-SSH-Into-Khadas-VIM3"><span class="nav-number">2.6.1.</span> <span class="nav-text">2.6.1 SSH Into Khadas VIM3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-2-Specs-For-Khadas-VIM3"><span class="nav-number">2.6.2.</span> <span class="nav-text">2.6.2 Specs For Khadas VIM3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-3-Package-Versions"><span class="nav-number">2.6.3.</span> <span class="nav-text">2.6.3 Package Versions</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Install-Manjaro-To-TF-SD-Card"><span class="nav-number">3.</span> <span class="nav-text">3. Install Manjaro To TF&#x2F;SD Card</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-NPU"><span class="nav-number">4.</span> <span class="nav-text">4. NPU</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-Obtain-aml-npu-sdk-From-Khadas"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 Obtain aml_npu_sdk From Khadas</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-Model-Conversion-on-Host"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 Model Conversion on Host</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-Build-Case-Code"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 Build Case Code</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-1-Cross-build-on-Host"><span class="nav-number">4.3.1.</span> <span class="nav-text">4.3.1 Cross-build on Host</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-2-Directly-Build-on-Khadas-VIM3"><span class="nav-number">4.3.2.</span> <span class="nav-text">4.3.2 Directly Build on Khadas VIM3</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-Run-Executable-on-Khadas-VIM3"><span class="nav-number">4.4.</span> <span class="nav-text">4.4 Run Executable on Khadas VIM3</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-1-Step-1-Install-aml-npu"><span class="nav-number">4.4.1.</span> <span class="nav-text">4.4.1 Step 1: Install aml-npu</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-2-Step-2-Install-aml-npu-demo-and-Run-Demo"><span class="nav-number">4.4.2.</span> <span class="nav-text">4.4.2 Step 2: Install aml-npu-demo and Run Demo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-3-Step-3-Build-Your-Own-Executable-and-Run"><span class="nav-number">4.4.3.</span> <span class="nav-text">4.4.3 Step 3: Build Your Own Executable and Run</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-3-1-You-STILL-Need-aml-npu-sdk-from-Khadas"><span class="nav-number">4.4.3.1.</span> <span class="nav-text">4.4.3.1 You STILL Need aml_npu_sdk from Khadas</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-3-2-Build-inceptionv3-from-Source"><span class="nav-number">4.4.3.2.</span> <span class="nav-text">4.4.3.2 Build inceptionv3 from Source</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-3-3-Run-inceptionv3"><span class="nav-number">4.4.3.3.</span> <span class="nav-text">4.4.3.3 Run inceptionv3</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-Dual-Boot-From-Manjaro"><span class="nav-number">5.</span> <span class="nav-text">5. Dual Boot From Manjaro</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-How-to-Boot-Images-from-External-Media"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 How to Boot Images from External Media?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-How-to-flash-Manjaro-XFCE-for-Khadas-Vim-3-from-TF-SD-card-to-EMMC"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 How to flash Manjaro XFCE for Khadas Vim 3 from TF&#x2F;SD card to EMMC?</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">Longer Vision Technology Github Blog</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">104</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">98</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="English">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/04/18/AI/EdgeComputing/khadas-vim3-amlogic-a311d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Khadas VIM3
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-18 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-18T00:00:00-07:00">2020-04-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:22" itemprop="dateModified" datetime="2021-06-05T21:18:22-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/EdgeComputing/" itemprop="url" rel="index"><span itemprop="name">EdgeComputing</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/nTd5Trp1pbg?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>


<p>Today’s concert: <strong>ONE WORLD : TOGETHER AT HOME</strong>. Yup, today, I’ve my previous blog updated. A lot of modifications. <a target="_blank" rel="noopener" href="https://www.khadas.com/vim3">Khadas VIM3</a> is really a good product. With <a target="_blank" rel="noopener" href="https://www.amlogic.com/">Amlogic</a>‘s <strong>A311D with 5.0 TOPS NPU</strong>, the board itself comes with a super powerful AI inference capability.</p>
<ul>
<li>AI inference unit used to be in USB sticks, such as: <ul>
<li><a target="_blank" rel="noopener" href="https://software.intel.com/en-us/articles/intel-movidius-neural-compute-stick">Intel Movidius Neural Compute Stick</a></li>
<li><a target="_blank" rel="noopener" href="https://coral.ai/products/accelerator/">Google Coral USB Accelerator</a>, etc.<br>The target of these type of products is for some SBCs without any XPU(<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Graphics_processing_unit">GPU</a>/<a target="_blank" rel="noopener" href="https://software.intel.com/en-us/iot/hardware/vision-accelerator-movidius-vpu">VPU</a>/<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/AI_accelerator">NPU</a>/<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tensor_processing_unit">TPU</a>, etc.), for speeding up <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Parallel_computing">parallel computing</a>.</li>
</ul>
</li>
<li>AI inference unit can of course be on board directly, <strong>BUT NOT ONLY</strong> as an peripheral. For instance:<ul>
<li><a target="_blank" rel="noopener" href="https://coral.ai/products/dev-board/">Google Coral Dev Board</a> based on Google’s own TPU</li>
<li><a target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-nano/">NVidia Jetson Nano</a> based on NVidia’s own GPU</li>
<li><a target="_blank" rel="noopener" href="https://www.khadas.com/vim3">Khadas VIM3</a> based on <a target="_blank" rel="noopener" href="https://www.amlogic.com/">Amlogic</a>‘s <strong>A311D with 5.0 TOPS NPU</strong></li>
</ul>
</li>
</ul>
<em>
What a sunny day after the **FIRST** snow in this winter. Let me show you 3 pictures in the first row, and 3 videos in the second. We need to enjoy both R&D and life…

<table>
<thead>
<tr>
<th align="center">Green Timers Lake 1</th>
<th align="center">Green Timers Lake 2</th>
<th align="center">Green Timers Park</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_lake_01.jpg" alt="Green Timers Lake 1 "></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_lake_02.jpg" alt="Green Timers Lake 2"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_park_in_the_snow.jpg" alt="Green Timers Park"></td>
</tr>
<tr>
<td align="center">A Pair of Swans</td>
<td align="center">A Group of Ducks</td>
<td align="center">A Little Stream In The Snow</td>
</tr>
<tr>
<td align="center"><iframe width="560" height="315" src="https://www.youtube.com/embed/RtQ3iFfLb5E?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe></td>
<td align="center"><iframe width="560" height="315" src="https://www.youtube.com/embed/5TafK3b9A9k?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe></td>
<td align="center"><iframe width="560" height="315" src="https://www.youtube.com/embed/ICebPYyPK8s?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe></td>
</tr>
</tbody></table>
<p>After a brief break, I started investigating <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a> again.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/p9BGBFiu1-0?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
</em>



<h1 id="1-About-Khadas-VIM3"><a href="#1-About-Khadas-VIM3" class="headerlink" title="1. About Khadas VIM3"></a>1. About Khadas VIM3</h1><p><a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a> is a super computer based on <strong>Amlogic A311D</strong>. Before we start, let’s carry out several simple comparisons.</p>
<h2 id="1-1-Raspberry-Pi-4-Model-B-vs-Khadas-VIM3-vs-Jetson-Nano-Developer-Kit"><a href="#1-1-Raspberry-Pi-4-Model-B-vs-Khadas-VIM3-vs-Jetson-Nano-Developer-Kit" class="headerlink" title="1.1 Raspberry Pi 4 Model B vs. Khadas VIM3 vs. Jetson Nano Developer Kit"></a>1.1 Raspberry Pi 4 Model B vs. Khadas VIM3 vs. Jetson Nano Developer Kit</h2><p>Please refer to:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.khadas.com/vim">Compare Amlogic Boards</a></li>
<li><a target="_blank" rel="noopener" href="https://www.hackerboards.com/compare/358,353,354/">hackerboards comparisons</a>.</li>
</ul>
<h2 id="1-2-Amlogic-A311D-amp-S922X-B-vs-Rockchip-RK3399-Pro-vs-Amlogic-S912"><a href="#1-2-Amlogic-A311D-amp-S922X-B-vs-Rockchip-RK3399-Pro-vs-Amlogic-S912" class="headerlink" title="1.2 Amlogic A311D &amp; S922X-B vs. Rockchip RK3399 (Pro) vs. Amlogic S912"></a>1.2 Amlogic A311D &amp; S922X-B vs. Rockchip RK3399 (Pro) vs. Amlogic S912</h2><p>Please refer to:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://androidtvbox.eu/amlogic-a311d-s922x-b-vs-rk3399-s912-comparison/">androidtvbox</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnx-software.com/2019/07/29/amlogic-a311d-vs-rockchip-rk3399-benchmarks-comparison/">cnx-software embedded system news - July 29, 2019</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnx-software.com/2019/08/04/amlogic-s912-vs-amlogic-a311d-s922x-b-benchmarks-comparison/">cnx-software embedded system news - August 4, 2019</a></li>
</ul>
<h1 id="2-Install-Prebuilt-Operating-System-To-EMMC-Via-Krescue"><a href="#2-Install-Prebuilt-Operating-System-To-EMMC-Via-Krescue" class="headerlink" title="2. Install Prebuilt Operating System To EMMC Via Krescue"></a>2. Install Prebuilt Operating System To EMMC Via <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/Krescue.html">Krescue</a></h1><h2 id="2-1-WIRED-Connection-Preferred"><a href="#2-1-WIRED-Connection-Preferred" class="headerlink" title="2.1 WIRED Connection Preferred"></a>2.1 WIRED Connection Preferred</h2><p>As mentioned in <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/index.html">VIM3 Beginners Guide</a>, <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/Krescue.html">Krescue</a> is a <code>Swiss Army knife</code>. <span style="color:red"><strong>As of January 2020, Krescue can download and install OS images directly from the web via wired Ethernet.</strong></span></p>
<h2 id="2-2-Flash-Krescue-Onto-SD-Card"><a href="#2-2-Flash-Krescue-Onto-SD-Card" class="headerlink" title="2.2 Flash Krescue Onto SD Card"></a>2.2 Flash Krescue Onto SD Card</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  Krescue sudo dd bs=4M if=VIM3.krescue-d41d8cd98f00b204e9800998ecf8427e-1587199778-67108864-279c13890fa7253d5d2b76000769803e.sd.img of=/dev/mmcblk0 conv=fsync </span><br><span class="line">[sudo] password for longervision: </span><br><span class="line">16+0 records in</span><br><span class="line">16+0 records out</span><br><span class="line">67108864 bytes (67 MB, 64 MiB) copied, 4.03786 s, 16.6 MB/s</span><br></pre></td></tr></table></figure>


<h2 id="2-3-Setup-Wifi-From-Within-Krescue-Shell"><a href="#2-3-Setup-Wifi-From-Within-Krescue-Shell" class="headerlink" title="2.3 Setup Wifi From Within Krescue Shell"></a>2.3 Setup Wifi From Within Krescue Shell</h2><p>If you really don’t like the <strong>WIRED connection</strong>, boot into <strong>Krescue shell</strong>, and use the following commands to set up Wifi:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">root@Krescue:~# wifi.config WIFI_NAME WIFI_PASSWORD</span><br><span class="line">root@Krescue:~# wifi.client</span><br><span class="line">root@Krescue:~# wifi.status</span><br><span class="line">DRIVER=brcmfmac</span><br><span class="line">OF_NAME=wifi</span><br><span class="line">OF_FULLNAME=/soc/sd@ffe03000/wifi@1</span><br><span class="line">OF_COMPATIBLE_0=brcm,bcm4329-fmac</span><br><span class="line">OF_COMPATIBLE_N=1</span><br><span class="line">SDIO_CLASS=00</span><br><span class="line">SDIO_ID=02D0:4359</span><br><span class="line">MODALIAS=sdio:c00v02D0d4359</span><br><span class="line">[i] iw dev</span><br><span class="line"><span class="meta">phy#</span><span class="bash">0</span></span><br><span class="line">	Interface wlan0</span><br><span class="line">		ifindex 4</span><br><span class="line">		wdev 0x1</span><br><span class="line">		addr xx:xx:xx:xx:xx:xx</span><br><span class="line">		ssid XXXXXXXXXX</span><br><span class="line">		type managed</span><br><span class="line">		channel 161 (5805 MHz), width: 80 MHz, center1: 5775 MHz</span><br><span class="line">		txpower 31.00 dBm</span><br><span class="line">[i] CLIENT mode active 6754</span><br><span class="line">Selected interface &#x27;wlan0&#x27;</span><br><span class="line">bssid=xx:xx:xx:xx:xx:xx</span><br><span class="line">freq=5805</span><br><span class="line">ssid=XXXXXXXXXX</span><br><span class="line">id=0</span><br><span class="line">mode=station</span><br><span class="line">pairwise_cipher=CCMP</span><br><span class="line">group_cipher=CCMP</span><br><span class="line">key_mgmt=WPA2-PSK</span><br><span class="line">wpa_state=COMPLETED</span><br><span class="line">ip_address=192.168.1.110</span><br><span class="line">address=xx:xx:xx:xx:xx:xx</span><br><span class="line">uuid=xxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><br><span class="line">ieee80211ac=1</span><br></pre></td></tr></table></figure>


<h2 id="2-4-SSH-Into-Krescue-Via-Wireless-Connection"><a href="#2-4-SSH-Into-Krescue-Via-Wireless-Connection" class="headerlink" title="2.4 SSH Into Krescue Via Wireless Connection"></a>2.4 SSH Into Krescue Via Wireless Connection</h2><p>Now, let’s try to connect <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3 board</a> remotely.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ping 192.168.1.110</span><br><span class="line">PING 192.168.1.110 (192.168.1.110) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.1.110: icmp_seq=1 ttl=64 time=140 ms</span><br><span class="line">64 bytes from 192.168.1.110: icmp_seq=2 ttl=64 time=54.0 ms</span><br><span class="line">64 bytes from 192.168.1.110: icmp_seq=3 ttl=64 time=13.1 ms</span><br><span class="line">^C</span><br><span class="line">--- 192.168.1.110 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2001ms</span><br><span class="line">rtt min/avg/max/mdev = 13.191/69.145/140.193/52.936 ms</span><br><span class="line">➜  ~ ssh root@192.168.1.110                                                </span><br><span class="line">The authenticity of host &#x27;192.168.1.110 (192.168.1.110)&#x27; can&#x27;t be established.</span><br><span class="line">RSA key fingerprint is SHA256:0t0PZw/24nWc8hWaCJkltYtwCduMMSlRuux2Nn865Os.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added &#x27;192.168.1.110&#x27; (RSA) to the list of known hosts.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BusyBox v1.28.4 () built-in shell (ash)</span><br><span class="line"></span><br><span class="line"> OpenWrt 18.06.3, r7798-97ae9e0ccb</span><br><span class="line"></span><br><span class="line">     __ _____  Khadas ## hyphop ## </span><br><span class="line">    / //_/ _ \___ ___ ______ _____ </span><br><span class="line">   / ,&lt; / , _/ -_|_-&lt;/ __/ // / -_)</span><br><span class="line">  /_/|_/_/|_|\__/___/\__/\_,_/\__/ </span><br><span class="line">                                   </span><br><span class="line"> extreme tiny and fast rescue system</span><br><span class="line"></span><br><span class="line">BUILD: Sat Apr 18 08:49:28 UTC 2020</span><br><span class="line"></span><br><span class="line">[i] POST_CONFIG:  ap_ssid=Krescue ap_passw=12345678 wifi_mode=2g script=sd:launcher.sh eth_hw=C0:4A:00:C0:3F:DB booted= hwver=VIM3.V12</span><br><span class="line"></span><br><span class="line">=== WARNING! =====================================</span><br><span class="line">There is no root password defined on this device!</span><br><span class="line">Use the passwd command to set up a new password</span><br><span class="line">in order to prevent unauthorized SSH logins.</span><br><span class="line">--------------------------------------------------</span><br><span class="line">root@Krescue:~# uname -a</span><br><span class="line">Linux Krescue 5.4.5 #4 SMP PREEMPT Thu Apr 9 22:07:48 +09 2020 aarch64 GNU/Linux</span><br></pre></td></tr></table></figure>


<h2 id="2-5-Flash-OS-onto-EMMC-WIRED-Connection-Preferred"><a href="#2-5-Flash-OS-onto-EMMC-WIRED-Connection-Preferred" class="headerlink" title="2.5 Flash OS onto EMMC (WIRED Connection Preferred)"></a>2.5 Flash OS onto EMMC (WIRED Connection Preferred)</h2><p>Let’s take a look at the SD card device:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@Krescue:~# ls /dev/mmcblk*</span><br><span class="line">/dev/mmcblk1       /dev/mmcblk1p1     /dev/mmcblk1p2     /dev/mmcblk2       /dev/mmcblk2boot0  /dev/mmcblk2boot1  /dev/mmcblk2rpmb</span><br></pre></td></tr></table></figure>

<h3 id="2-5-1-Install-OS-Using-Shell-Command"><a href="#2-5-1-Install-OS-Using-Shell-Command" class="headerlink" title="2.5.1 Install OS Using Shell Command"></a>2.5.1 Install OS Using Shell Command</h3><p>Please refer to the <a target="_blank" rel="noopener" href="https://dl.khadas.com/Firmware/Krescue/mega/README.megaimage_online.txt">Shell Commands Examples</a>.</p>
<p><code>curl -sfL dl.khadas.com/.mega | sh -s - -Y -X  &gt; /dev/mmcblk?</code> should do.</p>
<h3 id="2-5-2-Install-OS-Using-Krescue-GUI"><a href="#2-5-2-Install-OS-Using-Krescue-GUI" class="headerlink" title="2.5.2 Install OS Using Krescue GUI"></a>2.5.2 Install OS Using Krescue GUI</h3><p>Let’s bring back <strong>Krescue GUI</strong> by command <code>krescue</code>, and select <a target="_blank" rel="noopener" href="https://dl.khadas.com/Firmware/Krescue/images/VIMx.Ubuntu-xfce-bionic_Linux-4.9_arm64_V20191231.emmc.kresq">VIMx.Ubuntu-xfce-bionic_Linux-4.9_arm64_V20191231.emmc.kresq</a> and have it flashed onto EMMC.</p>
<table>
<thead>
<tr>
<th align="center">Krescue Default</th>
<th align="center">Image Write To EMMC</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/01_KrescueDefault.png" alt="Krescue Default"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/02_ImageWriteToEMMC.png" alt="Image Write To EMMC"></td>
</tr>
<tr>
<td align="center">Select Prebuilt OS</td>
<td align="center">Start Downloading OS</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/03_PrebuiltOSSelection.png" alt="Select Prebuilt OS"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/04_StartDownloading.png" alt="Start Downloading OS"></td>
</tr>
<tr>
<td align="center">Start Installation</td>
<td align="center">Installation Complete</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/05_StartInstallation.png" alt="Start Installation"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/06_InstallationComplete.png" alt="Installation Complete"></td>
</tr>
<tr>
<td align="center">Krescue Reboot</td>
<td align="center">Ubuntu XFCE Desktop</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/07_KrescueReboot.png" alt="Krescue Reboot"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/08_Ubuntu_XFCE_Desktop.png" alt="Ubuntu XFCE Desktop"></td>
</tr>
</tbody></table>
<h2 id="2-6-Boot-From-EMMC"><a href="#2-6-Boot-From-EMMC" class="headerlink" title="2.6. Boot From EMMC"></a>2.6. Boot From EMMC</h2><p>Actually, the 8th image in the above just showed Ubuntu <a target="_blank" rel="noopener" href="https://www.xfce.org/">XFCE</a> desktop. We can also <strong>SSH into</strong> it after configuring Wifi successfully.</p>
<h3 id="2-6-1-SSH-Into-Khadas-VIM3"><a href="#2-6-1-SSH-Into-Khadas-VIM3" class="headerlink" title="2.6.1 SSH Into Khadas VIM3"></a>2.6.1 SSH Into <a target="_blank" rel="noopener" href="https://www.khadas.com/vim3">Khadas VIM3</a></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ssh khadas@192.168.1.95</span><br><span class="line">The authenticity of host &#x27;192.168.1.95 (192.168.1.95)&#x27; can&#x27;t be established.</span><br><span class="line">ECDSA key fingerprint is SHA256:Q59XrIX7bSWsphZCpgHBSnVH5ETgCY9iLfDEuvRKtOw.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added &#x27;192.168.1.95&#x27; (ECDSA) to the list of known hosts.</span><br><span class="line">khadas@192.168.1.95&#x27;s password: </span><br><span class="line"></span><br><span class="line">Welcome to Fenix 0.8.1 Ubuntu 18.04.3 LTS Linux 4.9.206  </span><br><span class="line"> _  ___               _            __     _____ __  __ _____ </span><br><span class="line">| |/ / |__   __ _  __| | __ _ ___  \ \   / /_ _|  \/  |___ / </span><br><span class="line">| &#x27; /| &#x27;_ \ / _` |/ _` |/ _` / __|  \ \ / / | || |\/| | |_ \ </span><br><span class="line">| . \| | | | (_| | (_| | (_| \__ \   \ V /  | || |  | |___) |</span><br><span class="line">|_|\_\_| |_|\__,_|\__,_|\__,_|___/    \_/  |___|_|  |_|____/ </span><br><span class="line">                                                             </span><br><span class="line"></span><br><span class="line"> * Website:        https://www.khadas.com</span><br><span class="line"> * Documentation:  https://docs.khadas.com</span><br><span class="line"> * Forum:          https://forum.khadas.com</span><br><span class="line"></span><br><span class="line">To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.</span><br><span class="line">See &quot;man sudo_root&quot; for details.</span><br></pre></td></tr></table></figure>


<h3 id="2-6-2-Specs-For-Khadas-VIM3"><a href="#2-6-2-Specs-For-Khadas-VIM3" class="headerlink" title="2.6.2 Specs For Khadas VIM3"></a>2.6.2 Specs For <a target="_blank" rel="noopener" href="https://www.khadas.com/vim3">Khadas VIM3</a></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ uname -a</span><br><span class="line">Linux Khadas 4.9.206 #13 SMP PREEMPT Tue Dec 31 00:37:47 CST 2019 aarch64 aarch64 aarch64 GNU/Linux</span><br><span class="line">khadas@Khadas:~$ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd09</span><br><span class="line">CPU revision	: 2</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd09</span><br><span class="line">CPU revision	: 2</span><br><span class="line"></span><br><span class="line">processor	: 4</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd09</span><br><span class="line">CPU revision	: 2</span><br><span class="line"></span><br><span class="line">processor	: 5</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd09</span><br><span class="line">CPU revision	: 2</span><br><span class="line"></span><br><span class="line">Serial		: 290b1000010c1900000437304e424e50</span><br><span class="line">Hardware	: Khadas VIM3</span><br><span class="line">khadas@Khadas:~$ clinfo     </span><br><span class="line">Number of platforms                               1</span><br><span class="line">  Platform Name                                   ARM Platform</span><br><span class="line">  Platform Vendor                                 ARM</span><br><span class="line">  Platform Version                                OpenCL 2.0 git.c8adbf9.ad00b04c1b60847de257177231dc1a53</span><br><span class="line">  Platform Profile                                FULL_PROFILE</span><br><span class="line">  Platform Extensions                             cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_byte_addressable_store cl_khr_3d_image_writes cl_khr_int64_base_atomics cl_khr_int64_extended_atomics cl_khr_fp16 cl_khr_icd cl_khr_egl_image cl_khr_image2d_from_buffer cl_khr_depth_images cl_khr_create_command_queue cl_arm_core_id cl_arm_printf cl_arm_thread_limit_hint cl_arm_non_uniform_work_group_size cl_arm_import_memory cl_arm_shared_virtual_memory</span><br><span class="line">  Platform Extensions function suffix             ARM</span><br><span class="line"></span><br><span class="line">  Platform Name                                   ARM Platform</span><br><span class="line">Number of devices                                 1</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Device Name                                     &lt;printDeviceInfo:0: get CL_DEVICE_NAME size : error -6&gt;</span><br><span class="line">  Device Vendor                                   ARM</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Device Vendor ID                                &lt;printDeviceInfo:2: get CL_DEVICE_VENDOR_ID : error -6&gt;</span><br><span class="line">  Device Version                                  OpenCL 2.0 git.c8adbf9.ad00b04c1b60847de257177231dc1a53</span><br><span class="line">  Driver Version                                  2.0</span><br><span class="line">  Device OpenCL C Version                         OpenCL C 2.0 git.c8adbf9.ad00b04c1b60847de257177231dc1a53</span><br><span class="line">  Device Type                                     GPU</span><br><span class="line">  Device Profile                                  FULL_PROFILE</span><br><span class="line">  Device Available                                Yes</span><br><span class="line">  Compiler Available                              Yes</span><br><span class="line">  Linker Available                                Yes</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max compute units                               &lt;printDeviceInfo:17: get CL_DEVICE_MAX_COMPUTE_UNITS : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max clock frequency                             &lt;printDeviceInfo:21: get CL_DEVICE_MAX_CLOCK_FREQUENCY : error -6&gt;</span><br><span class="line">  Device Partition                                (core)</span><br><span class="line">    Max number of sub-devices                     0</span><br><span class="line">    Supported partition types                     None</span><br><span class="line">  Max work item dimensions                        3</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max work item sizes                             &lt;printDeviceInfo:36: get number of CL_DEVICE_MAX_WORK_ITEM_SIZES : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max work group size                             &lt;printDeviceInfo:37: get CL_DEVICE_MAX_WORK_GROUP_SIZE : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Preferred work group size multiple              &lt;getWGsizes:671: create context : error -6&gt;</span><br><span class="line">  Preferred / native vector sizes                 </span><br><span class="line">    char                                                16 / 4       </span><br><span class="line">    short                                                8 / 2       </span><br><span class="line">    int                                                  4 / 1       </span><br><span class="line">    long                                                 2 / 1       </span><br><span class="line">    half                                                 8 / 2        (cl_khr_fp16)</span><br><span class="line">    float                                                4 / 1       </span><br><span class="line">    double                                               0 / 0        (n/a)</span><br><span class="line">  Half-precision Floating-point support           (cl_khr_fp16)</span><br><span class="line">    Denormals                                     Yes</span><br><span class="line">    Infinity and NANs                             Yes</span><br><span class="line">    Round to nearest                              Yes</span><br><span class="line">    Round to zero                                 Yes</span><br><span class="line">    Round to infinity                             Yes</span><br><span class="line">    IEEE754-2008 fused multiply-add               Yes</span><br><span class="line">    Support is emulated in software               No</span><br><span class="line">  Single-precision Floating-point support         (core)</span><br><span class="line">    Denormals                                     Yes</span><br><span class="line">    Infinity and NANs                             Yes</span><br><span class="line">    Round to nearest                              Yes</span><br><span class="line">    Round to zero                                 Yes</span><br><span class="line">    Round to infinity                             Yes</span><br><span class="line">    IEEE754-2008 fused multiply-add               Yes</span><br><span class="line">    Support is emulated in software               No</span><br><span class="line">    Correctly-rounded divide and sqrt operations  No</span><br><span class="line">  Double-precision Floating-point support         (n/a)</span><br><span class="line">  Address bits                                    64, Little-Endian</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Global memory size                              &lt;printDeviceInfo:74: get CL_DEVICE_GLOBAL_MEM_SIZE : error -6&gt;</span><br><span class="line">  Error Correction support                        No</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max memory allocation                           &lt;printDeviceInfo:80: get CL_DEVICE_MAX_MEM_ALLOC_SIZE : error -6&gt;</span><br><span class="line">  Unified memory for Host and Device              Yes</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Shared Virtual Memory (SVM) capabilities        &lt;printDeviceInfo:83: get CL_DEVICE_SVM_CAPABILITIES : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Shared Virtual Memory (SVM) capabilities (ARM)  &lt;printDeviceInfo:84: get CL_DEVICE_SVM_CAPABILITIES_ARM : error -6&gt;</span><br><span class="line">  Minimum alignment for any data type             128 bytes</span><br><span class="line">  Alignment of base address                       1024 bits (128 bytes)</span><br><span class="line">  Preferred alignment for atomics                 </span><br><span class="line">    SVM                                           0 bytes</span><br><span class="line">    Global                                        0 bytes</span><br><span class="line">    Local                                         0 bytes</span><br><span class="line">  Max size for global variable                    65536 (64KiB)</span><br><span class="line">  Preferred total size of global vars             0</span><br><span class="line">  Global Memory cache type                        Read/Write</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Global Memory cache size                        &lt;printDeviceInfo:97: get CL_DEVICE_GLOBAL_MEM_CACHE_SIZE : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Global Memory cache line size                   &lt;printDeviceInfo:98: get CL_DEVICE_GLOBAL_MEM_CACHELINE_SIZE : error -6&gt;</span><br><span class="line">  Image support                                   Yes</span><br><span class="line">    Max number of samplers per kernel             16</span><br><span class="line">    Max size for 1D images from buffer            65536 pixels</span><br><span class="line">    Max 1D or 2D image array size                 2048 images</span><br><span class="line">    Base address alignment for 2D image buffers   32 bytes</span><br><span class="line">    Pitch alignment for 2D image buffers          64 pixels</span><br><span class="line">    Max 2D image size                             65536x65536 pixels</span><br><span class="line">    Max 3D image size                             65536x65536x65536 pixels</span><br><span class="line">    Max number of read image args                 128</span><br><span class="line">    Max number of write image args                64</span><br><span class="line">    Max number of read/write image args           64</span><br><span class="line">  Max number of pipe args                         16</span><br><span class="line">  Max active pipe reservations                    1</span><br><span class="line">  Max pipe packet size                            1024</span><br><span class="line">  Local memory type                               Global</span><br><span class="line">  Local memory size                               32768 (32KiB)</span><br><span class="line">  Max number of constant args                     8</span><br><span class="line">  Max constant buffer size                        65536 (64KiB)</span><br><span class="line">  Max size of kernel argument                     1024</span><br><span class="line">  Queue properties (on host)                      </span><br><span class="line">    Out-of-order execution                        Yes</span><br><span class="line">    Profiling                                     Yes</span><br><span class="line">  Queue properties (on device)                    </span><br><span class="line">    Out-of-order execution                        Yes</span><br><span class="line">    Profiling                                     Yes</span><br><span class="line">    Preferred size                                2097152 (2MiB)</span><br><span class="line">    Max size                                      16777216 (16MiB)</span><br><span class="line">  Max queues on device                            1</span><br><span class="line">  Max events on device                            1024</span><br><span class="line">  Prefer user sync for interop                    No</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Profiling timer resolution                      &lt;printDeviceInfo:145: get CL_DEVICE_PROFILING_TIMER_RESOLUTION : error -6&gt;</span><br><span class="line">  Execution capabilities                          </span><br><span class="line">    Run OpenCL kernels                            Yes</span><br><span class="line">    Run native kernels                            No</span><br><span class="line">  printf() buffer size                            1048576 (1024KiB)</span><br><span class="line">  Built-in kernels                                </span><br><span class="line">  Device Extensions                               cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_byte_addressable_store cl_khr_3d_image_writes cl_khr_int64_base_atomics cl_khr_int64_extended_atomics cl_khr_fp16 cl_khr_icd cl_khr_egl_image cl_khr_image2d_from_buffer cl_khr_depth_images cl_khr_create_command_queue cl_arm_core_id cl_arm_printf cl_arm_thread_limit_hint cl_arm_non_uniform_work_group_size cl_arm_import_memory cl_arm_shared_virtual_memory</span><br><span class="line"></span><br><span class="line">NULL platform behavior</span><br><span class="line">  clGetPlatformInfo(NULL, CL_PLATFORM_NAME, ...)  ARM Platform</span><br><span class="line">  clGetDeviceIDs(NULL, CL_DEVICE_TYPE_ALL, ...)   Success [ARM]</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  clCreateContext(NULL, ...) [default]            &lt;checkNullCtx:2694: create context with device from default platform : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_DEFAULT)  &lt;checkNullCtxFromType:2737: create context from type CL_DEVICE_TYPE_DEFAULT : error -6&gt;</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_CPU)  No devices found in platform</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_GPU)  &lt;checkNullCtxFromType:2737: create context from type CL_DEVICE_TYPE_GPU : error -6&gt;</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_ACCELERATOR)  No devices found in platform</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_CUSTOM)  No devices found in platform</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_ALL)  &lt;checkNullCtxFromType:2737: create context from type CL_DEVICE_TYPE_ALL : error -6&gt;</span><br><span class="line"></span><br><span class="line">ICD loader properties</span><br><span class="line">  ICD loader Name                                 OpenCL ICD Loader</span><br><span class="line">  ICD loader Vendor                               OCL Icd free software</span><br><span class="line">  ICD loader Version                              2.2.11</span><br><span class="line">  ICD loader Profile                              OpenCL 2.1</span><br><span class="line">khadas@Khadas:~$ cat /proc/partitions</span><br><span class="line">major minor  #blocks  name</span><br><span class="line"></span><br><span class="line">   1        0       4096 ram0</span><br><span class="line">   1        1       4096 ram1</span><br><span class="line">   1        2       4096 ram2</span><br><span class="line">   1        3       4096 ram3</span><br><span class="line">   1        4       4096 ram4</span><br><span class="line">   1        5       4096 ram5</span><br><span class="line">   1        6       4096 ram6</span><br><span class="line">   1        7       4096 ram7</span><br><span class="line">   1        8       4096 ram8</span><br><span class="line">   1        9       4096 ram9</span><br><span class="line">   1       10       4096 ram10</span><br><span class="line">   1       11       4096 ram11</span><br><span class="line">   1       12       4096 ram12</span><br><span class="line">   1       13       4096 ram13</span><br><span class="line">   1       14       4096 ram14</span><br><span class="line">   1       15       4096 ram15</span><br><span class="line"> 179        0   30535680 mmcblk0</span><br><span class="line"> 179        1       4096 mmcblk0p1</span><br><span class="line"> 179        2      65536 mmcblk0p2</span><br><span class="line"> 179        3       8192 mmcblk0p3</span><br><span class="line"> 179        4       8192 mmcblk0p4</span><br><span class="line"> 179        5      32768 mmcblk0p5</span><br><span class="line"> 179        6   30351360 mmcblk0p6</span><br><span class="line"> 179       96       4096 mmcblk0rpmb</span><br><span class="line"> 179       64       4096 mmcblk0boot1</span><br><span class="line"> 179       32       4096 mmcblk0boot0</span><br><span class="line"> 251        1     262144 zram1</span><br><span class="line"> 251        2     262144 zram2</span><br><span class="line"> 251        3     262144 zram3</span><br><span class="line"> 251        4     262144 zram4</span><br><span class="line">khadas@Khadas:~$ df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">udev            1.9G     0  1.9G   0% /dev</span><br><span class="line">tmpfs           371M   15M  357M   4% /run</span><br><span class="line">/dev/rootfs      29G  3.2G   25G  12% /</span><br><span class="line">tmpfs           1.9G     0  1.9G   0% /dev/shm</span><br><span class="line">tmpfs           5.0M  4.0K  5.0M   1% /run/lock</span><br><span class="line">tmpfs           1.9G     0  1.9G   0% /sys/fs/cgroup</span><br><span class="line">tmpfs           1.9G   24K  1.9G   1% /tmp</span><br><span class="line">tmpfs           371M  8.0K  371M   1% /run/user/1000</span><br></pre></td></tr></table></figure>

<h3 id="2-6-3-Package-Versions"><a href="#2-6-3-Package-Versions" class="headerlink" title="2.6.3 Package Versions"></a>2.6.3 Package Versions</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ gcc --version</span><br><span class="line">gcc (Ubuntu/Linaro 7.5.0-3ubuntu1~18.04) 7.5.0</span><br><span class="line">Copyright (C) 2017 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the source for copying conditions.  There is NO</span><br><span class="line">warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br><span class="line"></span><br><span class="line">khadas@Khadas:~$ python --version</span><br><span class="line">Python 3.6.9</span><br><span class="line">khadas@Khadas:~$ ls /usr/lib/libopencv*</span><br><span class="line">libopencv_calib3d.so        libopencv_dnn.so.3.4.3         libopencv_highgui.so.3.4      libopencv_ml.so               libopencv_photo.so.3.4.3      libopencv_superres.so.3.4    libopencv_videostab.so</span><br><span class="line">libopencv_calib3d.so.3.4    libopencv_features2d.so        libopencv_highgui.so.3.4.3    libopencv_ml.so.3.4           libopencv_shape.so            libopencv_superres.so.3.4.3  libopencv_videostab.so.3.4</span><br><span class="line">libopencv_calib3d.so.3.4.3  libopencv_features2d.so.3.4    libopencv_imgcodecs.so        libopencv_ml.so.3.4.3         libopencv_shape.so.3.4        libopencv_video.so           libopencv_videostab.so.3.4.3</span><br><span class="line">libopencv_core.so           libopencv_features2d.so.3.4.3  libopencv_imgcodecs.so.3.4    libopencv_objdetect.so        libopencv_shape.so.3.4.3      libopencv_video.so.3.4</span><br><span class="line">libopencv_core.so.3.4       libopencv_flann.so             libopencv_imgcodecs.so.3.4.3  libopencv_objdetect.so.3.4    libopencv_stitching.so        libopencv_video.so.3.4.3</span><br><span class="line">libopencv_core.so.3.4.3     libopencv_flann.so.3.4         libopencv_imgproc.so          libopencv_objdetect.so.3.4.3  libopencv_stitching.so.3.4    libopencv_videoio.so</span><br><span class="line">libopencv_dnn.so            libopencv_flann.so.3.4.3       libopencv_imgproc.so.3.4      libopencv_photo.so            libopencv_stitching.so.3.4.3  libopencv_videoio.so.3.4</span><br><span class="line">libopencv_dnn.so.3.4        libopencv_highgui.so           libopencv_imgproc.so.3.4.3    libopencv_photo.so.3.4        libopencv_superres.so         libopencv_videoio.so.3.4.3</span><br><span class="line">khadas@Khadas:~$ cat /usr/lib/pkgconfig/opencv.pc </span><br><span class="line"># Package Information for pkg-config</span><br><span class="line"></span><br><span class="line">prefix=/usr/local/nick</span><br><span class="line">exec_prefix=$&#123;prefix&#125;</span><br><span class="line">libdir=$&#123;exec_prefix&#125;/lib</span><br><span class="line">includedir_old=$&#123;prefix&#125;/include/opencv</span><br><span class="line">includedir_new=$&#123;prefix&#125;/include</span><br><span class="line"></span><br><span class="line">Name: OpenCV</span><br><span class="line">Description: Open Source Computer Vision Library</span><br><span class="line">Version: 3.4.3</span><br><span class="line">Libs: -L$&#123;exec_prefix&#125;/lib -lopencv_dnn -lopencv_ml -lopencv_objdetect -lopencv_shape -lopencv_stitching -lopencv_superres -lopencv_videostab -lopencv_calib3d -lopencv_features2d -lopencv_highgui -lopencv_videoio -lopencv_imgcodecs -lopencv_video -lopencv_photo -lopencv_imgproc -lopencv_flann -lopencv_core</span><br><span class="line">Libs.private: -ldl -lm -lpthread -lrt</span><br><span class="line">Cflags: -I$&#123;includedir_old&#125; -I$&#123;includedir_new&#125;</span><br><span class="line">khadas@Khadas:~$ sudo apt remove opencv3</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following package was automatically installed and is no longer required:</span><br><span class="line">  libllvm8</span><br><span class="line">Use &#x27;sudo apt autoremove&#x27; to remove it.</span><br><span class="line">The following packages will be REMOVED:</span><br><span class="line">  opencv3</span><br><span class="line">0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.</span><br><span class="line">After this operation, 1024 B disk space will be freed.</span><br><span class="line">Do you want to continue? [Y/n] Y</span><br><span class="line">(Reading database ... 118978 files and directories currently installed.)</span><br><span class="line">Removing opencv3 (3.4.3-2) ...</span><br><span class="line">khadas@Khadas:~$ ls /usr/lib/libopencv*</span><br><span class="line">ls: cannot access &#x27;/usr/lib/libopencv*&#x27;: No such file or directory</span><br><span class="line">khadas@Khadas:~$ cat /usr/lib/pkgconfig/opencv.pc</span><br><span class="line">cat: /usr/lib/pkgconfig/opencv.pc: No such file or directory</span><br></pre></td></tr></table></figure>

<p><span style="color:red"><strong>It looks current OpenCV on current **VIM3_Ubuntu-xfce-bionic_Linux-4.9_arm64_EMMC_V20191231.img</strong> is a kind of outdated.<strong></span> Let’s just remove package **opencv3</strong> and have <a target="_blank" rel="noopener" href="https://opencv.org/releases/">OpenCV-4.3.0</a> installed manually.</p>
<h1 id="3-Install-Manjaro-To-TF-SD-Card"><a href="#3-Install-Manjaro-To-TF-SD-Card" class="headerlink" title="3. Install Manjaro To TF/SD Card"></a>3. Install <a target="_blank" rel="noopener" href="https://manjaro.org/">Manjaro</a> To TF/SD Card</h1><p>As one of my dreamed operating systems, <a target="_blank" rel="noopener" href="https://manjaro.org/">Manjaro</a> has already provided 2 operating systems for <strong>Khadas</strong> users to try out.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://manjaro.org/get-manjaro/#khadas-vim-3-kde-plasma">KDE Plasma 20.04 for Khadas Vim 3</a></li>
<li><a target="_blank" rel="noopener" href="https://manjaro.org/get-manjaro/#khadas-vim-3-xfce">XFCE for Khadas Vim 3</a></li>
</ul>
<p>To flash either of the above systems onto a TF/SD card is simple. However, both are <a target="_blank" rel="noopener" href="https://forum.manjaro.org/t/manjaro-arm-20-04-released/133374/89"><span style="color:Red"><strong>ONLY for SD-USB, instead of EMMC</strong></span></a>. For instancen:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  Manjaro burn-tool -b VIM3 -i ./Manjaro-ARM-xfce-vim3-20.04.img </span><br><span class="line">Try to burn Amlogic image...</span><br><span class="line">ERROR: Try to burn to eMMC storage, but the image installation type is &#x27;SD-USB&#x27;, please use &#x27;EMMC&#x27; image!</span><br></pre></td></tr></table></figure>

<p>Before moving on, let’s cite the following word from <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/BootFromExtMedia.html">Boot Images from External Media</a>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARNING: Don’t use your PC as the USB-Host to supply the electrical power, otherwise it will fail to activate Multi-Boot!</span><br></pre></td></tr></table></figure>



<h1 id="4-NPU"><a href="#4-NPU" class="headerlink" title="4. NPU"></a>4. <a target="_blank" rel="noopener" href="https://www.khadas.com/npu-toolkit-vim3">NPU</a></h1><p>In this section, we’re testing the computing capability of <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a>‘s NPU.</p>
<p>Before everything starts, make sure you have the <strong>galcore</strong> module loaded, by using command <code>modinfo galcore</code>.</p>
<h2 id="4-1-Obtain-aml-npu-sdk-From-Khadas"><a href="#4-1-Obtain-aml-npu-sdk-From-Khadas" class="headerlink" title="4.1 Obtain aml_npu_sdk From Khadas"></a>4.1 Obtain aml_npu_sdk From Khadas</h2><p>Extract the obtained <strong>aml_npu_sdk.tgz</strong> on <span style="color:red"><strong>your local host</strong></span>. Bear in mind that it is <span style="color:red"><strong>your local host, BUT NOT <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a></strong></span>. Relative issues can be found at:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://forum.khadas.com/t/npu-with-opencv4/7779/6">Npu with OpenCV4?</a></li>
<li><a target="_blank" rel="noopener" href="https://forum.khadas.com/t/npu-documentation-and-tools/5214/58">NPU documentation and tools</a></li>
</ul>
<h2 id="4-2-Model-Conversion-on-Host"><a href="#4-2-Model-Conversion-on-Host" class="headerlink" title="4.2 Model Conversion on Host"></a>4.2 Model Conversion on Host</h2><p>Afterwards, the models applicable on <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a> can be obtained by following <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/HowToUseNpu.html#Model-Conversion">Model Conversion</a>. Anyway, on my laptop, I obtained the converted model as follows:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">➜  nbg_unify_inception_v3 ll</span><br><span class="line">total 28M</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  577 Apr 27 14:10 BUILD</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  28M Apr 27 14:10 inception_v3.nb</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  13K Apr 27 14:10 inceptionv3.vcxproj</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 5.8K Apr 27 14:10 main.c</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 2.0K Apr 27 14:10 makefile.linux</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  358 Apr 27 14:10 vnn_global.h</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 7.1K Apr 27 14:10 vnn_inceptionv3.c</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  985 Apr 27 14:10 vnn_inceptionv3.h</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 3.5K Apr 27 14:10 vnn_post_process.c</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  464 Apr 27 14:10 vnn_post_process.h</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  20K Apr 27 14:10 vnn_pre_process.c</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 1.3K Apr 27 14:10 vnn_pre_process.h</span><br></pre></td></tr></table></figure>

<p>Do I need to emphasize that I’m using <a target="_blank" rel="noopener" href="https://github.com/tensorflow/tensorflow/releases/tag/v2.1.0">Tensorflow 2.1.0</a> ? Anyway, check the following:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ python</span><br><span class="line">Python 3.6.9 (default, Apr 18 2020, 01:56:04) </span><br><span class="line">[GCC 8.4.0] on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; import tensorflow as tf</span></span><br><span class="line">2020-04-29 03:11:24.272348: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.2</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; tf.__version__</span></span><br><span class="line">&#x27;2.1.0&#x27;</span><br></pre></td></tr></table></figure>


<h2 id="4-3-Build-Case-Code"><a href="#4-3-Build-Case-Code" class="headerlink" title="4.3 Build Case Code"></a>4.3 Build Case Code</h2><h3 id="4-3-1-Cross-build-on-Host"><a href="#4-3-1-Cross-build-on-Host" class="headerlink" title="4.3.1 Cross-build on Host"></a>4.3.1 Cross-build on Host</h3><p>You can of course cross-build the case code on <span style="color:red"><strong>your local host, instead of <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a></strong></span> by referring to <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/HowToUseNpu.html#Compile-the-Case-Code">Compile the Case Code</a>. (The document seems <span style="color:red"><strong>NOT updated yet</strong></span>.) Instead of using 1 argument, we specify 2 auguments, one for <a target="_blank" rel="noopener" href="https://www.khadas.com/npu-toolkit-vim3">aml_npu_sdk</a>, the other for <a target="_blank" rel="noopener" href="https://github.com/khadas/fenix">Fenix</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">➜  nbg_unify_inception_v3 ./build_vx.sh ....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4 ....../fenix </span><br><span class="line">aarch64-linux-gnu-gcc -c  -DLINUX -Wall -D_REENTRANT -fno-strict-aliasing -mtune=cortex-a53 -march=armv8-a -O2 -DgcdENABLE_3D=1 -DgcdENABLE_2D=0 -DgcdENABLE_VG=0 -DgcdUSE_VX=1 -DUSE_VDK=1 -DgcdMOVG=0 -DEGL_API_FB -DgcdSTATIC_LINK=0 -DgcdFPGA_BUILD=0 -DGC_ENABLE_LOADTIME_OPT=1 -DgcdUSE_VXC_BINARY=0 -DgcdGC355_MEM_PRINT=0 -DgcdGC355_PROFILER=0 -DVIVANTE_PROFILER=1 -DVIVANTE_PROFILER_CONTEXT=1 -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include/HAL -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/sdk/inc  -I./ -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/utils -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/client  -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/ops -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/third-party/jpeg-9b -o bin_r/vnn_pre_process.o vnn_pre_process.c</span><br><span class="line">aarch64-linux-gnu-gcc -c  -DLINUX -Wall -D_REENTRANT -fno-strict-aliasing -mtune=cortex-a53 -march=armv8-a -O2 -DgcdENABLE_3D=1 -DgcdENABLE_2D=0 -DgcdENABLE_VG=0 -DgcdUSE_VX=1 -DUSE_VDK=1 -DgcdMOVG=0 -DEGL_API_FB -DgcdSTATIC_LINK=0 -DgcdFPGA_BUILD=0 -DGC_ENABLE_LOADTIME_OPT=1 -DgcdUSE_VXC_BINARY=0 -DgcdGC355_MEM_PRINT=0 -DgcdGC355_PROFILER=0 -DVIVANTE_PROFILER=1 -DVIVANTE_PROFILER_CONTEXT=1 -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include/HAL -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/sdk/inc  -I./ -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/utils -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/client  -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/ops -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/third-party/jpeg-9b -o bin_r/vnn_inceptionv3.o vnn_inceptionv3.c</span><br><span class="line">vnn_inceptionv3.c: In function ‘vnn_CreateInceptionV3’:</span><br><span class="line">vnn_inceptionv3.c:139:29: warning: unused variable ‘data’ [-Wunused-variable]</span><br><span class="line">     uint8_t *               data;</span><br><span class="line">                             ^~~~</span><br><span class="line">At top level:</span><br><span class="line">vnn_inceptionv3.c:91:17: warning: ‘load_data’ defined but not used [-Wunused-function]</span><br><span class="line"> static uint8_t* load_data</span><br><span class="line">                 ^~~~~~~~~</span><br><span class="line">aarch64-linux-gnu-gcc -c  -DLINUX -Wall -D_REENTRANT -fno-strict-aliasing -mtune=cortex-a53 -march=armv8-a -O2 -DgcdENABLE_3D=1 -DgcdENABLE_2D=0 -DgcdENABLE_VG=0 -DgcdUSE_VX=1 -DUSE_VDK=1 -DgcdMOVG=0 -DEGL_API_FB -DgcdSTATIC_LINK=0 -DgcdFPGA_BUILD=0 -DGC_ENABLE_LOADTIME_OPT=1 -DgcdUSE_VXC_BINARY=0 -DgcdGC355_MEM_PRINT=0 -DgcdGC355_PROFILER=0 -DVIVANTE_PROFILER=1 -DVIVANTE_PROFILER_CONTEXT=1 -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include/HAL -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/sdk/inc  -I./ -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/utils -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/client  -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/ops -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/third-party/jpeg-9b -o bin_r/main.o main.c</span><br><span class="line">aarch64-linux-gnu-gcc -c  -DLINUX -Wall -D_REENTRANT -fno-strict-aliasing -mtune=cortex-a53 -march=armv8-a -O2 -DgcdENABLE_3D=1 -DgcdENABLE_2D=0 -DgcdENABLE_VG=0 -DgcdUSE_VX=1 -DUSE_VDK=1 -DgcdMOVG=0 -DEGL_API_FB -DgcdSTATIC_LINK=0 -DgcdFPGA_BUILD=0 -DGC_ENABLE_LOADTIME_OPT=1 -DgcdUSE_VXC_BINARY=0 -DgcdGC355_MEM_PRINT=0 -DgcdGC355_PROFILER=0 -DVIVANTE_PROFILER=1 -DVIVANTE_PROFILER_CONTEXT=1 -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include/HAL -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/sdk/inc  -I./ -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/utils -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/client  -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/ops -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/third-party/jpeg-9b -o bin_r/vnn_post_process.o vnn_post_process.c</span><br><span class="line">aarch64-linux-gnu-gcc  -mtune=cortex-a53 -march=armv8-a -Wl,-rpath-link ....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/drivers  bin_r/vnn_pre_process.o  bin_r/vnn_inceptionv3.o  bin_r/main.o  bin_r/vnn_post_process.o -o bin_r/inceptionv3 -L....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/drivers -l OpenVX -l OpenVXU -l CLC -l VSC -lGAL ....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/lib/libjpeg.a -L....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/lib -l ovxlib -L....../fenix/build/toolchains/gcc-linaro-aarch64-linux-gnu/aarch64-linux-gnu/libc/lib -lm -lrt</span><br><span class="line">aarch64-linux-gnu-strip bin_r/inceptionv3</span><br><span class="line">make: Nothing to be done for &#x27;all&#x27;.</span><br><span class="line">➜  nbg_unify_inception_v3 ll bin_r </span><br><span class="line">total 164K</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 126K Apr 27 14:22 inceptionv3</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 6.3K Apr 27 14:22 main.o</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 3.9K Apr 27 14:22 vnn_inceptionv3.o</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 3.5K Apr 27 14:22 vnn_post_process.o</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  17K Apr 27 14:22 vnn_pre_process.o</span><br></pre></td></tr></table></figure>

<p><strong>inceptionv3</strong> now should be ready to use, but in my case, it’s <strong>NOT</strong> working properly. It’s probably because <a target="_blank" rel="noopener" href="https://github.com/khadas/fenix">Fenix</a> is <strong>NOT</strong> able to provide/represent the correct cross-compile toolchains for my installed <a target="_blank" rel="noopener" href="https://dl.khadas.com/Firmware/Krescue/images/VIMx.Ubuntu-xfce-bionic_Linux-4.9_arm64_V20191231.emmc.kresq">VIMx.Ubuntu-xfce-bionic_Linux-4.9_arm64_V20191231.emmc.kresq</a>. Anyway, this is <span style="color:red"><strong>NOT my preference</strong></span>.</p>
<h3 id="4-3-2-Directly-Build-on-Khadas-VIM3"><a href="#4-3-2-Directly-Build-on-Khadas-VIM3" class="headerlink" title="4.3.2 Directly Build on Khadas VIM3"></a>4.3.2 Directly Build on <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a></h3><p><strong>Let’s leave this for the next section <span style="color:red">4.4 Run Executable on <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a></span></strong>.</p>
<h2 id="4-4-Run-Executable-on-Khadas-VIM3"><a href="#4-4-Run-Executable-on-Khadas-VIM3" class="headerlink" title="4.4 Run Executable on Khadas VIM3"></a>4.4 Run Executable on <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a></h2><h3 id="4-4-1-Step-1-Install-aml-npu"><a href="#4-4-1-Step-1-Install-aml-npu" class="headerlink" title="4.4.1 Step 1: Install aml-npu"></a>4.4.1 Step 1: Install aml-npu</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ sudo apt install aml-npu</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following packages were automatically installed and are no longer required:</span><br><span class="line">  libllvm8 libssh-dev</span><br><span class="line">Use &#x27;sudo apt autoremove&#x27; to remove them.</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  aml-npu</span><br><span class="line">0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.</span><br><span class="line">Need to get 0 B/3318 kB of archives.</span><br><span class="line">After this operation, 1024 B of additional disk space will be used.</span><br><span class="line">Selecting previously unselected package aml-npu.</span><br><span class="line">(Reading database ... 136037 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../aml-npu_6.4.0.3_arm64.deb ...</span><br><span class="line">Unpacking aml-npu (6.4.0.3) ...</span><br><span class="line">Setting up aml-npu (6.4.0.3) ...</span><br></pre></td></tr></table></figure>

<p>And with command line <code>dpkg -L aml-npu</code>, you’ll see what’s been installed by <strong>aml-npu</strong>. However, due to its commercial license, I may <strong>NOT</strong> be allowed to show anything here in my blog.</p>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="github-emoji" alias="no_mouth" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f636.png?v8">&#x1f636;</span>
</div>



<h3 id="4-4-2-Step-2-Install-aml-npu-demo-and-Run-Demo"><a href="#4-4-2-Step-2-Install-aml-npu-demo-and-Run-Demo" class="headerlink" title="4.4.2 Step 2: Install aml-npu-demo and Run Demo"></a>4.4.2 Step 2: Install aml-npu-demo and Run Demo</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ sudo apt install aml-npu-demo</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following packages were automatically installed and are no longer required:</span><br><span class="line">  libllvm8 libssh-dev</span><br><span class="line">Use &#x27;sudo apt autoremove&#x27; to remove them.</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  aml-npu-demo</span><br><span class="line">0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.</span><br><span class="line">Need to get 0 B/19.7 MB of archives.</span><br><span class="line">After this operation, 1024 B of additional disk space will be used.</span><br><span class="line">Selecting previously unselected package aml-npu-demo.</span><br><span class="line">(Reading database ... 136098 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../aml-npu-demo_6.3.3.4_arm64.deb ...</span><br><span class="line">Unpacking aml-npu-demo (6.3.3.4) ...</span><br><span class="line">Setting up aml-npu-demo (6.3.3.4) ...</span><br></pre></td></tr></table></figure>

<p>Where is the sample to run? <code>/usr/share/npu/inceptionv3</code>.</p>
<p>Alright, let’s try it.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ cd /usr/share/npu/inceptionv3</span><br><span class="line">khadas@Khadas:/usr/share/npu/inceptionv3$ ./inceptionv3 ./inception_v3.nb ./dog_299x299.jpg </span><br><span class="line">D [setup_node:368]Setup node id[0] uid[4294967295] op[NBG]</span><br><span class="line">D [print_tensor:136]in(0) : id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">D [print_tensor:136]out(0): id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [optimize_node:312]Backward optimize neural network</span><br><span class="line">D [optimize_node:319]Forward optimize neural network</span><br><span class="line">I [compute_node:261]Create vx node</span><br><span class="line">Create Neural Network: 37ms or 37726us</span><br><span class="line">I [vsi_nn_PrintGraph:1421]Graph:</span><br><span class="line">I [vsi_nn_PrintGraph:1422]***************** Tensors ******************</span><br><span class="line">D [print_tensor:146]id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [print_tensor:146]id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">I [vsi_nn_PrintGraph:1431]***************** Nodes ******************</span><br><span class="line">I [vsi_nn_PrintNode:159](             NBG)node[0] [in: 1 ], [out: 0 ] [10587cb0]</span><br><span class="line">I [vsi_nn_PrintGraph:1440]******************************************</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 268203 data.</span><br><span class="line">Verify...</span><br><span class="line">Verify Graph: 1ms or 1811us</span><br><span class="line">Start run graph [1] times...</span><br><span class="line">Run the 1 time: 28ms or 28075us</span><br><span class="line">vxProcessGraph execution time:</span><br><span class="line">Total   28ms or 28091us</span><br><span class="line">Average 28.09ms or 28091.00us</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br><span class="line"> --- Top5 ---</span><br><span class="line">208: 0.819824</span><br><span class="line">209: 0.040344</span><br><span class="line">223: 0.009354</span><br><span class="line">185: 0.002956</span><br><span class="line">268: 0.002829</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br></pre></td></tr></table></figure>

<p>The program runs smoothly. </p>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="github-emoji" alias="smirk" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8">&#x1f60f;</span>
</div>



<h3 id="4-4-3-Step-3-Build-Your-Own-Executable-and-Run"><a href="#4-4-3-Step-3-Build-Your-Own-Executable-and-Run" class="headerlink" title="4.4.3 Step 3: Build Your Own Executable and Run"></a>4.4.3 Step 3: Build Your Own Executable and Run</h3><p>Clearly, <strong>ALL (really???)</strong> required development files have been provided by <strong>aml-npu</strong>, in such, we should be able to build this demo <strong>inceptionv3</strong> out by ourselves.</p>
<h4 id="4-4-3-1-You-STILL-Need-aml-npu-sdk-from-Khadas"><a href="#4-4-3-1-You-STILL-Need-aml-npu-sdk-from-Khadas" class="headerlink" title="4.4.3.1 You STILL Need aml_npu_sdk from Khadas"></a>4.4.3.1 You STILL Need aml_npu_sdk from <a target="_blank" rel="noopener" href="https://www.khadas.com/">Khadas</a></h4><p>Besides <strong>aml-npu</strong> from <strong>repo</strong>, in order to have the demo <strong>inceptionv3</strong> <span style="color:red"><strong>fully</strong></span> and successfully built, you still need <strong>aml_npu_sdk</strong> from <a target="_blank" rel="noopener" href="https://www.khadas.com/">Khadas</a>. In my case, you do need <strong>acuity-ovxlib-dev</strong>, and let’s do <code>export ACUITY_OVXLIB_DEV=path_to_acuity-ovxlib-dev</code>.</p>
<h4 id="4-4-3-2-Build-inceptionv3-from-Source"><a href="#4-4-3-2-Build-inceptionv3-from-Source" class="headerlink" title="4.4.3.2 Build inceptionv3 from Source"></a>4.4.3.2 Build inceptionv3 from Source</h4><p>We don’t need to copy the entire <strong>aml_npu_sdk</strong> onto <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a>, but <strong>ONLY demo/inceptionv3</strong>. Here in my case, <strong>ONLY demo/inceptionv3</strong> is copied under <code>~/Programs</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ ll</span><br><span class="line">total 28236</span><br><span class="line">drwxr-xr-x 3 khadas khadas     4096 Apr 29 09:23 ./</span><br><span class="line">drwxrwxr-x 5 khadas khadas     4096 Apr 29 09:22 ../</span><br><span class="line">-rwxr-xr-x 1 khadas khadas      577 Apr 29 09:22 BUILD*</span><br><span class="line">drwxr-xr-x 2 khadas khadas     4096 Apr 29 09:22 bin_demo/</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     9878 Apr 29 09:22 build_vx.sh*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas 28807168 Apr 29 09:23 inception_v3.nb*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    12691 Apr 29 09:22 inceptionv3.vcxproj*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     5869 Apr 29 09:23 main.c*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     2000 Apr 29 09:23 makefile.linux*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas      358 Apr 29 09:23 vnn_global.h*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     7191 Apr 29 09:23 vnn_inceptionv3.c*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas      985 Apr 29 09:23 vnn_inceptionv3.h*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     3566 Apr 29 09:23 vnn_post_process.c*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas      464 Apr 29 09:23 vnn_post_process.h*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    20385 Apr 29 09:23 vnn_pre_process.c*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     1294 Apr 29 09:23 vnn_pre_process.h*</span><br></pre></td></tr></table></figure>

<p>This is almost the same as folder <strong>nbg_unify_inception_v3</strong> shown in <a href="./#42-model-conversion">4.2 Model Conversion on Host</a>.</p>
<p>Now, <span style="color:red"><strong>The MOST important part is to modify makefile</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ cp makefile.linux makefile</span><br></pre></td></tr></table></figure>

<p>My <strong>makefile</strong> is modified as follows. </p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ cat makefile</span><br><span class="line">CFLAGS += -I$&#123;ACUITY_OVXLIB_DEV&#125;/include</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###############################################################################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Supply necessary libraries.</span></span><br><span class="line">LIBS += -L/lib -lOpenVX -lOpenVXU -lCLC -lVSC -lGAL -lovxlib -lm -ljpeg</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################################################################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Macros.</span></span><br><span class="line">PROGRAM = 1</span><br><span class="line">TARGET_NAME = inceptionv3</span><br><span class="line">CUR_SOURCE = $&#123;wildcard *.c&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################################################################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Objects.</span></span><br><span class="line">OBJECTS =  $&#123;patsubst %.c, $(OBJ_DIR)/%.o, $(CUR_SOURCE)&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> installation directory</span></span><br><span class="line">INSTALL_DIR := ./</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###############################################################################</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Include the common makefile.</span></span><br><span class="line"></span><br><span class="line">include $&#123;VIVANTE_SDK&#125;/common.target</span><br></pre></td></tr></table></figure>

<p>In fact, you still need to modify <strong>common.target</strong> a little bit accordingly. However, <span style="color:red"><strong>to disclose it</strong></span> in this blog is still <span style="color:red"><strong>NOT allowed</strong></span> I think. Anyway, after the modification, let’s <strong>make it</strong>. </p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ make</span><br><span class="line">cc -c -I/opt/acuity-ovxlib-dev/include -o bin_r/vnn_pre_process.o vnn_pre_process.c</span><br><span class="line">cc -c -I/opt/acuity-ovxlib-dev/include -o bin_r/vnn_inceptionv3.o vnn_inceptionv3.c</span><br><span class="line">cc -c -I/opt/acuity-ovxlib-dev/include -o bin_r/main.o main.c</span><br><span class="line">cc -c -I/opt/acuity-ovxlib-dev/include -o bin_r/vnn_post_process.o vnn_post_process.c</span><br><span class="line">cc -Wl,-rpath-link /opt/vivante_sdk/drivers  bin_r/vnn_pre_process.o  bin_r/vnn_inceptionv3.o  bin_r/main.o  bin_r/vnn_post_process.o -o bin_r/inceptionv3 -L/lib -lOpenVX -lOpenVXU -lCLC -lVSC -lGAL -lovxlib -lm -ljpeg -lrt</span><br><span class="line">bin_r/inceptionv3</span><br><span class="line">Usage: bin_r/inceptionv3 data_file inputs...</span><br><span class="line">/opt/vivante_sdk/common.target:64: recipe for target &#x27;bin_r/inceptionv3&#x27; failed</span><br><span class="line">make: *** [bin_r/inceptionv3] Error 255</span><br></pre></td></tr></table></figure>

<p><span style="color:red"><strong>Don’t worry</strong></span> about the error. It just failed to run the demo, but the executable <strong>inceptionv3</strong> has already been successfully built under folder <strong>bin_r</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ ll bin_r</span><br><span class="line">total 92</span><br><span class="line">drwxrwxr-x 2 khadas khadas  4096 Apr 29 09:46 ./</span><br><span class="line">drwxr-xr-x 4 khadas khadas  4096 Apr 29 09:46 ../</span><br><span class="line">-rwxrwxr-x 1 khadas khadas 34864 Apr 29 09:46 inceptionv3*</span><br><span class="line">-rw-rw-r-- 1 khadas khadas  6864 Apr 29 09:46 main.o</span><br><span class="line">-rw-rw-r-- 1 khadas khadas  5128 Apr 29 09:46 vnn_inceptionv3.o</span><br><span class="line">-rw-rw-r-- 1 khadas khadas  4456 Apr 29 09:46 vnn_post_process.o</span><br><span class="line">-rw-rw-r-- 1 khadas khadas 21976 Apr 29 09:46 vnn_pre_process.o</span><br></pre></td></tr></table></figure>


<h4 id="4-4-3-3-Run-inceptionv3"><a href="#4-4-3-3-Run-inceptionv3" class="headerlink" title="4.4.3.3 Run inceptionv3"></a>4.4.3.3 Run inceptionv3</h4><p>Let’s run <strong>inceptionv3</strong> under folder <strong>bin_demo</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ cd bin_demo/</span><br><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ll</span><br><span class="line">total 28384</span><br><span class="line">drwxr-xr-x 2 khadas khadas     4096 Apr 29 09:52 ./</span><br><span class="line">drwxr-xr-x 4 khadas khadas     4096 Apr 29 09:57 ../</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    15981 Apr 29 09:52 dog_299x299.jpg*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    88322 Apr 29 09:52 goldfish_299x299.jpg*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    10479 Apr 29 09:52 imagenet_slim_labels.txt*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas 28807168 Apr 29 09:52 inception_v3.nb*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas   129568 Apr 29 09:52 inceptionv3*</span><br></pre></td></tr></table></figure>

<p>This is the original status of <strong>ALL</strong> files under <strong>bin_demo</strong>. Let’s copy and paste our built <strong>bin_r/inceptionv3</strong> into this folder <strong>bin_demo</strong>. The size of the <strong>executable</strong> seems to be dramatically decreased.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ cp ../bin_r/inceptionv3 ./</span><br><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ll inceptionv3 </span><br><span class="line">-rwxr-xr-x 1 khadas khadas 34864 Apr 29 09:58 inceptionv3*</span><br></pre></td></tr></table></figure>

<p>Now, let’s copy the built <strong>inception_v3.nb</strong> <strong>from host to <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a></strong>. It seems <strong>inception_v3.nb</strong> built by <a target="_blank" rel="noopener" href="https://github.com/tensorflow/tensorflow/releases/tag/v2.1.0">Tensorflow 2.1.0</a> on host is of the same size as provided by <a target="_blank" rel="noopener" href="https://www.khadas.com/">Khadas</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ll inception_v3.nb </span><br><span class="line">-rwxr-xr-x 1 khadas khadas 28807168 Apr 29 10:06 inception_v3.nb*</span><br></pre></td></tr></table></figure>

<p><strong>Finally</strong>, let’s run the demo.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ./inceptionv3 ./inception_v3.nb ./dog_299x299.jpg </span><br><span class="line">D [setup_node:368]Setup node id[0] uid[4294967295] op[NBG]</span><br><span class="line">D [print_tensor:136]in(0) : id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">D [print_tensor:136]out(0): id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [optimize_node:312]Backward optimize neural network</span><br><span class="line">D [optimize_node:319]Forward optimize neural network</span><br><span class="line">I [compute_node:261]Create vx node</span><br><span class="line">Create Neural Network: 58ms or 58961us</span><br><span class="line">I [vsi_nn_PrintGraph:1421]Graph:</span><br><span class="line">I [vsi_nn_PrintGraph:1422]***************** Tensors ******************</span><br><span class="line">D [print_tensor:146]id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [print_tensor:146]id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">I [vsi_nn_PrintGraph:1431]***************** Nodes ******************</span><br><span class="line">I [vsi_nn_PrintNode:159](             NBG)node[0] [in: 1 ], [out: 0 ] [a56c0cb0]</span><br><span class="line">I [vsi_nn_PrintGraph:1440]******************************************</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 268203 data.</span><br><span class="line">Verify...</span><br><span class="line">Verify Graph: 1ms or 1959us</span><br><span class="line">Start run graph [1] times...</span><br><span class="line">Run the 1 time: 29ms or 29038us</span><br><span class="line">vxProcessGraph execution time:</span><br><span class="line">Total   29ms or 29063us</span><br><span class="line">Average 29.06ms or 29063.00us</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br><span class="line"> --- Top5 ---</span><br><span class="line">208: 0.828613</span><br><span class="line">209: 0.040771</span><br><span class="line">223: 0.008278</span><br><span class="line">268: 0.002737</span><br><span class="line">185: 0.002396</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br></pre></td></tr></table></figure>

<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ./inceptionv3 ./inception_v3.nb ./goldfish_299x299.jpg </span><br><span class="line">D [setup_node:368]Setup node id[0] uid[4294967295] op[NBG]</span><br><span class="line">D [print_tensor:136]in(0) : id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">D [print_tensor:136]out(0): id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [optimize_node:312]Backward optimize neural network</span><br><span class="line">D [optimize_node:319]Forward optimize neural network</span><br><span class="line">I [compute_node:261]Create vx node</span><br><span class="line">Create Neural Network: 64ms or 64785us</span><br><span class="line">I [vsi_nn_PrintGraph:1421]Graph:</span><br><span class="line">I [vsi_nn_PrintGraph:1422]***************** Tensors ******************</span><br><span class="line">D [print_tensor:146]id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [print_tensor:146]id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">I [vsi_nn_PrintGraph:1431]***************** Nodes ******************</span><br><span class="line">I [vsi_nn_PrintNode:159](             NBG)node[0] [in: 1 ], [out: 0 ] [6df47cb0]</span><br><span class="line">I [vsi_nn_PrintGraph:1440]******************************************</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 268203 data.</span><br><span class="line">Verify...</span><br><span class="line">Verify Graph: 2ms or 2951us</span><br><span class="line">Start run graph [1] times...</span><br><span class="line">Run the 1 time: 28ms or 28835us</span><br><span class="line">vxProcessGraph execution time:</span><br><span class="line">Total   28ms or 28873us</span><br><span class="line">Average 28.87ms or 28873.00us</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br><span class="line"> --- Top5 ---</span><br><span class="line">  2: 0.832520</span><br><span class="line">795: 0.008316</span><br><span class="line">974: 0.003586</span><br><span class="line">408: 0.002302</span><br><span class="line">393: 0.002016</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br></pre></td></tr></table></figure>

<p>By comparing to <strong>imagenet_slim_labels.txt</strong> under current folder, let’s take a look at our inference results. Only the <strong>FIRST</strong> inference is qualified because of the <strong>probability</strong>.</p>
<table>
<thead>
<tr>
<th align="left">Index</th>
<th align="left">Result for dog_299x299.jpg</th>
<th align="left">Result for goldfish_299x299.jpg</th>
</tr>
</thead>
<tbody><tr>
<td align="left">N/A</td>
<td align="left"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/dog_299x299.jpg" alt="dog_299x299.jpg"></td>
<td align="left"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/goldfish_299x299.jpg" alt="goldfish_299x299.jpg"></td>
</tr>
<tr>
<td align="left">1</td>
<td align="left">208: ‘curly-coated retriever’,</td>
<td align="left">2: ‘tench’,</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">209: ‘golden retriever’,</td>
<td align="left">795: ‘shower cap’,</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">223: ‘Irish water spaniel’,</td>
<td align="left">974: ‘cliff’,</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">268: ‘miniature poodle’,</td>
<td align="left">408: ‘altar’,</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">185: ‘Kerry blue terrier’,</td>
<td align="left">393: ‘coho’,</td>
</tr>
</tbody></table>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="github-emoji" alias="kissing_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f618.png?v8">&#x1f618;</span>
</div>



<h1 id="5-Dual-Boot-From-Manjaro"><a href="#5-Dual-Boot-From-Manjaro" class="headerlink" title="5. Dual Boot From Manjaro"></a>5. Dual Boot From <a target="_blank" rel="noopener" href="https://manjaro.org/">Manjaro</a></h1><h2 id="5-1-How-to-Boot-Images-from-External-Media"><a href="#5-1-How-to-Boot-Images-from-External-Media" class="headerlink" title="5.1 How to Boot Images from External Media?"></a>5.1 How to <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/BootFromExtMedia.html">Boot Images from External Media</a>?</h2><p>There are clearly 2 options: </p>
<ul>
<li>dual boot by selecting devices: <strong>EMMC</strong> or <strong>TF/SD Card</strong>. On <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/BootFromExtMedia.html">Boot Images from External Media</a>, it’s recommended as <code>Via Keys mode (Side-Buttons) - the easiest and fastest way</code>, which is the <strong>FIRST</strong> option on page <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim1/HowtoBootIntoUpgradeMode.html">How To Boot Into Upgrade Mode</a>. Therefore, by following 4 steps as follows(cited from <a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/HowtoBootIntoUpgradeMode.html">How To Boot Into Upgrade Mode</a>), we should be able to boot into SD-USB.<em>
1. Power on VIM3.
2. Long press the POWER key without releasing it.
3. Short press the ‘Reset’ key and release it.
4. Count for 2 to 3 seconds, then release the POWER key to enter into Upgrade Mode. You will see the sys-led turn ON when you’ve entered Upgrade Mode.
</em></li>
<li>multiple boot via <a target="_blank" rel="noopener" href="https://www.gnu.org/software/grub/">grub</a>: Reasonably speaking, 2 operating systems may even have a chance to be installed onto <strong>a SINGLE EMMC</strong></li>
</ul>
<h2 id="5-2-How-to-flash-Manjaro-XFCE-for-Khadas-Vim-3-from-TF-SD-card-to-EMMC"><a href="#5-2-How-to-flash-Manjaro-XFCE-for-Khadas-Vim-3-from-TF-SD-card-to-EMMC" class="headerlink" title="5.2 How to flash Manjaro XFCE for Khadas Vim 3 from TF/SD card to EMMC?"></a>5.2 How to flash <a target="_blank" rel="noopener" href="https://manjaro.org/get-manjaro/#khadas-vim-3-xfce">Manjaro XFCE for Khadas Vim 3</a> from <strong>TF/SD card</strong> to <strong>EMMC</strong>?</h2><p><strong>ONLY 1</strong> operating system is preferred. Why??? <a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3 board</a> comes with a large <strong>EMMC of size 32G</strong>.</p>
<p>After a <strong>VERY long</strong> time struggling, I would really like to emphasize <span style="color:red"><strong>the quality of Type C cable and power adaptor</strong></span> again. Try to buy things <strong>NOT from <a target="_blank" rel="noopener" href="http://taobao.com/">Taobao</a></strong>. </p>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="github-emoji" alias="cry" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8">&#x1f622;</span>
    <span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span>
</div>


<p>Finally, I had <a target="_blank" rel="noopener" href="https://manjaro.org/get-manjaro/#khadas-vim-3-xfce">Manjaro XFCE for Khadas Vim 3</a> on SD card booted and running, as follows:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/manjaro.png" alt="Manjaro"></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ssh khadas@192.168.1.95</span><br><span class="line">khadas@192.168.1.95&#x27;s password: </span><br><span class="line">Welcome to Manjaro-ARM</span><br><span class="line">~~Website: https://manjaro.org</span><br><span class="line">~~Forum:   https://forum.manjaro.org/c/manjaro-arm</span><br><span class="line">~~IRC:     #manjaro-arm on irc.freenode.net</span><br><span class="line">~~Matrix:  #manjaro-arm-public:matrix.org</span><br><span class="line">Last login: Sun Apr 19 03:24:46 2020 from 192.168.1.200</span><br><span class="line">[khadas@manjaro ~]$ ls</span><br><span class="line">Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos</span><br><span class="line">[khadas@manjaro ~]$ pwd</span><br><span class="line">/home/khadas</span><br><span class="line">[khadas@manjaro ~]$ uname -a</span><br><span class="line">Linux manjaro 5.6.0-0.6 #1 SMP PREEMPT Wed Apr 1 19:25:06 +03 2020 aarch64 GNU/Linux</span><br><span class="line">[khadas@manjaro ~]$ lsb_release -a</span><br><span class="line">LSB Version:	n/a</span><br><span class="line">Distributor ID:	Manjaro-ARM</span><br><span class="line">Description:	Manjaro ARM Linux</span><br><span class="line">Release:	20.04</span><br><span class="line">Codename:	n/a</span><br><span class="line">[khadas@manjaro ~]$ gcc --version</span><br><span class="line">-bash: gcc: command not found</span><br><span class="line">[khadas@manjaro ~]$ g++ --version</span><br><span class="line">-bash: g++: command not found</span><br><span class="line">[khadas@manjaro ~]$ sudo apt install gcc g++ automake autoconfig libtool</span><br><span class="line"></span><br><span class="line">We trust you have received the usual lecture from the local System</span><br><span class="line">Administrator. It usually boils down to these three things:</span><br><span class="line"></span><br><span class="line">    #1) Respect the privacy of others.</span><br><span class="line">    #2) Think before you type.</span><br><span class="line">    #3) With great power comes great responsibility.</span><br><span class="line"></span><br><span class="line">[sudo] password for khadas: </span><br><span class="line">sudo: apt: command not found</span><br><span class="line">[khadas@manjaro ~]$ pamac help</span><br><span class="line">Available actions:</span><br><span class="line">  pamac --version     </span><br><span class="line">  pamac --help,-h      [action]</span><br><span class="line">  pamac clean          [options]</span><br><span class="line">  pamac checkupdates   [options]</span><br><span class="line">  pamac update,upgrade [options]</span><br><span class="line">  pamac search         [options] &lt;package(s)&gt;</span><br><span class="line">  pamac info           [options] &lt;package(s)&gt;</span><br><span class="line">  pamac list           [options] &lt;package(s)&gt;</span><br><span class="line">  pamac install        [options] &lt;package(s)&gt;</span><br><span class="line">  pamac reinstall      [options] &lt;package(s)&gt;</span><br><span class="line">  pamac clone          [options] &lt;package(s)&gt;</span><br><span class="line">  pamac build          [options] [package(s)]</span><br><span class="line">  pamac remove         [options] [package(s)]</span><br><span class="line">[khadas@manjaro ~]$ </span><br></pre></td></tr></table></figure>

<p>It seems <a target="_blank" rel="noopener" href="https://www.archlinux.org/">Arch Linux</a> is totally different from <a target="_blank" rel="noopener" href="https://www.debian.org/">Debian</a>. What can I say? <span style="color:red"><strong>Go to bed</strong></span>.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Khadas-VIM3-Amlogic-A311D-Edge-Computing/" rel="tag"># Khadas VIM3, Amlogic A311D, Edge Computing</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/04/17/Cloud/fold-for-covid/" rel="prev" title="Fold for Covid">
                  <i class="fa fa-chevron-left"></i> Fold for Covid
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/04/20/OperatingSystems/CompilersTools/build-bazel-for-aarch64/" rel="next" title="Build Bazel For AARCH64">
                  Build Bazel For AARCH64 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nobody</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
