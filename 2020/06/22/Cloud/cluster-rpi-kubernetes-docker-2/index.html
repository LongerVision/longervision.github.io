<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"longervision.ca","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="1. Container VS. Virtual Machine Briefly refer to: Whatâ€™s the Diff: VMs vs Containers and Bare Metal Servers, Virtual Servers, and Containerization. 2. Docker VS. VMWare Briefly refer to: Docker vs VM">
<meta property="og:type" content="article">
<meta property="og:title" content="A Cluster of Raspberry Pis (2) - docker &amp; docker swarm">
<meta property="og:url" content="http://longervision.ca/2020/06/22/Cloud/cluster-rpi-kubernetes-docker-2/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="1. Container VS. Virtual Machine Briefly refer to: Whatâ€™s the Diff: VMs vs Containers and Bare Metal Servers, Virtual Servers, and Containerization. 2. Docker VS. VMWare Briefly refer to: Docker vs VM">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-06-22T20:22:19.000Z">
<meta property="article:modified_time" content="2024-09-30T07:53:40.047Z">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Kind, Kubernetes, Docker, Cluster, Supercomputer">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://longervision.ca/2020/06/22/Cloud/cluster-rpi-kubernetes-docker-2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://longervision.ca/2020/06/22/Cloud/cluster-rpi-kubernetes-docker-2/","path":"2020/06/22/Cloud/cluster-rpi-kubernetes-docker-2/","title":"A Cluster of Raspberry Pis (2) - docker & docker swarm"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>A Cluster of Raspberry Pis (2) - docker & docker swarm | Longer Vision Technology</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Longer Vision Technology</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Github Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#container-vs.-virtual-machine"><span class="nav-number">1.</span> <span class="nav-text">1. Container VS. Virtual
Machine</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#docker-vs.-vmware"><span class="nav-number">2.</span> <span class="nav-text">2. Docker VS. VMWare</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#install-docker-on-raspberry-pi"><span class="nav-number">3.</span> <span class="nav-text">3. Install Docker on Raspberry Pi</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#modify-bootconfig.txt"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 Modify &#x2F;boot&#x2F;config.txt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-installation"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 Docker Installation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#installation"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1 Installation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#uninstall"><span class="nav-number">3.2.2.</span> <span class="nav-text">3.2.2 Uninstall</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#enablestart-docker"><span class="nav-number">3.2.3.</span> <span class="nav-text">3.2.3 Enable&#x2F;Start Docker</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#test-arm-image-pulled-from-docker-hub"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 Test ARM Image Pulled
from Docker Hub</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#docker-pull-docker-run-docker-exec"><span class="nav-number">3.3.1.</span> <span class="nav-text">3.3.1 Docker Pull, Docker
Run, Docker Exec</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#pi01-docker-hub-arm64v8-is-not-stable-yet."><span class="nav-number">3.3.1.1.</span> <span class="nav-text">pi01 ~ Docker Hub arm64v8 is NOT stable
yet.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pi0x-docker-hub-arm32v6-is-tested."><span class="nav-number">3.3.1.2.</span> <span class="nav-text">pi0X ~ Docker Hub arm32v6 is tested.</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#docker-login-docker-commit"><span class="nav-number">3.3.2.</span> <span class="nav-text">3.3.2 Docker Login &amp; Docker
Commit</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-info"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 Docker
Info</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#docker-swarm"><span class="nav-number">4.</span> <span class="nav-text">4. Docker Swarm</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-swarm-initialization-on-master"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 Docker Swarm
Initialization on Master</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-swarm-initialization-on-worker"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 Docker Swarm
Initialization on Worker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#list-docker-nodes-in-leader"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 List Docker Nodes In
Leader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#swarmmode-test"><span class="nav-number">4.4.</span> <span class="nav-text">4.4 Swarmmode Test</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#scenario-1---replicate-service"><span class="nav-number">4.4.1.</span> <span class="nav-text">4.4.1 Scenario 1 - Replicate
Service</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#on-master"><span class="nav-number">4.4.1.1.</span> <span class="nav-text">4.4.1.1 On Master</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#on-worker"><span class="nav-number">4.4.1.2.</span> <span class="nav-text">4.4.1.2 On Worker</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scenario-2---replicate-webservice"><span class="nav-number">4.4.2.</span> <span class="nav-text">4.4.2 Scenario 2 - Replicate
Webservice</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#on-master-and-worker-pi02"><span class="nav-number">4.4.2.1.</span> <span class="nav-text">4.4.2.1 On Master and Worker
pi02</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#on-worker-pi03-and-worker-pi04"><span class="nav-number">4.4.2.2.</span> <span class="nav-text">4.4.2.2 On Worker pi03 and
Worker pi04</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#test-the-webservice"><span class="nav-number">4.4.2.3.</span> <span class="nav-text">4.4.2.3 Test The Webservice</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scenario-3---inter-container-communication"><span class="nav-number">4.4.3.</span> <span class="nav-text">4.4.3 Scenario 3 -
Inter-Container Communication</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-swarm-visualizer"><span class="nav-number">4.5.</span> <span class="nav-text">4.5 Docker Swarm
Visualizer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#on-leader"><span class="nav-number">4.5.1.</span> <span class="nav-text">4.5.1 On Leader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#on-remote-laptop"><span class="nav-number">4.5.2.</span> <span class="nav-text">4.5.2 On Remote Laptop</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">Longer Vision Technology Github Blog</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">145</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">135</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/06/22/Cloud/cluster-rpi-kubernetes-docker-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="A Cluster of Raspberry Pis (2) - docker & docker swarm | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          A Cluster of Raspberry Pis (2) - docker & docker swarm
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-06-22 13:22:19" itemprop="dateCreated datePublished" datetime="2020-06-22T13:22:19-07:00">2020-06-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 00:53:40" itemprop="dateModified" datetime="2024-09-30T00:53:40-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="container-vs.-virtual-machine">1. Container VS. Virtual
Machine</h1>
<p>Briefly refer to: <a
target="_blank" rel="noopener" href="https://www.backblaze.com/blog/vm-vs-containers/">Whatâ€™s the Diff:
VMs vs Containers</a> and <a
target="_blank" rel="noopener" href="https://www.trustradius.com/buyer-blog/bare-metal-servers-virtual-servers-and-containerization">Bare
Metal Servers, Virtual Servers, and Containerization</a>.</p>
<h1 id="docker-vs.-vmware">2. <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> VS. <a
target="_blank" rel="noopener" href="https://www.vmware.com/">VMWare</a></h1>
<p>Briefly refer to: <a
target="_blank" rel="noopener" href="https://www.upguard.com/articles/docker-vs.-vmware-how-do-they-stack-up">Docker
vs VMWare: How Do They Stack Up?</a>.</p>
<p>For me, I used to use <a target="_blank" rel="noopener" href="https://www.virtualbox.org/">Virtual
Box</a> (a virtual machine) a lot, but now start using <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> (the leading container).</p>
<h1 id="install-docker-on-raspberry-pi">3. Install <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> on <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a></h1>
<p>I heavily refer to Alex Ellis' blogs: - <a
target="_blank" rel="noopener" href="https://blog.alexellis.io/getting-started-with-docker-on-raspberry-pi/">Get
Started with Docker on Raspberry Pi</a> - <a
target="_blank" rel="noopener" href="https://blog.alexellis.io/hands-on-docker-raspberrypi/">Hands-on
Docker for Raspberry Pi</a> - <a
target="_blank" rel="noopener" href="https://blog.alexellis.io/5-things-docker-rpi/">5 things about
Docker on Raspberry Pi</a> - <a
target="_blank" rel="noopener" href="https://blog.alexellis.io/live-deep-dive-pi-swarm/">Live Deep Dive
- Docker Swarm Mode on the Pi</a></p>
<h2 id="modify-bootconfig.txt">3.1 Modify /boot/config.txt</h2>
<table style="text-align:center;">
<tr>
<td>
Hostname
</td>
<td>
/boot/config.txt
</td>
</tr>
<tr>
<td>
pi01
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ <span class="built_in">tail</span> -5 /boot/config.txt</span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=128</span><br><span class="line"><span class="comment">#arm_64bit=1</span></span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi02
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ <span class="built_in">tail</span> -5 /boot/config.txt</span><br><span class="line"></span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=64</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi03
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  pi@pi03:~ $ <span class="built_in">tail</span> -5 /boot/config.txt</span><br><span class="line"></span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=32</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi04
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ <span class="built_in">tail</span> -5 /boot/config.txt</span><br><span class="line"></span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=32</span><br></pre></td></tr></table></figure>
</td>
</tr>
</table>
<h2 id="docker-installation">3.2 <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> Installation</h2>
<h3 id="installation">3.2.1 Installation</h3>
<p>To install <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> is
<strong>ONLY</strong> one single command:</p>
<ul>
<li><code>curl -sSL https://get.docker.com | sh</code></li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ curl -sSL https://get.docker.com | sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Executing docker install script, commit: 26ff363bcf3b3f5a00498ac43694bf1c7d9ce16c</span></span><br><span class="line">Warning: the &quot;docker&quot; command appears to already exist on this system.</span><br><span class="line"></span><br><span class="line">If you already have Docker installed, this script can cause trouble, which is</span><br><span class="line">why we&#x27;re displaying this warning and provide the opportunity to cancel the</span><br><span class="line">installation.</span><br><span class="line"></span><br><span class="line">If you installed the current Docker package using this script and are using it</span><br><span class="line">again to update Docker, you can safely ignore this message.</span><br><span class="line"></span><br><span class="line">You may press Ctrl+C now to abort this script.</span><br><span class="line">+ sleep 20</span><br><span class="line">+ sudo -E sh -c apt-get update -qq &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c curl -fsSL &quot;https://download.docker.com/linux/raspbian/gpg&quot; | apt-key add -qq - &gt;/dev/null</span><br><span class="line">Warning: apt-key output should not be parsed (stdout is not a terminal)</span><br><span class="line">+ sudo -E sh -c echo &quot;deb [arch=armhf] https://download.docker.com/linux/raspbian buster stable&quot; &gt; /etc/apt/sources.list.d/docker.list</span><br><span class="line">+ sudo -E sh -c apt-get update -qq &gt;/dev/null</span><br><span class="line">+ [ -n  ]</span><br><span class="line">+ sudo -E sh -c apt-get install -y -qq --no-install-recommends docker-ce &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.11</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.13.10</span><br><span class="line"> Git commit:        42e35e6</span><br><span class="line"> Built:             Mon Jun  1 09:20:15 2020</span><br><span class="line"> OS/Arch:           linux/arm</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.11</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.13.10</span><br><span class="line">  Git commit:       42e35e6</span><br><span class="line">  Built:            Mon Jun  1 09:14:09 2020</span><br><span class="line">  OS/Arch:          linux/arm</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.2.13</span><br><span class="line">  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc10</span><br><span class="line">  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br><span class="line">If you would like to use Docker as a non-root user, you should now consider</span><br><span class="line">adding your user to the &quot;docker&quot; group with something like:</span><br><span class="line"></span><br><span class="line">  sudo usermod -aG docker pi</span><br><span class="line"></span><br><span class="line">Remember that you will have to log out and back in for this to take effect!</span><br><span class="line"></span><br><span class="line">WARNING: Adding a user to the &quot;docker&quot; group will grant the ability to run</span><br><span class="line">         containers which can be used to obtain root privileges on the</span><br><span class="line">         docker host.</span><br><span class="line">         Refer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface</span><br><span class="line">         for more information.</span><br></pre></td></tr></table></figure>
<p>Let's take a look at the <strong>IP</strong> info of
<strong>pi01</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ ip -c address</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    link/ether dc:a6:32:b1:22:36 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.253/24 brd 192.168.1.255 scope global dynamic noprefixroute eth0</span><br><span class="line">       valid_lft 47285sec preferred_lft 36485sec</span><br><span class="line">    inet6 2001:569:7fb8:c600:ca77:4302:3dbb:5b94/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7469sec preferred_lft 7169sec</span><br><span class="line">    inet6 fe80::bdf2:287f:4b0a:abc5/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether dc:a6:32:b1:22:37 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.252/24 brd 192.168.1.255 scope global dynamic noprefixroute wlan0</span><br><span class="line">       valid_lft 47282sec preferred_lft 36482sec</span><br><span class="line">    inet6 2001:569:7fb8:c600:d413:3cdf:1f56:7056/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7469sec preferred_lft 7169sec</span><br><span class="line">    inet6 fe80::7f55:cb40:9bf7:c903/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">4: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default </span><br><span class="line">    link/ether 02:42:ff:90:ba:f3 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>
<p>Clearly, there is <strong>one more</strong> interface
<strong>docker0</strong> added into <strong>pi01</strong>'s
<strong>IP</strong> info, but it's now <strong>DOWN</strong>.</p>
<h3 id="uninstall">3.2.2 Uninstall</h3>
<p>By the way, to uninstall <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>, 2 commands are required:</p>
<ul>
<li><code>sudo apt remove docker-ce</code></li>
<li><code>sudo ip link delete docker0</code></li>
</ul>
<p>Beside have <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> uninstalled,
you may have to manually remove the <strong>IP</strong> link to
<strong>docker0</strong>.</p>
<h3 id="enablestart-docker">3.2.3 Enable/Start <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></h3>
<p>Then, let's enable and start <strong>docker</strong> service, and add
user <strong>pi</strong> into group <strong>docker</strong> to be able
to run <strong>docker</strong> as user <strong>root</strong>.</p>
<ul>
<li><code>sudo systemctl enable docker</code></li>
<li><code>sudo systemctl start docker</code></li>
<li><code>sudo usermod -aG docker pi</code></li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ sudo systemctl enable docker</span><br><span class="line">Synchronizing state of docker.service with SysV service script with /lib/systemd/systemd-sysv-install.</span><br><span class="line">Executing: /lib/systemd/systemd-sysv-install enable docker</span><br><span class="line">pi@pi01:~ $ sudo systemctl start docker</span><br><span class="line">pi@pi01:~ $ sudo usermod -aG docker pi</span><br></pre></td></tr></table></figure>
<p>Afterwards, reboot all <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>.</p>
<p>Now, let's check the installed <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> version:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">pi@pi0X:~ $ docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.11</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.13.10</span><br><span class="line"> Git commit:        42e35e6</span><br><span class="line"> Built:             Mon Jun  1 09:20:15 2020</span><br><span class="line"> OS/Arch:           linux/arm</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.11</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.13.10</span><br><span class="line">  Git commit:       42e35e6</span><br><span class="line">  Built:            Mon Jun  1 09:14:09 2020</span><br><span class="line">  OS/Arch:          linux/arm</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.2.13</span><br><span class="line">  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc10</span><br><span class="line">  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=1, or 2, or 3, or 4</strong>.</p>
<h2 id="test-arm-image-pulled-from-docker-hub">3.3 Test ARM Image Pulled
from <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a></h2>
<h3 id="docker-pull-docker-run-docker-exec">3.3.1 Docker Pull, Docker
Run, Docker Exec</h3>
<p>Due to respective architectures of these 4 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s, I tried to use <a
target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> image <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/alpine/">arm64v8/alpine</a> for
<strong>pi01</strong>, and <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker
Hub</a> image <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm32v6/alpine/">arm32v6/alpine</a> for
<strong>pi02</strong>, <strong>pi03</strong> and <strong>pi04</strong>.
However, it finally turns out that <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a> is <strong>NOT</strong> quite stable yet.</p>
<h4 id="pi01-docker-hub-arm64v8-is-not-stable-yet.">pi01 ~ <a
target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> <a
target="_blank" rel="noopener" href="https://hub.docker.com/u/arm64v8/">arm64v8</a> is NOT stable
yet.</h4>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker pull arm64v8/alpine</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from arm64v8/alpine</span><br><span class="line">b538f80385f9: Pull complete </span><br><span class="line">Digest: sha256:3b3f647d2d99cac772ed64c4791e5d9b750dd5fe0b25db653ec4976f7b72837c</span><br><span class="line">Status: Downloaded newer image for arm64v8/alpine:latest</span><br><span class="line">docker.io/arm64v8/alpine:latest</span><br><span class="line">pi@pi01:~ $ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm64v8/alpine      latest              62ee0e9f8440        11 days ago         5.32MB</span><br><span class="line">pi@pi01:~ $ docker run -it -d arm64v8/alpine</span><br><span class="line">4deed42b3a29231bde40176c5c385d9f04bbf5188383b2ede4a09383360d69bb</span><br><span class="line">pi@pi01:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES</span><br><span class="line">4deed42b3a29        arm64v8/alpine      &quot;/bin/sh&quot;           49 seconds ago      Restarting (159) 8 seconds ago                       inspiring_mendeleev</span><br><span class="line">pi@pi01:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">4deed42b3a29        arm64v8/alpine      &quot;/bin/sh&quot;           51 seconds ago      Up 2 seconds                            inspiring_mendeleev</span><br><span class="line">pi@pi02:~ $ </span><br></pre></td></tr></table></figure>
<p>It looks <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> images from
repository <a target="_blank" rel="noopener" href="https://hub.docker.com/u/arm64v8/">arm64v8</a> are
<strong>NOT</strong> able to stably work on my <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry
Pi 4 Model B Rev 1.4 8GB</a> with <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a>. To <strong>further</strong> demonstrate
this, I also tested some other images from repository <a
target="_blank" rel="noopener" href="https://hub.docker.com/u/arm64v8/">arm64v8</a> and even deprecated
<a target="_blank" rel="noopener" href="https://hub.docker.com/u/aarch64/">aarch64</a>, as follows:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">alpine              latest              3ddac682c5b6        12 days ago         4.77MB</span><br><span class="line">arm64v8/alpine      latest              62ee0e9f8440        12 days ago         5.32MB</span><br><span class="line">arm64v8/ubuntu      latest              dbc66a3d7b82        6 weeks ago         66.7MB</span><br><span class="line">aarch64/ubuntu      latest              5227400055a2        3 years ago         122MB</span><br><span class="line">pi@pi01:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">e06eaba12e82        alpine              &quot;/bin/sh&quot;           2 hours ago         Up 2 hours                                     relaxed_cerf</span><br><span class="line">ba8d858d36f0        aarch64/ubuntu      &quot;/bin/bash&quot;         2 hours ago         Exited (159) 2 hours ago                       nifty_sutherland</span><br><span class="line">08346701599a        arm64v8/ubuntu      &quot;/bin/bash&quot;         2 hours ago         Exited (159) 2 hours ago                       jolly_fermi</span><br><span class="line">ccda6c95f81d        arm64v8/alpine      &quot;/bin/sh&quot;           4 hours ago         Exited (159) 4 hours ago                       nifty_gates</span><br></pre></td></tr></table></figure>
None of the three images <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/alpine/">arm64v8/alpine</a>, <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/ubuntu/">arm64v8/ubuntu</a>, <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/aarch64/ubuntu/">aarch64/ubuntu</a> can
<strong>UP</strong> for 3 seconds.
<div style="text-align: center; font-size: 3em;">
<pre><code>ðŸ˜Š
ðŸ˜”</code></pre>
</div>
<p>Well, I can pull <strong>alpine</strong> and keep it
<strong>UP</strong> instead of <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/alpine/">arm64v8/alpine</a>
though.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker pull alpine</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/alpine</span><br><span class="line">b4b72e716706: Pull complete </span><br><span class="line">Digest: sha256:185518070891758909c9f839cf4ca393ee977ac378609f700f60a771a2dfe321</span><br><span class="line">Status: Downloaded newer image for alpine:latest</span><br><span class="line">docker.io/library/alpine:latest</span><br><span class="line">pi@pi01:~ $ docker run -it -d alpine</span><br><span class="line">e06eaba12e82d9266aa3dacd8eb0484e385f810e08806f0bec282bc3b5122a85</span><br><span class="line">pi@pi01:~ $ docker ps </span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">e06eaba12e82        alpine              &quot;/bin/sh&quot;           10 seconds ago      Up 2 seconds                            relaxed_cerf</span><br><span class="line">pi@pi01:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">e06eaba12e82        alpine              &quot;/bin/sh&quot;           12 seconds ago      Up 5 seconds                                      relaxed_cerf</span><br><span class="line">ba8d858d36f0        aarch64/ubuntu      &quot;/bin/bash&quot;         3 minutes ago       Exited (159) 2 minutes ago                        nifty_sutherland</span><br><span class="line">08346701599a        arm64v8/ubuntu      &quot;/bin/bash&quot;         28 minutes ago      Exited (159) 28 minutes ago                       jolly_fermi</span><br><span class="line">ccda6c95f81d        arm64v8/alpine      &quot;/bin/sh&quot;           2 hours ago         Exited (159) 2 hours ago                          nifty_gates</span><br><span class="line">pi@pi01:~ $ docker exec -it e06eaba12e82 /bin/sh</span><br><span class="line">/ # cat /etc/os-release</span><br><span class="line">NAME=&quot;Alpine Linux&quot;</span><br><span class="line">ID=alpine</span><br><span class="line">VERSION_ID=3.12.0</span><br><span class="line">PRETTY_NAME=&quot;Alpine Linux v3.12&quot;</span><br><span class="line">HOME_URL=&quot;https://alpinelinux.org/&quot;</span><br><span class="line">BUG_REPORT_URL=&quot;https://bugs.alpinelinux.org/&quot;</span><br><span class="line">/ # uname -a</span><br><span class="line">Linux e06eaba12e82 5.4.44-v8+ #1320 SMP PREEMPT Wed Jun 3 16:20:05 BST 2020 aarch64 Linux</span><br><span class="line">/ # exit</span><br><span class="line">pi@pi01:~ $ </span><br></pre></td></tr></table></figure>
<p>However, due to a bunch of the other instabilities, I
<strong>downgrade</strong> the system from <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a> to <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry
Pi OS (32-bit) with desktop 2020-05-27</a>. <span style="color:red">And
it's interesting that image from <strong>arm32v6/alpine</strong> is
exactly the same as image directly from <strong>alpine</strong>, namely
image ID <strong>3ddac682c5b6</strong></span>.</p>
<p>By the way, please refer to my posts: - <a
target="_blank" rel="noopener" href="https://github.com/alpinelinux/docker-alpine/issues/92">https://github.com/alpinelinux/docker-alpine/issues/92</a>,
- <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677005">https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677005</a>
- <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677106">https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677106</a></p>
<h4 id="pi0x-docker-hub-arm32v6-is-tested.">pi0X ~ <a
target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> <a
target="_blank" rel="noopener" href="https://hub.docker.com/u/arm32v6/">arm32v6</a> is tested.</h4>
<p>Let's take <strong>pi02</strong> as an example.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker pull arm32v6/alpine</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from arm32v6/alpine</span><br><span class="line">Digest: sha256:71465c7d45a086a2181ce33bb47f7eaef5c233eace65704da0c5e5454a79cee5</span><br><span class="line">Status: Image is up to date for arm32v6/alpine:latest</span><br><span class="line">docker.io/arm32v6/alpine:latest</span><br><span class="line">pi@pi02:~ $ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm32v6/alpine      latest              3ddac682c5b6        3 weeks ago         4.77MB</span><br><span class="line">pi@pi02:~ $ docker run -it -d arm32v6/alpine</span><br><span class="line">66b813b4c07426294e01f3c7b2ff03f6608f6be10f8f7bf9fde581f605e6a5bc</span><br><span class="line">pi@pi02:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">66b813b4c074        arm32v6/alpine      &quot;/bin/sh&quot;           10 seconds ago      Up 5 seconds                            intelligent_gates</span><br><span class="line">pi@pi02:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">66b813b4c074        arm32v6/alpine      &quot;/bin/sh&quot;           12 seconds ago      Up 8 seconds                            intelligent_gates</span><br><span class="line">pi@pi02:~ $ docker exec -it 66b813b4c074 /bin/sh</span><br><span class="line">/ # cat /etc/os-release</span><br><span class="line">NAME=&quot;Alpine Linux&quot;</span><br><span class="line">ID=alpine</span><br><span class="line">VERSION_ID=3.12.0</span><br><span class="line">PRETTY_NAME=&quot;Alpine Linux v3.12&quot;</span><br><span class="line">HOME_URL=&quot;https://alpinelinux.org/&quot;</span><br><span class="line">BUG_REPORT_URL=&quot;https://bugs.alpinelinux.org/&quot;</span><br><span class="line">/ # uname -a</span><br><span class="line">Linux 66b813b4c074 4.19.118-v7l+ #1311 SMP Mon Apr 27 14:26:42 BST 2020 armv7l Linux</span><br><span class="line">/ # exit</span><br><span class="line">pi@pi02:~ $ </span><br></pre></td></tr></table></figure>
<p>, where <strong>X=1, or 2, or 3, or 4</strong>.</p>
<p>Now, we can see <strong>docker0</strong> is <strong>UP</strong>. And
a wired connection is running as the additional interface
<strong>vethc6e4f97</strong>, which is actually <strong><span
style="color: red">just eth0 running in docker image <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm32v6/alpine/">arm32v6/alpine</a></span></strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ ip -c address</span><br><span class="line">...</span><br><span class="line">4: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    link/ether 02:42:0e:a2:30:0d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:eff:fea2:300d/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">6: vethc6e4f97@if5: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default </span><br><span class="line">    link/ether 3e:cf:32:5f:92:e8 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 169.254.108.166/16 brd 169.254.255.255 scope global noprefixroute vethc6e4f97</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::f8c1:6d4c:aa67:11af/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>
<h3 id="docker-login-docker-commit">3.3.2 Docker Login &amp; Docker
Commit</h3>
<p>In order to avoid issues about <strong>registry</strong>, we can run
<strong>docker login</strong>, so that a configuration file
<code>/home/pi/.docker/config.json</code> will also be automatically
generated.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker login</span><br><span class="line">Login with your Docker ID to push and pull images from Docker Hub. If you don&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.</span><br><span class="line">Username: jiapei100</span><br><span class="line">Password: </span><br><span class="line">WARNING! Your password will be stored unencrypted in /home/pi/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br><span class="line">pi@pi01:~ $ docker commit 561025c3974e</span><br><span class="line">sha256:4fb0183bf76ad8dd0e3620e90b162a58c7bebb135e0081454cee4b2ae40d6881</span><br></pre></td></tr></table></figure>
<h2 id="docker-info">3.4 <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>
Info</h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker info</span><br><span class="line">Client:</span><br><span class="line"> Debug Mode: false</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Containers: 1</span><br><span class="line">  Running: 1</span><br><span class="line">  Paused: 0</span><br><span class="line">  Stopped: 0</span><br><span class="line"> Images: 1</span><br><span class="line"> Server Version: 19.03.11</span><br><span class="line"> Storage Driver: overlay2</span><br><span class="line">  Backing Filesystem: extfs</span><br><span class="line">  Supports d_type: true</span><br><span class="line">  Native Overlay Diff: true</span><br><span class="line"> Logging Driver: json-file</span><br><span class="line"> Cgroup Driver: cgroupfs</span><br><span class="line"> Plugins:</span><br><span class="line">  Volume: local</span><br><span class="line">  Network: bridge host ipvlan macvlan null overlay</span><br><span class="line">  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog</span><br><span class="line"> Swarm: inactive</span><br><span class="line"> Runtimes: runc</span><br><span class="line"> Default Runtime: runc</span><br><span class="line"> Init Binary: docker-init</span><br><span class="line"> containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> init version: fec3683</span><br><span class="line"> Security Options:</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: default</span><br><span class="line"> Kernel Version: 4.19.118-v7l+</span><br><span class="line"> Operating System: Raspbian GNU/Linux 10 (buster)</span><br><span class="line"> OSType: linux</span><br><span class="line"> Architecture: armv7l</span><br><span class="line"> CPUs: 4</span><br><span class="line"> Total Memory: 7.729GiB</span><br><span class="line"> Name: pi01</span><br><span class="line"> ID: ONE2:WOIF:K6MY:KO77:2NMA:F3OC:S3UH:3ZV7:GTFE:APXH:DST2:RX2C</span><br><span class="line"> Docker Root Dir: /var/lib/docker</span><br><span class="line"> Debug Mode: false</span><br><span class="line"> Username: jiapei100</span><br><span class="line"> Registry: https://index.docker.io/v1/</span><br><span class="line"> Labels:</span><br><span class="line"> Experimental: false</span><br><span class="line"> Insecure Registries:</span><br><span class="line">  127.0.0.0/8</span><br><span class="line"> Live Restore Enabled: false</span><br><span class="line"></span><br><span class="line">WARNING: No swap limit support</span><br><span class="line">WARNING: No cpu cfs quota support</span><br><span class="line">WARNING: No cpu cfs period support</span><br></pre></td></tr></table></figure>
<h1 id="docker-swarm">4. <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a></h1>
<p>From the above command <code>docker info</code>, you can see clearly
that <code>Swarm: inactive</code>. <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> now has a <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm Mode</a>. Now,
let's begin playing with <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>.</p>
<h2 id="docker-swarm-initialization-on-master">4.1 <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>
Initialization on Master</h2>
<p>If you've got both <strong>Wired</strong> and <strong>Wifi</strong>
enabled at the same time, without specifying with connection you are
going to use for initializing your <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a>, you'll
meet the following <strong>ERROR</strong> message.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker swarm init</span><br><span class="line">Error response from daemon: could not choose an IP address to advertise since this system has multiple addresses on different interfaces (192.168.1.253 on eth0 and 192.168.1.252 on wlan0) - specify one with --advertise-addr</span><br></pre></td></tr></table></figure>
<p>By specifying the argument <code>--advertise-addr</code>, <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a> can be
successfully initialized as:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker swarm init --advertise-addr 192.168.1.253</span><br><span class="line">Swarm initialized: current node (q7w8gwf9z6keb86rltvqx0f7z) is now a manager.</span><br><span class="line"></span><br><span class="line">To add a worker to this swarm, run the following command:</span><br><span class="line"></span><br><span class="line">    docker swarm join --token SWMTKN-1-5ivkmmwk8kfw92gs0emkmgzg78d4cwitqmi827ghikpajzvrjt-6i326au3t4ka3g1wa74n4rhe4 192.168.1.253:2377</span><br><span class="line"></span><br><span class="line">To add a manager to this swarm, run &#x27;docker swarm join-token manager&#x27; and follow the instructions.</span><br></pre></td></tr></table></figure>
<h2 id="docker-swarm-initialization-on-worker">4.2 <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>
Initialization on Worker</h2>
<p>On each <strong>worker</strong>, just run the following command to
join <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a>
created by <strong>master</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi0X:~ $ docker swarm join --token SWMTKN-1-5ivkmmwk8kfw92gs0emkmgzg78d4cwitqmi827ghikpajzvrjt-6i326au3t4ka3g1wa74n4rhe4 192.168.1.253:2377</span><br><span class="line">This node joined a swarm as a worker.</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=2, or 3, or 4</strong>.</p>
<h2 id="list-docker-nodes-in-leader">4.3 List Docker Nodes In
Leader</h2>
<p>Come back to <strong>pi01</strong>, namely, <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a>
<strong>master</strong>, also the <strong>leader</strong>, and list all
nodes:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker node ls</span><br><span class="line">ID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS      ENGINE VERSION</span><br><span class="line">q7w8gwf9z6keb86rltvqx0f7z *   pi01                Ready               Active              Leader              19.03.11</span><br><span class="line">sdiwqlawhfjobfsymmp38xivn     pi02                Ready               Active                                  19.03.11</span><br><span class="line">97h11ixu7nvce4p64td2o5one     pi03                Ready               Active                                  19.03.11</span><br><span class="line">tzrqp2fcj4yht20j84r83s5ps     pi04                Ready               Active                                  19.03.11</span><br></pre></td></tr></table></figure>
<p>In our test, we <strong>ONLY</strong> designate a single
<strong>leader</strong>. You can of course have the option to designate
multiple <strong>leader</strong>s by using command
<code>docker node promote</code>.</p>
<h2 id="swarmmode-test">4.4 Swarmmode Test</h2>
<p>Here, we test all Alex Ellis' <a
target="_blank" rel="noopener" href="https://github.com/alexellis/swarmmode-tests/tree/master/arm">Swarmmode
tests on ARM</a>.</p>
<h3 id="scenario-1---replicate-service">4.4.1 Scenario 1 - Replicate
Service</h3>
<p>Create the service on <strong>leader</strong> with 4 replicas on both
the <strong>master</strong> and 3 <strong>worker</strong>s.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --name ping1 --replicas=4 alexellis2/arm-pingcurl ping google.com</span><br><span class="line">63n31w2jyr6uuqg2670r985h6</span><br><span class="line">overall progress: 4 out of 4 tasks </span><br><span class="line">1/4: running   [==================================================&gt;] </span><br><span class="line">2/4: running   [==================================================&gt;] </span><br><span class="line">3/4: running   [==================================================&gt;] </span><br><span class="line">4/4: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<p>Then, we can list the created docker service on the
<strong>leader</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                            PORTS</span><br><span class="line">63n31w2jyr6u        ping1               replicated          4/4                 alexellis2/arm-pingcurl:latest   </span><br><span class="line">pi@pi01:~ $ docker service ps ping1</span><br><span class="line">ID                  NAME                IMAGE                            NODE                DESIRED STATE       CURRENT STATE         ERROR               PORTS</span><br><span class="line">xqjxus8ayetx        ping1.1             alexellis2/arm-pingcurl:latest   pi02                Running             Running 2 hours ago                       </span><br><span class="line">9lemwgls6hp6        ping1.2             alexellis2/arm-pingcurl:latest   pi03                Running             Running 2 hours ago                       </span><br><span class="line">b2y2muif9h2x        ping1.3             alexellis2/arm-pingcurl:latest   pi04                Running             Running 2 hours ago                       </span><br><span class="line">2uqbcrn0j7et        ping1.4             alexellis2/arm-pingcurl:latest   pi01                Running             Running 2 hours ago      </span><br></pre></td></tr></table></figure>
<h4 id="on-master">4.4.1.1 On Master</h4>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">7d72a046d2f4        alexellis2/arm-pingcurl:latest      &quot;ping google.com&quot;   41 minutes ago      Up 41 minutes                           ping1.4.2uqbcrn0j7ettnqndxfq6s44b</span><br><span class="line">71ef4e0107a7        arm32v6/alpine                      &quot;/bin/sh&quot;           9 hours ago         Up 9 hours                              great_saha</span><br><span class="line">pi@pi01:~ $ docker logs 7d72a046d2f4 | tail -n 10</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42461 ttl=119 time=5.98 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42462 ttl=119 time=5.53 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42463 ttl=119 time=5.69 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42464 ttl=119 time=5.98 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42465 ttl=119 time=5.97 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42466 ttl=119 time=5.65 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42467 ttl=119 time=6.22 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42468 ttl=119 time=6.33 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42469 ttl=119 time=9.93 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42470 ttl=119 time=5.82 ms</span><br></pre></td></tr></table></figure>
<h4 id="on-worker">4.4.1.2 On Worker</h4>
<p>This time, let's take <strong>pi04</strong> as our example:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~/Downloads $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">2520e1ea0ea8        alexellis2/arm-pingcurl:latest   &quot;ping google.com&quot;   44 minutes ago      Up 44 minutes                           ping1.3.b2y2muif9h2xa847rlibcv5nz</span><br><span class="line">746386fce983        arm32v6/alpine                   &quot;/bin/sh&quot;           11 days ago         Up 9 hours                              serene_chebyshev</span><br><span class="line">pi@pi04:~ $ docker logs 2520e1ea0ea8 | tail -n 10</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42491 ttl=119 time=7.22 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42492 ttl=119 time=9.10 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42493 ttl=119 time=6.97 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42494 ttl=119 time=6.76 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42495 ttl=119 time=6.74 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42496 ttl=119 time=7.03 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42497 ttl=119 time=7.06 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42498 ttl=119 time=6.17 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42499 ttl=119 time=6.74 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42500 ttl=119 time=6.23 ms</span><br></pre></td></tr></table></figure>
<h3 id="scenario-2---replicate-webservice">4.4.2 Scenario 2 - Replicate
Webservice</h3>
<p>In this example, we will create 2 replicas <strong>only</strong> for
fun.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --name hello1 --publish 3000:3000 --replicas=2 alexellis2/arm-alpinehello</span><br><span class="line">pe19as7evzmgi5qiq36z2pk63</span><br><span class="line">overall progress: 2 out of 2 tasks </span><br><span class="line">1/2: running   [==================================================&gt;] </span><br><span class="line">2/2: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<p>Again, let's list our created services.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                               PORTS</span><br><span class="line">pe19as7evzmg        hello1              replicated          2/2                 alexellis2/arm-alpinehello:latest   *:3000-&gt;3000/tcp</span><br><span class="line">63n31w2jyr6u        ping1               replicated          4/4                 alexellis2/arm-pingcurl:latest      </span><br><span class="line">pi@pi01:~ $ docker service ps hello1</span><br><span class="line">ID                  NAME                IMAGE                               NODE                DESIRED STATE       CURRENT STATE               ERROR               PORTS</span><br><span class="line">z9k8a10hkxqv        hello1.1            alexellis2/arm-alpinehello:latest   pi02                Running             Running about an hour ago                       </span><br><span class="line">7xuhpuru0r5u        hello1.2            alexellis2/arm-alpinehello:latest   pi01                Running             Running about an hour ago        </span><br></pre></td></tr></table></figure>
<h4 id="on-master-and-worker-pi02">4.4.2.1 On Master and Worker
pi02</h4>
<p>On <strong>master</strong> <strong>pi01</strong> and
<strong>worker</strong> <strong>pi02</strong>, there are 3 running
<strong>docker images</strong>:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker images</span><br><span class="line">REPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm32v6/alpine               latest              3ddac682c5b6        3 weeks ago         4.77MB</span><br><span class="line">alexellis2/arm-pingcurl      &lt;none&gt;              86a225e3a07b        3 years ago         6.19MB</span><br><span class="line">alexellis2/arm-alpinehello   &lt;none&gt;              2ad6d1f9b6ae        3 years ago         33.8MB</span><br></pre></td></tr></table></figure>
<p>, and 3 running <strong>docker container</strong>s.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">918e211b5784        alexellis2/arm-alpinehello:latest   &quot;npm start&quot;         22 minutes ago      Up 22 minutes       3000/tcp            hello1.1.z9k8a10hkxqvsovuu6omw4axy</span><br><span class="line">a92acd03471a        alexellis2/arm-pingcurl:latest      &quot;ping google.com&quot;   About an hour ago   Up About an hour                        ping1.1.xqjxus8ayetxiip2cmw4fm54x</span><br><span class="line">66b813b4c074        arm32v6/alpine                      &quot;/bin/sh&quot;           11 hours ago        Up 11 hours                             intelligent_gates</span><br></pre></td></tr></table></figure>
<h4 id="on-worker-pi03-and-worker-pi04">4.4.2.2 On Worker pi03 and
Worker pi04</h4>
<p>On <strong>master</strong> <strong>pi03</strong> and
<strong>worker</strong> <strong>pi04</strong>, there are
<strong>only</strong> 2 running <strong>docker images</strong>:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ docker images</span><br><span class="line">REPOSITORY                TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm32v6/alpine            latest              3ddac682c5b6        3 weeks ago         4.77MB</span><br><span class="line">alexellis2/arm-pingcurl   &lt;none&gt;              86a225e3a07b        3 years ago         6.19MB</span><br></pre></td></tr></table></figure>
<p>, and 3 running <strong>docker container</strong>s.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">5670e6944779        alexellis2/arm-pingcurl:latest   &quot;ping google.com&quot;   About an hour ago   Up About an hour                        ping1.2.9lemwgls6hp6wnpyg14aeyeva</span><br><span class="line">f3d1670dfc7a        arm32v6/alpine                   &quot;/bin/sh&quot;           11 days ago         Up 9 hours                              infallible_cerf</span><br></pre></td></tr></table></figure>
<h4 id="test-the-webservice">4.4.2.3 Test The Webservice</h4>
<p>Finally, let's test the webservice:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $</span><br></pre></td></tr></table></figure>
<p>Since service <code>alexellis2/arm-alpinehello</code> is
<strong>only</strong> running on <strong>master</strong>
<strong>pi01</strong> and <strong>worker</strong> <strong>pi02</strong>,
let's just check respective <strong>docker logs</strong> in the
following:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker logs b2c313ac8200</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">hello@1.0.0 start /root</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node index.js</span></span><br><span class="line"></span><br><span class="line">I&#x27;m listening.</span><br></pre></td></tr></table></figure>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker logs 918e211b5784</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">hello@1.0.0 start /root</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node index.js</span></span><br><span class="line"></span><br><span class="line">I&#x27;m listening.</span><br></pre></td></tr></table></figure>
<h3 id="scenario-3---inter-container-communication">4.4.3 Scenario 3 -
Inter-Container Communication</h3>
<p>We <strong>first</strong> create a distributed subnetwork named
<strong>armnet</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker network create --driver overlay --subnet 20.0.14.0/24 armnet</span><br><span class="line">qzcwsh0y0fx22sw7088luxybr</span><br></pre></td></tr></table></figure>
<p>Afterwards, a redis database service is created and runs on a
<strong>single</strong> node, here, <strong>master</strong>
<strong>pi01</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --replicas=1 --network=armnet --name redis alexellis2/redis-arm:v6</span><br><span class="line">kmk663ad1t88nfjf567tkctmr</span><br><span class="line">overall progress: 1 out of 1 tasks </span><br><span class="line">1/1: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<p>Finally, 2 replicas of docker service <strong>counter</strong> are
created in this created subnetwork <strong>armnet</strong> and listening
to port <strong>3333</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --name counter --replicas=2 --network=armnet --publish 3333:3333 alexellis2/arm_redis_counter</span><br><span class="line">ivdubq3vzdil3r2i5z0r1d2va</span><br><span class="line">overall progress: 2 out of 2 tasks </span><br><span class="line">1/2: running   [==================================================&gt;] </span><br><span class="line">2/2: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<p>Now, let's list all created docker service on the leader.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                                 PORTS</span><br><span class="line">ivdubq3vzdil        counter             replicated          2/2                 alexellis2/arm_redis_counter:latest   *:3333-&gt;3333/tcp</span><br><span class="line">pe19as7evzmg        hello1              replicated          2/2                 alexellis2/arm-alpinehello:latest     *:3000-&gt;3000/tcp</span><br><span class="line">63n31w2jyr6u        ping1               replicated          4/4                 alexellis2/arm-pingcurl:latest        </span><br><span class="line">kmk663ad1t88        redis               replicated          1/1                 alexellis2/redis-arm:v6               </span><br><span class="line">pi@pi01:~ $ docker service ps counter</span><br><span class="line">ID                  NAME                IMAGE                                 NODE                DESIRED STATE       CURRENT STATE               ERROR               PORTS</span><br><span class="line">ip6z9yacmjbz        counter.1           alexellis2/arm_redis_counter:latest   pi04                Running             Running about an hour ago                       </span><br><span class="line">nzhx6q1vugm9        counter.2           alexellis2/arm_redis_counter:latest   pi02                Running             Running about an hour ago                       </span><br><span class="line">pi@pi01:~ $ docker service ps redis</span><br><span class="line">ID                  NAME                IMAGE                     NODE                DESIRED STATE       CURRENT STATE         ERROR               PORTS</span><br><span class="line">z1tqve759bh6        redis.1             alexellis2/redis-arm:v6   pi03                Running             Running 2 hours ago                       </span><br></pre></td></tr></table></figure>
<p>It's interesting that this time: - the 2 replicas of service
<strong>counter</strong> are automatically created on node
<strong>pi02</strong> and <strong>pi04</strong> - the unique replica of
service <strong>redis</strong> is allocated for node
<strong>pi03</strong></p>
<p><span style="color:red">I've got no idea how the created services are
distributed to different nodes. The <strong>ONLY</strong> thing I can do
is to run <code>docker ps</code> and show the distribution
results</span>:</p>
<ul>
<li><p><strong>pi01</strong> <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">b2c313ac8200        alexellis2/arm-alpinehello:latest   &quot;npm start&quot;         3 hours ago         Up 3 hours          3000/tcp            hello1.2.7xuhpuru0r5ujkyrp4g558ehu</span><br><span class="line">7d72a046d2f4        alexellis2/arm-pingcurl:latest      &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.4.2uqbcrn0j7ettnqndxfq6s44b</span><br><span class="line">71ef4e0107a7        arm32v6/alpine                      &quot;/bin/sh&quot;           11 hours ago        Up 11 hours                             great_saha</span><br></pre></td></tr></table></figure></p></li>
<li><p><strong>pi02</strong> <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                                 COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">da2452b474af        alexellis2/arm_redis_counter:latest   &quot;node ./app.js&quot;     2 hours ago         Up 2 hours          3000/tcp            counter.2.nzhx6q1vugm9w7ouqyots5x43</span><br><span class="line">918e211b5784        alexellis2/arm-alpinehello:latest     &quot;npm start&quot;         3 hours ago         Up 3 hours          3000/tcp            hello1.1.z9k8a10hkxqvsovuu6omw4axy</span><br><span class="line">a92acd03471a        alexellis2/arm-pingcurl:latest        &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.1.xqjxus8ayetxiip2cmw4fm54x</span><br><span class="line">66b813b4c074        arm32v6/alpine                        &quot;/bin/sh&quot;           14 hours ago        Up 14 hours                             intelligent_gates</span><br></pre></td></tr></table></figure></p></li>
<li><p><strong>pi03</strong> <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">5fd9a0b8dd08        alexellis2/redis-arm:v6          &quot;redis-server&quot;      2 hours ago         Up 2 hours          6379/tcp            redis.1.z1tqve759bh6hdw2udnk6hh7t</span><br><span class="line">5670e6944779        alexellis2/arm-pingcurl:latest   &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.2.9lemwgls6hp6wnpyg14aeyeva</span><br><span class="line">f3d1670dfc7a        arm32v6/alpine                   &quot;/bin/sh&quot;           12 days ago         Up 11 hours                             infallible_cerf</span><br></pre></td></tr></table></figure></p></li>
<li><p><strong>pi04</strong> <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                                 COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">aca52fdaf2d4        alexellis2/arm_redis_counter:latest   &quot;node ./app.js&quot;     2 hours ago         Up 2 hours          3000/tcp            counter.1.ip6z9yacmjbzjaeax45tuh2oa</span><br><span class="line">2520e1ea0ea8        alexellis2/arm-pingcurl:latest        &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.3.b2y2muif9h2xa847rlibcv5nz</span><br><span class="line">746386fce983        arm32v6/alpine                        &quot;/bin/sh&quot;           12 days ago         Up 11 hours                             serene_chebyshev</span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>Clearly, - <strong>service</strong>
<code>alexellis2/arm_redis_counter</code> is running on both nodes
<strong>pi02</strong> and <strong>pi04</strong>, <strong>but
not</strong> on nodes <strong>pi01</strong> or <strong>pi03</strong> -
<strong>service</strong> <code>alexellis2/arm-alpinehello</code> is
running on both nodes <strong>pi01</strong> and <strong>pi02</strong>,
<strong>but not</strong> on nodes <strong>pi03</strong> or
<strong>pi04</strong> - <strong>service</strong>
<code>alexellis2/arm-pingcurl</code> is running on all 4 nodes
<strong>pi01</strong>, <strong>pi02</strong>. <strong>pi03</strong>, and
<strong>pi04</strong></p>
<p><span style="color:red">So far, <code>curl localhost:3333/incr</code>
is NOT running. Why?</span></p>
<p><span style="color:red"><strong>What's more</strong>:</span> -
without touching anything for a whole night, <strong>service</strong>
<code>alexellis2/arm_redis_counter</code> seems to automatically
<strong>shundown</strong> with the <strong>ERROR</strong>:
<code>task: non-zero exit (1)</code> for multiple times. -
<code>alexellis2/arm_redis_counter</code> is now running on nodes
<strong>master</strong> <strong>pi01</strong> and
<strong>worker</strong> <strong>pi04</strong>, instead of original
<strong>master</strong> <strong>pi02</strong> and
<strong>worker</strong> <strong>pi04</strong>. - it's interesting that
<code>alexellis2/redis-arm</code> is still running on node
<strong>pi03</strong>.</p>
<h2 id="docker-swarm-visualizer">4.5 <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>
Visualizer</h2>
<p>Our final topie of this blog is the <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/dockersamples/visualizer">Docker Swarm
Visualizer</a>. Official <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>
documentation has provided the details <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/dockersamples/visualizer">Docker Swarm
Visualizer</a>, and <a
target="_blank" rel="noopener" href="https://github.com/dockersamples/docker-swarm-visualizer">Docker
Swarm Visualizer Source Code</a> has also been provided on Github.</p>
<h3 id="on-leader">4.5.1 On Leader</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker run -it -d -p 8080:8080 -v /var/run/docker.sock:/var/run/docker.sock dockersamples/visualizer</span><br><span class="line">Unable to find image &#x27;dockersamples/visualizer:latest&#x27; locally</span><br><span class="line">latest: Pulling from dockersamples/visualizer</span><br><span class="line">cd784148e348: Pull complete </span><br><span class="line">f6268ae5d1d7: Pull complete </span><br><span class="line">97eb9028b14b: Pull complete </span><br><span class="line">9975a7a2a3d1: Pull complete </span><br><span class="line">ba903e5e6801: Pull complete </span><br><span class="line">7f034edb1086: Pull complete </span><br><span class="line">cd5dbf77b483: Pull complete </span><br><span class="line">5e7311667ddb: Pull complete </span><br><span class="line">687c1072bfcb: Pull complete </span><br><span class="line">aa18e5d3472c: Pull complete </span><br><span class="line">a3da1957bd6b: Pull complete </span><br><span class="line">e42dbf1c67c4: Pull complete </span><br><span class="line">5a18b01011d2: Pull complete </span><br><span class="line">Digest: sha256:54d65cbcbff52ee7d789cd285fbe68f07a46e3419c8fcded437af4c616915c85</span><br><span class="line">Status: Downloaded newer image for dockersamples/visualizer:latest</span><br><span class="line">910e83cd7ba4de02be370f4b0280d7f7fecb9d80ed8578f3238f68beab28aac7</span><br><span class="line">pi@pi01:~ $ docker service create \</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">  --name=viz \</span></span><br><span class="line"><span class="language-bash">&gt;   --publish=8080:8080/tcp \</span></span><br><span class="line"><span class="language-bash">&gt;   --constraint=node.role==manager \</span></span><br><span class="line"><span class="language-bash">&gt;   --mount=<span class="built_in">type</span>=<span class="built_in">bind</span>,src=/var/run/docker.sock,dst=/var/run/docker.sock \</span></span><br><span class="line"><span class="language-bash">&gt;   alexellis2/visualizer-arm:latest</span></span><br><span class="line">61tr8x3conmamkekzp6cqro6a</span><br><span class="line">overall progress: 1 out of 1 tasks </span><br><span class="line">1/1: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<h3 id="on-remote-laptop">4.5.2 On Remote Laptop</h3>
<p>Now, let's visualize our <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a>
beautifully from laptop by entering the <strong>leader</strong>'s IP
address at port <strong>8080</strong>:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/docker_swarm_visualizer.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/docker_swarm_visualizer.png"
alt="Docker Swarm Visualizer on My Raspberry Pi Cluster" /></a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Kind-Kubernetes-Docker-Cluster-Supercomputer/" rel="tag"># Kind, Kubernetes, Docker, Cluster, Supercomputer</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/06/16/SBCs/MCU/microbit/" rel="prev" title="micro:bit">
                  <i class="fa fa-angle-left"></i> micro:bit
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/06/23/Cloud/cluster-rpi-kubernetes-docker-3/" rel="next" title="A Cluster of Raspberry Pis (3) - k3s">
                  A Cluster of Raspberry Pis (3) - k3s <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Nobody</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
