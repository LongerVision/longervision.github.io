<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"longervision.ca","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Longer Vision Technology Github Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Longer Vision Technology">
<meta property="og:url" content="http://longervision.ca/page/7/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="Longer Vision Technology Github Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Longer Vision, Computer Vision, AI, Machine Learning">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://longervision.ca/page/7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/7/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Longer Vision Technology</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Longer Vision Technology</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Github Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">Longer Vision Technology Github Blog</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">145</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">135</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/09/03/ComputerVision/Face/deepfake/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/03/ComputerVision/Face/deepfake/" class="post-title-link" itemprop="url">Deepfake</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-09-03 06:59:47" itemprop="dateCreated datePublished" datetime="2020-09-03T06:59:47-07:00">2020-09-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 00:50:07" itemprop="dateModified" datetime="2024-09-30T00:50:07-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Vision/" itemprop="url" rel="index"><span itemprop="name">Computer Vision</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Vision/Face/" itemprop="url" rel="index"><span itemprop="name">Face</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <div style="text-align: center; font-size: 3em;">
<pre><code>😉</code></pre>
</div>
<p>Have <strong>NO</strong> time for blogging these days.</p>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/UibIz3hLLLo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/aj9gx7r4NBE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>https://youtu.be/UibIz3hLLLo</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/08/16/SBCs/RISC-V/RISC-V-Assembly/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/16/SBCs/RISC-V/RISC-V-Assembly/" class="post-title-link" itemprop="url">RISC-V Assembly</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-16 00:00:00" itemprop="dateCreated datePublished" datetime="2020-08-16T00:00:00-07:00">2020-08-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-28 17:33:45" itemprop="dateModified" datetime="2024-09-28T17:33:45-07:00">2024-09-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/Risc-V/" itemprop="url" rel="index"><span itemprop="name">Risc-V</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a
target="_blank" rel="noopener" href="https://web.eecs.utk.edu/~smarz1/courses/ece356/notes/assembly/">https://web.eecs.utk.edu/~smarz1/courses/ece356/notes/assembly/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/06/23/Cloud/cluster-rpi-kubernetes-docker-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/23/Cloud/cluster-rpi-kubernetes-docker-3/" class="post-title-link" itemprop="url">A Cluster of Raspberry Pis (3) - k3s</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-06-23 20:17:51" itemprop="dateCreated datePublished" datetime="2020-06-23T20:17:51-07:00">2020-06-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 01:57:37" itemprop="dateModified" datetime="2024-09-30T01:57:37-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>In this blog, we're going to explore <a
target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a>. However, there is a
<strong>VERY FIRST</strong> question to be answered: what is the
relationship between <a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a> and
<a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>? Let's start our journey of
today:</p>
<h1 id="kubernetes">1 <a
target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a></h1>
<p><code>Kubernetes (commonly stylized as k8s) is an open-source container-orchestration system for automating application deployment, scaling, and management.</code>
(cited from <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kubernetes">Wikipedia</a>)</p>
<p>On <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>, a
lightweight variant of <a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a>
is normally preferred. A variety of choices are available:</p>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Packages</th>
<th style="text-align: center;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://microk8s.io/">MicroK8s</a></td>
<td
style="text-align: center;"><code>MicroK8s is only available for 64-bit Ubuntu images.</code>
(Cited from <a
target="_blank" rel="noopener" href="https://ubuntu.com/tutorials/how-to-kubernetes-cluster-on-raspberry-pi#3-setting-up-each-pi">How
to build a Raspberry Pi Kubernetes cluster using MicroK8s: Setting up
each Pi</a>)</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a>, <a
target="_blank" rel="noopener" href="https://k3d.io/">k3d</a>, <a target="_blank" rel="noopener" href="https://k3d.io/">k3d</a></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://minikube.sigs.k8s.io/">Minikube</a></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://kind.sigs.k8s.io/">kind</a></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://github.com/kubernetes/kubeadm">Kubeadm</a></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<p><a
target="_blank" rel="noopener" href="https://brennerm.github.io/posts/minikube-vs-kind-vs-k3s.html">Minikube
vs. kind vs. k3s - What should I use?</a> elaborates the differences
among <a target="_blank" rel="noopener" href="https://minikube.sigs.k8s.io/">Minikube</a>, <a
target="_blank" rel="noopener" href="https://kind.sigs.k8s.io/">kind</a> and <a
target="_blank" rel="noopener" href="https://k3s.io/">k3s</a>. Its final table is cited as follows:</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;"><a
target="_blank" rel="noopener" href="https://minikube.sigs.k8s.io/">minikube</a></th>
<th style="text-align: left;"><a
target="_blank" rel="noopener" href="https://kind.sigs.k8s.io/">kind</a></th>
<th style="text-align: left;"><a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">runtime</td>
<td style="text-align: left;">VM</td>
<td style="text-align: left;">container</td>
<td style="text-align: left;">native</td>
</tr>
<tr class="even">
<td style="text-align: left;">supported architectures</td>
<td style="text-align: left;">AMD64</td>
<td style="text-align: left;">AMD64</td>
<td style="text-align: left;">AMD64, ARMv7, ARM64</td>
</tr>
<tr class="odd">
<td style="text-align: left;">supported container runtimes</td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>, <a
target="_blank" rel="noopener" href="https://cri-o.io/">CRI-O</a>, <a
target="_blank" rel="noopener" href="https://containerd.io/">containerd</a>, <a
target="_blank" rel="noopener" href="https://gvisor.dev/">gVisor</a></td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>, <a
target="_blank" rel="noopener" href="https://containerd.io/">containerd</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">startup time: initial/following</td>
<td style="text-align: left;">5:19 / 3:15</td>
<td style="text-align: left;">2:48 / 1:06</td>
<td style="text-align: left;">0:15 / 0:15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">memory requirements</td>
<td style="text-align: left;">2GB</td>
<td style="text-align: left;">8GB (Windows, MacOS)</td>
<td style="text-align: left;">512 MB</td>
</tr>
<tr class="even">
<td style="text-align: left;">requires root?</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">yes (rootless is experimental)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">multi-cluster support</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">no (can be achieved using containers)</td>
</tr>
<tr class="even">
<td style="text-align: left;">multi-node support</td>
<td style="text-align: left;">no</td>
<td style="text-align: left;">yes</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">project page</td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://minikube.sigs.k8s.io/">minikube</a></td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://kind.sigs.k8s.io/">kind</a></td>
<td style="text-align: left;"><a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a></td>
</tr>
</tbody>
</table>
<p>Here in my case, I'm going to use <a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a>
to manage and monitor the cluster. The following 2 blogs are strongly
recommended from me. - <a
target="_blank" rel="noopener" href="https://opensource.com/article/20/3/kubernetes-raspberry-pi-k3s">Run
Kubernetes on a Raspberry Pi with k3s</a> - <a
target="_blank" rel="noopener" href="https://medium.com/@alexellisuk/kubernetes-1-18-broke-kubectl-run-heres-what-to-do-about-it-2a88e5fb389a">Kubernetes
1.18 broke “kubectl run”, here’s what to do about it</a></p>
<h1 id="preparation">2. Preparation</h1>
<p>Let's take a look at the <strong>IP</strong> info of
<strong>ALL</strong> 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry
Pi</a>s. Let's take <strong>pi04</strong> as the example this time.
<strong>pi01</strong>, <strong>pi02</strong>, <strong>pi03</strong> are
having very similar <strong>IP</strong> info as
<strong>pi04</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether b8:27:eb:c1:b8:76 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.247/24 brd 192.168.1.255 scope global noprefixroute eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 2001:569:7fb8:c600:ca9b:d758:2534:8a9d/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7480sec preferred_lft 7180sec</span><br><span class="line">    inet6 fe80::80b5:3a3e:defe:24aa/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: wlan0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000</span><br><span class="line">    link/ether b8:27:eb:94:ed:23 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: wlan1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    link/ether e8:4e:06:35:16:6d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.245/24 brd 192.168.1.255 scope global dynamic noprefixroute wlan1</span><br><span class="line">       valid_lft 86060sec preferred_lft 75260sec</span><br><span class="line">    inet6 2001:569:7fb8:c600:5996:3c23:ef08:c367/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7480sec preferred_lft 7180sec</span><br><span class="line">    inet6 fe80::a0ff:56e3:77f5:9bf2/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>
<p>As mentioned in <a
href="../../../../../2020/06/07/Cloud/cluster-rpi-kubernetes-docker-1/">A
Cluster of Raspberry Pis (1) - Configuration</a>, <strong>pi04</strong>
is an old <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry
Pi 3 Model B Rev 1.2 1GB</a>, which is unfortunately with a broken
<strong>Wifi</strong> interface <strong>wlan0</strong>. Therefore, I've
got to insert a <strong>Wifi</strong> dongle in order to have
<strong>Wifi wlan1</strong> enabled.</p>
<h1 id="k3s-installation-and-configuration">3. <a
target="_blank" rel="noopener" href="https://k3s.io/">k3s</a> Installation and Configuration</h1>
<h2 id="k3s-installation-on-master-node-pi01">3.1 <a
target="_blank" rel="noopener" href="https://k3s.io/">k3s</a> Installation on Master Node pi01</h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ curl -sfL https://get.k3s.io | sh -</span><br><span class="line">[INFO]  Finding release for channel stable</span><br><span class="line">[INFO]  Using v1.18.3+k3s1 as release</span><br><span class="line">[INFO]  Downloading hash https://github.com/rancher/k3s/releases/download/v1.18.3+k3s1/sha256sum-arm.txt</span><br><span class="line">[INFO]  Downloading binary https://github.com/rancher/k3s/releases/download/v1.18.3+k3s1/k3s-armhf</span><br><span class="line">[INFO]  Verifying binary download</span><br><span class="line">[INFO]  Installing k3s to /usr/local/bin/k3s</span><br><span class="line">[INFO]  Creating /usr/local/bin/kubectl symlink to k3s</span><br><span class="line">[INFO]  Creating /usr/local/bin/crictl symlink to k3s</span><br><span class="line">[INFO]  Skipping /usr/local/bin/ctr symlink to k3s, command exists in PATH at /usr/bin/ctr</span><br><span class="line">[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh</span><br><span class="line">[INFO]  Creating uninstall script /usr/local/bin/k3s-uninstall.sh</span><br><span class="line">[INFO]  env: Creating environment file /etc/systemd/system/k3s.service.env</span><br><span class="line">[INFO]  systemd: Creating service file /etc/systemd/system/k3s.service</span><br><span class="line">[INFO]  systemd: Enabling k3s unit</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/k3s.service → /etc/systemd/system/k3s.service.</span><br><span class="line">[INFO]  systemd: Starting k3s</span><br><span class="line">pi@pi01:~ $ sudo kubectl get nodes</span><br><span class="line">NAME   STATUS   ROLES    AGE     VERSION</span><br><span class="line">pi01   Ready    master   2m42s   v1.18.3+k3s1</span><br></pre></td></tr></table></figure>
<p>If we take a look at <strong>IP</strong> info, one additional
<strong>flannel.1</strong> interface is added as follows:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">4: flannel.1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UNKNOWN group default </span><br><span class="line">    link/ether 3e:53:91:ce:b9:46 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 10.42.0.0/32 brd 10.42.0.0 scope global flannel.1</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet 169.254.238.88/16 brd 169.254.255.255 scope global noprefixroute flannel.1</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::59c5:fbf9:aaf7:46fb/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>
<h2 id="k3s-installation-on-work-node-pi01-pi02-pi03">3.2 <a
target="_blank" rel="noopener" href="https://k3s.io/">k3s</a> Installation on Work Node pi01, pi02,
pi03</h2>
<p>Before moving forward, we need to write down <strong>node
token</strong> on the <strong>master node</strong>, which will be used
while the other <strong>work nodes</strong> join in the cluster.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ sudo cat /var/lib/rancher/k3s/server/node-token</span><br><span class="line">K10cedbc6396ab68f6bee0d2df3eb005f0ff9ea17275aed2763b6bf07a06e83ce47::server:9a0d84f3bd8044b341c95f967badd5d3</span><br></pre></td></tr></table></figure>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pi@pi0X:~ $ curl -sfL http://get.k3s.io | K3S_URL=https://192.168.1.253:6443 \</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">K3S_TOKEN=K10cedbc6396ab68f6bee0d2df3eb005f0ff9ea17275aed2763b6bf07a06e83ce47::server:9a0d84f3bd8044b341c95f967badd5d3 sh -</span></span><br><span class="line">[INFO]  Finding release for channel stable</span><br><span class="line">[INFO]  Using v1.18.3+k3s1 as release</span><br><span class="line">[INFO]  Downloading hash https://github.com/rancher/k3s/releases/download/v1.18.3+k3s1/sha256sum-arm.txt</span><br><span class="line">[INFO]  Skipping binary downloaded, installed k3s matches hash</span><br><span class="line">[INFO]  Skipping /usr/local/bin/kubectl symlink to k3s, command exists in PATH at /usr/bin/kubectl</span><br><span class="line">[INFO]  Skipping /usr/local/bin/crictl symlink to k3s, command exists in PATH at /usr/bin/crictl</span><br><span class="line">[INFO]  Skipping /usr/local/bin/ctr symlink to k3s, command exists in PATH at /usr/bin/ctr</span><br><span class="line">[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh</span><br><span class="line">[INFO]  Creating uninstall script /usr/local/bin/k3s-agent-uninstall.sh</span><br><span class="line">[INFO]  env: Creating environment file /etc/systemd/system/k3s-agent.service.env</span><br><span class="line">[INFO]  systemd: Creating service file /etc/systemd/system/k3s-agent.service</span><br><span class="line">[INFO]  systemd: Enabling k3s-agent unit</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/k3s-agent.service → /etc/systemd/system/k3s-agent.service.</span><br><span class="line">[INFO]  systemd: Starting k3s-agent</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=2, or 3, or 4</strong>.</p>
<h2 id="take-a-look-on-pi01">3.3 Take a Look on pi01</h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ sudo kubectl get nodes</span><br><span class="line">NAME   STATUS   ROLES    AGE     VERSION</span><br><span class="line">pi02   Ready    &lt;none&gt;   5m7s    v1.18.3+k3s1</span><br><span class="line">pi03   Ready    &lt;none&gt;   4m18s   v1.18.3+k3s1</span><br><span class="line">pi01   Ready    master   20m     v1.18.3+k3s1</span><br><span class="line">pi04   Ready    &lt;none&gt;   11s     v1.18.3+k3s1</span><br></pre></td></tr></table></figure>
<h2 id="access-raspberry-pi-cluster-from-pc">3.4 Access <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a> Cluster from
PC</h2>
<p>We can further configure our PC to be able to access the <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a> Cluster. For
details, please refer to <a
target="_blank" rel="noopener" href="https://opensource.com/article/20/3/kubernetes-raspberry-pi-k3s">Run
Kubernetes on a Raspberry Pi with k3s</a>. On my laptop, I can do:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> ✔  kubectl get nodes</span><br><span class="line">NAME   STATUS   ROLES    AGE     VERSION</span><br><span class="line">pi02   Ready    &lt;none&gt;   3h27m   v1.18.3+k3s1</span><br><span class="line">pi03   Ready    &lt;none&gt;   3h26m   v1.18.3+k3s1</span><br><span class="line">pi04   Ready    &lt;none&gt;   3h22m   v1.18.3+k3s1</span><br><span class="line">pi01   Ready    master   3h42m   v1.18.3+k3s1</span><br></pre></td></tr></table></figure>
<p>We can even specify the role name by the following command:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> ✔  kubectl label nodes pi0X kubernetes.io/role=worker</span><br><span class="line">node/pi0X labeled</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=2, or 3, or 4</strong>.</p>
<p>Let's take a look at all nodes again:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> 64  ✔  kubectl get nodes</span><br><span class="line">NAME   STATUS   ROLES    AGE    VERSION</span><br><span class="line">pi04   Ready    worker   2d7h   v1.18.3+k3s1</span><br><span class="line">pi03   Ready    worker   2d7h   v1.18.3+k3s1</span><br><span class="line">pi01   Ready    master   2d7h   v1.18.3+k3s1</span><br><span class="line">pi02   Ready    worker   2d7h   v1.18.3+k3s1</span><br><span class="line"> 66  ✘  kubectl get pods --all-namespaces</span><br><span class="line">  ~ </span><br><span class="line">NAMESPACE              NAME                                         READY   STATUS             RESTARTS   AGE</span><br><span class="line">kube-system            helm-install-traefik-m49zm                   0/1     Completed          0          2d7h</span><br><span class="line">kube-system            svclb-traefik-djtgw                          2/2     Running            2          2d7h</span><br><span class="line">kube-system            svclb-traefik-cn76f                          2/2     Running            2          2d7h</span><br><span class="line">kube-system            local-path-provisioner-6d59f47c7-5gz67       1/1     Running            1          2d7h</span><br><span class="line">kube-system            svclb-traefik-7bwtl                          2/2     Running            2          2d7h</span><br><span class="line">kube-system            coredns-8655855d6-wg68z                      1/1     Running            1          2d7h</span><br><span class="line">kube-system            traefik-758cd5fc85-vn7xg                     1/1     Running            1          2d7h</span><br><span class="line">kube-system            metrics-server-7566d596c8-v2vgp              1/1     Running            1          2d7h</span><br><span class="line">kube-system            svclb-traefik-r9x5v                          2/2     Running            4          2d7h</span><br><span class="line">kubernetes-dashboard   dashboard-metrics-scraper-6b4884c9d5-ct6lh   1/1     Running            0          43h</span><br><span class="line">kubernetes-dashboard   kubernetes-dashboard-7b544877d5-s4spx        0/1     CrashLoopBackOff   489        43h</span><br><span class="line"> 67  ✔  kubectl get pods</span><br><span class="line">  ~ </span><br><span class="line">No resources found in default namespace.</span><br></pre></td></tr></table></figure>
<h1 id="create-deployment">4. Create Deployment</h1>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 73  ✔  kubectl create deployment nginx-sample --image=nginx</span><br><span class="line">  ~ </span><br><span class="line">deployment.apps/nginx-sample created</span><br></pre></td></tr></table></figure>
<p>After a while, <strong>nginx-sample</strong> will be successfully
deployed.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> 79  ✔  kubectl get deployments</span><br><span class="line">  ~ </span><br><span class="line">NAME           READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx-sample   1/1     1            1           12m</span><br><span class="line"> 80  ✔  kubectl get pods</span><br><span class="line">  ~ </span><br><span class="line">NAME                           READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx-sample-879f5cf56-kg6xf   1/1     Running   0          12m</span><br><span class="line"> 81  ✔  kubectl get pods -o wide</span><br><span class="line">  ~ </span><br><span class="line">NAME                           READY   STATUS    RESTARTS   AGE   IP           NODE   NOMINATED NODE   READINESS GATES</span><br><span class="line">nginx-sample-879f5cf56-kg6xf   1/1     Running   0          12m   10.42.0.15   pi01   &lt;none&gt;           &lt;none&gt;</span><br></pre></td></tr></table></figure>
<p>Now, let's expose this service and take a look from the browser:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> 82  ✔  kubectl expose deployment nginx-sample --type=&quot;NodePort&quot; --port 80 </span><br><span class="line">  ~ </span><br><span class="line">service/nginx-sample exposed</span><br><span class="line"> 83  ✔  kubectl get services </span><br><span class="line">  ~ </span><br><span class="line">NAME           TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">kubernetes     ClusterIP   10.43.0.1       &lt;none&gt;        443/TCP        96m</span><br><span class="line">nginx-sample   NodePort    10.43.195.237   &lt;none&gt;        80:30734/TCP   72s</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/06/22/Cloud/cluster-rpi-kubernetes-docker-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/22/Cloud/cluster-rpi-kubernetes-docker-2/" class="post-title-link" itemprop="url">A Cluster of Raspberry Pis (2) - docker & docker swarm</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-06-22 13:22:19" itemprop="dateCreated datePublished" datetime="2020-06-22T13:22:19-07:00">2020-06-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 00:53:40" itemprop="dateModified" datetime="2024-09-30T00:53:40-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="container-vs.-virtual-machine">1. Container VS. Virtual
Machine</h1>
<p>Briefly refer to: <a
target="_blank" rel="noopener" href="https://www.backblaze.com/blog/vm-vs-containers/">What’s the Diff:
VMs vs Containers</a> and <a
target="_blank" rel="noopener" href="https://www.trustradius.com/buyer-blog/bare-metal-servers-virtual-servers-and-containerization">Bare
Metal Servers, Virtual Servers, and Containerization</a>.</p>
<h1 id="docker-vs.-vmware">2. <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> VS. <a
target="_blank" rel="noopener" href="https://www.vmware.com/">VMWare</a></h1>
<p>Briefly refer to: <a
target="_blank" rel="noopener" href="https://www.upguard.com/articles/docker-vs.-vmware-how-do-they-stack-up">Docker
vs VMWare: How Do They Stack Up?</a>.</p>
<p>For me, I used to use <a target="_blank" rel="noopener" href="https://www.virtualbox.org/">Virtual
Box</a> (a virtual machine) a lot, but now start using <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> (the leading container).</p>
<h1 id="install-docker-on-raspberry-pi">3. Install <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> on <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a></h1>
<p>I heavily refer to Alex Ellis' blogs: - <a
target="_blank" rel="noopener" href="https://blog.alexellis.io/getting-started-with-docker-on-raspberry-pi/">Get
Started with Docker on Raspberry Pi</a> - <a
target="_blank" rel="noopener" href="https://blog.alexellis.io/hands-on-docker-raspberrypi/">Hands-on
Docker for Raspberry Pi</a> - <a
target="_blank" rel="noopener" href="https://blog.alexellis.io/5-things-docker-rpi/">5 things about
Docker on Raspberry Pi</a> - <a
target="_blank" rel="noopener" href="https://blog.alexellis.io/live-deep-dive-pi-swarm/">Live Deep Dive
- Docker Swarm Mode on the Pi</a></p>
<h2 id="modify-bootconfig.txt">3.1 Modify /boot/config.txt</h2>
<table style="text-align:center;">
<tr>
<td>
Hostname
</td>
<td>
/boot/config.txt
</td>
</tr>
<tr>
<td>
pi01
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ <span class="built_in">tail</span> -5 /boot/config.txt</span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=128</span><br><span class="line"><span class="comment">#arm_64bit=1</span></span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi02
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ <span class="built_in">tail</span> -5 /boot/config.txt</span><br><span class="line"></span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=64</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi03
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  pi@pi03:~ $ <span class="built_in">tail</span> -5 /boot/config.txt</span><br><span class="line"></span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=32</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi04
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ <span class="built_in">tail</span> -5 /boot/config.txt</span><br><span class="line"></span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=32</span><br></pre></td></tr></table></figure>
</td>
</tr>
</table>
<h2 id="docker-installation">3.2 <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> Installation</h2>
<h3 id="installation">3.2.1 Installation</h3>
<p>To install <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> is
<strong>ONLY</strong> one single command:</p>
<ul>
<li><code>curl -sSL https://get.docker.com | sh</code></li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ curl -sSL https://get.docker.com | sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Executing docker install script, commit: 26ff363bcf3b3f5a00498ac43694bf1c7d9ce16c</span></span><br><span class="line">Warning: the &quot;docker&quot; command appears to already exist on this system.</span><br><span class="line"></span><br><span class="line">If you already have Docker installed, this script can cause trouble, which is</span><br><span class="line">why we&#x27;re displaying this warning and provide the opportunity to cancel the</span><br><span class="line">installation.</span><br><span class="line"></span><br><span class="line">If you installed the current Docker package using this script and are using it</span><br><span class="line">again to update Docker, you can safely ignore this message.</span><br><span class="line"></span><br><span class="line">You may press Ctrl+C now to abort this script.</span><br><span class="line">+ sleep 20</span><br><span class="line">+ sudo -E sh -c apt-get update -qq &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c curl -fsSL &quot;https://download.docker.com/linux/raspbian/gpg&quot; | apt-key add -qq - &gt;/dev/null</span><br><span class="line">Warning: apt-key output should not be parsed (stdout is not a terminal)</span><br><span class="line">+ sudo -E sh -c echo &quot;deb [arch=armhf] https://download.docker.com/linux/raspbian buster stable&quot; &gt; /etc/apt/sources.list.d/docker.list</span><br><span class="line">+ sudo -E sh -c apt-get update -qq &gt;/dev/null</span><br><span class="line">+ [ -n  ]</span><br><span class="line">+ sudo -E sh -c apt-get install -y -qq --no-install-recommends docker-ce &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.11</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.13.10</span><br><span class="line"> Git commit:        42e35e6</span><br><span class="line"> Built:             Mon Jun  1 09:20:15 2020</span><br><span class="line"> OS/Arch:           linux/arm</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.11</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.13.10</span><br><span class="line">  Git commit:       42e35e6</span><br><span class="line">  Built:            Mon Jun  1 09:14:09 2020</span><br><span class="line">  OS/Arch:          linux/arm</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.2.13</span><br><span class="line">  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc10</span><br><span class="line">  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br><span class="line">If you would like to use Docker as a non-root user, you should now consider</span><br><span class="line">adding your user to the &quot;docker&quot; group with something like:</span><br><span class="line"></span><br><span class="line">  sudo usermod -aG docker pi</span><br><span class="line"></span><br><span class="line">Remember that you will have to log out and back in for this to take effect!</span><br><span class="line"></span><br><span class="line">WARNING: Adding a user to the &quot;docker&quot; group will grant the ability to run</span><br><span class="line">         containers which can be used to obtain root privileges on the</span><br><span class="line">         docker host.</span><br><span class="line">         Refer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface</span><br><span class="line">         for more information.</span><br></pre></td></tr></table></figure>
<p>Let's take a look at the <strong>IP</strong> info of
<strong>pi01</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ ip -c address</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    link/ether dc:a6:32:b1:22:36 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.253/24 brd 192.168.1.255 scope global dynamic noprefixroute eth0</span><br><span class="line">       valid_lft 47285sec preferred_lft 36485sec</span><br><span class="line">    inet6 2001:569:7fb8:c600:ca77:4302:3dbb:5b94/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7469sec preferred_lft 7169sec</span><br><span class="line">    inet6 fe80::bdf2:287f:4b0a:abc5/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether dc:a6:32:b1:22:37 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.252/24 brd 192.168.1.255 scope global dynamic noprefixroute wlan0</span><br><span class="line">       valid_lft 47282sec preferred_lft 36482sec</span><br><span class="line">    inet6 2001:569:7fb8:c600:d413:3cdf:1f56:7056/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7469sec preferred_lft 7169sec</span><br><span class="line">    inet6 fe80::7f55:cb40:9bf7:c903/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">4: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default </span><br><span class="line">    link/ether 02:42:ff:90:ba:f3 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>
<p>Clearly, there is <strong>one more</strong> interface
<strong>docker0</strong> added into <strong>pi01</strong>'s
<strong>IP</strong> info, but it's now <strong>DOWN</strong>.</p>
<h3 id="uninstall">3.2.2 Uninstall</h3>
<p>By the way, to uninstall <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>, 2 commands are required:</p>
<ul>
<li><code>sudo apt remove docker-ce</code></li>
<li><code>sudo ip link delete docker0</code></li>
</ul>
<p>Beside have <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> uninstalled,
you may have to manually remove the <strong>IP</strong> link to
<strong>docker0</strong>.</p>
<h3 id="enablestart-docker">3.2.3 Enable/Start <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></h3>
<p>Then, let's enable and start <strong>docker</strong> service, and add
user <strong>pi</strong> into group <strong>docker</strong> to be able
to run <strong>docker</strong> as user <strong>root</strong>.</p>
<ul>
<li><code>sudo systemctl enable docker</code></li>
<li><code>sudo systemctl start docker</code></li>
<li><code>sudo usermod -aG docker pi</code></li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ sudo systemctl enable docker</span><br><span class="line">Synchronizing state of docker.service with SysV service script with /lib/systemd/systemd-sysv-install.</span><br><span class="line">Executing: /lib/systemd/systemd-sysv-install enable docker</span><br><span class="line">pi@pi01:~ $ sudo systemctl start docker</span><br><span class="line">pi@pi01:~ $ sudo usermod -aG docker pi</span><br></pre></td></tr></table></figure>
<p>Afterwards, reboot all <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>.</p>
<p>Now, let's check the installed <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> version:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">pi@pi0X:~ $ docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.11</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.13.10</span><br><span class="line"> Git commit:        42e35e6</span><br><span class="line"> Built:             Mon Jun  1 09:20:15 2020</span><br><span class="line"> OS/Arch:           linux/arm</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.11</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.13.10</span><br><span class="line">  Git commit:       42e35e6</span><br><span class="line">  Built:            Mon Jun  1 09:14:09 2020</span><br><span class="line">  OS/Arch:          linux/arm</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.2.13</span><br><span class="line">  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc10</span><br><span class="line">  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=1, or 2, or 3, or 4</strong>.</p>
<h2 id="test-arm-image-pulled-from-docker-hub">3.3 Test ARM Image Pulled
from <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a></h2>
<h3 id="docker-pull-docker-run-docker-exec">3.3.1 Docker Pull, Docker
Run, Docker Exec</h3>
<p>Due to respective architectures of these 4 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s, I tried to use <a
target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> image <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/alpine/">arm64v8/alpine</a> for
<strong>pi01</strong>, and <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker
Hub</a> image <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm32v6/alpine/">arm32v6/alpine</a> for
<strong>pi02</strong>, <strong>pi03</strong> and <strong>pi04</strong>.
However, it finally turns out that <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a> is <strong>NOT</strong> quite stable yet.</p>
<h4 id="pi01-docker-hub-arm64v8-is-not-stable-yet.">pi01 ~ <a
target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> <a
target="_blank" rel="noopener" href="https://hub.docker.com/u/arm64v8/">arm64v8</a> is NOT stable
yet.</h4>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker pull arm64v8/alpine</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from arm64v8/alpine</span><br><span class="line">b538f80385f9: Pull complete </span><br><span class="line">Digest: sha256:3b3f647d2d99cac772ed64c4791e5d9b750dd5fe0b25db653ec4976f7b72837c</span><br><span class="line">Status: Downloaded newer image for arm64v8/alpine:latest</span><br><span class="line">docker.io/arm64v8/alpine:latest</span><br><span class="line">pi@pi01:~ $ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm64v8/alpine      latest              62ee0e9f8440        11 days ago         5.32MB</span><br><span class="line">pi@pi01:~ $ docker run -it -d arm64v8/alpine</span><br><span class="line">4deed42b3a29231bde40176c5c385d9f04bbf5188383b2ede4a09383360d69bb</span><br><span class="line">pi@pi01:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES</span><br><span class="line">4deed42b3a29        arm64v8/alpine      &quot;/bin/sh&quot;           49 seconds ago      Restarting (159) 8 seconds ago                       inspiring_mendeleev</span><br><span class="line">pi@pi01:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">4deed42b3a29        arm64v8/alpine      &quot;/bin/sh&quot;           51 seconds ago      Up 2 seconds                            inspiring_mendeleev</span><br><span class="line">pi@pi02:~ $ </span><br></pre></td></tr></table></figure>
<p>It looks <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> images from
repository <a target="_blank" rel="noopener" href="https://hub.docker.com/u/arm64v8/">arm64v8</a> are
<strong>NOT</strong> able to stably work on my <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry
Pi 4 Model B Rev 1.4 8GB</a> with <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a>. To <strong>further</strong> demonstrate
this, I also tested some other images from repository <a
target="_blank" rel="noopener" href="https://hub.docker.com/u/arm64v8/">arm64v8</a> and even deprecated
<a target="_blank" rel="noopener" href="https://hub.docker.com/u/aarch64/">aarch64</a>, as follows:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">alpine              latest              3ddac682c5b6        12 days ago         4.77MB</span><br><span class="line">arm64v8/alpine      latest              62ee0e9f8440        12 days ago         5.32MB</span><br><span class="line">arm64v8/ubuntu      latest              dbc66a3d7b82        6 weeks ago         66.7MB</span><br><span class="line">aarch64/ubuntu      latest              5227400055a2        3 years ago         122MB</span><br><span class="line">pi@pi01:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">e06eaba12e82        alpine              &quot;/bin/sh&quot;           2 hours ago         Up 2 hours                                     relaxed_cerf</span><br><span class="line">ba8d858d36f0        aarch64/ubuntu      &quot;/bin/bash&quot;         2 hours ago         Exited (159) 2 hours ago                       nifty_sutherland</span><br><span class="line">08346701599a        arm64v8/ubuntu      &quot;/bin/bash&quot;         2 hours ago         Exited (159) 2 hours ago                       jolly_fermi</span><br><span class="line">ccda6c95f81d        arm64v8/alpine      &quot;/bin/sh&quot;           4 hours ago         Exited (159) 4 hours ago                       nifty_gates</span><br></pre></td></tr></table></figure>
None of the three images <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/alpine/">arm64v8/alpine</a>, <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/ubuntu/">arm64v8/ubuntu</a>, <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/aarch64/ubuntu/">aarch64/ubuntu</a> can
<strong>UP</strong> for 3 seconds.
<div style="text-align: center; font-size: 3em;">
<pre><code>😊
😔</code></pre>
</div>
<p>Well, I can pull <strong>alpine</strong> and keep it
<strong>UP</strong> instead of <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/alpine/">arm64v8/alpine</a>
though.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker pull alpine</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/alpine</span><br><span class="line">b4b72e716706: Pull complete </span><br><span class="line">Digest: sha256:185518070891758909c9f839cf4ca393ee977ac378609f700f60a771a2dfe321</span><br><span class="line">Status: Downloaded newer image for alpine:latest</span><br><span class="line">docker.io/library/alpine:latest</span><br><span class="line">pi@pi01:~ $ docker run -it -d alpine</span><br><span class="line">e06eaba12e82d9266aa3dacd8eb0484e385f810e08806f0bec282bc3b5122a85</span><br><span class="line">pi@pi01:~ $ docker ps </span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">e06eaba12e82        alpine              &quot;/bin/sh&quot;           10 seconds ago      Up 2 seconds                            relaxed_cerf</span><br><span class="line">pi@pi01:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">e06eaba12e82        alpine              &quot;/bin/sh&quot;           12 seconds ago      Up 5 seconds                                      relaxed_cerf</span><br><span class="line">ba8d858d36f0        aarch64/ubuntu      &quot;/bin/bash&quot;         3 minutes ago       Exited (159) 2 minutes ago                        nifty_sutherland</span><br><span class="line">08346701599a        arm64v8/ubuntu      &quot;/bin/bash&quot;         28 minutes ago      Exited (159) 28 minutes ago                       jolly_fermi</span><br><span class="line">ccda6c95f81d        arm64v8/alpine      &quot;/bin/sh&quot;           2 hours ago         Exited (159) 2 hours ago                          nifty_gates</span><br><span class="line">pi@pi01:~ $ docker exec -it e06eaba12e82 /bin/sh</span><br><span class="line">/ # cat /etc/os-release</span><br><span class="line">NAME=&quot;Alpine Linux&quot;</span><br><span class="line">ID=alpine</span><br><span class="line">VERSION_ID=3.12.0</span><br><span class="line">PRETTY_NAME=&quot;Alpine Linux v3.12&quot;</span><br><span class="line">HOME_URL=&quot;https://alpinelinux.org/&quot;</span><br><span class="line">BUG_REPORT_URL=&quot;https://bugs.alpinelinux.org/&quot;</span><br><span class="line">/ # uname -a</span><br><span class="line">Linux e06eaba12e82 5.4.44-v8+ #1320 SMP PREEMPT Wed Jun 3 16:20:05 BST 2020 aarch64 Linux</span><br><span class="line">/ # exit</span><br><span class="line">pi@pi01:~ $ </span><br></pre></td></tr></table></figure>
<p>However, due to a bunch of the other instabilities, I
<strong>downgrade</strong> the system from <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a> to <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry
Pi OS (32-bit) with desktop 2020-05-27</a>. <span style="color:red">And
it's interesting that image from <strong>arm32v6/alpine</strong> is
exactly the same as image directly from <strong>alpine</strong>, namely
image ID <strong>3ddac682c5b6</strong></span>.</p>
<p>By the way, please refer to my posts: - <a
target="_blank" rel="noopener" href="https://github.com/alpinelinux/docker-alpine/issues/92">https://github.com/alpinelinux/docker-alpine/issues/92</a>,
- <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677005">https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677005</a>
- <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677106">https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677106</a></p>
<h4 id="pi0x-docker-hub-arm32v6-is-tested.">pi0X ~ <a
target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> <a
target="_blank" rel="noopener" href="https://hub.docker.com/u/arm32v6/">arm32v6</a> is tested.</h4>
<p>Let's take <strong>pi02</strong> as an example.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker pull arm32v6/alpine</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from arm32v6/alpine</span><br><span class="line">Digest: sha256:71465c7d45a086a2181ce33bb47f7eaef5c233eace65704da0c5e5454a79cee5</span><br><span class="line">Status: Image is up to date for arm32v6/alpine:latest</span><br><span class="line">docker.io/arm32v6/alpine:latest</span><br><span class="line">pi@pi02:~ $ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm32v6/alpine      latest              3ddac682c5b6        3 weeks ago         4.77MB</span><br><span class="line">pi@pi02:~ $ docker run -it -d arm32v6/alpine</span><br><span class="line">66b813b4c07426294e01f3c7b2ff03f6608f6be10f8f7bf9fde581f605e6a5bc</span><br><span class="line">pi@pi02:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">66b813b4c074        arm32v6/alpine      &quot;/bin/sh&quot;           10 seconds ago      Up 5 seconds                            intelligent_gates</span><br><span class="line">pi@pi02:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">66b813b4c074        arm32v6/alpine      &quot;/bin/sh&quot;           12 seconds ago      Up 8 seconds                            intelligent_gates</span><br><span class="line">pi@pi02:~ $ docker exec -it 66b813b4c074 /bin/sh</span><br><span class="line">/ # cat /etc/os-release</span><br><span class="line">NAME=&quot;Alpine Linux&quot;</span><br><span class="line">ID=alpine</span><br><span class="line">VERSION_ID=3.12.0</span><br><span class="line">PRETTY_NAME=&quot;Alpine Linux v3.12&quot;</span><br><span class="line">HOME_URL=&quot;https://alpinelinux.org/&quot;</span><br><span class="line">BUG_REPORT_URL=&quot;https://bugs.alpinelinux.org/&quot;</span><br><span class="line">/ # uname -a</span><br><span class="line">Linux 66b813b4c074 4.19.118-v7l+ #1311 SMP Mon Apr 27 14:26:42 BST 2020 armv7l Linux</span><br><span class="line">/ # exit</span><br><span class="line">pi@pi02:~ $ </span><br></pre></td></tr></table></figure>
<p>, where <strong>X=1, or 2, or 3, or 4</strong>.</p>
<p>Now, we can see <strong>docker0</strong> is <strong>UP</strong>. And
a wired connection is running as the additional interface
<strong>vethc6e4f97</strong>, which is actually <strong><span
style="color: red">just eth0 running in docker image <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/arm32v6/alpine/">arm32v6/alpine</a></span></strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ ip -c address</span><br><span class="line">...</span><br><span class="line">4: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    link/ether 02:42:0e:a2:30:0d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:eff:fea2:300d/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">6: vethc6e4f97@if5: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default </span><br><span class="line">    link/ether 3e:cf:32:5f:92:e8 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 169.254.108.166/16 brd 169.254.255.255 scope global noprefixroute vethc6e4f97</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::f8c1:6d4c:aa67:11af/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>
<h3 id="docker-login-docker-commit">3.3.2 Docker Login &amp; Docker
Commit</h3>
<p>In order to avoid issues about <strong>registry</strong>, we can run
<strong>docker login</strong>, so that a configuration file
<code>/home/pi/.docker/config.json</code> will also be automatically
generated.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker login</span><br><span class="line">Login with your Docker ID to push and pull images from Docker Hub. If you don&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.</span><br><span class="line">Username: jiapei100</span><br><span class="line">Password: </span><br><span class="line">WARNING! Your password will be stored unencrypted in /home/pi/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br><span class="line">pi@pi01:~ $ docker commit 561025c3974e</span><br><span class="line">sha256:4fb0183bf76ad8dd0e3620e90b162a58c7bebb135e0081454cee4b2ae40d6881</span><br></pre></td></tr></table></figure>
<h2 id="docker-info">3.4 <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>
Info</h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker info</span><br><span class="line">Client:</span><br><span class="line"> Debug Mode: false</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Containers: 1</span><br><span class="line">  Running: 1</span><br><span class="line">  Paused: 0</span><br><span class="line">  Stopped: 0</span><br><span class="line"> Images: 1</span><br><span class="line"> Server Version: 19.03.11</span><br><span class="line"> Storage Driver: overlay2</span><br><span class="line">  Backing Filesystem: extfs</span><br><span class="line">  Supports d_type: true</span><br><span class="line">  Native Overlay Diff: true</span><br><span class="line"> Logging Driver: json-file</span><br><span class="line"> Cgroup Driver: cgroupfs</span><br><span class="line"> Plugins:</span><br><span class="line">  Volume: local</span><br><span class="line">  Network: bridge host ipvlan macvlan null overlay</span><br><span class="line">  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog</span><br><span class="line"> Swarm: inactive</span><br><span class="line"> Runtimes: runc</span><br><span class="line"> Default Runtime: runc</span><br><span class="line"> Init Binary: docker-init</span><br><span class="line"> containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> init version: fec3683</span><br><span class="line"> Security Options:</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: default</span><br><span class="line"> Kernel Version: 4.19.118-v7l+</span><br><span class="line"> Operating System: Raspbian GNU/Linux 10 (buster)</span><br><span class="line"> OSType: linux</span><br><span class="line"> Architecture: armv7l</span><br><span class="line"> CPUs: 4</span><br><span class="line"> Total Memory: 7.729GiB</span><br><span class="line"> Name: pi01</span><br><span class="line"> ID: ONE2:WOIF:K6MY:KO77:2NMA:F3OC:S3UH:3ZV7:GTFE:APXH:DST2:RX2C</span><br><span class="line"> Docker Root Dir: /var/lib/docker</span><br><span class="line"> Debug Mode: false</span><br><span class="line"> Username: jiapei100</span><br><span class="line"> Registry: https://index.docker.io/v1/</span><br><span class="line"> Labels:</span><br><span class="line"> Experimental: false</span><br><span class="line"> Insecure Registries:</span><br><span class="line">  127.0.0.0/8</span><br><span class="line"> Live Restore Enabled: false</span><br><span class="line"></span><br><span class="line">WARNING: No swap limit support</span><br><span class="line">WARNING: No cpu cfs quota support</span><br><span class="line">WARNING: No cpu cfs period support</span><br></pre></td></tr></table></figure>
<h1 id="docker-swarm">4. <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a></h1>
<p>From the above command <code>docker info</code>, you can see clearly
that <code>Swarm: inactive</code>. <a
target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> now has a <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm Mode</a>. Now,
let's begin playing with <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>.</p>
<h2 id="docker-swarm-initialization-on-master">4.1 <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>
Initialization on Master</h2>
<p>If you've got both <strong>Wired</strong> and <strong>Wifi</strong>
enabled at the same time, without specifying with connection you are
going to use for initializing your <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a>, you'll
meet the following <strong>ERROR</strong> message.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker swarm init</span><br><span class="line">Error response from daemon: could not choose an IP address to advertise since this system has multiple addresses on different interfaces (192.168.1.253 on eth0 and 192.168.1.252 on wlan0) - specify one with --advertise-addr</span><br></pre></td></tr></table></figure>
<p>By specifying the argument <code>--advertise-addr</code>, <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a> can be
successfully initialized as:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker swarm init --advertise-addr 192.168.1.253</span><br><span class="line">Swarm initialized: current node (q7w8gwf9z6keb86rltvqx0f7z) is now a manager.</span><br><span class="line"></span><br><span class="line">To add a worker to this swarm, run the following command:</span><br><span class="line"></span><br><span class="line">    docker swarm join --token SWMTKN-1-5ivkmmwk8kfw92gs0emkmgzg78d4cwitqmi827ghikpajzvrjt-6i326au3t4ka3g1wa74n4rhe4 192.168.1.253:2377</span><br><span class="line"></span><br><span class="line">To add a manager to this swarm, run &#x27;docker swarm join-token manager&#x27; and follow the instructions.</span><br></pre></td></tr></table></figure>
<h2 id="docker-swarm-initialization-on-worker">4.2 <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>
Initialization on Worker</h2>
<p>On each <strong>worker</strong>, just run the following command to
join <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a>
created by <strong>master</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi0X:~ $ docker swarm join --token SWMTKN-1-5ivkmmwk8kfw92gs0emkmgzg78d4cwitqmi827ghikpajzvrjt-6i326au3t4ka3g1wa74n4rhe4 192.168.1.253:2377</span><br><span class="line">This node joined a swarm as a worker.</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=2, or 3, or 4</strong>.</p>
<h2 id="list-docker-nodes-in-leader">4.3 List Docker Nodes In
Leader</h2>
<p>Come back to <strong>pi01</strong>, namely, <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a>
<strong>master</strong>, also the <strong>leader</strong>, and list all
nodes:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker node ls</span><br><span class="line">ID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS      ENGINE VERSION</span><br><span class="line">q7w8gwf9z6keb86rltvqx0f7z *   pi01                Ready               Active              Leader              19.03.11</span><br><span class="line">sdiwqlawhfjobfsymmp38xivn     pi02                Ready               Active                                  19.03.11</span><br><span class="line">97h11ixu7nvce4p64td2o5one     pi03                Ready               Active                                  19.03.11</span><br><span class="line">tzrqp2fcj4yht20j84r83s5ps     pi04                Ready               Active                                  19.03.11</span><br></pre></td></tr></table></figure>
<p>In our test, we <strong>ONLY</strong> designate a single
<strong>leader</strong>. You can of course have the option to designate
multiple <strong>leader</strong>s by using command
<code>docker node promote</code>.</p>
<h2 id="swarmmode-test">4.4 Swarmmode Test</h2>
<p>Here, we test all Alex Ellis' <a
target="_blank" rel="noopener" href="https://github.com/alexellis/swarmmode-tests/tree/master/arm">Swarmmode
tests on ARM</a>.</p>
<h3 id="scenario-1---replicate-service">4.4.1 Scenario 1 - Replicate
Service</h3>
<p>Create the service on <strong>leader</strong> with 4 replicas on both
the <strong>master</strong> and 3 <strong>worker</strong>s.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --name ping1 --replicas=4 alexellis2/arm-pingcurl ping google.com</span><br><span class="line">63n31w2jyr6uuqg2670r985h6</span><br><span class="line">overall progress: 4 out of 4 tasks </span><br><span class="line">1/4: running   [==================================================&gt;] </span><br><span class="line">2/4: running   [==================================================&gt;] </span><br><span class="line">3/4: running   [==================================================&gt;] </span><br><span class="line">4/4: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<p>Then, we can list the created docker service on the
<strong>leader</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                            PORTS</span><br><span class="line">63n31w2jyr6u        ping1               replicated          4/4                 alexellis2/arm-pingcurl:latest   </span><br><span class="line">pi@pi01:~ $ docker service ps ping1</span><br><span class="line">ID                  NAME                IMAGE                            NODE                DESIRED STATE       CURRENT STATE         ERROR               PORTS</span><br><span class="line">xqjxus8ayetx        ping1.1             alexellis2/arm-pingcurl:latest   pi02                Running             Running 2 hours ago                       </span><br><span class="line">9lemwgls6hp6        ping1.2             alexellis2/arm-pingcurl:latest   pi03                Running             Running 2 hours ago                       </span><br><span class="line">b2y2muif9h2x        ping1.3             alexellis2/arm-pingcurl:latest   pi04                Running             Running 2 hours ago                       </span><br><span class="line">2uqbcrn0j7et        ping1.4             alexellis2/arm-pingcurl:latest   pi01                Running             Running 2 hours ago      </span><br></pre></td></tr></table></figure>
<h4 id="on-master">4.4.1.1 On Master</h4>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">7d72a046d2f4        alexellis2/arm-pingcurl:latest      &quot;ping google.com&quot;   41 minutes ago      Up 41 minutes                           ping1.4.2uqbcrn0j7ettnqndxfq6s44b</span><br><span class="line">71ef4e0107a7        arm32v6/alpine                      &quot;/bin/sh&quot;           9 hours ago         Up 9 hours                              great_saha</span><br><span class="line">pi@pi01:~ $ docker logs 7d72a046d2f4 | tail -n 10</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42461 ttl=119 time=5.98 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42462 ttl=119 time=5.53 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42463 ttl=119 time=5.69 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42464 ttl=119 time=5.98 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42465 ttl=119 time=5.97 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42466 ttl=119 time=5.65 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42467 ttl=119 time=6.22 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42468 ttl=119 time=6.33 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42469 ttl=119 time=9.93 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42470 ttl=119 time=5.82 ms</span><br></pre></td></tr></table></figure>
<h4 id="on-worker">4.4.1.2 On Worker</h4>
<p>This time, let's take <strong>pi04</strong> as our example:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~/Downloads $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">2520e1ea0ea8        alexellis2/arm-pingcurl:latest   &quot;ping google.com&quot;   44 minutes ago      Up 44 minutes                           ping1.3.b2y2muif9h2xa847rlibcv5nz</span><br><span class="line">746386fce983        arm32v6/alpine                   &quot;/bin/sh&quot;           11 days ago         Up 9 hours                              serene_chebyshev</span><br><span class="line">pi@pi04:~ $ docker logs 2520e1ea0ea8 | tail -n 10</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42491 ttl=119 time=7.22 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42492 ttl=119 time=9.10 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42493 ttl=119 time=6.97 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42494 ttl=119 time=6.76 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42495 ttl=119 time=6.74 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42496 ttl=119 time=7.03 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42497 ttl=119 time=7.06 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42498 ttl=119 time=6.17 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42499 ttl=119 time=6.74 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42500 ttl=119 time=6.23 ms</span><br></pre></td></tr></table></figure>
<h3 id="scenario-2---replicate-webservice">4.4.2 Scenario 2 - Replicate
Webservice</h3>
<p>In this example, we will create 2 replicas <strong>only</strong> for
fun.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --name hello1 --publish 3000:3000 --replicas=2 alexellis2/arm-alpinehello</span><br><span class="line">pe19as7evzmgi5qiq36z2pk63</span><br><span class="line">overall progress: 2 out of 2 tasks </span><br><span class="line">1/2: running   [==================================================&gt;] </span><br><span class="line">2/2: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<p>Again, let's list our created services.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                               PORTS</span><br><span class="line">pe19as7evzmg        hello1              replicated          2/2                 alexellis2/arm-alpinehello:latest   *:3000-&gt;3000/tcp</span><br><span class="line">63n31w2jyr6u        ping1               replicated          4/4                 alexellis2/arm-pingcurl:latest      </span><br><span class="line">pi@pi01:~ $ docker service ps hello1</span><br><span class="line">ID                  NAME                IMAGE                               NODE                DESIRED STATE       CURRENT STATE               ERROR               PORTS</span><br><span class="line">z9k8a10hkxqv        hello1.1            alexellis2/arm-alpinehello:latest   pi02                Running             Running about an hour ago                       </span><br><span class="line">7xuhpuru0r5u        hello1.2            alexellis2/arm-alpinehello:latest   pi01                Running             Running about an hour ago        </span><br></pre></td></tr></table></figure>
<h4 id="on-master-and-worker-pi02">4.4.2.1 On Master and Worker
pi02</h4>
<p>On <strong>master</strong> <strong>pi01</strong> and
<strong>worker</strong> <strong>pi02</strong>, there are 3 running
<strong>docker images</strong>:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker images</span><br><span class="line">REPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm32v6/alpine               latest              3ddac682c5b6        3 weeks ago         4.77MB</span><br><span class="line">alexellis2/arm-pingcurl      &lt;none&gt;              86a225e3a07b        3 years ago         6.19MB</span><br><span class="line">alexellis2/arm-alpinehello   &lt;none&gt;              2ad6d1f9b6ae        3 years ago         33.8MB</span><br></pre></td></tr></table></figure>
<p>, and 3 running <strong>docker container</strong>s.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">918e211b5784        alexellis2/arm-alpinehello:latest   &quot;npm start&quot;         22 minutes ago      Up 22 minutes       3000/tcp            hello1.1.z9k8a10hkxqvsovuu6omw4axy</span><br><span class="line">a92acd03471a        alexellis2/arm-pingcurl:latest      &quot;ping google.com&quot;   About an hour ago   Up About an hour                        ping1.1.xqjxus8ayetxiip2cmw4fm54x</span><br><span class="line">66b813b4c074        arm32v6/alpine                      &quot;/bin/sh&quot;           11 hours ago        Up 11 hours                             intelligent_gates</span><br></pre></td></tr></table></figure>
<h4 id="on-worker-pi03-and-worker-pi04">4.4.2.2 On Worker pi03 and
Worker pi04</h4>
<p>On <strong>master</strong> <strong>pi03</strong> and
<strong>worker</strong> <strong>pi04</strong>, there are
<strong>only</strong> 2 running <strong>docker images</strong>:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ docker images</span><br><span class="line">REPOSITORY                TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm32v6/alpine            latest              3ddac682c5b6        3 weeks ago         4.77MB</span><br><span class="line">alexellis2/arm-pingcurl   &lt;none&gt;              86a225e3a07b        3 years ago         6.19MB</span><br></pre></td></tr></table></figure>
<p>, and 3 running <strong>docker container</strong>s.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">5670e6944779        alexellis2/arm-pingcurl:latest   &quot;ping google.com&quot;   About an hour ago   Up About an hour                        ping1.2.9lemwgls6hp6wnpyg14aeyeva</span><br><span class="line">f3d1670dfc7a        arm32v6/alpine                   &quot;/bin/sh&quot;           11 days ago         Up 9 hours                              infallible_cerf</span><br></pre></td></tr></table></figure>
<h4 id="test-the-webservice">4.4.2.3 Test The Webservice</h4>
<p>Finally, let's test the webservice:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $</span><br></pre></td></tr></table></figure>
<p>Since service <code>alexellis2/arm-alpinehello</code> is
<strong>only</strong> running on <strong>master</strong>
<strong>pi01</strong> and <strong>worker</strong> <strong>pi02</strong>,
let's just check respective <strong>docker logs</strong> in the
following:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker logs b2c313ac8200</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">hello@1.0.0 start /root</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node index.js</span></span><br><span class="line"></span><br><span class="line">I&#x27;m listening.</span><br></pre></td></tr></table></figure>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker logs 918e211b5784</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">hello@1.0.0 start /root</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">node index.js</span></span><br><span class="line"></span><br><span class="line">I&#x27;m listening.</span><br></pre></td></tr></table></figure>
<h3 id="scenario-3---inter-container-communication">4.4.3 Scenario 3 -
Inter-Container Communication</h3>
<p>We <strong>first</strong> create a distributed subnetwork named
<strong>armnet</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker network create --driver overlay --subnet 20.0.14.0/24 armnet</span><br><span class="line">qzcwsh0y0fx22sw7088luxybr</span><br></pre></td></tr></table></figure>
<p>Afterwards, a redis database service is created and runs on a
<strong>single</strong> node, here, <strong>master</strong>
<strong>pi01</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --replicas=1 --network=armnet --name redis alexellis2/redis-arm:v6</span><br><span class="line">kmk663ad1t88nfjf567tkctmr</span><br><span class="line">overall progress: 1 out of 1 tasks </span><br><span class="line">1/1: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<p>Finally, 2 replicas of docker service <strong>counter</strong> are
created in this created subnetwork <strong>armnet</strong> and listening
to port <strong>3333</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --name counter --replicas=2 --network=armnet --publish 3333:3333 alexellis2/arm_redis_counter</span><br><span class="line">ivdubq3vzdil3r2i5z0r1d2va</span><br><span class="line">overall progress: 2 out of 2 tasks </span><br><span class="line">1/2: running   [==================================================&gt;] </span><br><span class="line">2/2: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<p>Now, let's list all created docker service on the leader.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                                 PORTS</span><br><span class="line">ivdubq3vzdil        counter             replicated          2/2                 alexellis2/arm_redis_counter:latest   *:3333-&gt;3333/tcp</span><br><span class="line">pe19as7evzmg        hello1              replicated          2/2                 alexellis2/arm-alpinehello:latest     *:3000-&gt;3000/tcp</span><br><span class="line">63n31w2jyr6u        ping1               replicated          4/4                 alexellis2/arm-pingcurl:latest        </span><br><span class="line">kmk663ad1t88        redis               replicated          1/1                 alexellis2/redis-arm:v6               </span><br><span class="line">pi@pi01:~ $ docker service ps counter</span><br><span class="line">ID                  NAME                IMAGE                                 NODE                DESIRED STATE       CURRENT STATE               ERROR               PORTS</span><br><span class="line">ip6z9yacmjbz        counter.1           alexellis2/arm_redis_counter:latest   pi04                Running             Running about an hour ago                       </span><br><span class="line">nzhx6q1vugm9        counter.2           alexellis2/arm_redis_counter:latest   pi02                Running             Running about an hour ago                       </span><br><span class="line">pi@pi01:~ $ docker service ps redis</span><br><span class="line">ID                  NAME                IMAGE                     NODE                DESIRED STATE       CURRENT STATE         ERROR               PORTS</span><br><span class="line">z1tqve759bh6        redis.1             alexellis2/redis-arm:v6   pi03                Running             Running 2 hours ago                       </span><br></pre></td></tr></table></figure>
<p>It's interesting that this time: - the 2 replicas of service
<strong>counter</strong> are automatically created on node
<strong>pi02</strong> and <strong>pi04</strong> - the unique replica of
service <strong>redis</strong> is allocated for node
<strong>pi03</strong></p>
<p><span style="color:red">I've got no idea how the created services are
distributed to different nodes. The <strong>ONLY</strong> thing I can do
is to run <code>docker ps</code> and show the distribution
results</span>:</p>
<ul>
<li><p><strong>pi01</strong> <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">b2c313ac8200        alexellis2/arm-alpinehello:latest   &quot;npm start&quot;         3 hours ago         Up 3 hours          3000/tcp            hello1.2.7xuhpuru0r5ujkyrp4g558ehu</span><br><span class="line">7d72a046d2f4        alexellis2/arm-pingcurl:latest      &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.4.2uqbcrn0j7ettnqndxfq6s44b</span><br><span class="line">71ef4e0107a7        arm32v6/alpine                      &quot;/bin/sh&quot;           11 hours ago        Up 11 hours                             great_saha</span><br></pre></td></tr></table></figure></p></li>
<li><p><strong>pi02</strong> <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                                 COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">da2452b474af        alexellis2/arm_redis_counter:latest   &quot;node ./app.js&quot;     2 hours ago         Up 2 hours          3000/tcp            counter.2.nzhx6q1vugm9w7ouqyots5x43</span><br><span class="line">918e211b5784        alexellis2/arm-alpinehello:latest     &quot;npm start&quot;         3 hours ago         Up 3 hours          3000/tcp            hello1.1.z9k8a10hkxqvsovuu6omw4axy</span><br><span class="line">a92acd03471a        alexellis2/arm-pingcurl:latest        &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.1.xqjxus8ayetxiip2cmw4fm54x</span><br><span class="line">66b813b4c074        arm32v6/alpine                        &quot;/bin/sh&quot;           14 hours ago        Up 14 hours                             intelligent_gates</span><br></pre></td></tr></table></figure></p></li>
<li><p><strong>pi03</strong> <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">5fd9a0b8dd08        alexellis2/redis-arm:v6          &quot;redis-server&quot;      2 hours ago         Up 2 hours          6379/tcp            redis.1.z1tqve759bh6hdw2udnk6hh7t</span><br><span class="line">5670e6944779        alexellis2/arm-pingcurl:latest   &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.2.9lemwgls6hp6wnpyg14aeyeva</span><br><span class="line">f3d1670dfc7a        arm32v6/alpine                   &quot;/bin/sh&quot;           12 days ago         Up 11 hours                             infallible_cerf</span><br></pre></td></tr></table></figure></p></li>
<li><p><strong>pi04</strong> <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                                 COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">aca52fdaf2d4        alexellis2/arm_redis_counter:latest   &quot;node ./app.js&quot;     2 hours ago         Up 2 hours          3000/tcp            counter.1.ip6z9yacmjbzjaeax45tuh2oa</span><br><span class="line">2520e1ea0ea8        alexellis2/arm-pingcurl:latest        &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.3.b2y2muif9h2xa847rlibcv5nz</span><br><span class="line">746386fce983        arm32v6/alpine                        &quot;/bin/sh&quot;           12 days ago         Up 11 hours                             serene_chebyshev</span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>Clearly, - <strong>service</strong>
<code>alexellis2/arm_redis_counter</code> is running on both nodes
<strong>pi02</strong> and <strong>pi04</strong>, <strong>but
not</strong> on nodes <strong>pi01</strong> or <strong>pi03</strong> -
<strong>service</strong> <code>alexellis2/arm-alpinehello</code> is
running on both nodes <strong>pi01</strong> and <strong>pi02</strong>,
<strong>but not</strong> on nodes <strong>pi03</strong> or
<strong>pi04</strong> - <strong>service</strong>
<code>alexellis2/arm-pingcurl</code> is running on all 4 nodes
<strong>pi01</strong>, <strong>pi02</strong>. <strong>pi03</strong>, and
<strong>pi04</strong></p>
<p><span style="color:red">So far, <code>curl localhost:3333/incr</code>
is NOT running. Why?</span></p>
<p><span style="color:red"><strong>What's more</strong>:</span> -
without touching anything for a whole night, <strong>service</strong>
<code>alexellis2/arm_redis_counter</code> seems to automatically
<strong>shundown</strong> with the <strong>ERROR</strong>:
<code>task: non-zero exit (1)</code> for multiple times. -
<code>alexellis2/arm_redis_counter</code> is now running on nodes
<strong>master</strong> <strong>pi01</strong> and
<strong>worker</strong> <strong>pi04</strong>, instead of original
<strong>master</strong> <strong>pi02</strong> and
<strong>worker</strong> <strong>pi04</strong>. - it's interesting that
<code>alexellis2/redis-arm</code> is still running on node
<strong>pi03</strong>.</p>
<h2 id="docker-swarm-visualizer">4.5 <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>
Visualizer</h2>
<p>Our final topie of this blog is the <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/dockersamples/visualizer">Docker Swarm
Visualizer</a>. Official <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>
documentation has provided the details <a
target="_blank" rel="noopener" href="https://hub.docker.com/r/dockersamples/visualizer">Docker Swarm
Visualizer</a>, and <a
target="_blank" rel="noopener" href="https://github.com/dockersamples/docker-swarm-visualizer">Docker
Swarm Visualizer Source Code</a> has also been provided on Github.</p>
<h3 id="on-leader">4.5.1 On Leader</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker run -it -d -p 8080:8080 -v /var/run/docker.sock:/var/run/docker.sock dockersamples/visualizer</span><br><span class="line">Unable to find image &#x27;dockersamples/visualizer:latest&#x27; locally</span><br><span class="line">latest: Pulling from dockersamples/visualizer</span><br><span class="line">cd784148e348: Pull complete </span><br><span class="line">f6268ae5d1d7: Pull complete </span><br><span class="line">97eb9028b14b: Pull complete </span><br><span class="line">9975a7a2a3d1: Pull complete </span><br><span class="line">ba903e5e6801: Pull complete </span><br><span class="line">7f034edb1086: Pull complete </span><br><span class="line">cd5dbf77b483: Pull complete </span><br><span class="line">5e7311667ddb: Pull complete </span><br><span class="line">687c1072bfcb: Pull complete </span><br><span class="line">aa18e5d3472c: Pull complete </span><br><span class="line">a3da1957bd6b: Pull complete </span><br><span class="line">e42dbf1c67c4: Pull complete </span><br><span class="line">5a18b01011d2: Pull complete </span><br><span class="line">Digest: sha256:54d65cbcbff52ee7d789cd285fbe68f07a46e3419c8fcded437af4c616915c85</span><br><span class="line">Status: Downloaded newer image for dockersamples/visualizer:latest</span><br><span class="line">910e83cd7ba4de02be370f4b0280d7f7fecb9d80ed8578f3238f68beab28aac7</span><br><span class="line">pi@pi01:~ $ docker service create \</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">  --name=viz \</span></span><br><span class="line"><span class="language-bash">&gt;   --publish=8080:8080/tcp \</span></span><br><span class="line"><span class="language-bash">&gt;   --constraint=node.role==manager \</span></span><br><span class="line"><span class="language-bash">&gt;   --mount=<span class="built_in">type</span>=<span class="built_in">bind</span>,src=/var/run/docker.sock,dst=/var/run/docker.sock \</span></span><br><span class="line"><span class="language-bash">&gt;   alexellis2/visualizer-arm:latest</span></span><br><span class="line">61tr8x3conmamkekzp6cqro6a</span><br><span class="line">overall progress: 1 out of 1 tasks </span><br><span class="line">1/1: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>
<h3 id="on-remote-laptop">4.5.2 On Remote Laptop</h3>
<p>Now, let's visualize our <a
target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a>
beautifully from laptop by entering the <strong>leader</strong>'s IP
address at port <strong>8080</strong>:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/docker_swarm_visualizer.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/docker_swarm_visualizer.png"
alt="Docker Swarm Visualizer on My Raspberry Pi Cluster" /></a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/06/16/SBCs/MCU/microbit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/16/SBCs/MCU/microbit/" class="post-title-link" itemprop="url">micro:bit</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-06-16 23:25:59" itemprop="dateCreated datePublished" datetime="2020-06-16T23:25:59-07:00">2020-06-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 00:55:29" itemprop="dateModified" datetime="2024-09-30T00:55:29-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/MCU/" itemprop="url" rel="index"><span itemprop="name">MCU</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hmmm... Happened to get this chance of playing with <a
target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> for fun, then take this
opportunity to write a blog. It seems this BBC products is very
convenient. Let's just <strong>plug and play</strong>.</p>
<h1 id="introduction">1. Introduction</h1>
<h2 id="lsusb">1.1 lsusb</h2>
<p>Just plug in and <code>lsusb</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">Bus 001 Device 008: ID 0d28:0204 NXP LPC1768</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h2 id="hardware-specification">1.2 Hardware Specification</h2>
<p>Refer to <a target="_blank" rel="noopener" href="https://tech.microbit.org/hardware/">micro:bit
Hardware Specification</a></p>
<h2 id="user-guide-overview">1.3 User Guide Overview</h2>
<p>Refer to <a
target="_blank" rel="noopener" href="https://microbit.org/get-started/user-guide/overview/">micro:bit
User Guide Overview</a></p>
<h1 id="tutorials-and-configurations">2. Tutorials and
Configurations</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://makecode.microbit.org/tutorials">Makecode
Tutorials</a> - this so called <strong>makecode</strong> looks very
similar to <a target="_blank" rel="noopener" href="https://developers.google.com/blockly/">Google
Blockly</a></li>
<li><a target="_blank" rel="noopener" href="https://microbit-micropython.readthedocs.io/">BBC micro:bit
MicroPython</a> - this seems to be <strong>BBC Official
tutorial</strong>, which adopts <strong>Python</strong> as the
programming language</li>
<li><a target="_blank" rel="noopener" href="https://microbit-challenges.readthedocs.io/">UCL’s BBC
Micro:bit Tutorials</a> - this is a <a
target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> tutorial from <a
target="_blank" rel="noopener" href="https://www.ucl.ac.uk/">University College London</a>, but the
<span style="color:red">ONLY defect</span> is: it seems it's developed
under Windows? Please check <a
target="_blank" rel="noopener" href="https://microbit-challenges.readthedocs.io/en/latest/misc/cmd.html">UCL’s
BBC Micro:bit Tutorials - Command Line Interface</a>.</li>
<li><a
target="_blank" rel="noopener" href="https://lancaster-university.github.io/microbit-docs/">Lancaster
University micro:bit Runtime</a> - this seems to be a little
complicated, but adopts my favorite coding language:
<strong>C/C++</strong></li>
</ul>
<p>Since I'm <strong>NOT</strong> a professional
<strong>Makecode</strong> coder, I'll run a couple of simple <a
target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> projects using either
<strong>Python</strong> or <strong>C/C++</strong>.</p>
<div style="text-align: center; font-size: 3em;">
<pre><code>😊
😔</code></pre>
</div>
<h1 id="display-hellow-world-using-microbit-micropython">3. Display
<code>Hellow World</code> Using <a
target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> <a
target="_blank" rel="noopener" href="https://micropython.org/">MicroPython</a></h1>
<h2 id="required-configuration-on-your-host">3.1 Required Configuration
on Your Host</h2>
<p>Please refer to <a
target="_blank" rel="noopener" href="https://microbit-micropython.readthedocs.io/en/latest/devguide/installation.html#microbit-linux">micro:bit
MicroPython Installation</a></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo add-apt-repository -y ppa:team-gcc-arm-embedded</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo add-apt-repository -y ppa:pmiller-opensource/ppa</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo apt-get update</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo apt-get install gcc-arm-none-eabi srecord libssl-dev</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pip3 install yotta</span></span><br></pre></td></tr></table></figure>
<p>and now ,let's check <strong>yotta</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  ✔  pip show yotta </span><br><span class="line">  ~ </span><br><span class="line">Name: yotta</span><br><span class="line">Version: 0.20.5</span><br><span class="line">Summary: Re-usable components for embedded software.</span><br><span class="line">Home-page: https://github.com/ARMmbed/yotta</span><br><span class="line">Author: James Crosby</span><br><span class="line">Author-email: James.Crosby@arm.com</span><br><span class="line">License: Apache-2.0</span><br><span class="line">Location: /home/longervision/.local/lib/python3.6/site-packages</span><br><span class="line">Requires: jsonschema, PyJWT, PyGithub, mbed-test-wrapper, Jinja2, valinor, requests, intelhex, jsonpointer, hgapi, colorama, argcomplete, semantic-version, cryptography, pathlib, certifi</span><br><span class="line">Required-by: </span><br></pre></td></tr></table></figure>
<h2 id="connect-microbit">3.2 Connect <a
target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a></h2>
<p>Please refer to <a
target="_blank" rel="noopener" href="https://microbit-micropython.readthedocs.io/en/latest/devguide/repl.html">micro:bit
MicroPython Dev Guide REPL</a>, and now let's connect <a
target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> using <a
target="_blank" rel="noopener" href="https://linux.die.net/man/8/picocom">picocom</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"> 12  ✔  sudo picocom /dev/ttyACM0 -b 115200                                                             ~ </span><br><span class="line">picocom v2.2</span><br><span class="line"></span><br><span class="line">port is        : /dev/ttyACM0</span><br><span class="line">flowcontrol    : none</span><br><span class="line">baudrate is    : 115200</span><br><span class="line">parity is      : none</span><br><span class="line">databits are   : 8</span><br><span class="line">stopbits are   : 1</span><br><span class="line">escape is      : C-a</span><br><span class="line">local echo is  : no</span><br><span class="line">noinit is      : no</span><br><span class="line">noreset is     : no</span><br><span class="line">nolock is      : no</span><br><span class="line">send_cmd is    : sz -vv</span><br><span class="line">receive_cmd is : rz -vv -E</span><br><span class="line">imap is        : </span><br><span class="line">omap is        : </span><br><span class="line">emap is        : crcrlf,delbs,</span><br><span class="line"></span><br><span class="line">Type [C-a] [C-h] to see available commands</span><br><span class="line"></span><br><span class="line">Terminal ready</span><br><span class="line"></span><br><span class="line">*** Picocom commands (all prefixed by [C-a])</span><br><span class="line"></span><br><span class="line">*** [C-x] : Exit picocom</span><br><span class="line">*** [C-q] : Exit without reseting serial port</span><br><span class="line">*** [C-b] : Set baudrate</span><br><span class="line">*** [C-u] : Increase baudrate (baud-up)</span><br><span class="line">*** [C-d] : Decrease baudrate (baud-down)</span><br><span class="line">*** [C-i] : Change number of databits</span><br><span class="line">*** [C-j] : Change number of stopbits</span><br><span class="line">*** [C-f] : Change flow-control mode</span><br><span class="line">*** [C-y] : Change parity mode</span><br><span class="line">*** [C-p] : Pulse DTR</span><br><span class="line">*** [C-t] : Toggle DTR</span><br><span class="line">*** [C-|] : Send break</span><br><span class="line">*** [C-c] : Toggle local echo</span><br><span class="line">*** [C-s] : Send file</span><br><span class="line">*** [C-r] : Receive file</span><br><span class="line">*** [C-v] : Show port settings</span><br><span class="line">*** [C-h] : Show this message</span><br></pre></td></tr></table></figure>
<p><span style="color:red">Oh, my god... why can't I just code directly
here from within the console??? That's ABSOLUTELY NOT my
style.</span></p>
<h2 id="code-run">3.3 Code &amp; Run</h2>
<p>The <strong>VERY FIRST</strong> demo is <strong>ALWAYS</strong>
displaying <code>Hello World</code>. To fulfill this task, please refer
to <a
target="_blank" rel="noopener" href="https://support.microbit.org/support/solutions/articles/19000013986-how-do-i-transfer-my-code-onto-the-micro-bit-via-usb">How
do I transfer my code onto the micro:bit via USB</a>.</p>
<p><span style="color:red"> As mentioned above, the UNACCEPTABLE thing
is: it seems we have to use <a
target="_blank" rel="noopener" href="https://python.microbit.org/">micro:bit Python IDE</a> for python
coding for micro:bit?????</span> Anyway, my generated
<strong>HEX</strong> of <code>Hello World</code> is <a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/helloworld.hex">here</a>.</p>
<h1 id="flash-lancaster-microbit-samples-using-yotta">4. Flash <a
target="_blank" rel="noopener" href="https://github.com/lancaster-university/microbit-samples">Lancaster
microbit-samples</a> Using <a
target="_blank" rel="noopener" href="https://yottabuild.org/">Yotta</a></h1>
<p>Please strictly follow <a
target="_blank" rel="noopener" href="https://lancaster-university.github.io/microbit-docs/offline-toolchains/#installation-on-linux">Lancaster
University micro:bit Yotta</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"> 141  ✔  cd microbit-samples/</span><br><span class="line"> 142   master  ✔  ls</span><br><span class="line">debugOnVisualStudioCode.gif*  LICENSE*  module.json*  README.md*  source/</span><br><span class="line"> 143   master  ✔  yt target bbc-microbit-classic-gcc</span><br><span class="line">info: get versions for bbc-microbit-classic-gcc</span><br><span class="line">info: download bbc-microbit-classic-gcc@0.2.3 from the public module registry</span><br><span class="line">info: get versions for mbed-gcc</span><br><span class="line">info: download mbed-gcc@0.1.3 from the public module registry</span><br><span class="line"> 144   master  ✔  yt build</span><br><span class="line">info: get versions for microbit</span><br><span class="line">info: download microbit@v2.1.1 from GitHub lancaster-university/microbit</span><br><span class="line">info: get versions for microbit-dal</span><br><span class="line">info: download microbit-dal@v2.1.1 from GitHub lancaster-university/microbit-dal</span><br><span class="line">info: get versions for mbed-classic</span><br><span class="line">info: download mbed-classic@microbit_hfclk+mb6 from GitHub lancaster-university/mbed-classic</span><br><span class="line">info: get versions for ble</span><br><span class="line">info: download ble@v2.5.0+mb3 from GitHub lancaster-university/BLE_API</span><br><span class="line">info: get versions for ble-nrf51822</span><br><span class="line">info: download ble-nrf51822@v2.5.0+mb7 from GitHub lancaster-university/nRF51822</span><br><span class="line">info: get versions for nrf51-sdk</span><br><span class="line">info: download nrf51-sdk@v2.2.0+mb4 from GitHub lancaster-university/nrf51-sdk</span><br><span class="line">info: generate for target: bbc-microbit-classic-gcc 0.2.3 at ....../microbit-samples/yotta_targets/bbc-microbit-classic-gcc</span><br><span class="line">CMake Deprecation Warning at CMakeLists.txt:16 (cmake_policy):</span><br><span class="line">  The OLD behavior for policy CMP0017 will be removed from a future version</span><br><span class="line">  of CMake.</span><br><span class="line"></span><br><span class="line">  The cmake-policies(7) manual explains that the OLD behaviors of all</span><br><span class="line">  policies are deprecated and that a policy should be set to OLD only under</span><br><span class="line">  specific short-term circumstances.  Projects should be ported to the NEW</span><br><span class="line">  behavior and not rely on setting a policy to OLD.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CMake Deprecation Warning at /usr/local/share/cmake-3.17/Modules/CMakeForceCompiler.cmake:75 (message):</span><br><span class="line">  The CMAKE_FORCE_C_COMPILER macro is deprecated.  Instead just set</span><br><span class="line">  CMAKE_C_COMPILER and allow CMake to identify the compiler.</span><br><span class="line">Call Stack (most recent call first):</span><br><span class="line">  ....../microbit-samples/yotta_targets/mbed-gcc/CMake/toolchain.cmake:78 (cmake_force_c_compiler)</span><br><span class="line">  toolchain.cmake:8 (include)</span><br><span class="line">  /usr/local/share/cmake-3.17/Modules/CMakeDetermineSystem.cmake:93 (include)</span><br><span class="line">  CMakeLists.txt:76 (project)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CMake Deprecation Warning at /usr/local/share/cmake-3.17/Modules/CMakeForceCompiler.cmake:89 (message):</span><br><span class="line">  The CMAKE_FORCE_CXX_COMPILER macro is deprecated.  Instead just set</span><br><span class="line">  CMAKE_CXX_COMPILER and allow CMake to identify the compiler.</span><br><span class="line">Call Stack (most recent call first):</span><br><span class="line">  ....../microbit-samples/yotta_targets/mbed-gcc/CMake/toolchain.cmake:79 (cmake_force_cxx_compiler)</span><br><span class="line">  toolchain.cmake:8 (include)</span><br><span class="line">  /usr/local/share/cmake-3.17/Modules/CMakeDetermineSystem.cmake:93 (include)</span><br><span class="line">  CMakeLists.txt:76 (project)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">GCC version is: 6.3.1</span><br><span class="line">-- The ASM compiler identification is GNU</span><br><span class="line">-- Found assembler: /usr/bin/arm-none-eabi-gcc</span><br><span class="line">suppressing warnings from ble-nrf51822</span><br><span class="line">suppressing warnings from nrf51-sdk</span><br><span class="line">suppressing ALL warnings from mbed-classic, ble, ble-nrf51822 &amp; nrf51-sdk</span><br><span class="line">-- Configuring done</span><br><span class="line">-- Generating done</span><br><span class="line">-- Build files have been written to: ....../microbit-samples/build/bbc-microbit-classic-gcc</span><br><span class="line">[112/172] Building CXX object ym/microbit-dal/source/CMakeFiles/microbit-dal.dir/core/MicroBitHeapAllocator.cpp.o</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitHeapAllocator.cpp: In function &#x27;void free(void*)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitHeapAllocator.cpp:342:13: warning: this &#x27;if&#x27; clause does not guard... [-Wmisleading-indentation]</span><br><span class="line">             if (*cb == 0 || *cb &amp; MICROBIT_HEAP_BLOCK_FREE)</span><br><span class="line">             ^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitHeapAllocator.cpp:345:10: note: ...this statement, but the latter is misleadingly indented as if it is guarded by the &#x27;if&#x27;</span><br><span class="line">          *cb |= MICROBIT_HEAP_BLOCK_FREE;</span><br><span class="line">          ^</span><br><span class="line">[120/172] Building CXX object ym/microbit-dal/source/CMakeFiles/microbit-dal.dir/core/MicroBitFiber.cpp.o</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp: In function &#x27;void scheduler_init(EventModel&amp;)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp:189:5: warning: this &#x27;if&#x27; clause does not guard... [-Wmisleading-indentation]</span><br><span class="line">     if (fiber_scheduler_running())</span><br><span class="line">     ^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp:194:2: note: ...this statement, but the latter is misleadingly indented as if it is guarded by the &#x27;if&#x27;</span><br><span class="line">  messageBus = &amp;_messageBus;</span><br><span class="line">  ^~~~~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp: In function &#x27;int fiber_wait_for_event(uint16_t, uint16_t)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp:388:5: warning: this &#x27;if&#x27; clause does not guard... [-Wmisleading-indentation]</span><br><span class="line">     if(ret == MICROBIT_OK)</span><br><span class="line">     ^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp:391:2: note: ...this statement, but the latter is misleadingly indented as if it is guarded by the &#x27;if&#x27;</span><br><span class="line">  return ret;</span><br><span class="line">  ^~~~~~</span><br><span class="line">[159/172] Building CXX object ym/microbit-dal/source/CMakeFiles/microbit-dal.dir/bluetooth/MicroBitIOPinService.cpp.o</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp: In member function &#x27;void MicroBitIOPinService::onDataWritten(const GattWriteCallbackParams*)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:179:42: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 io.pin[i].getDigitalValue();</span><br><span class="line">                 ~~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:182:41: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 io.pin[i].getAnalogValue();</span><br><span class="line">                 ~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:199:41: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                io.pin[i].getDigitalValue();</span><br><span class="line">                ~~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:202:40: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                io.pin[i].getAnalogValue();</span><br><span class="line">                ~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:224:43: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 io.pin[pin].setAnalogValue(value);</span><br><span class="line">                 ~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:225:46: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 io.pin[pin].setAnalogPeriodUs(period);</span><br><span class="line">                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:245:51: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                  io.pin[data-&gt;pin].setDigitalValue(data-&gt;value);</span><br><span class="line">                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:247:50: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                  io.pin[data-&gt;pin].setAnalogValue(data-&gt;value == 255 ? 1023 : data-&gt;value &lt;&lt; 2);</span><br><span class="line">                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp: In member function &#x27;void MicroBitIOPinService::updateBLEInputs(bool)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:136:50: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 value = io.pin[i].getDigitalValue();</span><br><span class="line">                         ~~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:138:49: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 value = io.pin[i].getAnalogValue() &gt;&gt; 2;</span><br><span class="line">                         ~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">[172/172] Linking CXX executable source/microbit-samples</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(atexit_arm.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(new_opv.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(del_opv.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(del_op.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(new_op.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(new_handler.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line"> 145   master  ✘  cp ./build/bbc-microbit-classic-gcc/source/microbit-samples-combined.hex /media/longervision/MICROBIT</span><br><span class="line"> 146   master  ✔  </span><br></pre></td></tr></table></figure>
<h1 id="projects-field">5. Projects Field</h1>
<p>Please refer to <a
target="_blank" rel="noopener" href="https://microbit.org/projects/make-it-code-it/?filters=python">micro:bit
Official Python Projects</a>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/06/07/Cloud/cluster-rpi-kubernetes-docker-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/07/Cloud/cluster-rpi-kubernetes-docker-1/" class="post-title-link" itemprop="url">A Cluster of Raspberry Pis (1) - Configuration</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-06-07 00:00:00" itemprop="dateCreated datePublished" datetime="2020-06-07T00:00:00-07:00">2020-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 00:57:59" itemprop="dateModified" datetime="2024-09-30T00:57:59-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Profile</th>
<th style="text-align: center;">Frontal</th>
<th style="text-align: center;">Top</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/profile.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/profile.jpg"
alt="Profile View" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/front.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/front.jpg"
alt="Frontal View" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/top.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/top.jpg"
alt="Top View" /></a></td>
</tr>
</tbody>
</table>
<p>Today is Sunday. Vancouver is sunny. It's been quite a while that I
haven't written anything. It took me a couple of weeks to have my tax
reported finally. Hmmm... Anyway, finally, I've got some time to talk
about <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Supercomputer">Supercomputer</a>:</p>
<ul>
<li>a cluster of 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry
Pi</a>s. In my case:
<ul>
<li>1 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry
Pi 4 Model B Rev 1.4 8GB</a>, installed with <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a></li>
<li>1 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry
Pi 4 Model B Rev 1.1 4GB</a>, installed with <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry
Pi OS (32-bit) with desktop 2020-05-27</a></li>
<li>2 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry
Pi 3 Model B Rev 1.2 1GB</a>, installed with <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry
Pi OS (32-bit) with desktop 2020-05-27</a></li>
</ul></li>
<li><a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></li>
<li><a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a></li>
</ul>
<p>This is going to be <strong>a series of 3 blogs</strong>.</p>
<h1 id="compare-all-raspberry-pi-variants">1. Compare All <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a> Variants</h1>
<p>Refer to: <a
target="_blank" rel="noopener" href="https://socialcompare.com/en/comparison/raspberrypi-models-comparison">Comparison
of All Raspberry Pi Variants</a>.</p>
<h1 id="four-raspberry-pis">2. Four <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s</h1>
<p>Here, please guarantee the 4 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s are respectively
designated with the following hostnames:</p>
<ul>
<li><strong>pi01</strong></li>
<li><strong>pi02</strong></li>
<li><strong>pi03</strong></li>
<li><strong>pi04</strong></li>
</ul>
<h2
id="pi01-raspberry-pi-4-model-b-rev-1.4-8gb-with-raspberry-pi-os-32-bit-with-desktop-2020-05-27">2.1
pi01: <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry
Pi 4 Model B Rev 1.4 8GB</a> with <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry
Pi OS (32-bit) with desktop 2020-05-27</a></h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ hostname</span><br><span class="line">pi01</span><br><span class="line">pi@pi01:~ $ uname -a</span><br><span class="line">Linux pi01 4.19.118-v7l+ #1311 SMP Mon Apr 27 14:26:42 BST 2020 armv7l GNU/Linux</span><br><span class="line">pi@pi01:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi01:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:        8104404 kB</span><br><span class="line">MemFree:         7275484 kB</span><br><span class="line">MemAvailable:    7712212 kB</span><br><span class="line">Buffers:           41552 kB</span><br><span class="line">Cached:           592328 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           326536 kB</span><br><span class="line">Inactive:         373352 kB</span><br><span class="line">Active(anon):      65820 kB</span><br><span class="line">Inactive(anon):     9980 kB</span><br><span class="line">Active(file):     260716 kB</span><br><span class="line">Inactive(file):   363372 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">HighTotal:       7405568 kB</span><br><span class="line">HighFree:        6735192 kB</span><br><span class="line">LowTotal:         698836 kB</span><br><span class="line">LowFree:          540292 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                 0 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         66020 kB</span><br><span class="line">Mapped:            70740 kB</span><br><span class="line">Shmem:             11760 kB</span><br><span class="line">Slab:              68352 kB</span><br><span class="line">SReclaimable:      35736 kB</span><br><span class="line">SUnreclaim:        32616 kB</span><br><span class="line">KernelStack:        1320 kB</span><br><span class="line">PageTables:         1964 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:     4154596 kB</span><br><span class="line">Committed_AS:     498204 kB</span><br><span class="line">VmallocTotal:     245760 kB</span><br><span class="line">VmallocUsed:           0 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              656 kB</span><br><span class="line">CmaTotal:         262144 kB</span><br><span class="line">CmaFree:          223228 kB</span><br><span class="line">pi@pi01:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: d03114</span><br><span class="line">Serial		: 10000000bc6e6e05</span><br><span class="line">Model		: Raspberry Pi 4 Model B Rev 1.4</span><br></pre></td></tr></table></figure>
<p>In fact, at the very beginning, I used to try <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a>, as following:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ hostname</span><br><span class="line">pi01</span><br><span class="line">pi@pi01:~ $ uname -a</span><br><span class="line">Linux pi01 5.4.44-v8+ #1320 SMP PREEMPT Wed Jun 3 16:20:05 BST 2020 aarch64 GNU/Linux</span><br><span class="line">pi@pi01:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi01:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:        7950652 kB</span><br><span class="line">MemFree:         7749820 kB</span><br><span class="line">MemAvailable:    7770884 kB</span><br><span class="line">Buffers:           16092 kB</span><br><span class="line">Cached:           105460 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:            91600 kB</span><br><span class="line">Inactive:          47532 kB</span><br><span class="line">Active(anon):      17832 kB</span><br><span class="line">Inactive(anon):     8404 kB</span><br><span class="line">Active(file):      73768 kB</span><br><span class="line">Inactive(file):    39128 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                44 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         17628 kB</span><br><span class="line">Mapped:            26968 kB</span><br><span class="line">Shmem:              8652 kB</span><br><span class="line">KReclaimable:      16632 kB</span><br><span class="line">Slab:              35720 kB</span><br><span class="line">SReclaimable:      16632 kB</span><br><span class="line">SUnreclaim:        19088 kB</span><br><span class="line">KernelStack:        2304 kB</span><br><span class="line">PageTables:         1284 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:     4077720 kB</span><br><span class="line">Committed_AS:     181984 kB</span><br><span class="line">VmallocTotal:   262930368 kB</span><br><span class="line">VmallocUsed:        7680 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              688 kB</span><br><span class="line">CmaTotal:         262144 kB</span><br><span class="line">CmaFree:          256244 kB</span><br><span class="line">pi@pi01:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: fp asimd evtstrm crc32 cpuid</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: fp asimd evtstrm crc32 cpuid</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: fp asimd evtstrm crc32 cpuid</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: fp asimd evtstrm crc32 cpuid</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: d03114</span><br><span class="line">Serial		: 10000000bc6e6e05</span><br><span class="line">Model		: Raspberry Pi 4 Model B Rev 1.4</span><br></pre></td></tr></table></figure>
<p><span style="color:red">However, there are still quite a lot of
issues about <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a>, I have to downgrade the system from <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4
64-bit raspbian kernel</a> to <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry
Pi OS (32-bit) with desktop 2020-05-27</a> in the end.</span></p>
<h2
id="pi02-raspberry-pi-4-model-b-rev-1.1-4gb-with-raspberry-pi-os-32-bit-with-desktop-2020-05-27">2.2
pi02: <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry
Pi 4 Model B Rev 1.1 4GB</a> with <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry
Pi OS (32-bit) with desktop 2020-05-27</a></h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ hostname</span><br><span class="line">pi02</span><br><span class="line">pi@pi02:~ $ uname -a</span><br><span class="line">Linux pi02 4.19.118-v7l+ #1311 SMP Mon Apr 27 14:26:42 BST 2020 armv7l GNU/Linux</span><br><span class="line">pi@pi02:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi02:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:        3999744 kB</span><br><span class="line">MemFree:         3556984 kB</span><br><span class="line">MemAvailable:    3761604 kB</span><br><span class="line">Buffers:           42296 kB</span><br><span class="line">Cached:           270688 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           196952 kB</span><br><span class="line">Inactive:         133824 kB</span><br><span class="line">Active(anon):      18036 kB</span><br><span class="line">Inactive(anon):     8376 kB</span><br><span class="line">Active(file):     178916 kB</span><br><span class="line">Inactive(file):   125448 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">HighTotal:       3264512 kB</span><br><span class="line">HighFree:        2965564 kB</span><br><span class="line">LowTotal:         735232 kB</span><br><span class="line">LowFree:          591420 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                40 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         17848 kB</span><br><span class="line">Mapped:            26708 kB</span><br><span class="line">Shmem:              8624 kB</span><br><span class="line">Slab:              54128 kB</span><br><span class="line">SReclaimable:      27336 kB</span><br><span class="line">SUnreclaim:        26792 kB</span><br><span class="line">KernelStack:        1024 kB</span><br><span class="line">PageTables:         1172 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:     2102268 kB</span><br><span class="line">Committed_AS:     184320 kB</span><br><span class="line">VmallocTotal:     245760 kB</span><br><span class="line">VmallocUsed:           0 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              656 kB</span><br><span class="line">CmaTotal:         262144 kB</span><br><span class="line">CmaFree:          223228 kB</span><br><span class="line">pi@pi02:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: c03111</span><br><span class="line">Serial		: 100000006c0c9b01</span><br><span class="line">Model		: Raspberry Pi 4 Model B Rev 1.1</span><br></pre></td></tr></table></figure>
<h2
id="pi03-raspberry-pi-3-model-b-rev-1.2-1gb-with-raspberry-pi-os-32-bit-with-desktop-2020-05-27">2.3
pi03: <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry
Pi 3 Model B Rev 1.2 1GB</a> with <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry
Pi OS (32-bit) with desktop 2020-05-27</a></h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ hostname</span><br><span class="line">pi03</span><br><span class="line">pi@pi03:~ $ uname -a</span><br><span class="line">Linux pi03 4.19.118-v7+ #1311 SMP Mon Apr 27 14:21:24 BST 2020 armv7l GNU/Linux</span><br><span class="line">pi@pi03:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi03:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:         895500 kB</span><br><span class="line">MemFree:          375644 kB</span><br><span class="line">MemAvailable:     709712 kB</span><br><span class="line">Buffers:           54464 kB</span><br><span class="line">Cached:           317028 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           244084 kB</span><br><span class="line">Inactive:         197180 kB</span><br><span class="line">Active(anon):      70032 kB</span><br><span class="line">Inactive(anon):     6488 kB</span><br><span class="line">Active(file):     174052 kB</span><br><span class="line">Inactive(file):   190692 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                20 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         69816 kB</span><br><span class="line">Mapped:            80468 kB</span><br><span class="line">Shmem:              6752 kB</span><br><span class="line">Slab:              59000 kB</span><br><span class="line">SReclaimable:      28552 kB</span><br><span class="line">SUnreclaim:        30448 kB</span><br><span class="line">KernelStack:        1600 kB</span><br><span class="line">PageTables:         3252 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:      550144 kB</span><br><span class="line">Committed_AS:     837224 kB</span><br><span class="line">VmallocTotal:    1163264 kB</span><br><span class="line">VmallocUsed:           0 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              640 kB</span><br><span class="line">CmaTotal:           8192 kB</span><br><span class="line">CmaFree:            6280 kB</span><br><span class="line">pi@pi03:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: a02082</span><br><span class="line">Serial		: 000000009fcc6a22</span><br><span class="line">Model		: Raspberry Pi 3 Model B Rev 1.2</span><br></pre></td></tr></table></figure>
<h2
id="pi04-raspberry-pi-3-model-b-rev-1.2-1gb-with-raspberry-pi-os-32-bit-with-desktop-2020-05-27">2.4
pi04: <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry
Pi 3 Model B Rev 1.2 1GB</a> with <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry
Pi OS (32-bit) with desktop 2020-05-27</a></h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ hostname</span><br><span class="line">pi04</span><br><span class="line">pi@pi04:~ $ uname -a</span><br><span class="line">Linux pi04 4.19.118-v7+ #1311 SMP Mon Apr 27 14:21:24 BST 2020 armv7l GNU/Linux</span><br><span class="line">pi@pi04:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi04:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:         895500 kB</span><br><span class="line">MemFree:          417612 kB</span><br><span class="line">MemAvailable:     727524 kB</span><br><span class="line">Buffers:           50624 kB</span><br><span class="line">Cached:           296456 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           225904 kB</span><br><span class="line">Inactive:         174124 kB</span><br><span class="line">Active(anon):      53244 kB</span><br><span class="line">Inactive(anon):     5968 kB</span><br><span class="line">Active(file):     172660 kB</span><br><span class="line">Inactive(file):   168156 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                16 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         52960 kB</span><br><span class="line">Mapped:            65096 kB</span><br><span class="line">Shmem:              6240 kB</span><br><span class="line">Slab:              57688 kB</span><br><span class="line">SReclaimable:      28096 kB</span><br><span class="line">SUnreclaim:        29592 kB</span><br><span class="line">KernelStack:        1464 kB</span><br><span class="line">PageTables:         2724 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:      550144 kB</span><br><span class="line">Committed_AS:     715652 kB</span><br><span class="line">VmallocTotal:    1163264 kB</span><br><span class="line">VmallocUsed:           0 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              640 kB</span><br><span class="line">CmaTotal:           8192 kB</span><br><span class="line">CmaFree:            6152 kB</span><br><span class="line">pi@pi04:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: a22082</span><br><span class="line">Serial		: 000000003fc1b876</span><br><span class="line">Model		: Raspberry Pi 3 Model B Rev 1.2</span><br></pre></td></tr></table></figure>
<h1 id="raspberry-pi-cluster-configuration">3. <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a> Cluster
Configuration</h1>
<p>This section heavily refers to the following blogs: - <a
target="_blank" rel="noopener" href="https://magpi.raspberrypi.org/articles/build-a-raspberry-pi-cluster-computer">Build
a Raspberry Pi cluster computer</a> - <a
target="_blank" rel="noopener" href="https://blog.alexellis.io/build-your-own-bare-metal-arm-cluster/">Build
your own bare-metal ARM cluster</a> - <a
target="_blank" rel="noopener" href="https://thenewstack.io/installing-mpi-python-raspberry-pi-cluster-runs-docker/">Installing
MPI for Python on a Raspberry Pi Cluster</a> - <a
target="_blank" rel="noopener" href="https://www.instructables.com/id/How-to-Make-a-Raspberry-Pi-SuperComputer/">Instructables:
How to Make a Raspberry Pi SuperComputer!</a></p>
<p>Actually, the cluster can certainly be arbitrarily configured as you
wish. A typical configuration is <strong>1-master-3-workers</strong>,
but which one should be the <strong>master</strong>? Is it really a good
idea to <strong>ALWAYS</strong> designate the <strong>MOST
powerful</strong> one as the <strong>master</strong>? Particularly, in
my case, 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s are
of different versions, so that they are of different computing
capability.</p>
<h2 id="configure-hostfile">3.1 Configure Hostfile</h2>
<p>It's always a good idea to create a <strong>hostfile</strong> on the
<strong>master</strong> node. However, as reasons mentioned above, there
is <strong>NO</strong> priority among <strong>ALL</strong> nodes in my
case, I configured <strong>the hostfile</strong> for
<strong>ALL</strong> 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry
Pi</a>s.</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">node</th>
<th style="text-align: center;">hostfile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">pi01</td>
<td style="text-align: center;">192.168.1.253 slots=4 <br> 192.168.1.251
slots=4 <br> 192.168.1.249 slots=4 <br> 192.168.1.247 slots=4</td>
</tr>
<tr class="even">
<td style="text-align: center;">pi02</td>
<td style="text-align: center;">192.168.1.251 slots=4 <br> 192.168.1.253
slots=4 <br> 192.168.1.249 slots=4 <br> 192.168.1.247 slots=4</td>
</tr>
<tr class="odd">
<td style="text-align: center;">pi03</td>
<td style="text-align: center;">192.168.1.249 slots=4 <br> 192.168.1.253
slots=4 <br> 192.168.1.251 slots=4 <br> 192.168.1.247 slots=4</td>
</tr>
<tr class="even">
<td style="text-align: center;">pi04</td>
<td style="text-align: center;">192.168.1.247 slots=4 <br> 192.168.1.253
slots=4 <br> 192.168.1.251 slots=4 <br> 192.168.1.249 slots=4</td>
</tr>
</tbody>
</table>
<h2 id="ssh-keygen">3.2 SSH-KEYGEN</h2>
<p>In order to test multiple nodes across the cluster, we need to
generate SSH keys to avoid inputting password for logging into the other
nodes all the time. In such, for each <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>, you'll have to
generate a SSH key by <code>ssh-keygen -t rsa</code>, and push this
generated key using command <code>ssh-copy-id</code> onto the other 3 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s. Finally, for a
cluster of 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s,
there are 3 authorized keys (for these other 3 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s) stored in file
<code>/home/pi/.ssh/authorized_keys</code> on each of the 4 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s.</p>
<h1 id="cluster-test">4. Cluster Test</h1>
<h2 id="command-mpiexec">4.1 Command mpiexec</h2>
<h3 id="argument--hostfile-and--n">4.1.1 Argument: -hostfile and -n</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -hostfile hostfile -n 16 hostname </span><br><span class="line">pi01</span><br><span class="line">pi01</span><br><span class="line">pi01</span><br><span class="line">pi01</span><br><span class="line">pi02</span><br><span class="line">pi02</span><br><span class="line">pi02</span><br><span class="line">pi03</span><br><span class="line">pi03</span><br><span class="line">pi03</span><br><span class="line">pi02</span><br><span class="line">pi03</span><br><span class="line">pi04</span><br><span class="line">pi04</span><br><span class="line">pi04</span><br><span class="line">pi04</span><br></pre></td></tr></table></figure>
<p>For a cluster of 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry
Pi</a>s, there will be 4*4=16 CPUs in total. Therefore, the maximum
number to specify for argument <strong>-n</strong> will be 16.
Otherwise, you'll meet the following <strong>ERROR</strong> message:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -hostfile hostfile -n 20 hostname </span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line">There are not enough slots available in the system to satisfy the 20 slots</span><br><span class="line">that were requested by the application:</span><br><span class="line">  hostname</span><br><span class="line"></span><br><span class="line">Either request fewer slots for your application, or make more slots available</span><br><span class="line">for use.</span><br><span class="line">--------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<h3 id="execute-python-example-mpi4py-helloworld.py">4.1.2 Execute
Python Example <a
target="_blank" rel="noopener" href="https://bitbucket.org/mpi4py/mpi4py/src/master/demo/helloworld.py">mpi4py
helloworld.py</a></h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -hostfile hostfile -n 16 python Downloads/helloworld.py </span><br><span class="line">Hello, World! I am process 1 of 16 on pi01.</span><br><span class="line">Hello, World! I am process 5 of 16 on pi02.</span><br><span class="line">Hello, World! I am process 6 of 16 on pi02.</span><br><span class="line">Hello, World! I am process 7 of 16 on pi02.</span><br><span class="line">Hello, World! I am process 4 of 16 on pi02.</span><br><span class="line">Hello, World! I am process 15 of 16 on pi04.</span><br><span class="line">Hello, World! I am process 12 of 16 on pi04.</span><br><span class="line">Hello, World! I am process 13 of 16 on pi04.</span><br><span class="line">Hello, World! I am process 14 of 16 on pi04.</span><br><span class="line">Hello, World! I am process 2 of 16 on pi01.</span><br><span class="line">Hello, World! I am process 0 of 16 on pi01.</span><br><span class="line">Hello, World! I am process 3 of 16 on pi01.</span><br><span class="line">Hello, World! I am process 9 of 16 on pi03.</span><br><span class="line">Hello, World! I am process 10 of 16 on pi03.</span><br><span class="line">Hello, World! I am process 11 of 16 on pi03.</span><br><span class="line">Hello, World! I am process 8 of 16 on pi03.</span><br></pre></td></tr></table></figure>
<h2 id="mpi4py-examples">4.2 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples">mpi4py-examples</a></h2>
<p>Run all examples with argument <code>--hostfile ~/hostfile</code>,
namely, 16 cores in a row.</p>
<h3 id="mpi4py-examples-01-hello-world">4.2.1 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/01-hello-world">mpi4py-examples
01-hello-world</a></h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --hostfile ~/hostfile ./01-hello-world </span><br><span class="line">Hello! I&#x27;m rank 1 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 2 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 3 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 0 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 6 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 7 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 4 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 5 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 12 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 10 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 11 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 13 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 9 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 14 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 8 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 15 from 16 running in total...</span><br></pre></td></tr></table></figure>
<h3 id="mpi4py-examples-02-broadcast">4.2.2 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/02-broadcast">mpi4py-examples
02-broadcast</a></h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --hostfile ~/hostfile ./02-broadcast </span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">  Running on 16 cores</span><br><span class="line"> ------------------------------------------------------------------------------</span><br><span class="line"> [00] [0. 1. 2. 3. 4.]</span><br><span class="line">[04] [0. 1. 2. 3. 4.]</span><br><span class="line">[03] [0. 1. 2. 3. 4.]</span><br><span class="line">[05] [0. 1. 2. 3. 4.]</span><br><span class="line">[07] [0. 1. 2. 3. 4.]</span><br><span class="line">[01] [0. 1. 2. 3. 4.]</span><br><span class="line">[15] [0. 1. 2. 3. 4.]</span><br><span class="line">[13] [0. 1. 2. 3. 4.]</span><br><span class="line">[12] [0. 1. 2. 3. 4.]</span><br><span class="line">[11] [0. 1. 2. 3. 4.]</span><br><span class="line">[08] [0. 1. 2. 3. 4.]</span><br><span class="line">[09] [0. 1. 2. 3. 4.]</span><br><span class="line">[02] [0. 1. 2. 3. 4.]</span><br><span class="line">[10] [0. 1. 2. 3. 4.]</span><br><span class="line">[06] [0. 1. 2. 3. 4.]</span><br><span class="line">[14] [0. 1. 2. 3. 4.]</span><br></pre></td></tr></table></figure>
<h3 id="mpi4py-examples-03-scatter-gather">4.2.3 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/03-scatter-gather">mpi4py-examples
03-scatter-gather</a></h3>
<p><strong><span style="color:red">Sometimes, without specifying the
parameter btl_tcp_if_include, the running program will
hang:</span></strong></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --np 16 --hostfile ~/hostfile  03-scatter-gather</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">  Running on 16 cores</span><br><span class="line"> ------------------------------------------------------------------------------</span><br><span class="line"> After Scatter:</span><br><span class="line"> [0] [0. 1. 2. 3.]</span><br><span class="line">[1] [4. 5. 6. 7.]</span><br><span class="line">[pi03][[1597,1],8][btl_tcp_endpoint.c:626:mca_btl_tcp_endpoint_recv_connect_ack] received unexpected process identifier [[1597,1],10]</span><br><span class="line">[pi01][[1597,1],0][btl_tcp_endpoint.c:626:mca_btl_tcp_endpoint_recv_connect_ack] received unexpected process identifier [[1597,1],3]</span><br><span class="line">[2] [ 8.  9. 10. 11.]</span><br><span class="line">^C^Z</span><br><span class="line">[1]+  Stopped                 mpirun --np 16 --hostfile ~/hostfile 03-scatter-gather</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">Please refer to the explanation <a
target="_blank" rel="noopener" href="https://github.com/open-mpi/ompi/issues/6240">TCP: unexpected
process identifier in connect_ack</a></span></strong>. Now, let's
specify the parameter as
<code>--mca btl_tcp_if_include "192.168.1.251/24,192.168.1.249/24,192.168.1.247/24"</code>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --np 16 --hostfile ~/hostfile --mca btl_tcp_if_include &quot;192.168.1.251/24,192.168.1.249/24,192.168.1.247/24&quot;  03-scatter-gather</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">  Running on 16 cores</span><br><span class="line"> ------------------------------------------------------------------------------</span><br><span class="line"> After Scatter:</span><br><span class="line"> [0] [0. 1. 2. 3.]</span><br><span class="line">[1] [4. 5. 6. 7.]</span><br><span class="line">[2] [ 8.  9. 10. 11.]</span><br><span class="line">[3] [12. 13. 14. 15.]</span><br><span class="line">[4] [16. 17. 18. 19.]</span><br><span class="line">[5] [20. 21. 22. 23.]</span><br><span class="line">[6] [24. 25. 26. 27.]</span><br><span class="line">[7] [28. 29. 30. 31.]</span><br><span class="line">[8] [32. 33. 34. 35.]</span><br><span class="line">[9] [36. 37. 38. 39.]</span><br><span class="line">[10] [40. 41. 42. 43.]</span><br><span class="line">[11] [44. 45. 46. 47.]</span><br><span class="line">[12] [48. 49. 50. 51.]</span><br><span class="line">[13] [52. 53. 54. 55.]</span><br><span class="line">[14] [56. 57. 58. 59.]</span><br><span class="line">[15] [60. 61. 62. 63.]</span><br><span class="line">After Allgather:</span><br><span class="line"> [0] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[1] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[2] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[3] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[4] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[5] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[6] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[7] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[8] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[9] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[10] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[11] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[12] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[13] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[14] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[15] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br></pre></td></tr></table></figure>
<h3 id="mpi4py-examples-04-image-spectrogram">4.2.4 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/04-image-spectrogram">mpi4py-examples
04-image-spectrogram</a></h3>
<h3 id="mpi4py-examples-05-pseudo-whitening">4.2.5 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/05-pseudo-whitening">mpi4py-examples
05-pseudo-whitening</a></h3>
<h3 id="null">4.2.6 NULL</h3>
<h3 id="mpi4py-examples-07-matrix-vector-product">4.2.7 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/07-matrix-vector-product">mpi4py-examples
07-matrix-vector-product</a></h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-example $ mpirun --np 16 --hostfile ~/hostfile --mca btl_tcp_if_include &quot;192.168.1.251/24,192.168.1.249/24,192.168.1.247/24&quot;  07-matrix-vector-product</span><br><span class="line">============================================================================</span><br><span class="line">  Running 16 parallel MPI processes</span><br><span class="line">  20 iterations of size 10000 in  1.14s: 17.50 iterations per second</span><br><span class="line"> ============================================================================</span><br></pre></td></tr></table></figure>
<h3 id="mpi4py-examples-08-matrix-matrix-product.py">4.2.8 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/08-matrix-matrix-product.py">mpi4py-examples
08-matrix-matrix-product.py</a></h3>
<h3 id="mpi4py-examples-09-task-pull.py">4.2.9 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/09-task-pull.py">mpi4py-examples
09-task-pull.py</a></h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --hostfile ~/hostfile python ./09-task-pull.py </span><br><span class="line">Master starting with 15 workers</span><br><span class="line">I am a worker with rank 1 on pi01.</span><br><span class="line">I am a worker with rank 2 on pi01.</span><br><span class="line">I am a worker with rank 3 on pi01.</span><br><span class="line">I am a worker with rank 4 on pi02.</span><br><span class="line">I am a worker with rank 5 on pi02.</span><br><span class="line">I am a worker with rank 6 on pi02.</span><br><span class="line">I am a worker with rank 7 on pi02.</span><br><span class="line">Sending task 0 to worker 2</span><br><span class="line">Sending task 1 to worker 1</span><br><span class="line">Sending task 2 to worker 3</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 3 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 4 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 5 to worker 1</span><br><span class="line">Sending task 6 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 7 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 8 to worker 1</span><br><span class="line">Sending task 9 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 10 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 11 to worker 1</span><br><span class="line">Sending task 12 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 13 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 14 to worker 1</span><br><span class="line">Sending task 15 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 16 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 17 to worker 1</span><br><span class="line">Sending task 18 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 19 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Sending task 20 to worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 21 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 22 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Sending task 23 to worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 24 to worker 2</span><br><span class="line">Sending task 25 to worker 3</span><br><span class="line">Got data from worker 2</span><br><span class="line">Got data from worker 1</span><br><span class="line">Sending task 26 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 27 to worker 3</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 28 to worker 1</span><br><span class="line">Sending task 29 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 30 to worker 3</span><br><span class="line">Got data from worker 2</span><br><span class="line">Got data from worker 1</span><br><span class="line">Sending task 31 to worker 2</span><br><span class="line">Got data from worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Worker 2 exited.</span><br><span class="line">Worker 1 exited.</span><br><span class="line">Worker 3 exited.</span><br><span class="line">I am a worker with rank 15 on pi04.</span><br><span class="line">I am a worker with rank 12 on pi04.</span><br><span class="line">I am a worker with rank 8 on pi03.</span><br><span class="line">I am a worker with rank 13 on pi04.</span><br><span class="line">I am a worker with rank 9 on pi03.</span><br><span class="line">I am a worker with rank 14 on pi04.</span><br><span class="line">I am a worker with rank 10 on pi03.</span><br><span class="line">I am a worker with rank 11 on pi03.</span><br><span class="line">Worker 5 exited.</span><br><span class="line">Worker 4 exited.</span><br><span class="line">Worker 6 exited.</span><br><span class="line">Worker 7 exited.</span><br><span class="line">Worker 15 exited.</span><br><span class="line">Worker 8 exited.</span><br><span class="line">Worker 9 exited.</span><br><span class="line">Worker 10 exited.</span><br><span class="line">Worker 11 exited.</span><br><span class="line">Worker 12 exited.</span><br><span class="line">Worker 13 exited.</span><br><span class="line">Worker 14 exited.</span><br><span class="line">Master finishing</span><br></pre></td></tr></table></figure>
<h3 id="mpi4py-examples-10-task-pull-spawn.py">4.2.10 <a
target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/10-task-pull-spawn.py">mpi4py-examples
10-task-pull-spawn.py</a></h3>
<h2 id="example-mpi4py-prime.py">4.3 Example <a
target="_blank" rel="noopener" href="https://github.com/mrpjevans/cluster-prime/blob/master/prime.py">mpi4py
prime.py</a></h2>
<h3 id="computing-capability-for-each-cpu">4.3.1 Computing Capability
For Each CPU</h3>
<p>Here, we're taking <a
target="_blank" rel="noopener" href="https://github.com/mrpjevans/cluster-prime/blob/master/prime.py">mpi4py
prime.py</a> as our example.</p>
<table style="text-align:center;">
<tr>
<td>
Hostname
</td>
<td>
Computing Time
</td>
</tr>
<tr>
<td>
pi01
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -n 1 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 1</span><br><span class="line">Time elasped: 214.86 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi02
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ mpiexec -n 1 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 1</span><br><span class="line">Time elasped: 212.2 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi03
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ mpiexec -n 1 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 1</span><br><span class="line">Time elasped: 665.24 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi04
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ mpiexec -n 1 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 1</span><br><span class="line">Time elasped: 684.64 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
</table>
<p><span style="color:red"> Clearly, the computing capability of each
CPU on <strong>pi01/pi02</strong> is roughly 3 times faster than the CPU
on <strong>pi03/pi04</strong>, which can be easily estimated from the
parameter <strong>BogoMIPS</strong>: </span> <span
class="math display">\[ 108.00 (pi01/pi02) / 38.40 (pi03/pi04) \approx 3
\]</span></p>
<h3 id="computing-capability-for-each-raspberry-pi">4.3.2 Computing
Capability For Each <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry
Pi</a></h3>
<p>Clearly, on each of my <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>, including - pi01:
<a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry
Pi 4 Model B Rev 1.4 8GB</a> - pi02: <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry
Pi 4 Model B Rev 1.1 4GB</a> - pi03 &amp; pi04: <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry
Pi 3 Model B Rev 1.2 1GB</a></p>
<p>there are 4 CPUs. So, let's take a look at the result when specify
argument <code>-n 4</code>.</p>
<table style="text-align:center;">
<tr>
<td>
Master
</td>
<td>
Worker
</td>
<td>
Computing Time
</td>
</tr>
<tr>
<td>
pi01
</td>
<td>
pi02<br> pi03<br> pi04
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -n 4 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 4</span><br><span class="line">Time elasped: 50.92 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi02
</td>
<td>
pi01<br> pi03<br> pi04
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ mpiexec -n 4 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 4</span><br><span class="line">Time elasped: 52.83 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi03
</td>
<td>
pi01<br> pi02<br> pi04
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ mpiexec -n 4 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 4</span><br><span class="line">Time elasped: 171.81 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
pi04
</td>
<td>
pi01<br> pi02<br> pi03
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ mpiexec -n 4 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 4</span><br><span class="line">Time elasped: 171.7 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
</table>
<!-- <span style="color:red"> It looks no matter which [Raspberry Pi] is designated as **master**, the computing time keeps **roughly the same**.</span> -->
<p><span style="color:red">Clearly, to make full use of 4 CPUs
<code>-n 4</code> is roughly 4 times faster than just to use 1 CPU
<code>-n 1</code>.</span></p>
<h3 id="computing-capability-for-the-cluster">4.3.3 Computing Capability
For The cluster</h3>
<p>I carried out 2 experiments: - <strong>Experiment 1</strong> is done
on 4 nodes: * 1 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry
Pi 4 Model B Rev 1.4 8GB</a> * 1 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry
Pi 4 Model B Rev 1.1 4GB</a> * 2 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry
Pi 3 Model B Rev 1.2 1GB</a> - <strong>Experiment 2</strong> is done on
the <strong>FASTEST</strong> 2 nodes: * 1 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry
Pi 4 Model B Rev 1.4 8GB</a> * 1 <a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry
Pi 4 Model B Rev 1.1 4GB</a></p>
<table style="text-align:center;">
<tr>
<td>
hostfile on master
</td>
<td>
Computing Time
</td>
</tr>
<tr>
<td>
192.168.1.253 slots=4<br> 192.168.1.251 slots=4<br> 192.168.1.249
slots=4<br> 192.168.1.247 slots=4
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -np 16 --hostfile hostfile --mca btl_tcp_if_include <span class="string">&quot;192.168.1.251/24,192.168.1.249/24,192.168.1.247/24&quot;</span> python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 16</span><br><span class="line">Time elasped: 42.22 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
<tr>
<td>
192.168.1.253 slots=4<br> 192.168.1.251 slots=4
</td>
<td>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -np 8 --hostfile hostfile --mca btl_tcp_if_include <span class="string">&quot;192.168.1.251/24&quot;</span> python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 8</span><br><span class="line">Time elasped: 29.56 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
</td>
</tr>
</table>
<p>The results are obviously telling: - to calculate using a cluster of
4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s with 16 CPUs
is <strong>ALWAYS</strong> faster than running on a single node with 4
CPUs. <span class="math display">\[ 42.22 \le 50 \]</span> - to
calculate using 2 fastest nodes is even faster than running on a cluster
of 4 nodes. This clearly hints <strong><span style="color:red">the
importance of <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Load_balancing_(computing)">Load
Balancing</a><span></strong>. <span class="math display">\[ 29.56 \le
42.22 \]</span> - the speed in <strong>Experiment 2</strong> is roughly
doubled as that using a single node of <strong>pi03</strong> or
<strong>pi04</strong>. <span class="math display">\[ 52 (pi01/pi02) /
29.56 (Experiment 2) \approx 2 \]</span></p>
<p>In the end of this blog, as for <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Load_balancing_(computing)">Load
Balancing</a>, I may talk about it some time in the future.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/04/28/GeoScience/Covid-19-ArcGIS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/04/28/GeoScience/Covid-19-ArcGIS/" class="post-title-link" itemprop="url">ArcGIS For Covid-19</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-28 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-28T00:00:00-07:00">2020-04-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-28 17:33:45" itemprop="dateModified" datetime="2024-09-28T17:33:45-07:00">2024-09-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Geo-Science/" itemprop="url" rel="index"><span itemprop="name">Geo Science</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>This is <strong>THOROUGHLY</strong> inspired by <strong>ArcGIS
Blog</strong> <a
target="_blank" rel="noopener" href="https://www.esri.com/arcgis-blog/products/arcgis-online/data-management/essential-configurations-for-highly-scalable-arcgis-online-web-applications-viral-applications/">Essential
Configurations for Highly Scalable ArcGIS Online Web Applications (Viral
Applications)</a>. And there are so many exisiting examples:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.mapquest.com/covid19">MapQuest COVID19</a></li>
<li><a target="_blank" rel="noopener" href="https://lhcathome.cern.ch/lhcathome/">LHC@home</a></li>
<li><a target="_blank" rel="noopener" href="https://covid19.gitlab.io/">COVID19@Gitlab</a></li>
<li><a target="_blank" rel="noopener" href="https://www.esri.com/en-us/covid-19/overview">Esri
COVID-19</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/04/20/OperatingSystems/CompilersTools/build-bazel-for-aarch64/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/04/20/OperatingSystems/CompilersTools/build-bazel-for-aarch64/" class="post-title-link" itemprop="url">Build Bazel For AARCH64</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-20T00:00:00-07:00">2020-04-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-28 17:33:45" itemprop="dateModified" datetime="2024-09-28T17:33:45-07:00">2024-09-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Compiler/" itemprop="url" rel="index"><span itemprop="name">Compiler</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <!-- <iframe src="//www.cbc.ca/i/caffeine/syndicate/?mediaId=1728131651826" width="916" height="516" frameborder="0" allowfullscreen></iframe> -->
<p><a
target="_blank" rel="noopener" href="https://globalnews.ca/news/6870428/stronger-together-highlights-coronavirus-canada-tv-special/">‘Stronger
Together’: Celine Dion, Justin Bieber, Michael Bublé and more unite for
Canadian coronavirus special</a></p>
<p>Well, I've got to build <a
target="_blank" rel="noopener" href="https://www.tensorflow.org/">Tensorflow</a> for <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/ARM_architecture#AArch64">aarch64</a>
from source. In such, I've got to build <a
target="_blank" rel="noopener" href="https://bazel.build/">Bazel</a> for <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/ARM_architecture#AArch64">aarch64</a>
as well. A good news is: <a target="_blank" rel="noopener" href="https://bazel.build/">Bazel</a>
recently released <a
target="_blank" rel="noopener" href="https://github.com/bazelbuild/bazel/releases">3.0.0</a>.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/curtismuntz/bazel_compilers">Bazel
Compilers</a></li>
<li><a
target="_blank" rel="noopener" href="https://gist.github.com/yunqu/e7fe12f44953deb1e0cf7b2c68362357#file-build-bazel-md">Building
Bazel for aarch64</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/xifengcun/tensorflow-aarch64-crossbuild">Tensorflow
AArch64 Crossbuild</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/04/18/AI/EdgeComputing/khadas-vim3-amlogic-a311d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/04/18/AI/EdgeComputing/khadas-vim3-amlogic-a311d/" class="post-title-link" itemprop="url">Khadas VIM3</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-18 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-18T00:00:00-07:00">2020-04-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-05 00:41:09" itemprop="dateModified" datetime="2024-10-05T00:41:09-07:00">2024-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/Edge-Computing/" itemprop="url" rel="index"><span itemprop="name">Edge Computing</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <iframe width="560" height="315" src="https://www.youtube.com/embed/nTd5Trp1pbg?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen>
</iframe>
<p>Today's concert: <strong>ONE WORLD : TOGETHER AT HOME</strong>. Yup,
today, I've my previous blog updated. A lot of modifications. <a
target="_blank" rel="noopener" href="https://www.khadas.com/vim3">Khadas VIM3</a> is really a good
product. With <a target="_blank" rel="noopener" href="https://www.amlogic.com/">Amlogic</a>'s
<strong>A311D with 5.0 TOPS NPU</strong>, the board itself comes with a
super powerful AI inference capability.</p>
<ul>
<li>AI inference unit used to be in USB sticks, such as:
<ul>
<li><a
target="_blank" rel="noopener" href="https://software.intel.com/en-us/articles/intel-movidius-neural-compute-stick">Intel
Movidius Neural Compute Stick</a></li>
<li><a target="_blank" rel="noopener" href="https://coral.ai/products/accelerator/">Google Coral USB
Accelerator</a>, etc. The target of these type of products is for some
SBCs without any XPU(<a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Graphics_processing_unit">GPU</a>/<a
target="_blank" rel="noopener" href="https://software.intel.com/en-us/iot/hardware/vision-accelerator-movidius-vpu">VPU</a>/<a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/AI_accelerator">NPU</a>/<a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tensor_processing_unit">TPU</a>,
etc.), for speeding up <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Parallel_computing">parallel
computing</a>.</li>
</ul></li>
<li>AI inference unit can of course be on board directly, <strong>BUT
NOT ONLY</strong> as an peripheral. For instance:
<ul>
<li><a target="_blank" rel="noopener" href="https://coral.ai/products/dev-board/">Google Coral Dev
Board</a> based on Google's own TPU</li>
<li><a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-nano/">NVidia
Jetson Nano</a> based on NVidia's own GPU</li>
<li><a target="_blank" rel="noopener" href="https://www.khadas.com/vim3">Khadas VIM3</a> based on <a
target="_blank" rel="noopener" href="https://www.amlogic.com/">Amlogic</a>'s <strong>A311D with 5.0
TOPS NPU</strong></li>
</ul></li>
</ul>
<p><em> What a sunny day after the <strong>FIRST</strong> snow in this
winter. Let me show you 3 pictures in the first row, and 3 videos in the
second. We need to enjoy both R&amp;D and life…</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Green Timers Lake 1</th>
<th style="text-align: center;">Green Timers Lake 2</th>
<th style="text-align: center;">Green Timers Park</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_lake_01.jpg"
alt="Green Timers Lake 1" /></td>
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_lake_02.jpg"
alt="Green Timers Lake 2" /></td>
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2020/FirstSnow/green_timers_park_in_the_snow.jpg"
alt="Green Timers Park" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">A Pair of Swans</td>
<td style="text-align: center;">A Group of Ducks</td>
<td style="text-align: center;">A Little Stream In The Snow</td>
</tr>
<tr class="odd">
<td
style="text-align: center;"><iframe width="560" height="315" src="https://www.youtube.com/embed/RtQ3iFfLb5E?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe></td>
<td
style="text-align: center;"><iframe width="560" height="315" src="https://www.youtube.com/embed/5TafK3b9A9k?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe></td>
<td
style="text-align: center;"><iframe width="560" height="315" src="https://www.youtube.com/embed/ICebPYyPK8s?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe></td>
</tr>
</tbody>
</table>
<p>After a brief break, I started investigating <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a>
again.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/p9BGBFiu1-0?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen>
</iframe>
<p></em></p>
<h1 id="about-khadas-vim3">1. About Khadas VIM3</h1>
<p><a target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a> is
a super computer based on <strong>Amlogic A311D</strong>. Before we
start, let’s carry out several simple comparisons.</p>
<h2
id="raspberry-pi-4-model-b-vs.-khadas-vim3-vs.-jetson-nano-developer-kit">1.1
Raspberry Pi 4 Model B vs. Khadas VIM3 vs. Jetson Nano Developer
Kit</h2>
<p>Please refer to:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.khadas.com/vim">Compare Amlogic Boards</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.hackerboards.com/compare/358,353,354/">hackerboards
comparisons</a>.</li>
</ul>
<h2
id="amlogic-a311d-s922x-b-vs.-rockchip-rk3399-pro-vs.-amlogic-s912">1.2
Amlogic A311D &amp; S922X-B vs. Rockchip RK3399 (Pro) vs. Amlogic
S912</h2>
<p>Please refer to:</p>
<ul>
<li><a
target="_blank" rel="noopener" href="https://androidtvbox.eu/amlogic-a311d-s922x-b-vs-rk3399-s912-comparison/">androidtvbox</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.cnx-software.com/2019/07/29/amlogic-a311d-vs-rockchip-rk3399-benchmarks-comparison/">cnx-software
embedded system news - July 29, 2019</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.cnx-software.com/2019/08/04/amlogic-s912-vs-amlogic-a311d-s922x-b-benchmarks-comparison/">cnx-software
embedded system news - August 4, 2019</a></li>
</ul>
<h1 id="install-prebuilt-operating-system-to-emmc-via-krescue">2.
Install Prebuilt Operating System To EMMC Via <a
target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/Krescue.html">Krescue</a></h1>
<h2 id="wired-connection-preferred">2.1 WIRED Connection Preferred</h2>
<p>As mentioned in <a
target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/index.html">VIM3 Beginners Guide</a>,
<a target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/Krescue.html">Krescue</a> is a
<code>Swiss Army knife</code>. <span style="color:red"><strong>As of
January 2020, Krescue can download and install OS images directly from
the web via wired Ethernet.</strong></span></p>
<h2 id="flash-krescue-onto-sd-card">2.2 Flash Krescue Onto SD Card</h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  Krescue sudo dd bs=4M if=VIM3.krescue-d41d8cd98f00b204e9800998ecf8427e-1587199778-67108864-279c13890fa7253d5d2b76000769803e.sd.img of=/dev/mmcblk0 conv=fsync </span><br><span class="line">[sudo] password for longervision: </span><br><span class="line">16+0 records in</span><br><span class="line">16+0 records out</span><br><span class="line">67108864 bytes (67 MB, 64 MiB) copied, 4.03786 s, 16.6 MB/s</span><br></pre></td></tr></table></figure>
<h2 id="setup-wifi-from-within-krescue-shell">2.3 Setup Wifi From Within
Krescue Shell</h2>
<p>If you really don't like the <strong>WIRED connection</strong>, boot
into <strong>Krescue shell</strong>, and use the following commands to
set up Wifi:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">root@Krescue:~# wifi.config WIFI_NAME WIFI_PASSWORD</span><br><span class="line">root@Krescue:~# wifi.client</span><br><span class="line">root@Krescue:~# wifi.status</span><br><span class="line">DRIVER=brcmfmac</span><br><span class="line">OF_NAME=wifi</span><br><span class="line">OF_FULLNAME=/soc/sd@ffe03000/wifi@1</span><br><span class="line">OF_COMPATIBLE_0=brcm,bcm4329-fmac</span><br><span class="line">OF_COMPATIBLE_N=1</span><br><span class="line">SDIO_CLASS=00</span><br><span class="line">SDIO_ID=02D0:4359</span><br><span class="line">MODALIAS=sdio:c00v02D0d4359</span><br><span class="line">[i] iw dev</span><br><span class="line"><span class="meta prompt_">phy#</span><span class="language-bash">0</span></span><br><span class="line">	Interface wlan0</span><br><span class="line">		ifindex 4</span><br><span class="line">		wdev 0x1</span><br><span class="line">		addr xx:xx:xx:xx:xx:xx</span><br><span class="line">		ssid XXXXXXXXXX</span><br><span class="line">		type managed</span><br><span class="line">		channel 161 (5805 MHz), width: 80 MHz, center1: 5775 MHz</span><br><span class="line">		txpower 31.00 dBm</span><br><span class="line">[i] CLIENT mode active 6754</span><br><span class="line">Selected interface &#x27;wlan0&#x27;</span><br><span class="line">bssid=xx:xx:xx:xx:xx:xx</span><br><span class="line">freq=5805</span><br><span class="line">ssid=XXXXXXXXXX</span><br><span class="line">id=0</span><br><span class="line">mode=station</span><br><span class="line">pairwise_cipher=CCMP</span><br><span class="line">group_cipher=CCMP</span><br><span class="line">key_mgmt=WPA2-PSK</span><br><span class="line">wpa_state=COMPLETED</span><br><span class="line">ip_address=192.168.1.110</span><br><span class="line">address=xx:xx:xx:xx:xx:xx</span><br><span class="line">uuid=xxxxxxxxxxxxxxxxxxxxxxxxxxxx</span><br><span class="line">ieee80211ac=1</span><br></pre></td></tr></table></figure>
<h2 id="ssh-into-krescue-via-wireless-connection">2.4 SSH Into Krescue
Via Wireless Connection</h2>
<p>Now, let's try to connect <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3 board</a>
remotely.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ping 192.168.1.110</span><br><span class="line">PING 192.168.1.110 (192.168.1.110) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.1.110: icmp_seq=1 ttl=64 time=140 ms</span><br><span class="line">64 bytes from 192.168.1.110: icmp_seq=2 ttl=64 time=54.0 ms</span><br><span class="line">64 bytes from 192.168.1.110: icmp_seq=3 ttl=64 time=13.1 ms</span><br><span class="line">^C</span><br><span class="line">--- 192.168.1.110 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2001ms</span><br><span class="line">rtt min/avg/max/mdev = 13.191/69.145/140.193/52.936 ms</span><br><span class="line">➜  ~ ssh root@192.168.1.110                                                </span><br><span class="line">The authenticity of host &#x27;192.168.1.110 (192.168.1.110)&#x27; can&#x27;t be established.</span><br><span class="line">RSA key fingerprint is SHA256:0t0PZw/24nWc8hWaCJkltYtwCduMMSlRuux2Nn865Os.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added &#x27;192.168.1.110&#x27; (RSA) to the list of known hosts.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BusyBox v1.28.4 () built-in shell (ash)</span><br><span class="line"></span><br><span class="line"> OpenWrt 18.06.3, r7798-97ae9e0ccb</span><br><span class="line"></span><br><span class="line">     __ _____  Khadas ## hyphop ## </span><br><span class="line">    / //_/ _ \___ ___ ______ _____ </span><br><span class="line">   / ,&lt; / , _/ -_|_-&lt;/ __/ // / -_)</span><br><span class="line">  /_/|_/_/|_|\__/___/\__/\_,_/\__/ </span><br><span class="line">                                   </span><br><span class="line"> extreme tiny and fast rescue system</span><br><span class="line"></span><br><span class="line">BUILD: Sat Apr 18 08:49:28 UTC 2020</span><br><span class="line"></span><br><span class="line">[i] POST_CONFIG:  ap_ssid=Krescue ap_passw=12345678 wifi_mode=2g script=sd:launcher.sh eth_hw=C0:4A:00:C0:3F:DB booted= hwver=VIM3.V12</span><br><span class="line"></span><br><span class="line">=== WARNING! =====================================</span><br><span class="line">There is no root password defined on this device!</span><br><span class="line">Use the passwd command to set up a new password</span><br><span class="line">in order to prevent unauthorized SSH logins.</span><br><span class="line">--------------------------------------------------</span><br><span class="line">root@Krescue:~# uname -a</span><br><span class="line">Linux Krescue 5.4.5 #4 SMP PREEMPT Thu Apr 9 22:07:48 +09 2020 aarch64 GNU/Linux</span><br></pre></td></tr></table></figure>
<h2 id="flash-os-onto-emmc-wired-connection-preferred">2.5 Flash OS onto
EMMC (WIRED Connection Preferred)</h2>
<p>Let's take a look at the SD card device:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@Krescue:~# ls /dev/mmcblk*</span><br><span class="line">/dev/mmcblk1       /dev/mmcblk1p1     /dev/mmcblk1p2     /dev/mmcblk2       /dev/mmcblk2boot0  /dev/mmcblk2boot1  /dev/mmcblk2rpmb</span><br></pre></td></tr></table></figure>
<h3 id="install-os-using-shell-command">2.5.1 Install OS Using Shell
Command</h3>
<p>Please refer to the <a
target="_blank" rel="noopener" href="https://dl.khadas.com/Firmware/Krescue/mega/README.megaimage_online.txt">Shell
Commands Examples</a>.</p>
<p><code>curl -sfL dl.khadas.com/.mega | sh -s - -Y -X  &gt; /dev/mmcblk?</code>
should do.</p>
<h3 id="install-os-using-krescue-gui">2.5.2 Install OS Using Krescue
GUI</h3>
<p>Let's bring back <strong>Krescue GUI</strong> by command
<code>krescue</code>, and select <a
target="_blank" rel="noopener" href="https://dl.khadas.com/Firmware/Krescue/images/VIMx.Ubuntu-xfce-bionic_Linux-4.9_arm64_V20191231.emmc.kresq">VIMx.Ubuntu-xfce-bionic_Linux-4.9_arm64_V20191231.emmc.kresq</a>
and have it flashed onto EMMC.</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Krescue Default</th>
<th style="text-align: center;">Image Write To EMMC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/01_KrescueDefault.png"
alt="Krescue Default" /></td>
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/02_ImageWriteToEMMC.png"
alt="Image Write To EMMC" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">Select Prebuilt OS</td>
<td style="text-align: center;">Start Downloading OS</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/03_PrebuiltOSSelection.png"
alt="Select Prebuilt OS" /></td>
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/04_StartDownloading.png"
alt="Start Downloading OS" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">Start Installation</td>
<td style="text-align: center;">Installation Complete</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/05_StartInstallation.png"
alt="Start Installation" /></td>
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/06_InstallationComplete.png"
alt="Installation Complete" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">Krescue Reboot</td>
<td style="text-align: center;">Ubuntu XFCE Desktop</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/07_KrescueReboot.png"
alt="Krescue Reboot" /></td>
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/08_Ubuntu_XFCE_Desktop.png"
alt="Ubuntu XFCE Desktop" /></td>
</tr>
</tbody>
</table>
<h2 id="boot-from-emmc">2.6. Boot From EMMC</h2>
<p>Actually, the 8th image in the above just showed Ubuntu <a
target="_blank" rel="noopener" href="https://www.xfce.org/">XFCE</a> desktop. We can also <strong>SSH
into</strong> it after configuring Wifi successfully.</p>
<h3 id="ssh-into-khadas-vim3">2.6.1 SSH Into <a
target="_blank" rel="noopener" href="https://www.khadas.com/vim3">Khadas VIM3</a></h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ssh khadas@192.168.1.95</span><br><span class="line">The authenticity of host &#x27;192.168.1.95 (192.168.1.95)&#x27; can&#x27;t be established.</span><br><span class="line">ECDSA key fingerprint is SHA256:Q59XrIX7bSWsphZCpgHBSnVH5ETgCY9iLfDEuvRKtOw.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added &#x27;192.168.1.95&#x27; (ECDSA) to the list of known hosts.</span><br><span class="line">khadas@192.168.1.95&#x27;s password: </span><br><span class="line"></span><br><span class="line">Welcome to Fenix 0.8.1 Ubuntu 18.04.3 LTS Linux 4.9.206  </span><br><span class="line"> _  ___               _            __     _____ __  __ _____ </span><br><span class="line">| |/ / |__   __ _  __| | __ _ ___  \ \   / /_ _|  \/  |___ / </span><br><span class="line">| &#x27; /| &#x27;_ \ / _` |/ _` |/ _` / __|  \ \ / / | || |\/| | |_ \ </span><br><span class="line">| . \| | | | (_| | (_| | (_| \__ \   \ V /  | || |  | |___) |</span><br><span class="line">|_|\_\_| |_|\__,_|\__,_|\__,_|___/    \_/  |___|_|  |_|____/ </span><br><span class="line">                                                             </span><br><span class="line"></span><br><span class="line"> * Website:        https://www.khadas.com</span><br><span class="line"> * Documentation:  https://docs.khadas.com</span><br><span class="line"> * Forum:          https://forum.khadas.com</span><br><span class="line"></span><br><span class="line">To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.</span><br><span class="line">See &quot;man sudo_root&quot; for details.</span><br></pre></td></tr></table></figure>
<h3 id="specs-for-khadas-vim3">2.6.2 Specs For <a
target="_blank" rel="noopener" href="https://www.khadas.com/vim3">Khadas VIM3</a></h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ uname -a</span><br><span class="line">Linux Khadas 4.9.206 #13 SMP PREEMPT Tue Dec 31 00:37:47 CST 2019 aarch64 aarch64 aarch64 GNU/Linux</span><br><span class="line">khadas@Khadas:~$ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd09</span><br><span class="line">CPU revision	: 2</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd09</span><br><span class="line">CPU revision	: 2</span><br><span class="line"></span><br><span class="line">processor	: 4</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd09</span><br><span class="line">CPU revision	: 2</span><br><span class="line"></span><br><span class="line">processor	: 5</span><br><span class="line">BogoMIPS	: 48.00</span><br><span class="line">Features	: fp asimd evtstrm aes pmull sha1 sha2 crc32</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd09</span><br><span class="line">CPU revision	: 2</span><br><span class="line"></span><br><span class="line">Serial		: 290b1000010c1900000437304e424e50</span><br><span class="line">Hardware	: Khadas VIM3</span><br><span class="line">khadas@Khadas:~$ clinfo     </span><br><span class="line">Number of platforms                               1</span><br><span class="line">  Platform Name                                   ARM Platform</span><br><span class="line">  Platform Vendor                                 ARM</span><br><span class="line">  Platform Version                                OpenCL 2.0 git.c8adbf9.ad00b04c1b60847de257177231dc1a53</span><br><span class="line">  Platform Profile                                FULL_PROFILE</span><br><span class="line">  Platform Extensions                             cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_byte_addressable_store cl_khr_3d_image_writes cl_khr_int64_base_atomics cl_khr_int64_extended_atomics cl_khr_fp16 cl_khr_icd cl_khr_egl_image cl_khr_image2d_from_buffer cl_khr_depth_images cl_khr_create_command_queue cl_arm_core_id cl_arm_printf cl_arm_thread_limit_hint cl_arm_non_uniform_work_group_size cl_arm_import_memory cl_arm_shared_virtual_memory</span><br><span class="line">  Platform Extensions function suffix             ARM</span><br><span class="line"></span><br><span class="line">  Platform Name                                   ARM Platform</span><br><span class="line">Number of devices                                 1</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Device Name                                     &lt;printDeviceInfo:0: get CL_DEVICE_NAME size : error -6&gt;</span><br><span class="line">  Device Vendor                                   ARM</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Device Vendor ID                                &lt;printDeviceInfo:2: get CL_DEVICE_VENDOR_ID : error -6&gt;</span><br><span class="line">  Device Version                                  OpenCL 2.0 git.c8adbf9.ad00b04c1b60847de257177231dc1a53</span><br><span class="line">  Driver Version                                  2.0</span><br><span class="line">  Device OpenCL C Version                         OpenCL C 2.0 git.c8adbf9.ad00b04c1b60847de257177231dc1a53</span><br><span class="line">  Device Type                                     GPU</span><br><span class="line">  Device Profile                                  FULL_PROFILE</span><br><span class="line">  Device Available                                Yes</span><br><span class="line">  Compiler Available                              Yes</span><br><span class="line">  Linker Available                                Yes</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max compute units                               &lt;printDeviceInfo:17: get CL_DEVICE_MAX_COMPUTE_UNITS : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max clock frequency                             &lt;printDeviceInfo:21: get CL_DEVICE_MAX_CLOCK_FREQUENCY : error -6&gt;</span><br><span class="line">  Device Partition                                (core)</span><br><span class="line">    Max number of sub-devices                     0</span><br><span class="line">    Supported partition types                     None</span><br><span class="line">  Max work item dimensions                        3</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max work item sizes                             &lt;printDeviceInfo:36: get number of CL_DEVICE_MAX_WORK_ITEM_SIZES : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max work group size                             &lt;printDeviceInfo:37: get CL_DEVICE_MAX_WORK_GROUP_SIZE : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Preferred work group size multiple              &lt;getWGsizes:671: create context : error -6&gt;</span><br><span class="line">  Preferred / native vector sizes                 </span><br><span class="line">    char                                                16 / 4       </span><br><span class="line">    short                                                8 / 2       </span><br><span class="line">    int                                                  4 / 1       </span><br><span class="line">    long                                                 2 / 1       </span><br><span class="line">    half                                                 8 / 2        (cl_khr_fp16)</span><br><span class="line">    float                                                4 / 1       </span><br><span class="line">    double                                               0 / 0        (n/a)</span><br><span class="line">  Half-precision Floating-point support           (cl_khr_fp16)</span><br><span class="line">    Denormals                                     Yes</span><br><span class="line">    Infinity and NANs                             Yes</span><br><span class="line">    Round to nearest                              Yes</span><br><span class="line">    Round to zero                                 Yes</span><br><span class="line">    Round to infinity                             Yes</span><br><span class="line">    IEEE754-2008 fused multiply-add               Yes</span><br><span class="line">    Support is emulated in software               No</span><br><span class="line">  Single-precision Floating-point support         (core)</span><br><span class="line">    Denormals                                     Yes</span><br><span class="line">    Infinity and NANs                             Yes</span><br><span class="line">    Round to nearest                              Yes</span><br><span class="line">    Round to zero                                 Yes</span><br><span class="line">    Round to infinity                             Yes</span><br><span class="line">    IEEE754-2008 fused multiply-add               Yes</span><br><span class="line">    Support is emulated in software               No</span><br><span class="line">    Correctly-rounded divide and sqrt operations  No</span><br><span class="line">  Double-precision Floating-point support         (n/a)</span><br><span class="line">  Address bits                                    64, Little-Endian</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Global memory size                              &lt;printDeviceInfo:74: get CL_DEVICE_GLOBAL_MEM_SIZE : error -6&gt;</span><br><span class="line">  Error Correction support                        No</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Max memory allocation                           &lt;printDeviceInfo:80: get CL_DEVICE_MAX_MEM_ALLOC_SIZE : error -6&gt;</span><br><span class="line">  Unified memory for Host and Device              Yes</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Shared Virtual Memory (SVM) capabilities        &lt;printDeviceInfo:83: get CL_DEVICE_SVM_CAPABILITIES : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Shared Virtual Memory (SVM) capabilities (ARM)  &lt;printDeviceInfo:84: get CL_DEVICE_SVM_CAPABILITIES_ARM : error -6&gt;</span><br><span class="line">  Minimum alignment for any data type             128 bytes</span><br><span class="line">  Alignment of base address                       1024 bits (128 bytes)</span><br><span class="line">  Preferred alignment for atomics                 </span><br><span class="line">    SVM                                           0 bytes</span><br><span class="line">    Global                                        0 bytes</span><br><span class="line">    Local                                         0 bytes</span><br><span class="line">  Max size for global variable                    65536 (64KiB)</span><br><span class="line">  Preferred total size of global vars             0</span><br><span class="line">  Global Memory cache type                        Read/Write</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Global Memory cache size                        &lt;printDeviceInfo:97: get CL_DEVICE_GLOBAL_MEM_CACHE_SIZE : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Global Memory cache line size                   &lt;printDeviceInfo:98: get CL_DEVICE_GLOBAL_MEM_CACHELINE_SIZE : error -6&gt;</span><br><span class="line">  Image support                                   Yes</span><br><span class="line">    Max number of samplers per kernel             16</span><br><span class="line">    Max size for 1D images from buffer            65536 pixels</span><br><span class="line">    Max 1D or 2D image array size                 2048 images</span><br><span class="line">    Base address alignment for 2D image buffers   32 bytes</span><br><span class="line">    Pitch alignment for 2D image buffers          64 pixels</span><br><span class="line">    Max 2D image size                             65536x65536 pixels</span><br><span class="line">    Max 3D image size                             65536x65536x65536 pixels</span><br><span class="line">    Max number of read image args                 128</span><br><span class="line">    Max number of write image args                64</span><br><span class="line">    Max number of read/write image args           64</span><br><span class="line">  Max number of pipe args                         16</span><br><span class="line">  Max active pipe reservations                    1</span><br><span class="line">  Max pipe packet size                            1024</span><br><span class="line">  Local memory type                               Global</span><br><span class="line">  Local memory size                               32768 (32KiB)</span><br><span class="line">  Max number of constant args                     8</span><br><span class="line">  Max constant buffer size                        65536 (64KiB)</span><br><span class="line">  Max size of kernel argument                     1024</span><br><span class="line">  Queue properties (on host)                      </span><br><span class="line">    Out-of-order execution                        Yes</span><br><span class="line">    Profiling                                     Yes</span><br><span class="line">  Queue properties (on device)                    </span><br><span class="line">    Out-of-order execution                        Yes</span><br><span class="line">    Profiling                                     Yes</span><br><span class="line">    Preferred size                                2097152 (2MiB)</span><br><span class="line">    Max size                                      16777216 (16MiB)</span><br><span class="line">  Max queues on device                            1</span><br><span class="line">  Max events on device                            1024</span><br><span class="line">  Prefer user sync for interop                    No</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  Profiling timer resolution                      &lt;printDeviceInfo:145: get CL_DEVICE_PROFILING_TIMER_RESOLUTION : error -6&gt;</span><br><span class="line">  Execution capabilities                          </span><br><span class="line">    Run OpenCL kernels                            Yes</span><br><span class="line">    Run native kernels                            No</span><br><span class="line">  printf() buffer size                            1048576 (1024KiB)</span><br><span class="line">  Built-in kernels                                </span><br><span class="line">  Device Extensions                               cl_khr_global_int32_base_atomics cl_khr_global_int32_extended_atomics cl_khr_local_int32_base_atomics cl_khr_local_int32_extended_atomics cl_khr_byte_addressable_store cl_khr_3d_image_writes cl_khr_int64_base_atomics cl_khr_int64_extended_atomics cl_khr_fp16 cl_khr_icd cl_khr_egl_image cl_khr_image2d_from_buffer cl_khr_depth_images cl_khr_create_command_queue cl_arm_core_id cl_arm_printf cl_arm_thread_limit_hint cl_arm_non_uniform_work_group_size cl_arm_import_memory cl_arm_shared_virtual_memory</span><br><span class="line"></span><br><span class="line">NULL platform behavior</span><br><span class="line">  clGetPlatformInfo(NULL, CL_PLATFORM_NAME, ...)  ARM Platform</span><br><span class="line">  clGetDeviceIDs(NULL, CL_DEVICE_TYPE_ALL, ...)   Success [ARM]</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  clCreateContext(NULL, ...) [default]            &lt;checkNullCtx:2694: create context with device from default platform : error -6&gt;</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_DEFAULT)  &lt;checkNullCtxFromType:2737: create context from type CL_DEVICE_TYPE_DEFAULT : error -6&gt;</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_CPU)  No devices found in platform</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_GPU)  &lt;checkNullCtxFromType:2737: create context from type CL_DEVICE_TYPE_GPU : error -6&gt;</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_ACCELERATOR)  No devices found in platform</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_CUSTOM)  No devices found in platform</span><br><span class="line">ERROR: The DDK (built for 0x70030000 r0p0 status range [0..15]) is not compatible with this Mali GPU device, /dev/mali0 detected as 0x7212 r0p0 status 0.</span><br><span class="line">Failed creating base context during DDK compatibility check.</span><br><span class="line">  clCreateContextFromType(NULL, CL_DEVICE_TYPE_ALL)  &lt;checkNullCtxFromType:2737: create context from type CL_DEVICE_TYPE_ALL : error -6&gt;</span><br><span class="line"></span><br><span class="line">ICD loader properties</span><br><span class="line">  ICD loader Name                                 OpenCL ICD Loader</span><br><span class="line">  ICD loader Vendor                               OCL Icd free software</span><br><span class="line">  ICD loader Version                              2.2.11</span><br><span class="line">  ICD loader Profile                              OpenCL 2.1</span><br><span class="line">khadas@Khadas:~$ cat /proc/partitions</span><br><span class="line">major minor  #blocks  name</span><br><span class="line"></span><br><span class="line">   1        0       4096 ram0</span><br><span class="line">   1        1       4096 ram1</span><br><span class="line">   1        2       4096 ram2</span><br><span class="line">   1        3       4096 ram3</span><br><span class="line">   1        4       4096 ram4</span><br><span class="line">   1        5       4096 ram5</span><br><span class="line">   1        6       4096 ram6</span><br><span class="line">   1        7       4096 ram7</span><br><span class="line">   1        8       4096 ram8</span><br><span class="line">   1        9       4096 ram9</span><br><span class="line">   1       10       4096 ram10</span><br><span class="line">   1       11       4096 ram11</span><br><span class="line">   1       12       4096 ram12</span><br><span class="line">   1       13       4096 ram13</span><br><span class="line">   1       14       4096 ram14</span><br><span class="line">   1       15       4096 ram15</span><br><span class="line"> 179        0   30535680 mmcblk0</span><br><span class="line"> 179        1       4096 mmcblk0p1</span><br><span class="line"> 179        2      65536 mmcblk0p2</span><br><span class="line"> 179        3       8192 mmcblk0p3</span><br><span class="line"> 179        4       8192 mmcblk0p4</span><br><span class="line"> 179        5      32768 mmcblk0p5</span><br><span class="line"> 179        6   30351360 mmcblk0p6</span><br><span class="line"> 179       96       4096 mmcblk0rpmb</span><br><span class="line"> 179       64       4096 mmcblk0boot1</span><br><span class="line"> 179       32       4096 mmcblk0boot0</span><br><span class="line"> 251        1     262144 zram1</span><br><span class="line"> 251        2     262144 zram2</span><br><span class="line"> 251        3     262144 zram3</span><br><span class="line"> 251        4     262144 zram4</span><br><span class="line">khadas@Khadas:~$ df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">udev            1.9G     0  1.9G   0% /dev</span><br><span class="line">tmpfs           371M   15M  357M   4% /run</span><br><span class="line">/dev/rootfs      29G  3.2G   25G  12% /</span><br><span class="line">tmpfs           1.9G     0  1.9G   0% /dev/shm</span><br><span class="line">tmpfs           5.0M  4.0K  5.0M   1% /run/lock</span><br><span class="line">tmpfs           1.9G     0  1.9G   0% /sys/fs/cgroup</span><br><span class="line">tmpfs           1.9G   24K  1.9G   1% /tmp</span><br><span class="line">tmpfs           371M  8.0K  371M   1% /run/user/1000</span><br></pre></td></tr></table></figure>
<h3 id="package-versions">2.6.3 Package Versions</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ gcc --version</span><br><span class="line">gcc (Ubuntu/Linaro 7.5.0-3ubuntu1~18.04) 7.5.0</span><br><span class="line">Copyright (C) 2017 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the source for copying conditions.  There is NO</span><br><span class="line">warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br><span class="line"></span><br><span class="line">khadas@Khadas:~$ python --version</span><br><span class="line">Python 3.6.9</span><br><span class="line">khadas@Khadas:~$ ls /usr/lib/libopencv*</span><br><span class="line">libopencv_calib3d.so        libopencv_dnn.so.3.4.3         libopencv_highgui.so.3.4      libopencv_ml.so               libopencv_photo.so.3.4.3      libopencv_superres.so.3.4    libopencv_videostab.so</span><br><span class="line">libopencv_calib3d.so.3.4    libopencv_features2d.so        libopencv_highgui.so.3.4.3    libopencv_ml.so.3.4           libopencv_shape.so            libopencv_superres.so.3.4.3  libopencv_videostab.so.3.4</span><br><span class="line">libopencv_calib3d.so.3.4.3  libopencv_features2d.so.3.4    libopencv_imgcodecs.so        libopencv_ml.so.3.4.3         libopencv_shape.so.3.4        libopencv_video.so           libopencv_videostab.so.3.4.3</span><br><span class="line">libopencv_core.so           libopencv_features2d.so.3.4.3  libopencv_imgcodecs.so.3.4    libopencv_objdetect.so        libopencv_shape.so.3.4.3      libopencv_video.so.3.4</span><br><span class="line">libopencv_core.so.3.4       libopencv_flann.so             libopencv_imgcodecs.so.3.4.3  libopencv_objdetect.so.3.4    libopencv_stitching.so        libopencv_video.so.3.4.3</span><br><span class="line">libopencv_core.so.3.4.3     libopencv_flann.so.3.4         libopencv_imgproc.so          libopencv_objdetect.so.3.4.3  libopencv_stitching.so.3.4    libopencv_videoio.so</span><br><span class="line">libopencv_dnn.so            libopencv_flann.so.3.4.3       libopencv_imgproc.so.3.4      libopencv_photo.so            libopencv_stitching.so.3.4.3  libopencv_videoio.so.3.4</span><br><span class="line">libopencv_dnn.so.3.4        libopencv_highgui.so           libopencv_imgproc.so.3.4.3    libopencv_photo.so.3.4        libopencv_superres.so         libopencv_videoio.so.3.4.3</span><br><span class="line">khadas@Khadas:~$ cat /usr/lib/pkgconfig/opencv.pc </span><br><span class="line"># Package Information for pkg-config</span><br><span class="line"></span><br><span class="line">prefix=/usr/local/nick</span><br><span class="line">exec_prefix=$&#123;prefix&#125;</span><br><span class="line">libdir=$&#123;exec_prefix&#125;/lib</span><br><span class="line">includedir_old=$&#123;prefix&#125;/include/opencv</span><br><span class="line">includedir_new=$&#123;prefix&#125;/include</span><br><span class="line"></span><br><span class="line">Name: OpenCV</span><br><span class="line">Description: Open Source Computer Vision Library</span><br><span class="line">Version: 3.4.3</span><br><span class="line">Libs: -L$&#123;exec_prefix&#125;/lib -lopencv_dnn -lopencv_ml -lopencv_objdetect -lopencv_shape -lopencv_stitching -lopencv_superres -lopencv_videostab -lopencv_calib3d -lopencv_features2d -lopencv_highgui -lopencv_videoio -lopencv_imgcodecs -lopencv_video -lopencv_photo -lopencv_imgproc -lopencv_flann -lopencv_core</span><br><span class="line">Libs.private: -ldl -lm -lpthread -lrt</span><br><span class="line">Cflags: -I$&#123;includedir_old&#125; -I$&#123;includedir_new&#125;</span><br><span class="line">khadas@Khadas:~$ sudo apt remove opencv3</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following package was automatically installed and is no longer required:</span><br><span class="line">  libllvm8</span><br><span class="line">Use &#x27;sudo apt autoremove&#x27; to remove it.</span><br><span class="line">The following packages will be REMOVED:</span><br><span class="line">  opencv3</span><br><span class="line">0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.</span><br><span class="line">After this operation, 1024 B disk space will be freed.</span><br><span class="line">Do you want to continue? [Y/n] Y</span><br><span class="line">(Reading database ... 118978 files and directories currently installed.)</span><br><span class="line">Removing opencv3 (3.4.3-2) ...</span><br><span class="line">khadas@Khadas:~$ ls /usr/lib/libopencv*</span><br><span class="line">ls: cannot access &#x27;/usr/lib/libopencv*&#x27;: No such file or directory</span><br><span class="line">khadas@Khadas:~$ cat /usr/lib/pkgconfig/opencv.pc</span><br><span class="line">cat: /usr/lib/pkgconfig/opencv.pc: No such file or directory</span><br></pre></td></tr></table></figure>
<p><span style="color:red"><strong>It looks current OpenCV on current
</strong>VIM3_Ubuntu-xfce-bionic_Linux-4.9_arm64_EMMC_V20191231.img** is
a kind of outdated.<strong></span> Let's just remove package
</strong>opencv3** and have <a
target="_blank" rel="noopener" href="https://opencv.org/releases/">OpenCV-4.3.0</a> installed
manually.</p>
<h1 id="install-manjaro-to-tfsd-card">3. Install <a
target="_blank" rel="noopener" href="https://manjaro.org/">Manjaro</a> To TF/SD Card</h1>
<p>As one of my dreamed operating systems, <a
target="_blank" rel="noopener" href="https://manjaro.org/">Manjaro</a> has already provided 2 operating
systems for <strong>Khadas</strong> users to try out.</p>
<ul>
<li><a
target="_blank" rel="noopener" href="https://manjaro.org/get-manjaro/#khadas-vim-3-kde-plasma">KDE
Plasma 20.04 for Khadas Vim 3</a></li>
<li><a target="_blank" rel="noopener" href="https://manjaro.org/get-manjaro/#khadas-vim-3-xfce">XFCE
for Khadas Vim 3</a></li>
</ul>
<p>To flash either of the above systems onto a TF/SD card is simple.
However, both are <a
target="_blank" rel="noopener" href="https://forum.manjaro.org/t/manjaro-arm-20-04-released/133374/89"><span
style="color:Red"><strong>ONLY for SD-USB, instead of
EMMC</strong></span></a>. For instancen:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  Manjaro burn-tool -b VIM3 -i ./Manjaro-ARM-xfce-vim3-20.04.img </span><br><span class="line">Try to burn Amlogic image...</span><br><span class="line">ERROR: Try to burn to eMMC storage, but the image installation type is &#x27;SD-USB&#x27;, please use &#x27;EMMC&#x27; image!</span><br></pre></td></tr></table></figure>
<p>Before moving on, let's cite the following word from <a
target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/BootFromExtMedia.html">Boot Images
from External Media</a>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARNING: Don’t use your PC as the USB-Host to supply the electrical power, otherwise it will fail to activate Multi-Boot!</span><br></pre></td></tr></table></figure>
<h1 id="npu">4. <a
target="_blank" rel="noopener" href="https://www.khadas.com/npu-toolkit-vim3">NPU</a></h1>
<p>In this section, we're testing the computing capability of <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a>'s
NPU.</p>
<p>Before everything starts, make sure you have the
<strong>galcore</strong> module loaded, by using command
<code>modinfo galcore</code>.</p>
<h2 id="obtain-aml_npu_sdk-from-khadas">4.1 Obtain aml_npu_sdk From
Khadas</h2>
<p>Extract the obtained <strong>aml_npu_sdk.tgz</strong> on <span
style="color:red"><strong>your local host</strong></span>. Bear in mind
that it is <span style="color:red"><strong>your local host, BUT NOT <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas
VIM3</a></strong></span>. Relative issues can be found at:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://forum.khadas.com/t/npu-with-opencv4/7779/6">Npu
with OpenCV4?</a></li>
<li><a
target="_blank" rel="noopener" href="https://forum.khadas.com/t/npu-documentation-and-tools/5214/58">NPU
documentation and tools</a></li>
</ul>
<h2 id="model-conversion-on-host">4.2 Model Conversion on Host</h2>
<p>Afterwards, the models applicable on <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a> can be
obtained by following <a
target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/HowToUseNpu.html#Model-Conversion">Model
Conversion</a>. Anyway, on my laptop, I obtained the converted model as
follows:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">➜  nbg_unify_inception_v3 ll</span><br><span class="line">total 28M</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  577 Apr 27 14:10 BUILD</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  28M Apr 27 14:10 inception_v3.nb</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  13K Apr 27 14:10 inceptionv3.vcxproj</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 5.8K Apr 27 14:10 main.c</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 2.0K Apr 27 14:10 makefile.linux</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  358 Apr 27 14:10 vnn_global.h</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 7.1K Apr 27 14:10 vnn_inceptionv3.c</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  985 Apr 27 14:10 vnn_inceptionv3.h</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 3.5K Apr 27 14:10 vnn_post_process.c</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  464 Apr 27 14:10 vnn_post_process.h</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  20K Apr 27 14:10 vnn_pre_process.c</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 1.3K Apr 27 14:10 vnn_pre_process.h</span><br></pre></td></tr></table></figure>
<p>Do I need to emphasize that I'm using <a
target="_blank" rel="noopener" href="https://github.com/tensorflow/tensorflow/releases/tag/v2.1.0">Tensorflow
2.1.0</a> ? Anyway, check the following:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ python</span><br><span class="line">Python 3.6.9 (default, Apr 18 2020, 01:56:04) </span><br><span class="line">[GCC 8.4.0] on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; import tensorflow as tf</span></span><br><span class="line">2020-04-29 03:11:24.272348: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.2</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; tf.__version__</span></span><br><span class="line">&#x27;2.1.0&#x27;</span><br></pre></td></tr></table></figure>
<h2 id="build-case-code">4.3 Build Case Code</h2>
<h3 id="cross-build-on-host">4.3.1 Cross-build on Host</h3>
<p>You can of course cross-build the case code on <span
style="color:red"><strong>your local host, instead of <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas
VIM3</a></strong></span> by referring to <a
target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/HowToUseNpu.html#Compile-the-Case-Code">Compile
the Case Code</a>. (The document seems <span
style="color:red"><strong>NOT updated yet</strong></span>.) Instead of
using 1 argument, we specify 2 auguments, one for <a
target="_blank" rel="noopener" href="https://www.khadas.com/npu-toolkit-vim3">aml_npu_sdk</a>, the
other for <a target="_blank" rel="noopener" href="https://github.com/khadas/fenix">Fenix</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">➜  nbg_unify_inception_v3 ./build_vx.sh ....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4 ....../fenix </span><br><span class="line">aarch64-linux-gnu-gcc -c  -DLINUX -Wall -D_REENTRANT -fno-strict-aliasing -mtune=cortex-a53 -march=armv8-a -O2 -DgcdENABLE_3D=1 -DgcdENABLE_2D=0 -DgcdENABLE_VG=0 -DgcdUSE_VX=1 -DUSE_VDK=1 -DgcdMOVG=0 -DEGL_API_FB -DgcdSTATIC_LINK=0 -DgcdFPGA_BUILD=0 -DGC_ENABLE_LOADTIME_OPT=1 -DgcdUSE_VXC_BINARY=0 -DgcdGC355_MEM_PRINT=0 -DgcdGC355_PROFILER=0 -DVIVANTE_PROFILER=1 -DVIVANTE_PROFILER_CONTEXT=1 -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include/HAL -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/sdk/inc  -I./ -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/utils -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/client  -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/ops -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/third-party/jpeg-9b -o bin_r/vnn_pre_process.o vnn_pre_process.c</span><br><span class="line">aarch64-linux-gnu-gcc -c  -DLINUX -Wall -D_REENTRANT -fno-strict-aliasing -mtune=cortex-a53 -march=armv8-a -O2 -DgcdENABLE_3D=1 -DgcdENABLE_2D=0 -DgcdENABLE_VG=0 -DgcdUSE_VX=1 -DUSE_VDK=1 -DgcdMOVG=0 -DEGL_API_FB -DgcdSTATIC_LINK=0 -DgcdFPGA_BUILD=0 -DGC_ENABLE_LOADTIME_OPT=1 -DgcdUSE_VXC_BINARY=0 -DgcdGC355_MEM_PRINT=0 -DgcdGC355_PROFILER=0 -DVIVANTE_PROFILER=1 -DVIVANTE_PROFILER_CONTEXT=1 -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include/HAL -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/sdk/inc  -I./ -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/utils -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/client  -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/ops -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/third-party/jpeg-9b -o bin_r/vnn_inceptionv3.o vnn_inceptionv3.c</span><br><span class="line">vnn_inceptionv3.c: In function ‘vnn_CreateInceptionV3’:</span><br><span class="line">vnn_inceptionv3.c:139:29: warning: unused variable ‘data’ [-Wunused-variable]</span><br><span class="line">     uint8_t *               data;</span><br><span class="line">                             ^~~~</span><br><span class="line">At top level:</span><br><span class="line">vnn_inceptionv3.c:91:17: warning: ‘load_data’ defined but not used [-Wunused-function]</span><br><span class="line"> static uint8_t* load_data</span><br><span class="line">                 ^~~~~~~~~</span><br><span class="line">aarch64-linux-gnu-gcc -c  -DLINUX -Wall -D_REENTRANT -fno-strict-aliasing -mtune=cortex-a53 -march=armv8-a -O2 -DgcdENABLE_3D=1 -DgcdENABLE_2D=0 -DgcdENABLE_VG=0 -DgcdUSE_VX=1 -DUSE_VDK=1 -DgcdMOVG=0 -DEGL_API_FB -DgcdSTATIC_LINK=0 -DgcdFPGA_BUILD=0 -DGC_ENABLE_LOADTIME_OPT=1 -DgcdUSE_VXC_BINARY=0 -DgcdGC355_MEM_PRINT=0 -DgcdGC355_PROFILER=0 -DVIVANTE_PROFILER=1 -DVIVANTE_PROFILER_CONTEXT=1 -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include/HAL -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/sdk/inc  -I./ -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/utils -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/client  -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/ops -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/third-party/jpeg-9b -o bin_r/main.o main.c</span><br><span class="line">aarch64-linux-gnu-gcc -c  -DLINUX -Wall -D_REENTRANT -fno-strict-aliasing -mtune=cortex-a53 -march=armv8-a -O2 -DgcdENABLE_3D=1 -DgcdENABLE_2D=0 -DgcdENABLE_VG=0 -DgcdUSE_VX=1 -DUSE_VDK=1 -DgcdMOVG=0 -DEGL_API_FB -DgcdSTATIC_LINK=0 -DgcdFPGA_BUILD=0 -DGC_ENABLE_LOADTIME_OPT=1 -DgcdUSE_VXC_BINARY=0 -DgcdGC355_MEM_PRINT=0 -DgcdGC355_PROFILER=0 -DVIVANTE_PROFILER=1 -DVIVANTE_PROFILER_CONTEXT=1 -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/include/HAL -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/sdk/inc  -I./ -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/utils -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/client  -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include/ops -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/include -I....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/third-party/jpeg-9b -o bin_r/vnn_post_process.o vnn_post_process.c</span><br><span class="line">aarch64-linux-gnu-gcc  -mtune=cortex-a53 -march=armv8-a -Wl,-rpath-link ....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/drivers  bin_r/vnn_pre_process.o  bin_r/vnn_inceptionv3.o  bin_r/main.o  bin_r/vnn_post_process.o -o bin_r/inceptionv3 -L....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/build/sdk/drivers -l OpenVX -l OpenVXU -l CLC -l VSC -lGAL ....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/lib/libjpeg.a -L....../aml_npu_sdk/linux_sdk/linux_sdk_6.3.3.4/acuity-ovxlib-dev/lib -l ovxlib -L....../fenix/build/toolchains/gcc-linaro-aarch64-linux-gnu/aarch64-linux-gnu/libc/lib -lm -lrt</span><br><span class="line">aarch64-linux-gnu-strip bin_r/inceptionv3</span><br><span class="line">make: Nothing to be done for &#x27;all&#x27;.</span><br><span class="line">➜  nbg_unify_inception_v3 ll bin_r </span><br><span class="line">total 164K</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 126K Apr 27 14:22 inceptionv3</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 6.3K Apr 27 14:22 main.o</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 3.9K Apr 27 14:22 vnn_inceptionv3.o</span><br><span class="line">-rwxrwxrwx 1 longervision longervision 3.5K Apr 27 14:22 vnn_post_process.o</span><br><span class="line">-rwxrwxrwx 1 longervision longervision  17K Apr 27 14:22 vnn_pre_process.o</span><br></pre></td></tr></table></figure>
<p><strong>inceptionv3</strong> now should be ready to use, but in my
case, it's <strong>NOT</strong> working properly. It's probably because
<a target="_blank" rel="noopener" href="https://github.com/khadas/fenix">Fenix</a> is
<strong>NOT</strong> able to provide/represent the correct cross-compile
toolchains for my installed <a
target="_blank" rel="noopener" href="https://dl.khadas.com/Firmware/Krescue/images/VIMx.Ubuntu-xfce-bionic_Linux-4.9_arm64_V20191231.emmc.kresq">VIMx.Ubuntu-xfce-bionic_Linux-4.9_arm64_V20191231.emmc.kresq</a>.
Anyway, this is <span style="color:red"><strong>NOT my
preference</strong></span>.</p>
<h3 id="directly-build-on-khadas-vim3">4.3.2 Directly Build on <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a></h3>
<p><strong>Let's leave this for the next section <span
style="color:red">4.4 Run Executable on <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas
VIM3</a></span></strong>.</p>
<h2 id="run-executable-on-khadas-vim3">4.4 Run Executable on <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a></h2>
<h3 id="step-1-install-aml-npu">4.4.1 Step 1: Install aml-npu</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ sudo apt install aml-npu</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following packages were automatically installed and are no longer required:</span><br><span class="line">  libllvm8 libssh-dev</span><br><span class="line">Use &#x27;sudo apt autoremove&#x27; to remove them.</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  aml-npu</span><br><span class="line">0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.</span><br><span class="line">Need to get 0 B/3318 kB of archives.</span><br><span class="line">After this operation, 1024 B of additional disk space will be used.</span><br><span class="line">Selecting previously unselected package aml-npu.</span><br><span class="line">(Reading database ... 136037 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../aml-npu_6.4.0.3_arm64.deb ...</span><br><span class="line">Unpacking aml-npu (6.4.0.3) ...</span><br><span class="line">Setting up aml-npu (6.4.0.3) ...</span><br></pre></td></tr></table></figure>
<p>And with command line <code>dpkg -L aml-npu</code>, you'll see what's
been installed by <strong>aml-npu</strong>. However, due to its
commercial license, I may <strong>NOT</strong> be allowed to show
anything here in my blog.</p>
<div style="text-align: center; font-size: 3em;">
<pre><code>😶</code></pre>
</div>
<h3 id="step-2-install-aml-npu-demo-and-run-demo">4.4.2 Step 2: Install
aml-npu-demo and Run Demo</h3>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ sudo apt install aml-npu-demo</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">The following packages were automatically installed and are no longer required:</span><br><span class="line">  libllvm8 libssh-dev</span><br><span class="line">Use &#x27;sudo apt autoremove&#x27; to remove them.</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  aml-npu-demo</span><br><span class="line">0 upgraded, 1 newly installed, 0 to remove and 1 not upgraded.</span><br><span class="line">Need to get 0 B/19.7 MB of archives.</span><br><span class="line">After this operation, 1024 B of additional disk space will be used.</span><br><span class="line">Selecting previously unselected package aml-npu-demo.</span><br><span class="line">(Reading database ... 136098 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../aml-npu-demo_6.3.3.4_arm64.deb ...</span><br><span class="line">Unpacking aml-npu-demo (6.3.3.4) ...</span><br><span class="line">Setting up aml-npu-demo (6.3.3.4) ...</span><br></pre></td></tr></table></figure>
<p>Where is the sample to run?
<code>/usr/share/npu/inceptionv3</code>.</p>
<p>Alright, let's try it.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~$ cd /usr/share/npu/inceptionv3</span><br><span class="line">khadas@Khadas:/usr/share/npu/inceptionv3$ ./inceptionv3 ./inception_v3.nb ./dog_299x299.jpg </span><br><span class="line">D [setup_node:368]Setup node id[0] uid[4294967295] op[NBG]</span><br><span class="line">D [print_tensor:136]in(0) : id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">D [print_tensor:136]out(0): id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [optimize_node:312]Backward optimize neural network</span><br><span class="line">D [optimize_node:319]Forward optimize neural network</span><br><span class="line">I [compute_node:261]Create vx node</span><br><span class="line">Create Neural Network: 37ms or 37726us</span><br><span class="line">I [vsi_nn_PrintGraph:1421]Graph:</span><br><span class="line">I [vsi_nn_PrintGraph:1422]***************** Tensors ******************</span><br><span class="line">D [print_tensor:146]id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [print_tensor:146]id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">I [vsi_nn_PrintGraph:1431]***************** Nodes ******************</span><br><span class="line">I [vsi_nn_PrintNode:159](             NBG)node[0] [in: 1 ], [out: 0 ] [10587cb0]</span><br><span class="line">I [vsi_nn_PrintGraph:1440]******************************************</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 268203 data.</span><br><span class="line">Verify...</span><br><span class="line">Verify Graph: 1ms or 1811us</span><br><span class="line">Start run graph [1] times...</span><br><span class="line">Run the 1 time: 28ms or 28075us</span><br><span class="line">vxProcessGraph execution time:</span><br><span class="line">Total   28ms or 28091us</span><br><span class="line">Average 28.09ms or 28091.00us</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br><span class="line"> --- Top5 ---</span><br><span class="line">208: 0.819824</span><br><span class="line">209: 0.040344</span><br><span class="line">223: 0.009354</span><br><span class="line">185: 0.002956</span><br><span class="line">268: 0.002829</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br></pre></td></tr></table></figure>
<p>The program runs smoothly.</p>
<div style="text-align: center; font-size: 3em;">
<pre><code>😏</code></pre>
</div>
<h3 id="step-3-build-your-own-executable-and-run">4.4.3 Step 3: Build
Your Own Executable and Run</h3>
<p>Clearly, <strong>ALL (really???)</strong> required development files
have been provided by <strong>aml-npu</strong>, in such, we should be
able to build this demo <strong>inceptionv3</strong> out by
ourselves.</p>
<h4 id="you-still-need-aml_npu_sdk-from-khadas">4.4.3.1 You STILL Need
aml_npu_sdk from <a target="_blank" rel="noopener" href="https://www.khadas.com/">Khadas</a></h4>
<p>Besides <strong>aml-npu</strong> from <strong>repo</strong>, in order
to have the demo <strong>inceptionv3</strong> <span
style="color:red"><strong>fully</strong></span> and successfully built,
you still need <strong>aml_npu_sdk</strong> from <a
target="_blank" rel="noopener" href="https://www.khadas.com/">Khadas</a>. In my case, you do need
<strong>acuity-ovxlib-dev</strong>, and let's do
<code>export ACUITY_OVXLIB_DEV=path_to_acuity-ovxlib-dev</code>.</p>
<h4 id="build-inceptionv3-from-source">4.4.3.2 Build inceptionv3 from
Source</h4>
<p>We don't need to copy the entire <strong>aml_npu_sdk</strong> onto <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3</a>, but
<strong>ONLY demo/inceptionv3</strong>. Here in my case, <strong>ONLY
demo/inceptionv3</strong> is copied under <code>~/Programs</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ ll</span><br><span class="line">total 28236</span><br><span class="line">drwxr-xr-x 3 khadas khadas     4096 Apr 29 09:23 ./</span><br><span class="line">drwxrwxr-x 5 khadas khadas     4096 Apr 29 09:22 ../</span><br><span class="line">-rwxr-xr-x 1 khadas khadas      577 Apr 29 09:22 BUILD*</span><br><span class="line">drwxr-xr-x 2 khadas khadas     4096 Apr 29 09:22 bin_demo/</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     9878 Apr 29 09:22 build_vx.sh*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas 28807168 Apr 29 09:23 inception_v3.nb*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    12691 Apr 29 09:22 inceptionv3.vcxproj*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     5869 Apr 29 09:23 main.c*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     2000 Apr 29 09:23 makefile.linux*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas      358 Apr 29 09:23 vnn_global.h*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     7191 Apr 29 09:23 vnn_inceptionv3.c*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas      985 Apr 29 09:23 vnn_inceptionv3.h*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     3566 Apr 29 09:23 vnn_post_process.c*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas      464 Apr 29 09:23 vnn_post_process.h*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    20385 Apr 29 09:23 vnn_pre_process.c*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas     1294 Apr 29 09:23 vnn_pre_process.h*</span><br></pre></td></tr></table></figure>
<p>This is almost the same as folder
<strong>nbg_unify_inception_v3</strong> shown in <a
href="./#42-model-conversion">4.2 Model Conversion on Host</a>.</p>
<p>Now, <span style="color:red"><strong>The MOST important part is to
modify makefile</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ cp makefile.linux makefile</span><br></pre></td></tr></table></figure>
<p>My <strong>makefile</strong> is modified as follows.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ cat makefile</span><br><span class="line">CFLAGS += -I$&#123;ACUITY_OVXLIB_DEV&#125;/include</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">###############################################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Supply necessary libraries.</span></span><br><span class="line">LIBS += -L/lib -lOpenVX -lOpenVXU -lCLC -lVSC -lGAL -lovxlib -lm -ljpeg</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">############################################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Macros.</span></span><br><span class="line">PROGRAM = 1</span><br><span class="line">TARGET_NAME = inceptionv3</span><br><span class="line">CUR_SOURCE = $&#123;wildcard *.c&#125;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">############################################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Objects.</span></span><br><span class="line">OBJECTS =  $&#123;patsubst %.c, $(OBJ_DIR)/%.o, $(CUR_SOURCE)&#125;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">installation directory</span></span><br><span class="line">INSTALL_DIR := ./</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">###############################################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Include the common makefile.</span></span><br><span class="line"></span><br><span class="line">include $&#123;VIVANTE_SDK&#125;/common.target</span><br></pre></td></tr></table></figure>
<p>In fact, you still need to modify <strong>common.target</strong> a
little bit accordingly. However, <span style="color:red"><strong>to
disclose it</strong></span> in this blog is still <span
style="color:red"><strong>NOT allowed</strong></span> I think. Anyway,
after the modification, let's <strong>make it</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ make</span><br><span class="line">cc -c -I/opt/acuity-ovxlib-dev/include -o bin_r/vnn_pre_process.o vnn_pre_process.c</span><br><span class="line">cc -c -I/opt/acuity-ovxlib-dev/include -o bin_r/vnn_inceptionv3.o vnn_inceptionv3.c</span><br><span class="line">cc -c -I/opt/acuity-ovxlib-dev/include -o bin_r/main.o main.c</span><br><span class="line">cc -c -I/opt/acuity-ovxlib-dev/include -o bin_r/vnn_post_process.o vnn_post_process.c</span><br><span class="line">cc -Wl,-rpath-link /opt/vivante_sdk/drivers  bin_r/vnn_pre_process.o  bin_r/vnn_inceptionv3.o  bin_r/main.o  bin_r/vnn_post_process.o -o bin_r/inceptionv3 -L/lib -lOpenVX -lOpenVXU -lCLC -lVSC -lGAL -lovxlib -lm -ljpeg -lrt</span><br><span class="line">bin_r/inceptionv3</span><br><span class="line">Usage: bin_r/inceptionv3 data_file inputs...</span><br><span class="line">/opt/vivante_sdk/common.target:64: recipe for target &#x27;bin_r/inceptionv3&#x27; failed</span><br><span class="line">make: *** [bin_r/inceptionv3] Error 255</span><br></pre></td></tr></table></figure>
<p><span style="color:red"><strong>Don't worry</strong></span> about the
error. It just failed to run the demo, but the executable
<strong>inceptionv3</strong> has already been successfully built under
folder <strong>bin_r</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ ll bin_r</span><br><span class="line">total 92</span><br><span class="line">drwxrwxr-x 2 khadas khadas  4096 Apr 29 09:46 ./</span><br><span class="line">drwxr-xr-x 4 khadas khadas  4096 Apr 29 09:46 ../</span><br><span class="line">-rwxrwxr-x 1 khadas khadas 34864 Apr 29 09:46 inceptionv3*</span><br><span class="line">-rw-rw-r-- 1 khadas khadas  6864 Apr 29 09:46 main.o</span><br><span class="line">-rw-rw-r-- 1 khadas khadas  5128 Apr 29 09:46 vnn_inceptionv3.o</span><br><span class="line">-rw-rw-r-- 1 khadas khadas  4456 Apr 29 09:46 vnn_post_process.o</span><br><span class="line">-rw-rw-r-- 1 khadas khadas 21976 Apr 29 09:46 vnn_pre_process.o</span><br></pre></td></tr></table></figure>
<h4 id="run-inceptionv3">4.4.3.3 Run inceptionv3</h4>
<p>Let's run <strong>inceptionv3</strong> under folder
<strong>bin_demo</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3$ cd bin_demo/</span><br><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ll</span><br><span class="line">total 28384</span><br><span class="line">drwxr-xr-x 2 khadas khadas     4096 Apr 29 09:52 ./</span><br><span class="line">drwxr-xr-x 4 khadas khadas     4096 Apr 29 09:57 ../</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    15981 Apr 29 09:52 dog_299x299.jpg*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    88322 Apr 29 09:52 goldfish_299x299.jpg*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas    10479 Apr 29 09:52 imagenet_slim_labels.txt*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas 28807168 Apr 29 09:52 inception_v3.nb*</span><br><span class="line">-rwxr-xr-x 1 khadas khadas   129568 Apr 29 09:52 inceptionv3*</span><br></pre></td></tr></table></figure>
<p>This is the original status of <strong>ALL</strong> files under
<strong>bin_demo</strong>. Let's copy and paste our built
<strong>bin_r/inceptionv3</strong> into this folder
<strong>bin_demo</strong>. The size of the <strong>executable</strong>
seems to be dramatically decreased.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ cp ../bin_r/inceptionv3 ./</span><br><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ll inceptionv3 </span><br><span class="line">-rwxr-xr-x 1 khadas khadas 34864 Apr 29 09:58 inceptionv3*</span><br></pre></td></tr></table></figure>
<p>Now, let's copy the built <strong>inception_v3.nb</strong>
<strong>from host to <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas
VIM3</a></strong>. It seems <strong>inception_v3.nb</strong> built by <a
target="_blank" rel="noopener" href="https://github.com/tensorflow/tensorflow/releases/tag/v2.1.0">Tensorflow
2.1.0</a> on host is of the same size as provided by <a
target="_blank" rel="noopener" href="https://www.khadas.com/">Khadas</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ll inception_v3.nb </span><br><span class="line">-rwxr-xr-x 1 khadas khadas 28807168 Apr 29 10:06 inception_v3.nb*</span><br></pre></td></tr></table></figure>
<p><strong>Finally</strong>, let's run the demo.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ./inceptionv3 ./inception_v3.nb ./dog_299x299.jpg </span><br><span class="line">D [setup_node:368]Setup node id[0] uid[4294967295] op[NBG]</span><br><span class="line">D [print_tensor:136]in(0) : id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">D [print_tensor:136]out(0): id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [optimize_node:312]Backward optimize neural network</span><br><span class="line">D [optimize_node:319]Forward optimize neural network</span><br><span class="line">I [compute_node:261]Create vx node</span><br><span class="line">Create Neural Network: 58ms or 58961us</span><br><span class="line">I [vsi_nn_PrintGraph:1421]Graph:</span><br><span class="line">I [vsi_nn_PrintGraph:1422]***************** Tensors ******************</span><br><span class="line">D [print_tensor:146]id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [print_tensor:146]id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">I [vsi_nn_PrintGraph:1431]***************** Nodes ******************</span><br><span class="line">I [vsi_nn_PrintNode:159](             NBG)node[0] [in: 1 ], [out: 0 ] [a56c0cb0]</span><br><span class="line">I [vsi_nn_PrintGraph:1440]******************************************</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 268203 data.</span><br><span class="line">Verify...</span><br><span class="line">Verify Graph: 1ms or 1959us</span><br><span class="line">Start run graph [1] times...</span><br><span class="line">Run the 1 time: 29ms or 29038us</span><br><span class="line">vxProcessGraph execution time:</span><br><span class="line">Total   29ms or 29063us</span><br><span class="line">Average 29.06ms or 29063.00us</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br><span class="line"> --- Top5 ---</span><br><span class="line">208: 0.828613</span><br><span class="line">209: 0.040771</span><br><span class="line">223: 0.008278</span><br><span class="line">268: 0.002737</span><br><span class="line">185: 0.002396</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br></pre></td></tr></table></figure>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">khadas@Khadas:~/Programs/inceptionv3/bin_demo$ ./inceptionv3 ./inception_v3.nb ./goldfish_299x299.jpg </span><br><span class="line">D [setup_node:368]Setup node id[0] uid[4294967295] op[NBG]</span><br><span class="line">D [print_tensor:136]in(0) : id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">D [print_tensor:136]out(0): id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [optimize_node:312]Backward optimize neural network</span><br><span class="line">D [optimize_node:319]Forward optimize neural network</span><br><span class="line">I [compute_node:261]Create vx node</span><br><span class="line">Create Neural Network: 64ms or 64785us</span><br><span class="line">I [vsi_nn_PrintGraph:1421]Graph:</span><br><span class="line">I [vsi_nn_PrintGraph:1422]***************** Tensors ******************</span><br><span class="line">D [print_tensor:146]id[   0] vtl[0] const[0] shape[ 1001, 1          ] fmt[f16] qnt[NONE]</span><br><span class="line">D [print_tensor:146]id[   1] vtl[0] const[0] shape[ 3, 299, 299, 1   ] fmt[u8 ] qnt[ASM zp=137, scale=0.007292]</span><br><span class="line">I [vsi_nn_PrintGraph:1431]***************** Nodes ******************</span><br><span class="line">I [vsi_nn_PrintNode:159](             NBG)node[0] [in: 1 ], [out: 0 ] [6df47cb0]</span><br><span class="line">I [vsi_nn_PrintGraph:1440]******************************************</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 268203 data.</span><br><span class="line">Verify...</span><br><span class="line">Verify Graph: 2ms or 2951us</span><br><span class="line">Start run graph [1] times...</span><br><span class="line">Run the 1 time: 28ms or 28835us</span><br><span class="line">vxProcessGraph execution time:</span><br><span class="line">Total   28ms or 28873us</span><br><span class="line">Average 28.87ms or 28873.00us</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br><span class="line"> --- Top5 ---</span><br><span class="line">  2: 0.832520</span><br><span class="line">795: 0.008316</span><br><span class="line">974: 0.003586</span><br><span class="line">408: 0.002302</span><br><span class="line">393: 0.002016</span><br><span class="line">I [vsi_nn_ConvertTensorToData:750]Create 2002 data.</span><br></pre></td></tr></table></figure>
<p>By comparing to <strong>imagenet_slim_labels.txt</strong> under
current folder, let's take a look at our inference results. Only the
<strong>FIRST</strong> inference is qualified because of the
<strong>probability</strong>.</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Index</th>
<th style="text-align: left;">Result for dog_299x299.jpg</th>
<th style="text-align: left;">Result for goldfish_299x299.jpg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">N/A</td>
<td style="text-align: left;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/dog_299x299.jpg"
alt="dog_299x299.jpg" /></td>
<td style="text-align: left;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/goldfish_299x299.jpg"
alt="goldfish_299x299.jpg" /></td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">208: 'curly-coated retriever',</td>
<td style="text-align: left;">2: 'tench',</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">209: 'golden retriever',</td>
<td style="text-align: left;">795: 'shower cap',</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">223: 'Irish water spaniel',</td>
<td style="text-align: left;">974: 'cliff',</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">268: 'miniature poodle',</td>
<td style="text-align: left;">408: 'altar',</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">185: 'Kerry blue terrier',</td>
<td style="text-align: left;">393: 'coho',</td>
</tr>
</tbody>
</table>
<div style="text-align: center; font-size: 3em;">
<pre><code>😘</code></pre>
</div>
<h1 id="dual-boot-from-manjaro">5. Dual Boot From <a
target="_blank" rel="noopener" href="https://manjaro.org/">Manjaro</a></h1>
<h2 id="how-to-boot-images-from-external-media">5.1 How to <a
target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/BootFromExtMedia.html">Boot Images
from External Media</a>?</h2>
<p>There are clearly 2 options:</p>
<ul>
<li>dual boot by selecting devices: <strong>EMMC</strong> or
<strong>TF/SD Card</strong>. On <a
target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/BootFromExtMedia.html">Boot Images
from External Media</a>, it's recommended as
<code>Via Keys mode (Side-Buttons) - the easiest and fastest way</code>,
which is the <strong>FIRST</strong> option on page <a
target="_blank" rel="noopener" href="https://docs.khadas.com/vim1/HowtoBootIntoUpgradeMode.html">How To
Boot Into Upgrade Mode</a>. Therefore, by following 4 steps as
follows(cited from <a
target="_blank" rel="noopener" href="https://docs.khadas.com/vim3/HowtoBootIntoUpgradeMode.html">How To
Boot Into Upgrade Mode</a>), we should be able to boot into SD-USB. <em>
<ol type="1">
<li>Power on VIM3.</li>
<li>Long press the POWER key without releasing it.</li>
<li>Short press the ‘Reset’ key and release it.</li>
<li>Count for 2 to 3 seconds, then release the POWER key to enter into
Upgrade Mode. You will see the sys-led turn ON when you’ve entered
Upgrade Mode. </em></li>
</ol></li>
<li>multiple boot via <a
target="_blank" rel="noopener" href="https://www.gnu.org/software/grub/">grub</a>: Reasonably speaking,
2 operating systems may even have a chance to be installed onto
<strong>a SINGLE EMMC</strong></li>
</ul>
<h2
id="how-to-flash-manjaro-xfce-for-khadas-vim-3-from-tfsd-card-to-emmc">5.2
How to flash <a
target="_blank" rel="noopener" href="https://manjaro.org/get-manjaro/#khadas-vim-3-xfce">Manjaro XFCE
for Khadas Vim 3</a> from <strong>TF/SD card</strong> to
<strong>EMMC</strong>?</h2>
<p><strong>ONLY 1</strong> operating system is preferred. Why??? <a
target="_blank" rel="noopener" href="https://www.khadas.com/product-page/vim3">Khadas VIM3 board</a>
comes with a large <strong>EMMC of size 32G</strong>.</p>
<p>After a <strong>VERY long</strong> time struggling, I would really
like to emphasize <span style="color:red"><strong>the quality of Type C
cable and power adaptor</strong></span> again. Try to buy things
<strong>NOT from <a target="_blank" rel="noopener" href="http://taobao.com/">Taobao</a></strong>.</p>
<div style="text-align: center; font-size: 3em;">
<pre><code>😢
😭</code></pre>
</div>
<p>Finally, I had <a
target="_blank" rel="noopener" href="https://manjaro.org/get-manjaro/#khadas-vim-3-xfce">Manjaro XFCE
for Khadas Vim 3</a> on SD card booted and running, as follows:</p>
<figure>
<img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/Khadas/manjaro.png"
alt="Manjaro" />
<figcaption aria-hidden="true">Manjaro</figcaption>
</figure>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ssh khadas@192.168.1.95</span><br><span class="line">khadas@192.168.1.95&#x27;s password: </span><br><span class="line">Welcome to Manjaro-ARM</span><br><span class="line">~~Website: https://manjaro.org</span><br><span class="line">~~Forum:   https://forum.manjaro.org/c/manjaro-arm</span><br><span class="line">~~IRC:     #manjaro-arm on irc.freenode.net</span><br><span class="line">~~Matrix:  #manjaro-arm-public:matrix.org</span><br><span class="line">Last login: Sun Apr 19 03:24:46 2020 from 192.168.1.200</span><br><span class="line">[khadas@manjaro ~]$ ls</span><br><span class="line">Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos</span><br><span class="line">[khadas@manjaro ~]$ pwd</span><br><span class="line">/home/khadas</span><br><span class="line">[khadas@manjaro ~]$ uname -a</span><br><span class="line">Linux manjaro 5.6.0-0.6 #1 SMP PREEMPT Wed Apr 1 19:25:06 +03 2020 aarch64 GNU/Linux</span><br><span class="line">[khadas@manjaro ~]$ lsb_release -a</span><br><span class="line">LSB Version:	n/a</span><br><span class="line">Distributor ID:	Manjaro-ARM</span><br><span class="line">Description:	Manjaro ARM Linux</span><br><span class="line">Release:	20.04</span><br><span class="line">Codename:	n/a</span><br><span class="line">[khadas@manjaro ~]$ gcc --version</span><br><span class="line">-bash: gcc: command not found</span><br><span class="line">[khadas@manjaro ~]$ g++ --version</span><br><span class="line">-bash: g++: command not found</span><br><span class="line">[khadas@manjaro ~]$ sudo apt install gcc g++ automake autoconfig libtool</span><br><span class="line"></span><br><span class="line">We trust you have received the usual lecture from the local System</span><br><span class="line">Administrator. It usually boils down to these three things:</span><br><span class="line"></span><br><span class="line">    #1) Respect the privacy of others.</span><br><span class="line">    #2) Think before you type.</span><br><span class="line">    #3) With great power comes great responsibility.</span><br><span class="line"></span><br><span class="line">[sudo] password for khadas: </span><br><span class="line">sudo: apt: command not found</span><br><span class="line">[khadas@manjaro ~]$ pamac help</span><br><span class="line">Available actions:</span><br><span class="line">  pamac --version     </span><br><span class="line">  pamac --help,-h      [action]</span><br><span class="line">  pamac clean          [options]</span><br><span class="line">  pamac checkupdates   [options]</span><br><span class="line">  pamac update,upgrade [options]</span><br><span class="line">  pamac search         [options] &lt;package(s)&gt;</span><br><span class="line">  pamac info           [options] &lt;package(s)&gt;</span><br><span class="line">  pamac list           [options] &lt;package(s)&gt;</span><br><span class="line">  pamac install        [options] &lt;package(s)&gt;</span><br><span class="line">  pamac reinstall      [options] &lt;package(s)&gt;</span><br><span class="line">  pamac clone          [options] &lt;package(s)&gt;</span><br><span class="line">  pamac build          [options] [package(s)]</span><br><span class="line">  pamac remove         [options] [package(s)]</span><br><span class="line">[khadas@manjaro ~]$ </span><br></pre></td></tr></table></figure>
<p>It seems <a target="_blank" rel="noopener" href="https://www.archlinux.org/">Arch Linux</a> is
totally different from <a target="_blank" rel="noopener" href="https://www.debian.org/">Debian</a>.
What can I say? <span style="color:red"><strong>Go to
bed</strong></span>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/04/17/Cloud/fold-for-covid/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/04/17/Cloud/fold-for-covid/" class="post-title-link" itemprop="url">Fold for Covid</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-17 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-17T00:00:00-07:00">2020-04-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-05 00:37:31" itemprop="dateModified" datetime="2024-10-05T00:37:31-07:00">2024-10-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <iframe width="560" height="315" src="https://www.youtube.com/embed/Sv6dMFF_yts?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen>
</iframe>
<p>Today, April 17, 2020, I've got 2 big <strong>NEWS</strong> for me. -
<span style="color:red"><strong>China Airline cancelled my flight back
to China in May.</strong></span> - I received an Email from <a
target="_blank" rel="noopener" href="https://www.balena.io/">balena</a> to encourage us to
<code>contribute our spare computing power (PCs, laptops, single-board devices) to [Rosetta@Home](https://boinc.bakerlab.org/) and support vital COVID-19 research</code>.</p>
<p>Well, having been using <a
target="_blank" rel="noopener" href="https://www.balena.io/etcher/">balenaEtcher</a> for quite a while,
I of course will support <a target="_blank" rel="noopener" href="https://www.bakerlab.org/">Baker
Laboratory</a> at <a
target="_blank" rel="noopener" href="https://www.washington.edu/"><strong>W</strong> - University of
Washington</a>. There are <strong>2</strong> points need to be
emphasized here:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.washington.edu/"><strong>W</strong></a> used to
be my dreamed university, but it's <strong>STILL</strong> in my dream so
far.
<div style="text-align: center; font-size: 3em;">
<p>😂</p>
</div></li>
<li><a target="_blank" rel="noopener" href="https://www.bakerlab.org/">Baker Laboratory</a> seems to be
really good at bakery.</li>
</ul>
<p>Alright, let's taste how they bake this <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Coronavirus_disease_2019">COVID-19</a>.
<strong>2</strong> manuals to follow:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://foldforcovid.io/#get-started">foldforcovid official
website</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/jiapei100/rosetta-at-home">Rosetta@home
Github webpage</a></li>
</ul>
<p>Make sure one thing: <span style="color:red"><strong>Wired
Connection</strong></span>.</p>
<p>Now, it's your choice to visit either <strong><a
target="_blank" rel="noopener" href="http://foldforcovid.local/">http://foldforcovid.local/</a></strong>
or <strong>IP address of this Raspberry Pi 4</strong>, you will see your
<a
target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/">Raspberry
Pi 4</a> is up and running, and you are donating the compute capacity to
support <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Coronavirus_disease_2019">COVID-19</a>.</p>
<table>
<colgroup>
<col style="width: 54%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">foldforcovid.local</th>
<th style="text-align: center;">192.168.1.111</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/IoT/fold-for-covid/foldforcovid_local.png"
alt="foldforcovid.local" /></td>
<td style="text-align: center;"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/IoT/fold-for-covid/ip.png"
alt="192.168.1.111" /></td>
</tr>
</tbody>
</table>
<p>Finally, <span style="color:red"><strong>2 additional
things</strong></span>: - When will the boarder between Canada and USA
be opening? I'd love to visit <a target="_blank" rel="noopener" href="https://www.bakerlab.org/">Baker
Laboratory</a> in person. - I built my own <a
target="_blank" rel="noopener" href="https://www.longervision.cc/iso/rpi4-raspbian20200213-opencv4.3-openvino2020.1.023-ncsdk2.10.01.01.img">OS
for Raspberry Pi based on Raspbian</a>, please check it out on my
website <a
target="_blank" rel="noopener" href="https://www.longervision.cc/">https://www.longervision.cc/</a>.
Don't forget to <a
target="_blank" rel="noopener" href="https://www.buymeacoffee.com/longervision"><span
style="color:red"><strong>BUY ME A COFFEE</strong></span></a>.</p>
<p>Let me update a bit: Besides this <a
target="_blank" rel="noopener" href="https://foldforcovid.io/">Fold for Covid</a>, there are so many
activities ongoing:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://lhcathome.cern.ch/lhcathome/">LHC@home</a></li>
<li><a target="_blank" rel="noopener" href="https://covid19.gitlab.io/">COVID19@Gitlab</a></li>
<li><a target="_blank" rel="noopener" href="https://www.esri.com/en-us/covid-19/overview">Esri
COVID-19</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Nobody</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
