<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"longervision.ca","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Longer Vision Technology Github Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Longer Vision Technology">
<meta property="og:url" content="http://longervision.ca/page/6/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="Longer Vision Technology Github Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Longer Vision, Computer Vision, AI, Machine Learning">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://longervision.ca/page/6/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/6/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Longer Vision Technology</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="stylesheet" href="/assets/css/APlayer.min.css" class="aplayer-style-marker">
<script src="/assets/js/APlayer.min.js" class="aplayer-script-marker"></script>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Longer Vision Technology</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Github Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">Longer Vision Technology Github Blog</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">117</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">113</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/04/05/AI/DeepLearning/Tensorflow-2.X/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/04/05/AI/DeepLearning/Tensorflow-2.X/" class="post-title-link" itemprop="url">Tensorflow 2.X</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-05 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-05T00:00:00-07:00">2020-04-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/DeepLearning/" itemprop="url" rel="index"><span itemprop="name">DeepLearning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>This is actally an updated version of my previous blog <strong>Tensorflow 2.0</strong> published on October 12, 2019. What’s unfortunate is: I lost the source of that previous blog. What’s fortunate is: I have my Tensorflow updated from 2.0 to 2.1. Anyway, let’s begin:</p>
<ul>
<li>Previous blog: Flying back to China soon. Before leaving, here comes a simple blog testing <a target="_blank" rel="noopener" href="https://www.tensorflow.org/api_docs/python/tf">Tensorflow 2.0</a>. In this blog, I strictly follow <a target="_blank" rel="noopener" href="https://www.dramitakapoor.com/">Amita Kapoor</a> and <a target="_blank" rel="noopener" href="https://www.conted.ox.ac.uk/tutors/4164">Ajit Jaokar</a>’s free book <a target="_blank" rel="noopener" href="https://www.datasciencecentral.com/profiles/blogs/free-book-getting-started-with-tensorflow-2-0">Getting Started with TensorFlow 2.0</a>.</li>
</ul>
<h1 id="1-Check-GPU"><a href="#1-Check-GPU" class="headerlink" title="1. Check GPU"></a>1. Check GPU</h1><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ python</span><br><span class="line">Python 3.6.9 (default, Nov  7 2019, 10:44:02) </span><br><span class="line">[GCC 8.3.0] on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from tensorflow.python.client import device_lib</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; <span class="built_in">print</span>(device_lib.list_local_devices())</span></span><br><span class="line">2020-04-16 23:56:44.553741: I tensorflow/core/platform/cpu_feature_guard.cc:143] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE3 SSE4.1 SSE4.2 AVX AVX2 FMA</span><br><span class="line">2020-04-16 23:56:44.579718: I tensorflow/core/platform/profile_utils/cpu_utils.cc:102] CPU Frequency: 2599990000 Hz</span><br><span class="line">2020-04-16 23:56:44.580244: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x58af6e0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:</span><br><span class="line">2020-04-16 23:56:44.580285: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version</span><br><span class="line">2020-04-16 23:56:44.582480: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1</span><br><span class="line">2020-04-16 23:56:44.627731: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero</span><br><span class="line">2020-04-16 23:56:44.628115: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x591d040 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:</span><br><span class="line">2020-04-16 23:56:44.628133: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): GeForce GTX 980M, Compute Capability 5.2</span><br><span class="line">2020-04-16 23:56:44.628313: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero</span><br><span class="line">2020-04-16 23:56:44.628568: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1558] Found device 0 with properties: </span><br><span class="line">pciBusID: 0000:01:00.0 name: GeForce GTX 980M computeCapability: 5.2</span><br><span class="line">coreClock: 1.1265GHz coreCount: 12 deviceMemorySize: 3.94GiB deviceMemoryBandwidth: 149.31GiB/s</span><br><span class="line">2020-04-16 23:56:44.628803: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.2</span><br><span class="line">2020-04-16 23:56:44.630300: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10</span><br><span class="line">2020-04-16 23:56:44.631719: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10</span><br><span class="line">2020-04-16 23:56:44.631994: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10</span><br><span class="line">2020-04-16 23:56:44.633648: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10</span><br><span class="line">2020-04-16 23:56:44.634547: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10</span><br><span class="line">2020-04-16 23:56:44.637788: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7</span><br><span class="line">2020-04-16 23:56:44.637974: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero</span><br><span class="line">2020-04-16 23:56:44.638283: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero</span><br><span class="line">2020-04-16 23:56:44.638528: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1700] Adding visible gpu devices: 0</span><br><span class="line">2020-04-16 23:56:44.638631: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.2</span><br><span class="line">2020-04-16 23:56:44.639308: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1099] Device interconnect StreamExecutor with strength 1 edge matrix:</span><br><span class="line">2020-04-16 23:56:44.639318: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1105]      0 </span><br><span class="line">2020-04-16 23:56:44.639342: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1118] 0:   N </span><br><span class="line">2020-04-16 23:56:44.639477: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero</span><br><span class="line">2020-04-16 23:56:44.639759: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero</span><br><span class="line">2020-04-16 23:56:44.640041: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1244] Created TensorFlow device (/device:GPU:0 with 165 MB memory) -&gt; physical GPU (device: 0, name: GeForce GTX 980M, pci bus id: 0000:01:00.0, compute capability: 5.2)</span><br><span class="line">[name: &quot;/device:CPU:0&quot;</span><br><span class="line">device_type: &quot;CPU&quot;</span><br><span class="line">memory_limit: 268435456</span><br><span class="line">locality &#123;</span><br><span class="line">&#125;</span><br><span class="line">incarnation: 5137338600707339983</span><br><span class="line">, name: &quot;/device:XLA_CPU:0&quot;</span><br><span class="line">device_type: &quot;XLA_CPU&quot;</span><br><span class="line">memory_limit: 17179869184</span><br><span class="line">locality &#123;</span><br><span class="line">&#125;</span><br><span class="line">incarnation: 3339260717563932836</span><br><span class="line">physical_device_desc: &quot;device: XLA_CPU device&quot;</span><br><span class="line">, name: &quot;/device:XLA_GPU:0&quot;</span><br><span class="line">device_type: &quot;XLA_GPU&quot;</span><br><span class="line">memory_limit: 17179869184</span><br><span class="line">locality &#123;</span><br><span class="line">&#125;</span><br><span class="line">incarnation: 15541604922692464209</span><br><span class="line">physical_device_desc: &quot;device: XLA_GPU device&quot;</span><br><span class="line">, name: &quot;/device:GPU:0&quot;</span><br><span class="line">device_type: &quot;GPU&quot;</span><br><span class="line">memory_limit: 173539328</span><br><span class="line">locality &#123;</span><br><span class="line">  bus_id: 1</span><br><span class="line">  links &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">incarnation: 5921365879699198963</span><br><span class="line">physical_device_desc: &quot;device: 0, name: GeForce GTX 980M, pci bus id: 0000:01:00.0, compute capability: 5.2&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>Then, for simplicity, let’s try it out directly:</p>
<h1 id="2-Tensorflow-2-X"><a href="#2-Tensorflow-2-X" class="headerlink" title="2. Tensorflow 2.X"></a>2. Tensorflow 2.X</h1><script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<p>&#123;% asset_jupyter &#x2F;usr&#x2F;bin&#x2F;python ..&#x2F;..&#x2F;..&#x2F;ipynb&#x2F;00_TensorFlow_2.X.ipynb %&#125;</p>
<h1 id="3-Tensorflow-Dataset"><a href="#3-Tensorflow-Dataset" class="headerlink" title="3. Tensorflow Dataset"></a>3. Tensorflow Dataset</h1><script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<p>&#123;% asset_jupyter &#x2F;usr&#x2F;bin&#x2F;python ..&#x2F;..&#x2F;..&#x2F;ipynb&#x2F;01_TensorFlow_Dataset.ipynb %&#125;</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/02/05/Medical/corona-virus/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/02/05/Medical/corona-virus/" class="post-title-link" itemprop="url">Corona Virus</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-02-05 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-05T00:00:00-08:00">2020-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Medical/" itemprop="url" rel="index"><span itemprop="name">Medical</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hello everyone… As you all know that currently, my hometown <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Wuhan">Wuhan, China</a> is suffering the <strong>MOST SERIOUS infectious disease - <a target="_blank" rel="noopener" href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019">Corona Virus</a></strong> in her history. My parents are still in this locked city. People have been suffering the threaten from the death for over 20 days. I would have to write something, and <strong>WISH ALL MY BEST</strong> to my beloved parents, and all my country fellows who are still in <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Wuhan">Wuhan</a>.</p>
<p>In this blog, all data are obtained from <a target="_blank" rel="noopener" href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/situation-reports">WHO Corona Virus Reports</a>.<br>And, all plots are generated by <a target="_blank" rel="noopener" href="https://altair-viz.github.io/">altair</a>.</p>
<p>So far, I can <strong>ONLY</strong> make that much…</p>
<table>
<thead>
<tr>
<th align="center">Confirmed Cases In China</th>
<th align="center">Death Over The World</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/medical/CoronaVirus/ChinaConfirmed.png" alt="Confirmed Cases In China"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/medical/CoronaVirus/death.png" alt="Death Over The World"></td>
</tr>
</tbody></table>
<p>God bless <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Li_Wenliang">Dr. Li WenLiang</a>, and shame on rubbish in Chinese government.</p>
<p>Updated on:</p>
<ul>
<li>February 10, 2020</li>
<li>February 14, 2020</li>
<li>February 15, 2020</li>
<li>February 16, 2020</li>
<li>February 17, 2020</li>
<li>February 19, 2020</li>
<li>February 21, 2020<br>So far, the data is still lack of info such as age, gender, etc. Let’s keep an eye on <strong>Corona Virus</strong>.</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/01/20/AI/EdgeComputing/huawei-HiSilicon-hikey970-Shunya-desktop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/01/20/AI/EdgeComputing/huawei-HiSilicon-hikey970-Shunya-desktop/" class="post-title-link" itemprop="url">HiSilicon Hikey 970 - Shunya Desktop Image For HiKey970</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-01-20T00:00:00-08:00">2020-01-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/EdgeComputing/" itemprop="url" rel="index"><span itemprop="name">EdgeComputing</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <hr>
<p>I tried <a target="_blank" rel="noopener" href="https://www.96boards.org/product/hikey970/">HiKey970</a> half a year ago, but <strong>NOT</strong> quite focused on it. There seems to be <strong>NO</strong> good operating system for this particular board. During this god-damn-it <a target="_blank" rel="noopener" href="https://www.canada.ca/en/public-health/services/diseases/coronavirus-disease-covid-19.html">COVID-19</a>, I now have some time, and seriously would like to fullfill some of my ideas on this particular <a target="_blank" rel="noopener" href="https://www.96boards.org/">96board</a>: </p>
<ul>
<li>test out <a target="_blank" rel="noopener" href="https://releases.ubuntu.com/20.04/">Ubuntu 20.04</a></li>
<li>build an operating system with the up-to-date <a target="_blank" rel="noopener" href="https://www.kernel.org/">kernel</a> for <a target="_blank" rel="noopener" href="https://www.96boards.org/product/hikey970/">HiKey970</a></li>
<li>build the up-to-date <a target="_blank" rel="noopener" href="https://www.tensorflow.org/">Tensorflow</a> from source with <a target="_blank" rel="noopener" href="https://www.khronos.org/opencl/">OpenCL</a></li>
<li>test the capability of <a target="_blank" rel="noopener" href="https://www.96boards.org/product/hikey970/">HiKey970</a>‘s NPU</li>
</ul>
<h1 id="1-Hackerboards-Comparisons"><a href="#1-Hackerboards-Comparisons" class="headerlink" title="1. Hackerboards Comparisons"></a>1. Hackerboards Comparisons</h1><h2 id="1-1-HiKey970-vs-Hikey960"><a href="#1-1-HiKey970-vs-Hikey960" class="headerlink" title="1.1 HiKey970 vs Hikey960"></a>1.1 <a target="_blank" rel="noopener" href="https://www.96boards.org/product/hikey970/">HiKey970</a> vs <a target="_blank" rel="noopener" href="https://www.96boards.org/product/hikey960/">Hikey960</a></h2><p><a target="_blank" rel="noopener" href="http://www.hisilicon.com/">Hisilicon</a>‘s <a target="_blank" rel="noopener" href="http://www.hisilicon.com/en/Products/ProductList/HiKey">official products’ website</a> provides a detailed comparison of these two open source boards.</p>
<p>By far, <a target="_blank" rel="noopener" href="https://www.96boards.org/product/hikey970/">HiKey970</a> is exactly the <strong>most</strong> powerful <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Edge_computing">edge computing</a> <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Single-board_computer">SBC</a> I’ve ever met.</p>
<h2 id="1-2-Comparison-Across-Various-Popular-SBCs"><a href="#1-2-Comparison-Across-Various-Popular-SBCs" class="headerlink" title="1.2 Comparison Across Various Popular SBCs"></a>1.2 Comparison Across Various Popular SBCs</h2><p>It looks <a target="_blank" rel="noopener" href="https://www.hackerboards.com/">HackerBoards</a> has done a thorough comparison of <strong>almost all</strong> types of SBCs. Let’s just select the boards that we’re interested in and carry out <a target="_blank" rel="noopener" href="https://www.hackerboards.com/compare/358,353,187,253,270/">our comparison</a>. Clearly, <a target="_blank" rel="noopener" href="https://www.96boards.org/product/hikey970/">HiKey970</a>‘s performance is outstanding.</p>
<h1 id="2-Build-Our-Own-OS-For-HiKey970"><a href="#2-Build-Our-Own-OS-For-HiKey970" class="headerlink" title="2. Build Our Own OS For HiKey970"></a>2. Build Our Own OS For <a target="_blank" rel="noopener" href="https://www.96boards.org/product/hikey970/">HiKey970</a></h1><h2 id="2-1-Set-up-Cross-Compiler"><a href="#2-1-Set-up-Cross-Compiler" class="headerlink" title="2.1 Set up Cross_Compiler"></a>2.1 Set up Cross_Compiler</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ export CC=&quot;aarch64-linux-gnu-&quot;</span><br><span class="line">➜  ~ $&#123;CC&#125;gcc --version</span><br><span class="line">aarch64-linux-gnu-gcc (Ubuntu 9.3.0-10ubuntu1) 9.3.0</span><br><span class="line">Copyright (C) 2019 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the source for copying conditions.  There is NO</span><br><span class="line">warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br></pre></td></tr></table></figure>


<h1 id="3-Flash-HiKey970"><a href="#3-Flash-HiKey970" class="headerlink" title="3. Flash HiKey970"></a>3. Flash <a target="_blank" rel="noopener" href="https://www.96boards.org/product/hikey970/">HiKey970</a></h1><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">➜  binaries sudo ./hikey_idt -c config</span><br><span class="line">Config name: config</span><br><span class="line">0: Image: ./sec_usb_xloader.img Downalod Address: 0x22000</span><br><span class="line">1: Image: ./sec_usb_xloader2.img Downalod Address: 0x60049000</span><br><span class="line">2: Image: ./l-loader.bin Downalod Address: 0x16800000</span><br><span class="line">Serial port open successfully!</span><br><span class="line">Start downloading ./sec_usb_xloader.img@0x22000...</span><br><span class="line">file total size 122880</span><br><span class="line">downlaod address 0x22000</span><br><span class="line">Finish downloading</span><br><span class="line">Start downloading ./sec_usb_xloader2.img@0x60049000...</span><br><span class="line">file total size 40960</span><br><span class="line">downlaod address 0x60049000</span><br><span class="line">Finish downloading</span><br><span class="line">Start downloading ./l-loader.bin@0x16800000...</span><br><span class="line">file total size 1179648</span><br><span class="line">downlaod address 0x16800000</span><br><span class="line">Finish downloading</span><br><span class="line">➜  binaries cd ../   </span><br><span class="line">➜  Hikey970-shunya-desktop-image-0.1 sudo ./binaries/recovery-flash.sh </span><br><span class="line">./binaries/recovery-flash.sh: 7: [: unexpected operator</span><br><span class="line">Config name: ....../Hikey970-shunya-desktop-image-0.1/binaries/config</span><br><span class="line">....../Hikey970-shunya-desktop-image-0.1/binaries/hikey_idt: option requires an argument -- &#x27;p&#x27;</span><br><span class="line">Usage: hikey_idt -c config</span><br><span class="line">Flashing ptable </span><br><span class="line">Sending &#x27;ptable&#x27; (24 KB)                           OKAY [  0.001s]</span><br><span class="line">Writing &#x27;ptable&#x27;                                   OKAY [  0.005s]</span><br><span class="line">Finished. Total time: 0.007s</span><br><span class="line">Sending &#x27;xloader&#x27; (164 KB)                         OKAY [  0.005s]</span><br><span class="line">Writing &#x27;xloader&#x27;                                  OKAY [  0.009s]</span><br><span class="line">Finished. Total time: 0.014s</span><br><span class="line">Sending &#x27;fastboot&#x27; (1152 KB)                       OKAY [  0.034s]</span><br><span class="line">Writing &#x27;fastboot&#x27;                                 OKAY [  0.056s]</span><br><span class="line">Finished. Total time: 0.091s</span><br><span class="line">Sending &#x27;fip&#x27; (1224 KB)                            OKAY [  0.036s]</span><br><span class="line">Writing &#x27;fip&#x27;                                      OKAY [  0.058s]</span><br><span class="line">Finished. Total time: 0.098s</span><br><span class="line">Sending &#x27;boot&#x27; (65536 KB)                          OKAY [  2.143s]</span><br><span class="line">Writing &#x27;boot&#x27;                                     OKAY [  0.418s]</span><br><span class="line">Finished. Total time: 2.590s</span><br><span class="line">Please be patient...</span><br><span class="line">Sending sparse &#x27;userdata&#x27; 1/6 (131068 KB)          OKAY [  5.894s]</span><br><span class="line">Writing &#x27;userdata&#x27;                                 OKAY [  0.674s]</span><br><span class="line">Sending sparse &#x27;userdata&#x27; 2/6 (131068 KB)          OKAY [  4.250s]</span><br><span class="line">Writing &#x27;userdata&#x27;                                 OKAY [  0.740s]</span><br><span class="line">Sending sparse &#x27;userdata&#x27; 3/6 (131068 KB)          OKAY [  4.039s]</span><br><span class="line">Writing &#x27;userdata&#x27;                                 OKAY [  0.687s]</span><br><span class="line">Sending sparse &#x27;userdata&#x27; 4/6 (131068 KB)          OKAY [  4.029s]</span><br><span class="line">Writing &#x27;userdata&#x27;                                 OKAY [  0.670s]</span><br><span class="line">Sending sparse &#x27;userdata&#x27; 5/6 (131068 KB)          OKAY [  3.526s]</span><br><span class="line">Writing &#x27;userdata&#x27;                                 OKAY [  0.672s]</span><br><span class="line">Sending sparse &#x27;userdata&#x27; 6/6 (66608 KB)           OKAY [  1.827s]</span><br><span class="line">Writing &#x27;userdata&#x27;                                 OKAY [  0.346s]</span><br><span class="line">Finished. Total time: 27.425s</span><br></pre></td></tr></table></figure>


<h1 id="4-Conclusion"><a href="#4-Conclusion" class="headerlink" title="4. Conclusion"></a>4. Conclusion</h1><p><span style="color:red"><strong>If</strong></span>:</p>
<ul>
<li><span style="color:red"><strong><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/en/hiai">HuaWei HiAI Engine</a> ONLY supports <a target="_blank" rel="noopener" href="https://www.android.com/">Android</a> instead of Linux</strong></li>
<li><a target="_blank" rel="noopener" href="http://www.hisilicon.com/">HiSilicon</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2019/09/06/OperatingSystems/CompilersTools/crosstool-ng/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/09/06/OperatingSystems/CompilersTools/crosstool-ng/" class="post-title-link" itemprop="url">Build Toolchain Using Crosstool-NG</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-09-06 00:00:00" itemprop="dateCreated datePublished" datetime="2019-09-06T00:00:00-07:00">2019-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Compiler/" itemprop="url" rel="index"><span itemprop="name">Compiler</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Today, we’re going to build our own toolchain using <a target="_blank" rel="noopener" href="https://crosstool-ng.github.io/">crosstool-NG</a>. There are so many cases that we want to build a particular <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Toolchain">toolchain</a> for a specific embedded system development board. One <span style="color:red"><strong>MOST important</strong></span> reason for that is probably because the specific development board has limited resource to build upon, therefore, the time-consumption to build some software on the development board is <span style="color:red"><strong>VERY inefficient</strong></span>. In the other way around, <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Cross_compiler">cross compiling</a> on the host PC is <span style="color:red"><strong>MORE efficient</strong></span> with respective to the time-consumption.</p>
<p>In this blog, for simplicity, we take <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a> as our demo development board, for which we are building the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Cross_compiler">cross compiler</a>. Some references can be found at:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://crosstool-ng.github.io/docs/">crosstool-ng Official Documentation</a></li>
<li><a target="_blank" rel="noopener" href="https://elinux.org/RPi_Linaro_GCC_Compilation">elinux: RPi Linaro GCC Compilation</a></li>
</ul>
<h1 id="1-Installation"><a href="#1-Installation" class="headerlink" title="1. Installation"></a>1. Installation</h1><p>How to install <a target="_blank" rel="noopener" href="https://crosstool-ng.github.io/">crosstool-NG</a> are thoroughly summarized at its <a target="_blank" rel="noopener" href="https://crosstool-ng.github.io/docs/install/">official website</a>. In my case, I had it installed under folder <strong>&#x2F;opt&#x2F;compilers&#x2F;crosstool-ng</strong>. Let’s take a look:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash"><span class="built_in">pwd</span></span></span><br><span class="line">/opt/compilers/crosstool-ng</span><br><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line">bin  libexec  share</span><br><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash"><span class="built_in">ls</span> bin</span></span><br><span class="line">ct-ng</span><br></pre></td></tr></table></figure>

<p>And make sure <code>/opt/compilers/crosstool-ng/bin</code> is under environment variable <strong>PATH</strong>.</p>
<h1 id="2-Configuration"><a href="#2-Configuration" class="headerlink" title="2. Configuration"></a>2. Configuration</h1><p>Under any directory that you want to save your <code>.config</code> file, we can configure our target <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Cross_compiler">cross compiler</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">ct-ng menuconfig</span></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/OperatingSystems/crosscompile/crosstool-ng.png" alt="crosstool-NG menuconfig"></p>
<p>According to elinux: <a target="_blank" rel="noopener" href="https://elinux.org/RPi_Linaro_GCC_Compilation">RPi Linaro GCC Compilation</a>, we need to do the following selections:</p>
<ul>
<li><strong>Paths and misc options</strong>:<ul>
<li><strong>Try features marked as EXPERIMENTAL</strong>: ticked</li>
<li><strong>Prefix directory</strong>: input the full path where you want to save the built toolchains</li>
<li><strong>Number of parallel jobs</strong>: 4. Sorry that I’ve <strong>NO</strong> idea if this is the number of cores on <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a>, but <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a> does have 4 cores.</li>
</ul>
</li>
<li><strong>Target options</strong>:<ul>
<li><strong>Target Architecture</strong>: arm</li>
<li><strong>Default instruction set mode</strong>: arm</li>
<li><strong>Use EABI</strong>: ticked</li>
<li><strong>append hf to the tuple (EXPERIMENTAL)</strong>: ticked</li>
<li><strong><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Endianness">Endianness</a></strong>: Little endian</li>
<li><strong>Bitness</strong>: 32-bit</li>
<li><strong>Emit assembly for CPU</strong>: cortex-a53</li>
<li><strong>Use specific FPU</strong>: vfp</li>
<li><strong>Floating point</strong>: hardware (FPU)</li>
</ul>
</li>
<li><strong>Toolchain options</strong>:<ul>
<li><strong>Tuple’s vendor string</strong>: rpi</li>
</ul>
</li>
<li><strong>Operating System</strong><ul>
<li><strong>Target OS</strong>: linux</li>
<li><strong>Version of Linux</strong>: 4.20.8. Currently, I flashed <a target="_blank" rel="noopener" href="https://downloads.raspberrypi.org/raspbian_full_latest">Raspbian Buster with desktop and recommended software, 2019-07-10</a> onto my <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a>, it comes with kernel of version <strong>4.19.66</strong>, which is <strong>NOT</strong> in the list. That’s why I decided to select <strong>4.20.8</strong> and try my luck.  <div style="font-size:5rem;width:100%;text-align:center;">
  <span class="emoji" alias="stuck_out_tongue_closed_eyes" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f61d.png?v8">&#x1f61d;</span>
  </div>
  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ uname -a</span><br><span class="line">    Linux raspberrypi 4.19.66-v7+ #1253 SMP Thu Aug 15 11:49:46 BST 2019 armv7l GNU/Linux</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>Binary utilities</strong>:<ul>
<li><strong>Binary format</strong>: ELF</li>
<li><strong>Version of binutils</strong>: 2.31.1  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ apt show binutils</span><br><span class="line">Package: binutils</span><br><span class="line">Version: 2.31.1-16+rpi1</span><br><span class="line">Priority: optional</span><br><span class="line">Section: devel</span><br><span class="line">Maintainer: Matthias Klose &lt;doko@debian.org&gt;</span><br><span class="line">Installed-Size: 95.2 kB</span><br><span class="line">Provides: binutils-gold, elf-binutils</span><br><span class="line">Depends: binutils-common (= 2.31.1-16+rpi1), libbinutils (= 2.31.1-16+rpi1), binutils-arm-linux-gnueabihf (= 2.31.1-16+rpi1)</span><br><span class="line">Suggests: binutils-doc (&gt;= 2.31.1-16+rpi1)</span><br><span class="line">Conflicts: binutils-multiarch (&lt;&lt; 2.27-8), modutils (&lt;&lt; 2.4.19-1)</span><br><span class="line">Homepage: https://www.gnu.org/software/binutils/</span><br><span class="line">Download-Size: 56.9 kB</span><br><span class="line">APT-Manual-Installed: no</span><br><span class="line">APT-Sources: http://raspbian.raspberrypi.org/raspbian buster/main armhf Packages</span><br><span class="line">Description: GNU assembler, linker and binary utilities</span><br><span class="line">The programs in this package are used to assemble, link and manipulate</span><br><span class="line">binary and object files.  They may be used in conjunction with a compiler</span><br><span class="line">and various libraries to build programs.</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>C-library</strong>:<ul>
<li><strong>C library</strong>: glibc</li>
<li><strong>Version of glibc</strong>: 2.28  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ apt show libc-bin</span><br><span class="line">Package: libc-bin</span><br><span class="line">Version: 2.28-10+rpi1</span><br><span class="line">Priority: required</span><br><span class="line">Essential: yes</span><br><span class="line">Section: libs</span><br><span class="line">Source: glibc</span><br><span class="line">Maintainer: GNU Libc Maintainers &lt;debian-glibc@lists.debian.org&gt;</span><br><span class="line">Installed-Size: 3,015 kB</span><br><span class="line">Depends: libc6 (&gt;&gt; 2.28), libc6 (&lt;&lt; 2.29)</span><br><span class="line">Recommends: manpages</span><br><span class="line">Homepage: https://www.gnu.org/software/libc/libc.html</span><br><span class="line">Download-Size: 657 kB</span><br><span class="line">APT-Manual-Installed: yes</span><br><span class="line">APT-Sources: http://raspbian.raspberrypi.org/raspbian buster/main armhf Packages</span><br><span class="line">Description: GNU C Library: Binaries</span><br><span class="line">This package contains utility programs related to the GNU C Library.</span><br><span class="line">.</span><br><span class="line">* catchsegv: catch segmentation faults in programs</span><br><span class="line">* getconf: query system configuration variables</span><br><span class="line">* getent: get entries from administrative databases</span><br><span class="line">* iconv, iconvconfig: convert between character encodings</span><br><span class="line">* ldd, ldconfig: print/configure shared library dependencies</span><br><span class="line">* locale, localedef: show/generate locale definitions</span><br><span class="line">* tzselect, zdump, zic: select/dump/compile time zones</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>C compiler</strong>:<ul>
<li><strong>Show gcc versions from</strong>: GNU</li>
<li><strong>Version of gcc</strong>: 8.3.0</li>
<li><strong>gcc extra config</strong>: –with-float&#x3D;hard</li>
<li><strong>Link libstdc++ statically into the gcc binary</strong>: tick</li>
<li><strong>C++</strong>: tick  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ apt show gcc</span><br><span class="line">Package: gcc</span><br><span class="line">Version: 4:8.3.0-1+rpi2</span><br><span class="line">Priority: optional</span><br><span class="line">Section: devel</span><br><span class="line">Source: gcc-defaults (1.181+rpi2)</span><br><span class="line">Maintainer: Debian GCC Maintainers &lt;debian-gcc@lists.debian.org&gt;</span><br><span class="line">Installed-Size: 46.1 kB</span><br><span class="line">Provides: c-compiler, gcc-arm-linux-gnueabihf (= 4:8.3.0-1+rpi2)</span><br><span class="line">Depends: cpp (= 4:8.3.0-1+rpi2), gcc-8 (&gt;= 8.3.0-1~)</span><br><span class="line">Recommends: libc6-dev | libc-dev</span><br><span class="line">Suggests: gcc-multilib, make, manpages-dev, autoconf, automake, libtool, flex, bison, gdb, gcc-doc</span><br><span class="line">Conflicts: gcc-doc (&lt;&lt; 1:2.95.3)</span><br><span class="line">Download-Size: 5,200 B</span><br><span class="line">APT-Manual-Installed: no</span><br><span class="line">APT-Sources: http://raspbian.raspberrypi.org/raspbian buster/main armhf Packages</span><br><span class="line">Description: GNU C compiler</span><br><span class="line">This is the GNU C compiler, a fairly portable optimizing compiler for C.</span><br><span class="line">.</span><br><span class="line">This is a dependency package providing the default GNU C compiler.</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>After we save the configuration to file <strong>.config</strong>, we <strong>Exit</strong> the <strong>crosstool-NG</strong> configuration dialog.</p>
<h1 id="3-Build"><a href="#3-Build" class="headerlink" title="3. Build"></a>3. Build</h1><p><span style="color:red"><strong>Please remember to</strong></span>:</p>
<ul>
<li><code>unset LD_LIBRARY_PATH</code> before building. Otherwise, you’ll meet some <strong>ERROR</strong> messages.</li>
<li><code>mkdir ~/src</code> before building. Otherwise, whenever you tried to rerun <code>ct-ng build</code>, you’ll have to download <strong>ALL</strong> required packages from scratch.</li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">ct-ng build</span></span><br><span class="line">[INFO ]  Performing some trivial sanity checks</span><br><span class="line">[WARN ]  Number of open files 1024 may not be sufficient to build the toolchain; increasing to 2048</span><br><span class="line">[INFO ]  Build started 20190906.014128</span><br><span class="line">[INFO ]  Building environment variables</span><br><span class="line">[EXTRA]  Preparing working directories</span><br><span class="line">[EXTRA]  Installing user-supplied crosstool-NG configuration</span><br><span class="line">[EXTRA]  =================================================================</span><br><span class="line">[EXTRA]  Dumping internal crosstool-NG configuration</span><br><span class="line">[EXTRA]    Building a toolchain for:</span><br><span class="line">[EXTRA]      build  = x86_64-pc-linux-gnu</span><br><span class="line">[EXTRA]      host   = x86_64-pc-linux-gnu</span><br><span class="line">[EXTRA]      target = arm-rpi-linux-gnueabihf</span><br><span class="line">[EXTRA]  Dumping internal crosstool-NG configuration: done in 0.07s (at 00:01)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Retrieving needed toolchain components&#x27; tarballs</span><br><span class="line">[EXTRA]    Retrieving &#x27;ncurses-6.1&#x27;</span><br><span class="line">[EXTRA]    Verifying SHA512 checksum for &#x27;ncurses-6.1.tar.gz&#x27;</span><br><span class="line">[EXTRA]    Saving &#x27;ncurses-6.1.tar.gz&#x27; to local storage</span><br><span class="line">[EXTRA]    Retrieving &#x27;libiconv-1.15&#x27;</span><br><span class="line">[EXTRA]    Verifying SHA512 checksum for &#x27;libiconv-1.15.tar.gz&#x27;</span><br><span class="line">[EXTRA]    Saving &#x27;libiconv-1.15.tar.gz&#x27; to local storage</span><br><span class="line">[EXTRA]    Retrieving &#x27;gettext-0.19.8.1&#x27;</span><br><span class="line">[EXTRA]    Verifying SHA512 checksum for &#x27;gettext-0.19.8.1.tar.xz&#x27;</span><br><span class="line">[EXTRA]    Saving &#x27;gettext-0.19.8.1.tar.xz&#x27; to local storage</span><br><span class="line">[EXTRA]    Retrieving &#x27;binutils-2.31.1&#x27;</span><br><span class="line">[EXTRA]    Verifying SHA512 checksum for &#x27;binutils-2.31.1.tar.xz&#x27;</span><br><span class="line">[EXTRA]    Saving &#x27;binutils-2.31.1.tar.xz&#x27; to local storage</span><br><span class="line">[EXTRA]    Retrieving &#x27;gcc-8.3.0&#x27;</span><br><span class="line">[EXTRA]    Verifying SHA512 checksum for &#x27;gcc-8.3.0.tar.xz&#x27;</span><br><span class="line">[EXTRA]    Saving &#x27;gcc-8.3.0.tar.xz&#x27; to local storage</span><br><span class="line">[EXTRA]    Retrieving &#x27;glibc-2.28&#x27;</span><br><span class="line">[EXTRA]    Verifying SHA512 checksum for &#x27;glibc-2.28.tar.xz&#x27;</span><br><span class="line">[EXTRA]    Saving &#x27;glibc-2.28.tar.xz&#x27; to local storage</span><br><span class="line">[INFO ]  Retrieving needed toolchain components&#x27; tarballs: done in 130.35s (at 02:12)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Extracting and patching toolchain components</span><br><span class="line">[EXTRA]    Extracting linux-4.20.8</span><br><span class="line">[EXTRA]    Patching linux-4.20.8</span><br><span class="line">[EXTRA]    Extracting zlib-1.2.11</span><br><span class="line">[EXTRA]    Patching zlib-1.2.11</span><br><span class="line">[EXTRA]    Extracting gmp-6.1.2</span><br><span class="line">[EXTRA]    Patching gmp-6.1.2</span><br><span class="line">[EXTRA]    Extracting mpfr-4.0.2</span><br><span class="line">[EXTRA]    Patching mpfr-4.0.2</span><br><span class="line">[EXTRA]    Extracting isl-0.20</span><br><span class="line">[EXTRA]    Patching isl-0.20</span><br><span class="line">[EXTRA]    Extracting mpc-1.1.0</span><br><span class="line">[EXTRA]    Patching mpc-1.1.0</span><br><span class="line">[EXTRA]    Extracting ncurses-6.1</span><br><span class="line">[EXTRA]    Patching ncurses-6.1</span><br><span class="line">[EXTRA]    Extracting libiconv-1.15</span><br><span class="line">[EXTRA]    Patching libiconv-1.15</span><br><span class="line">[EXTRA]    Extracting gettext-0.19.8.1</span><br><span class="line">[EXTRA]    Patching gettext-0.19.8.1</span><br><span class="line">[EXTRA]    Extracting binutils-2.31.1</span><br><span class="line">[EXTRA]    Patching binutils-2.31.1</span><br><span class="line">[EXTRA]    Extracting gcc-8.3.0</span><br><span class="line">[EXTRA]    Patching gcc-8.3.0</span><br><span class="line">[EXTRA]    Extracting glibc-2.28</span><br><span class="line">[EXTRA]    Patching glibc-2.28</span><br><span class="line">[INFO ]  Extracting and patching toolchain components: done in 33.39s (at 02:45)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing ncurses for build</span><br><span class="line">[EXTRA]    Configuring ncurses</span><br><span class="line">[EXTRA]    Building ncurses</span><br><span class="line">[EXTRA]    Installing ncurses</span><br><span class="line">[INFO ]  Installing ncurses for build: done in 14.62s (at 03:00)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing zlib for host</span><br><span class="line">[EXTRA]    Configuring zlib</span><br><span class="line">[EXTRA]    Building zlib</span><br><span class="line">[EXTRA]    Installing zlib</span><br><span class="line">[INFO ]  Installing zlib for host: done in 1.12s (at 03:01)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing GMP for host</span><br><span class="line">[EXTRA]    Configuring GMP</span><br><span class="line">[EXTRA]    Building GMP</span><br><span class="line">[EXTRA]    Installing GMP</span><br><span class="line">[INFO ]  Installing GMP for host: done in 30.12s (at 03:31)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing MPFR for host</span><br><span class="line">[EXTRA]    Configuring MPFR</span><br><span class="line">[EXTRA]    Building MPFR</span><br><span class="line">[EXTRA]    Installing MPFR</span><br><span class="line">[INFO ]  Installing MPFR for host: done in 17.35s (at 03:48)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing ISL for host</span><br><span class="line">[EXTRA]    Configuring ISL</span><br><span class="line">[EXTRA]    Building ISL</span><br><span class="line">[EXTRA]    Installing ISL</span><br><span class="line">[INFO ]  Installing ISL for host: done in 17.73s (at 04:06)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing MPC for host</span><br><span class="line">[EXTRA]    Configuring MPC</span><br><span class="line">[EXTRA]    Building MPC</span><br><span class="line">[EXTRA]    Installing MPC</span><br><span class="line">[INFO ]  Installing MPC for host: done in 5.47s (at 04:12)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing ncurses for host</span><br><span class="line">[EXTRA]    Configuring ncurses</span><br><span class="line">[EXTRA]    Building ncurses</span><br><span class="line">[EXTRA]    Installing ncurses</span><br><span class="line">[INFO ]  Installing ncurses for host: done in 13.64s (at 04:25)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing libiconv for host</span><br><span class="line">[EXTRA]    Skipping (included in GNU C library)</span><br><span class="line">[INFO ]  Installing libiconv for host: done in 0.01s (at 04:25)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing gettext for host</span><br><span class="line">[EXTRA]    Skipping (included in GNU C library)</span><br><span class="line">[INFO ]  Installing gettext for host: done in 0.01s (at 04:25)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing binutils for host</span><br><span class="line">[EXTRA]    Configuring binutils</span><br><span class="line">[EXTRA]    Building binutils</span><br><span class="line">[EXTRA]    Installing binutils</span><br><span class="line">[INFO ]  Installing binutils for host: done in 46.89s (at 05:12)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing pass-1 core C gcc compiler</span><br><span class="line">[EXTRA]    Configuring core C gcc compiler</span><br><span class="line">[EXTRA]    Building gcc</span><br><span class="line">[EXTRA]    Installing gcc</span><br><span class="line">[EXTRA]    Housekeeping for core gcc compiler</span><br><span class="line">[EXTRA]       &#x27;&#x27; --&gt; lib (gcc)   lib (os)</span><br><span class="line">[INFO ]  Installing pass-1 core C gcc compiler: done in 285.36s (at 09:58)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing kernel headers</span><br><span class="line">[EXTRA]    Installing kernel headers</span><br><span class="line">[EXTRA]    Checking installed headers</span><br><span class="line">[INFO ]  Installing kernel headers: done in 6.47s (at 10:04)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing C library headers &amp; start files</span><br><span class="line">[INFO ]    =================================================================</span><br><span class="line">[INFO ]    Building for multilib 1/1: &#x27;&#x27;</span><br><span class="line">[EXTRA]      Configuring C library</span><br><span class="line">[EXTRA]      Installing C library headers</span><br><span class="line">[EXTRA]      Installing C library start files</span><br><span class="line">[INFO ]    Building for multilib 1/1: &#x27;&#x27;: done in 7.65s (at 10:12)</span><br><span class="line">[INFO ]  Installing C library headers &amp; start files: done in 7.72s (at 10:12)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing pass-2 core C gcc compiler</span><br><span class="line">[EXTRA]    Configuring core C gcc compiler</span><br><span class="line">[EXTRA]    Building gcc</span><br><span class="line">[EXTRA]    Installing gcc</span><br><span class="line">[EXTRA]    Housekeeping for core gcc compiler</span><br><span class="line">[EXTRA]       &#x27;&#x27; --&gt; lib (gcc)   lib (os)</span><br><span class="line">[INFO ]  Installing pass-2 core C gcc compiler: done in 354.87s (at 16:07)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing C library</span><br><span class="line">[INFO ]    =================================================================</span><br><span class="line">[INFO ]    Building for multilib 1/1: &#x27;&#x27;</span><br><span class="line">[EXTRA]      Cleaning up start files</span><br><span class="line">[EXTRA]      Configuring C library</span><br><span class="line">[EXTRA]      Building C library</span><br><span class="line">[EXTRA]      Configuring C library</span><br><span class="line">[EXTRA]      Building C library</span><br><span class="line">[EXTRA]      Installing C library</span><br><span class="line">[INFO ]    Building for multilib 1/1: &#x27;&#x27;: done in 184.69s (at 19:12)</span><br><span class="line">[INFO ]  Installing C library: done in 184.78s (at 19:12)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Installing final gcc compiler</span><br><span class="line">[EXTRA]    Configuring final gcc compiler</span><br><span class="line">[EXTRA]    Building final gcc compiler</span><br><span class="line">[EXTRA]    Installing final gcc compiler</span><br><span class="line">[EXTRA]    Housekeeping for final gcc compiler</span><br><span class="line">[EXTRA]       &#x27;&#x27; --&gt; lib (gcc)   lib (os)</span><br><span class="line">[INFO ]  Installing final gcc compiler: done in 339.13s (at 24:51)</span><br><span class="line">[INFO ]  =================================================================</span><br><span class="line">[INFO ]  Finalizing the toolchain&#x27;s directory</span><br><span class="line">[INFO ]    Stripping all toolchain executables</span><br><span class="line">[EXTRA]    Installing the populate helper</span><br><span class="line">[EXTRA]    Installing a cross-ldd helper</span><br><span class="line">[EXTRA]    Creating toolchain aliases</span><br><span class="line">[EXTRA]    Removing installed documentation</span><br><span class="line">[EXTRA]    Collect license information from: ~/Crosscompile/.build/arm-rpi-linux-gnueabihf/src</span><br><span class="line">[EXTRA]    Put the license information to: ~/....../RPi/share/licenses</span><br><span class="line">[INFO ]  Finalizing the toolchain&#x27;s directory: done in 1.80s (at 24:52)</span><br><span class="line">[INFO ]  Build completed at 20190906.020619</span><br><span class="line">[INFO ]  (elapsed: 24:51.86)</span><br><span class="line">[INFO ]  Finishing installation (may take a few seconds)...</span><br><span class="line">[24:52] / %                                                                                                                                                              longervision-GT72-6QE%</span><br><span class="line">                                           </span><br></pre></td></tr></table></figure>

<p>This process may take a while. I’m going to sleep tonight. Continue tomorrow…</p>
<p><span style="color:blue"><strong>Alright, let’s continue today. Glad to know it’s built successfully.</strong></span></p>
<div style="font-size:5rem;width:100%;text-align:center;">
<span class="emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span>
</div>

<p>Let’s <strong>FIRST</strong> take a look at what’s under the current folder.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line">build.log  rpi.config</span><br></pre></td></tr></table></figure>

<p>And then, let’s take a look at what’s built under the specified destination folder.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash"><span class="built_in">ls</span> ~/....../CrossCompile/RPi</span></span><br><span class="line">arm-rpi-linux-gnueabihf  bin  build.log.bz2  include  lib  libexec  share</span><br><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash"><span class="built_in">ls</span> ~/....../CrossCompile/RPi/bin</span></span><br><span class="line">arm-rpi-linux-gnueabihf-addr2line  arm-rpi-linux-gnueabihf-cpp           arm-rpi-linux-gnueabihf-gcc-ar      arm-rpi-linux-gnueabihf-gprof    arm-rpi-linux-gnueabihf-objdump   arm-rpi-linux-gnueabihf-strip</span><br><span class="line">arm-rpi-linux-gnueabihf-ar         arm-rpi-linux-gnueabihf-ct-ng.config  arm-rpi-linux-gnueabihf-gcc-nm      arm-rpi-linux-gnueabihf-ld       arm-rpi-linux-gnueabihf-populate</span><br><span class="line">arm-rpi-linux-gnueabihf-as         arm-rpi-linux-gnueabihf-elfedit       arm-rpi-linux-gnueabihf-gcc-ranlib  arm-rpi-linux-gnueabihf-ld.bfd   arm-rpi-linux-gnueabihf-ranlib</span><br><span class="line">arm-rpi-linux-gnueabihf-c++        arm-rpi-linux-gnueabihf-g++           arm-rpi-linux-gnueabihf-gcov        arm-rpi-linux-gnueabihf-ldd      arm-rpi-linux-gnueabihf-readelf</span><br><span class="line">arm-rpi-linux-gnueabihf-cc         arm-rpi-linux-gnueabihf-gcc           arm-rpi-linux-gnueabihf-gcov-dump   arm-rpi-linux-gnueabihf-nm       arm-rpi-linux-gnueabihf-size</span><br><span class="line">arm-rpi-linux-gnueabihf-c++filt    arm-rpi-linux-gnueabihf-gcc-8.3.0     arm-rpi-linux-gnueabihf-gcov-tool   arm-rpi-linux-gnueabihf-objcopy  arm-rpi-linux-gnueabihf-strings</span><br><span class="line"><span class="meta prompt_">longervision-GT72-6QE%</span></span><br></pre></td></tr></table></figure>

<p>Finally, let’s take a look at the version of our built cross compilers for <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">arm-rpi-linux-gnueabihf-gcc --version</span></span><br><span class="line">zsh: command not found: arm-rpi-linux-gnueabihf-gcc</span><br><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">./arm-rpi-linux-gnueabihf-gcc --version</span></span><br><span class="line">arm-rpi-linux-gnueabihf-gcc (crosstool-NG 1.24.0.6-afaf7b9) 8.3.0</span><br><span class="line">Copyright (C) 2018 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the source for copying conditions.  There is NO</span><br><span class="line">warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">./arm-rpi-linux-gnueabihf-g++ --version</span></span><br><span class="line">arm-rpi-linux-gnueabihf-g++ (crosstool-NG 1.24.0.6-afaf7b9) 8.3.0</span><br><span class="line">Copyright (C) 2018 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the source for copying conditions.  There is NO</span><br><span class="line">warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br></pre></td></tr></table></figure>

<p><strong><span style="color:red">Additional issue: It seems current <a target="_blank" rel="noopener" href="https://crosstool-ng.github.io/">crosstool-NG</a> does NOT officially support <a target="_blank" rel="noopener" href="https://www.python.org/">Python</a>. Please refer to <a target="_blank" rel="noopener" href="https://github.com/crosstool-ng/crosstool-ng/issues/1235">my issue at crosstool-NG</a>.</span></strong></p>
<h1 id="4-Compile-Build-a-Package-with-Generated-Toolchain"><a href="#4-Compile-Build-a-Package-with-Generated-Toolchain" class="headerlink" title="4. Compile&#x2F;Build a Package with Generated Toolchain"></a>4. Compile&#x2F;Build a Package with Generated Toolchain</h1><p>For most of the packages nowadays, they are</p>
<ul>
<li>either supported by <a target="_blank" rel="noopener" href="https://www.gnu.org/software/make/">make</a>: <code>./configure -&gt; make -&gt; make install</code></li>
<li>or supported by <a target="_blank" rel="noopener" href="https://cmake.org/">CMake</a>: <code>mkdir build -&gt; cd build -&gt; ccmake ../ -&gt; make -&gt; make install</code></li>
</ul>
<p>How to use our generated toolchain to compile&#x2F;build our target packages?</p>
<ul>
<li>For the <strong>FIRST</strong> option, you can follow the <a target="_blank" rel="noopener" href="https://crosstool-ng.github.io/docs/toolchain-usage/">crosstool-NG Using the toolchain</a>.</li>
<li>For the <strong>SECOND</strong> option, you are welcome to follow <a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html">CMake Toolchains</a>.</li>
</ul>
<p>Today, we’re going to take the package <a target="_blank" rel="noopener" href="https://github.com/mariusmuja/flann">flann</a> as an example, which are to be built with <a target="_blank" rel="noopener" href="https://cmake.org/">CMake</a>.</p>
<h2 id="4-1-CMakeLists-txt-Modification"><a href="#4-1-CMakeLists-txt-Modification" class="headerlink" title="4.1 CMakeLists.txt Modification"></a>4.1 CMakeLists.txt Modification</h2><h3 id="4-1-1-CMake-Toolchains-Cross-Compiling-for-Linux"><a href="#4-1-1-CMake-Toolchains-Cross-Compiling-for-Linux" class="headerlink" title="4.1.1 CMake Toolchains - Cross Compiling for Linux"></a>4.1.1 CMake Toolchains - Cross Compiling for Linux</h3><p>By following <a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html#cross-compiling-for-linux">CMake Toolchains - Cross Compiling for Linux</a>, we <strong>FIRST</strong> modify <a target="_blank" rel="noopener" href="https://github.com/mariusmuja/flann/blob/master/CMakeLists.txt">flann CMakeLists.txt</a> a bit by adding the following lines before <code>project(flann)</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION 2.6)</span><br><span class="line"></span><br><span class="line">if(COMMAND cmake_policy)</span><br><span class="line">    cmake_policy(SET CMP0003 NEW)</span><br><span class="line">endif(COMMAND cmake_policy)</span><br><span class="line"></span><br><span class="line">set(CMAKE_SYSTEM_NAME Linux)</span><br><span class="line">set(CMAKE_SYSTEM_PROCESSOR arm)</span><br><span class="line"></span><br><span class="line">set(CMAKE_SYSROOT ....../arm-rpi-linux-gnueabihf/sysroot)</span><br><span class="line">set(CMAKE_STAGING_PREFIX ....../stage)</span><br><span class="line"></span><br><span class="line">set(tools /opt/compilers/RPi)</span><br><span class="line">set(CMAKE_C_COMPILER $&#123;tools&#125;/bin/arm-rpi-linux-gnueabihf-gcc)</span><br><span class="line">set(CMAKE_CXX_COMPILER $&#123;tools&#125;/bin/arm-rpi-linux-gnueabihf-g++)</span><br><span class="line"></span><br><span class="line">set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)</span><br><span class="line">set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)</span><br><span class="line">set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)</span><br><span class="line">set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)</span><br><span class="line"></span><br><span class="line">set(CMAKE_TRY_COMPILE_TARGET_TYPE &quot;STATIC_LIBRARY&quot;)</span><br><span class="line"></span><br><span class="line">project(flann)</span><br><span class="line">string(TOLOWER $&#123;PROJECT_NAME&#125; PROJECT_NAME_LOWER)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>CMAKE_SYSROOT</strong> specify the sysroot directory which emulate your target environment, here, <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a></li>
<li><strong>CMAKE_STAGING_PREFIX</strong> is where the <strong>STAGING</strong> results store, for the reason that final results may require to be built in multiple stages. You may refer to <a target="_blank" rel="noopener" href="http://www.linuxfromscratch.org/">Linux From Scratch</a> for further background knowledge about that.</li>
<li><strong>tools</strong> actually specify the building tool directory. Making sure all generated cross compiling tools are under folder <code>$&#123;tools&#125;/bin</code>.</li>
</ul>
<h3 id="4-1-2-Ignore-hdf5"><a href="#4-1-2-Ignore-hdf5" class="headerlink" title="4.1.2 Ignore hdf5"></a>4.1.2 Ignore hdf5</h3><p>In addition, for the emulated <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a> sysroot, <a target="_blank" rel="noopener" href="https://www.hdfgroup.org/solutions/hdf5/">hdf5</a> is NOT supported. Therefore, let’s simply comment out the following line in <a target="_blank" rel="noopener" href="https://github.com/mariusmuja/flann/blob/master/CMakeLists.txt">flann CMakeLists.txt</a>.</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#find_hdf5()</span></span><br></pre></td></tr></table></figure>


<h2 id="4-2-Cross-Compile"><a href="#4-2-Cross-Compile" class="headerlink" title="4.2 Cross Compile"></a>4.2 Cross Compile</h2><p>Now, let’s start cross-compiling <a target="_blank" rel="noopener" href="https://github.com/mariusmuja/flann">flann</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash"><span class="built_in">mkdir</span> build</span></span><br><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash"><span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">ccmake ../</span></span><br></pre></td></tr></table></figure>

<p>and press <strong>c</strong> and then <strong>t</strong>, you’ll see the cross compiling toolchains have been automatically configured as:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">BUILD_CUDA_LIB                  *OFF</span><br><span class="line">BUILD_C_BINDINGS                *ON</span><br><span class="line">BUILD_DOC                       *OFF</span><br><span class="line">BUILD_EXAMPLES                  *OFF</span><br><span class="line">BUILD_MATLAB_BINDINGS           *OFF</span><br><span class="line">BUILD_PYTHON_BINDINGS           *ON</span><br><span class="line">BUILD_TESTS                     *OFF</span><br><span class="line">CMAKE_AR                        */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-ar</span><br><span class="line">CMAKE_BUILD_TYPE                *RelWithDebInfo</span><br><span class="line">CMAKE_COLOR_MAKEFILE            *ON</span><br><span class="line">CMAKE_CXX_COMPILER_AR           */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-gcc-ar</span><br><span class="line">CMAKE_CXX_COMPILER_RANLIB       */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-gcc-ranlib</span><br><span class="line">CMAKE_CXX_FLAGS                 *-I/usr/include</span><br><span class="line">CMAKE_CXX_FLAGS_DEBUG           *-g</span><br><span class="line">CMAKE_CXX_FLAGS_MINSIZEREL      *-Os -DNDEBUG</span><br><span class="line">CMAKE_CXX_FLAGS_RELEASE         *-O3 -DNDEBUG</span><br><span class="line">CMAKE_CXX_FLAGS_RELWITHDEBINFO  *-O2 -g -DNDEBUG</span><br><span class="line">CMAKE_C_COMPILER_AR             */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-gcc-ar</span><br><span class="line">CMAKE_C_COMPILER_RANLIB         */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-gcc-ranlib</span><br><span class="line">CMAKE_C_FLAGS                   *-I/usr/include</span><br><span class="line">CMAKE_C_FLAGS_DEBUG             *-g</span><br><span class="line">CMAKE_C_FLAGS_MINSIZEREL        *-Os -DNDEBUG</span><br><span class="line">CMAKE_C_FLAGS_RELEASE           *-O3 -DNDEBUG</span><br><span class="line">CMAKE_C_FLAGS_RELWITHDEBINFO    *-O2 -g -DNDEBUG</span><br><span class="line">CMAKE_EXE_LINKER_FLAGS          *</span><br><span class="line">CMAKE_EXE_LINKER_FLAGS_DEBUG    *</span><br><span class="line">CMAKE_EXE_LINKER_FLAGS_MINSIZE  *  </span><br><span class="line">CMAKE_EXE_LINKER_FLAGS_RELEASE  *     </span><br><span class="line">CMAKE_EXE_LINKER_FLAGS_RELWITH  *</span><br><span class="line">CMAKE_EXPORT_COMPILE_COMMANDS   *OFF</span><br><span class="line">CMAKE_INSTALL_PREFIX            */usr/local</span><br><span class="line">CMAKE_LINKER                    */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-ld</span><br><span class="line">CMAKE_MAKE_PROGRAM              */usr/bin/make</span><br><span class="line">CMAKE_MODULE_LINKER_FLAGS       *    </span><br><span class="line">CMAKE_MODULE_LINKER_FLAGS_DEBU  *  </span><br><span class="line">CMAKE_MODULE_LINKER_FLAGS_MINS  *   </span><br><span class="line">CMAKE_MODULE_LINKER_FLAGS_RELE  *    </span><br><span class="line">CMAKE_MODULE_LINKER_FLAGS_RELW  * </span><br><span class="line">CMAKE_NM                        */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-nm</span><br><span class="line">CMAKE_OBJCOPY                   */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-objcopy</span><br><span class="line">CMAKE_OBJDUMP                   */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-objdump</span><br><span class="line">CMAKE_RANLIB                    */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-ranlib</span><br><span class="line">CMAKE_SHARED_LINKER_FLAGS       *    </span><br><span class="line">CMAKE_SHARED_LINKER_FLAGS_DEBU  *</span><br><span class="line">CMAKE_SHARED_LINKER_FLAGS_MINS  *   </span><br><span class="line">CMAKE_SHARED_LINKER_FLAGS_RELE  *</span><br><span class="line">CMAKE_SHARED_LINKER_FLAGS_RELW  *   </span><br><span class="line">CMAKE_SKIP_INSTALL_RPATH        *OFF</span><br><span class="line">CMAKE_SKIP_RPATH                *OFF</span><br><span class="line">CMAKE_STATIC_LINKER_FLAGS       *</span><br><span class="line">CMAKE_STATIC_LINKER_FLAGS_DEBU  *</span><br><span class="line">CMAKE_STATIC_LINKER_FLAGS_MINS  * </span><br><span class="line">CMAKE_STATIC_LINKER_FLAGS_RELE  *</span><br><span class="line">CMAKE_STATIC_LINKER_FLAGS_RELW  *</span><br><span class="line">CMAKE_STRIP                     */opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-strip</span><br><span class="line">CMAKE_VERBOSE_MAKEFILE          *ON</span><br><span class="line">CPACK_SOURCE_RPM                *OFF</span><br><span class="line">CPACK_SOURCE_TBZ2               *ON</span><br><span class="line">CPACK_SOURCE_TGZ                *ON</span><br><span class="line">CPACK_SOURCE_TXZ                *ON </span><br><span class="line">CPACK_SOURCE_TZ                 *ON</span><br><span class="line">CPACK_SOURCE_ZIP                *OFF</span><br><span class="line">DPKG_PROGRAM                    */usr/bin/dpkg</span><br><span class="line">NSIS_PROGRAM                    */usr/bin/makensis</span><br><span class="line">NVCC_COMPILER_BINDIR            *</span><br><span class="line">PACKAGE_MAKER_PROGRAM           *PACKAGE_MAKER_PROGRAM-NOTFOUND</span><br><span class="line">PKG_CONFIG_EXECUTABLE           */usr/bin/pkg-config</span><br><span class="line">PYTHON_EXECUTABLE               */usr/bin/python</span><br><span class="line">RPM_PROGRAM                     *RPM_PROGRAM-NOTFOUND</span><br><span class="line">USE_MPI                         *OFF</span><br><span class="line">USE_OPENMP                      *OFF</span><br></pre></td></tr></table></figure>

<p>The <strong>LAST</strong> step before make is to modify some of the parameters accordingly, in my case:</p>
<ul>
<li><strong>BUILD_PYTHON_BINDINGS</strong>: ON -&gt; OFF</li>
<li><strong>CMAKE_CXX_FLAGS</strong>: <code>-I/usr/include</code> (for lz4.h from my host <a target="_blank" rel="noopener" href="http://releases.ubuntu.com/19.04/">Ubuntu 19.04</a>)</li>
<li><strong>CMAKE_C_FLAGS</strong>: <code>-I/usr/include</code> (for lz4.h from my host <a target="_blank" rel="noopener" href="http://releases.ubuntu.com/19.04/">Ubuntu 19.04</a>)</li>
<li><strong>CMAKE_VERBOSE_MAKEFILE</strong>: OFF -&gt; ON</li>
<li><strong>CMAKE_INSTALL_PREFIX</strong>: <code>/usr/local/</code> -&gt; under which directory you want to install, which can be <strong>IGNORED</strong> for now</li>
</ul>
<p>Now, press <strong>c</strong>, you’ll see:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CMake Warning at CMakeLists.txt:<span class="number">99</span> (<span class="keyword">message</span>):</span><br><span class="line">  hdf5 library <span class="keyword">not</span> found, some tests will <span class="keyword">not</span> be run</span><br></pre></td></tr></table></figure>

<p>A warining of missing <a target="_blank" rel="noopener" href="https://www.hdfgroup.org/solutions/hdf5/">hdf5</a> is clearly reasonable and acceptable. Then press <strong>g</strong>.</p>
<p>Finally, it’s the time for us to cross build <a target="_blank" rel="noopener" href="https://github.com/mariusmuja/flann">flann</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">make -j8</span></span><br><span class="line">/usr/bin/cmake -S....../flann -B....../flann/build --check-build-system CMakeFiles/Makefile.cmake 0</span><br><span class="line">/usr/bin/cmake -E cmake_progress_start ....../flann/build/CMakeFiles ....../flann/build/CMakeFiles/progress.marks</span><br><span class="line">make -f CMakeFiles/Makefile2 all</span><br><span class="line">make[1]: Entering directory &#x27;....../flann/build&#x27;</span><br><span class="line">make -f src/cpp/CMakeFiles/flann_s.dir/build.make src/cpp/CMakeFiles/flann_s.dir/depend</span><br><span class="line">make -f src/cpp/CMakeFiles/flann_cpp_s.dir/build.make src/cpp/CMakeFiles/flann_cpp_s.dir/depend</span><br><span class="line">make[2]: Entering directory &#x27;....../flann/build&#x27;</span><br><span class="line">cd ....../flann/build &amp;&amp; /usr/bin/cmake -E cmake_depends &quot;Unix Makefiles&quot; ....../flann ....../flann/src/cpp ....../flann/build ....../flann/build/src/cpp ....../flann/build/src/cpp/CMakeFiles/flann_s.dir/DependInfo.cmake --color=</span><br><span class="line">make[2]: Entering directory &#x27;....../flann/build&#x27;</span><br><span class="line">cd ....../flann/build &amp;&amp; /usr/bin/cmake -E cmake_depends &quot;Unix Makefiles&quot; ....../flann ....../flann/src/cpp ....../flann/build ....../flann/build/src/cpp ....../flann/build/src/cpp/CMakeFiles/flann_cpp_s.dir/DependInfo.cmake --color=</span><br><span class="line">Scanning dependencies of target flann_cpp_s</span><br><span class="line">make[2]: Leaving directory &#x27;....../flann/build&#x27;</span><br><span class="line">make -f src/cpp/CMakeFiles/flann_s.dir/build.make src/cpp/CMakeFiles/flann_s.dir/build</span><br><span class="line">make[2]: Entering directory &#x27;....../flann/build&#x27;</span><br><span class="line">make[2]: Leaving directory &#x27;....../flann/build&#x27;</span><br><span class="line">make -f src/cpp/CMakeFiles/flann_cpp_s.dir/build.make src/cpp/CMakeFiles/flann_cpp_s.dir/build</span><br><span class="line">make[2]: Entering directory &#x27;....../flann/build&#x27;</span><br><span class="line">[ 12%] Building CXX object src/cpp/CMakeFiles/flann_s.dir/flann/flann.cpp.o</span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-g++ --sysroot=....../RPi/arm-rpi-linux-gnueabihf/sysroot  -DFLANN_STATIC -D_FLANN_VERSION=1.9.1 -I....../flann/src/cpp  -I/usr/include -O2 -g -DNDEBUG   -Wall -Wno-unknown-pragmas -Wno-unused-function -fPIC -o CMakeFiles/flann_s.dir/flann/flann.cpp.o -c ....../flann/src/cpp/flann/flann.cpp</span><br><span class="line">[ 25%] Building CXX object src/cpp/CMakeFiles/flann_cpp_s.dir/flann/flann_cpp.cpp.o</span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-g++ --sysroot=....../RPi/arm-rpi-linux-gnueabihf/sysroot  -DFLANN_STATIC -DFLANN_USE_CUDA -D_FLANN_VERSION=1.9.1 -I....../flann/src/cpp  -I/usr/include -O2 -g -DNDEBUG   -Wall -Wno-unknown-pragmas -Wno-unused-function -fPIC -o CMakeFiles/flann_cpp_s.dir/flann/flann_cpp.cpp.o -c ....../flann/src/cpp/flann/flann_cpp.cpp</span><br><span class="line">In file included from ....../flann/src/cpp/flann/util/params.h:33,</span><br><span class="line">                 from ....../flann/src/cpp/flann/flann.hpp:42,</span><br><span class="line">                 from ....../flann/src/cpp/flann/flann.h:603,</span><br><span class="line">                 from ....../flann/src/cpp/flann/flann.cpp:31:</span><br><span class="line">....../flann/src/cpp/flann/util/any.h: In member function &#x27;virtual void flann::anyimpl::big_any_policy&lt;T&gt;::static_delete(void**)&#x27;:</span><br><span class="line">....../flann/src/cpp/flann/util/any.h:81:9: warning: this &#x27;if&#x27; clause does not guard... [-Wmisleading-indentation]</span><br><span class="line">         if (* x) delete (* reinterpret_cast&lt;T**&gt;(x)); *x = NULL;</span><br><span class="line">         ^~</span><br><span class="line">....../flann/src/cpp/flann/util/any.h:81:55: note: ...this statement, but the latter is misleadingly indented as if it were guarded by the &#x27;if&#x27;</span><br><span class="line">         if (* x) delete (* reinterpret_cast&lt;T**&gt;(x)); *x = NULL;</span><br><span class="line">                                                       ^</span><br><span class="line">In file included from ....../flann/src/cpp/flann/util/params.h:33,</span><br><span class="line">                 from ....../flann/src/cpp/flann/flann.hpp:42,</span><br><span class="line">                 from ....../flann/src/cpp/flann/flann_cpp.cpp:30:</span><br><span class="line">....../flann/src/cpp/flann/util/any.h: In member function &#x27;virtual void flann::anyimpl::big_any_policy&lt;T&gt;::static_delete(void**)&#x27;:</span><br><span class="line">....../flann/src/cpp/flann/util/any.h:81:9: warning: this &#x27;if&#x27; clause does not guard... [-Wmisleading-indentation]</span><br><span class="line">         if (* x) delete (* reinterpret_cast&lt;T**&gt;(x)); *x = NULL;</span><br><span class="line">         ^~</span><br><span class="line">....../flann/src/cpp/flann/util/any.h:81:55: note: ...this statement, but the latter is misleadingly indented as if it were guarded by the &#x27;if&#x27;</span><br><span class="line">         if (* x) delete (* reinterpret_cast&lt;T**&gt;(x)); *x = NULL;</span><br><span class="line">                                                       ^</span><br><span class="line">[ 37%] Linking CXX static library ../../lib/libflann_cpp_s.a</span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /usr/bin/cmake -P CMakeFiles/flann_cpp_s.dir/cmake_clean_target.cmake</span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /usr/bin/cmake -E cmake_link_script CMakeFiles/flann_cpp_s.dir/link.txt --verbose=1</span><br><span class="line">/opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-ar qc ../../lib/libflann_cpp_s.a  CMakeFiles/flann_cpp_s.dir/flann/flann_cpp.cpp.o</span><br><span class="line">/opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-ranlib ../../lib/libflann_cpp_s.a</span><br><span class="line">make[2]: Leaving directory &#x27;....../flann/build&#x27;</span><br><span class="line">[ 37%] Built target flann_cpp_s</span><br><span class="line">make -f src/cpp/CMakeFiles/flann_cpp.dir/build.make src/cpp/CMakeFiles/flann_cpp.dir/depend</span><br><span class="line">make[2]: Entering directory &#x27;....../flann/build&#x27;</span><br><span class="line">cd ....../flann/build &amp;&amp; /usr/bin/cmake -E cmake_depends &quot;Unix Makefiles&quot; ....../flann ....../flann/src/cpp ....../flann/build ....../flann/build/src/cpp ....../flann/build/src/cpp/CMakeFiles/flann_cpp.dir/DependInfo.cmake --color=</span><br><span class="line">Scanning dependencies of target flann_cpp</span><br><span class="line">make[2]: Leaving directory &#x27;....../flann/build&#x27;</span><br><span class="line">make -f src/cpp/CMakeFiles/flann_cpp.dir/build.make src/cpp/CMakeFiles/flann_cpp.dir/build</span><br><span class="line">make[2]: Entering directory &#x27;....../flann/build&#x27;</span><br><span class="line">[ 50%] Building CXX object src/cpp/CMakeFiles/flann_cpp.dir/empty.cpp.o</span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-g++ --sysroot=....../RPi/arm-rpi-linux-gnueabihf/sysroot  -DFLANN_EXPORTS -D_FLANN_VERSION=1.9.1 -I....../flann/src/cpp  -I/usr/include -O2 -g -DNDEBUG -fPIC   -Wall -Wno-unknown-pragmas -Wno-unused-function -o CMakeFiles/flann_cpp.dir/empty.cpp.o -c ....../flann/src/cpp/empty.cpp</span><br><span class="line">[ 62%] Linking CXX shared library ../../lib/libflann_cpp.so</span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /usr/bin/cmake -E cmake_link_script CMakeFiles/flann_cpp.dir/link.txt --verbose=1</span><br><span class="line">/opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-g++ --sysroot=....../RPi/arm-rpi-linux-gnueabihf/sysroot -fPIC -I/usr/include -O2 -g -DNDEBUG  -shared -Wl,-soname,libflann_cpp.so.1.9 -o ../../lib/libflann_cpp.so.1.9.1 CMakeFiles/flann_cpp.dir/empty.cpp.o -Wl,-whole-archive ../../lib/libflann_cpp_s.a -Wl,-no-whole-archive </span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /usr/bin/cmake -E cmake_symlink_library ../../lib/libflann_cpp.so.1.9.1 ../../lib/libflann_cpp.so.1.9 ../../lib/libflann_cpp.so</span><br><span class="line">make[2]: Leaving directory &#x27;....../flann/build&#x27;</span><br><span class="line">[ 62%] Built target flann_cpp</span><br><span class="line">In file included from ....../flann/src/cpp/flann/algorithms/all_indices.h:35,</span><br><span class="line">                 from ....../flann/src/cpp/flann/flann.hpp:45,</span><br><span class="line">                 from ....../flann/src/cpp/flann/flann.h:603,</span><br><span class="line">                 from ....../flann/src/cpp/flann/flann.cpp:31:</span><br></pre></td></tr></table></figure>

<p><span style="color:red"><strong>VERY Important:</strong></p>
<ul>
<li>If you build <a target="_blank" rel="noopener" href="https://github.com/mariusmuja/flann">flann</a> from source on a <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a>, your system is going to hang HERE, possibly due to lack of memory..</li>
<li><a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a> has 4 cores <strong>ONLY</strong>, but now you can use <strong>MORE</strong> cores on your host PC, which is clearly one advantage of using cross compiling.</span></li>
</ul>
<p>Finally, you’ll see <a target="_blank" rel="noopener" href="https://github.com/mariusmuja/flann">flann</a> has been successfully cross compiled as:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">....../flann/src/cpp/flann/algorithms/autotuned_index.h: In member function &#x27;void flann::AutotunedIndex&lt;Distance&gt;::optimizeKMeans(std::vector&lt;flann::AutotunedIndex&lt;Distance&gt;::CostData&gt;&amp;) [with Distance = flann::L2&lt;double&gt;]&#x27;:</span><br><span class="line">....../flann/src/cpp/flann/algorithms/autotuned_index.h:379:31: note: parameter passing for argument of type &#x27;flann::L2&lt;double&gt;&#x27; changed in GCC 7.1</span><br><span class="line">         KMeansIndex&lt;Distance&gt; kmeans(sampledDataset_, cost.params, distance_);</span><br><span class="line">                               ^~~~~~</span><br><span class="line">[ 75%] Linking CXX static library ../../lib/libflann_s.a</span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /usr/bin/cmake -P CMakeFiles/flann_s.dir/cmake_clean_target.cmake</span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /usr/bin/cmake -E cmake_link_script CMakeFiles/flann_s.dir/link.txt --verbose=1</span><br><span class="line">/opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-ar qc ../../lib/libflann_s.a  CMakeFiles/flann_s.dir/flann/flann.cpp.o</span><br><span class="line">/opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-ranlib ../../lib/libflann_s.a</span><br><span class="line">make[2]: Leaving directory &#x27;....../flann/build&#x27;</span><br><span class="line">[ 75%] Built target flann_s</span><br><span class="line">make -f src/cpp/CMakeFiles/flann.dir/build.make src/cpp/CMakeFiles/flann.dir/depend</span><br><span class="line">make[2]: Entering directory &#x27;....../flann/build&#x27;</span><br><span class="line">cd ....../flann/build &amp;&amp; /usr/bin/cmake -E cmake_depends &quot;Unix Makefiles&quot; ....../flann ....../flann/src/cpp ....../flann/build ....../flann/build/src/cpp ....../flann/build/src/cpp/CMakeFiles/flann.dir/DependInfo.cmake --color=</span><br><span class="line">Scanning dependencies of target flann</span><br><span class="line">make[2]: Leaving directory &#x27;....../flann/build&#x27;</span><br><span class="line">make -f src/cpp/CMakeFiles/flann.dir/build.make src/cpp/CMakeFiles/flann.dir/build</span><br><span class="line">make[2]: Entering directory &#x27;....../flann/build&#x27;</span><br><span class="line">[ 87%] Building CXX object src/cpp/CMakeFiles/flann.dir/empty.cpp.o</span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-g++ --sysroot=....../RPi/arm-rpi-linux-gnueabihf/sysroot  -DFLANN_EXPORTS -D_FLANN_VERSION=1.9.1 -I....../flann/src/cpp  -I/usr/include -O2 -g -DNDEBUG -fPIC   -Wall -Wno-unknown-pragmas -Wno-unused-function -o CMakeFiles/flann.dir/empty.cpp.o -c ....../flann/src/cpp/empty.cpp</span><br><span class="line"><span class="meta prompt_">[100%</span><span class="language-bash">] Linking CXX shared library ../../lib/libflann.so</span></span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /usr/bin/cmake -E cmake_link_script CMakeFiles/flann.dir/link.txt --verbose=1</span><br><span class="line">/opt/compilers/RPi/bin/arm-rpi-linux-gnueabihf-g++ --sysroot=....../RPi/arm-rpi-linux-gnueabihf/sysroot -fPIC -I/usr/include -O2 -g -DNDEBUG  -shared -Wl,-soname,libflann.so.1.9 -o ../../lib/libflann.so.1.9.1 CMakeFiles/flann.dir/empty.cpp.o -Wl,-whole-archive ../../lib/libflann_s.a -Wl,-no-whole-archive -Wl,--push-state,--no-as-needed -Wl,--pop-state </span><br><span class="line">cd ....../flann/build/src/cpp &amp;&amp; /usr/bin/cmake -E cmake_symlink_library ../../lib/libflann.so.1.9.1 ../../lib/libflann.so.1.9 ../../lib/libflann.so</span><br><span class="line">make[2]: Leaving directory &#x27;....../flann/build&#x27;</span><br><span class="line"><span class="meta prompt_">[100%</span><span class="language-bash">] Built target flann</span></span><br><span class="line">make[1]: Leaving directory &#x27;....../flann/build&#x27;</span><br><span class="line">/usr/bin/cmake -E cmake_progress_start ....../flann/build/CMakeFiles 0</span><br></pre></td></tr></table></figure>

<p>You can now:</p>
<ul>
<li><code>make install</code> to install the built&#x2F;generated libraries installed under <strong>CMAKE_INSTALL_PREFIX</strong></li>
<li>copy and paste the built&#x2F;generated libraries onto <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3B</a> and use it directly.</li>
</ul>
<p><strong>BTW</strong>: do <strong>NOT</strong> forget to install the header files.</p>
<h1 id="5-Additional-Issues"><a href="#5-Additional-Issues" class="headerlink" title="5. Additional Issues"></a>5. Additional Issues</h1><p><strong>Multilib&#x2F;multiarch</strong> seems to be problematic nowadays. Please pay attention to <strong>Multilib&#x2F;multiarch</strong>. Some related issues are enumuated as the end of this blog.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://crosstool-ng.github.io/docs/caveats-features/">Multilib caveats from Official Notes on specific toolchain features</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/crosstool-ng/crosstool-ng/issues/1239">fatal error: gnu&#x2F;stubs-hard.h: No such file or directory from crosstool-NG</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pwaring/gcc-cross-compiler/issues/11">fatal error: gnu&#x2F;stubs-hard.h: No such file or directory from gcc-cross-compiler</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/riscv/riscv-tools/issues/186">Build error: “features.h: No such file or directory” from risc-v tools</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/crosstool-ng/crosstool-ng/issues/945">crosstool-NG risc-v linux multilib issue</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/raspberrypi/tools/issues/50">raspberrypi toolchain issue</a></li>
</ul>
<p>Alright, that’s all for today. Let me go to bed. Good bye…</p>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="emoji" alias="sleepy" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62a.png?v8">&#x1f62a;</span>
    <span class="emoji" alias="sleeping" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f634.png?v8">&#x1f634;</span>
</div>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2019/08/30/MachineVision/FPGA/vc-zynq-7010-stereo-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/30/MachineVision/FPGA/vc-zynq-7010-stereo-1/" class="post-title-link" itemprop="url">Stereo Vision on VCSBC nano Z-RH-2 - PART I</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-08-30 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-30T00:00:00-07:00">2019-08-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Vision/" itemprop="url" rel="index"><span itemprop="name">Machine Vision</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Vision/FPGA/" itemprop="url" rel="index"><span itemprop="name">FPGA</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Today, we are going to talk about a fabulous project: <strong><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Computer_stereo_vision">stereo vision</a> on a <a target="_blank" rel="noopener" href="https://www.xilinx.com/products/silicon-devices/soc/zynq-7000.html">zynq-7010</a> board</strong>.</p>
<h1 id="1-VCSBC-nano-Z-RH-2"><a href="#1-VCSBC-nano-Z-RH-2" class="headerlink" title="1. VCSBC nano Z-RH-2"></a>1. VCSBC nano Z-RH-2</h1><h2 id="1-1-Hardware"><a href="#1-1-Hardware" class="headerlink" title="1.1 Hardware"></a>1.1 Hardware</h2><p>We are using a <a target="_blank" rel="noopener" href="https://www.vision-components.com/en/products/oem/3d-systems/arm-stereo-vision/">VCSBC nano Z-RH-2 board</a> for today’s experiment. The board adopted looks like the following:</p>
<table>
<thead>
<tr>
<th align="center">Front</th>
<th align="center">Back</th>
<th align="center">Connector</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/FPGA/vcsbc_nano_z-rh-2_zynq_7010_front.jpg" alt="VCSBC nano Z-RH-2 Front"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/FPGA/vcsbc_nano_z-rh-2_zynq_7010_back.jpg" alt="VCSBC nano Z-RH-2 Back"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/FPGA/vcsbc_nano_z-rh-2_zynq_7010_connector.jpg" alt="VCSBC nano Z-RH-2 Connector"></td>
</tr>
</tbody></table>
<p>More detailed specifications, please refer to <a target="_blank" rel="noopener" href="https://www.vision-components.com/en/products/oem/3d-systems/arm-stereo-vision/">Vision Components’s official website</a>.</p>
<h2 id="1-2-Software"><a href="#1-2-Software" class="headerlink" title="1.2 Software"></a>1.2 Software</h2><p>After you set up a static IP for this <a target="_blank" rel="noopener" href="https://www.vision-components.com/en/">Vision Components SBC</a>, it’s pretty straightforward to <strong>ssh</strong> into the system.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">ssh user@192.168.1.79</span></span><br><span class="line">user@192.168.1.79&#x27;s password: </span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms for each program are described in the</span><br><span class="line">individual files in /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Thu Aug 29 18:17:49 2019 from 192.168.1.200</span><br><span class="line">user@VC-Z:~$</span><br></pre></td></tr></table></figure>

<p>Currently, <a target="_blank" rel="noopener" href="https://www.vision-components.com/en/">VC</a> provides <a target="_blank" rel="noopener" href="https://www.kernel.org/">Linux Kernel</a> 3.14.79.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user@VC-Z:~$ uname -a</span><br><span class="line">Linux VC-Z 3.14.79-vc-z #2 SMP PREEMPT Wed Apr 24 18:33:06 CEST 2019 armv7l GNU/Linux</span><br></pre></td></tr></table></figure>

<p>And, let’s take a look at the dual <a target="_blank" rel="noopener" href="https://developer.arm.com/docs/ddi0406/latest">ARMv7</a> CPUs on <a target="_blank" rel="noopener" href="https://www.xilinx.com/products/silicon-devices/soc/zynq-7000.html">zynq-7010</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">user@VC-Z:~$ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">model name	: ARMv7 Processor rev 0 (v7l)</span><br><span class="line">BogoMIPS	: 1725.23</span><br><span class="line">Features	: swp half thumb fastmult vfp edsp neon vfpv3 tls vfpd32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x3</span><br><span class="line">CPU part	: 0xc09</span><br><span class="line">CPU revision	: 0</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">model name	: ARMv7 Processor rev 0 (v7l)</span><br><span class="line">BogoMIPS	: 1725.23</span><br><span class="line">Features	: swp half thumb fastmult vfp edsp neon vfpv3 tls vfpd32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x3</span><br><span class="line">CPU part	: 0xc09</span><br><span class="line">CPU revision	: 0</span><br><span class="line"></span><br><span class="line">Hardware	: Xilinx Zynq Platform</span><br><span class="line">Revision	: 0000</span><br><span class="line">Serial		: 0000000000000000</span><br></pre></td></tr></table></figure>



<h1 id="2-Stereo-Vision"><a href="#2-Stereo-Vision" class="headerlink" title="2. Stereo Vision"></a>2. Stereo Vision</h1><p>Sorry everybody. Today, I <strong>ONLY</strong> test <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Computer_stereo_vision">stereo vision</a> on ARM. I’ll try to figure out how to flash an open source IP of <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Computer_stereo_vision">stereo vision</a> onto <a target="_blank" rel="noopener" href="https://www.xilinx.com/products/silicon-devices/soc/zynq-7000.html">zynq-7010</a>, or write my own ASAP.</p>
<p>Hmmmmmmmm… <span style="color:red"><strong>It’s better I keep my code in dark???</strong></span></p>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="emoji" alias="stuck_out_tongue_closed_eyes" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f61d.png?v8">&#x1f61d;</span>
</div>


<h2 id="2-1-Classical-Image-Pairs"><a href="#2-1-Classical-Image-Pairs" class="headerlink" title="2.1 Classical Image Pairs"></a>2.1 Classical Image Pairs</h2><p>Let’s try out the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Computer_stereo_vision">stereo vision</a> on some <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Netpbm_format">.pgm</a> image pairs <strong>FIRST</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user@VC-Z:~/longervision$ ./pgmpair ../images/aloe_left.pgm ../images/aloe_right.pgm </span><br><span class="line">width= 1282</span><br><span class="line">height= 1110</span><br><span class="line">fps: 0.119696</span><br><span class="line">process: 398651</span><br></pre></td></tr></table></figure>

<p><span style="color:red"><strong>My GOD… It’s UNBELIEVABLY SLOW.</strong></span></p>
<table>
<thead>
<tr>
<th align="center">aloe_left</th>
<th align="center">aloe_right</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/FPGA/aloe_left.jpg" alt="aloe_left"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/FPGA/aloe_right.jpg" alt="aloe_right"></td>
</tr>
<tr>
<td align="center">aloe_left Stereo</td>
<td align="center">aloe_right Stereo</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/FPGA/aloe_left_disp.jpg" alt="aloe_left Stereo"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/FPGA/aloe_right_disp.jpg" alt="aloe_right Stereo"></td>
</tr>
</tbody></table>
<h2 id="2-2-Live-Video-Pairs"><a href="#2-2-Live-Video-Pairs" class="headerlink" title="2.2 Live Video Pairs"></a>2.2 Live Video Pairs</h2><p>The <strong>BEST</strong> demo code to test <strong>Vision Componenets Stereo Vision</strong> is <a target="_blank" rel="noopener" href="http://files.vision-components.com/Support/Eclipse_Example_Projects_VC_Z.zip">Eclipse_Example_Projects_VC_Z</a>.</p>
<h3 id="2-2-1-imageCaptureTest"><a href="#2-2-1-imageCaptureTest" class="headerlink" title="2.2.1 imageCaptureTest"></a>2.2.1 imageCaptureTest</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">./imageCaptureTest</span> </span><br><span class="line">0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> ----------------------------------------------------------------------- </span><br><span class="line">  VCCapt @0xbe87153c                                    Sensor Count: 2  </span><br><span class="line"> ----------------------------------------------------------------------- </span><br><span class="line">                                                                         </span><br><span class="line">                  Camera Type :  NANO Z RH Rev.0                         </span><br><span class="line">                Sensor 0 Type :  E2V_EV76C560ABT_1_0                     </span><br><span class="line">                Sensor 1 Type :  E2V_EV76C560ABT_1_0                     </span><br><span class="line">                                                                         </span><br><span class="line">   Trigger        Source      :  IMM                                     </span><br><span class="line">                                                                         </span><br><span class="line">     ___________________________________________________________________ </span><br><span class="line">     Sensor[ 0]:         Shutter:     12345 us,  Gain: 0.00              </span><br><span class="line">                                                                         </span><br><span class="line">                   x0, y0       :  (    0,    0)                         </span><br><span class="line">            binX,     binY      :  (    1,    1)                         </span><br><span class="line">        subsmplX, subsmplY, flip:  (    1,    1,0x00)                    </span><br><span class="line">    (img)          dx, dy, pitch:  ( 1280, 1024), 1280                   </span><br><span class="line">                                                                         </span><br><span class="line">    (img) st, ccmp1, ccmp2, type:  0xb6b03080, 0x00000000, 0x00000000, 0 </span><br><span class="line">                                                                         </span><br><span class="line">      Description                                                        </span><br><span class="line">       Sen dx, Sen dy, Sen pitch:   1280, 1024, 1280                     </span><br><span class="line">       Max dx, Max dy, Max pitch:   1280, 1024, 1280                     </span><br><span class="line">    Binning Max (dx, dy), Square:      2,    1,    1                     </span><br><span class="line">    Subsmpl Max (dx, dy), Square:      8,    8,    0                     </span><br><span class="line">       Init       st,ccmp1,ccmp2:  0xb6b03080, 0x00000000, 0x00000000    </span><br><span class="line">       Init  Shutter, Gain, Type:       10000,  0.00, GREY   (0)         </span><br><span class="line">                  FD, Port, Type:  4, 0, E2V_EV76C560ABT_1_0             </span><br><span class="line">                                                                         </span><br><span class="line">      Volatile Description                                               </span><br><span class="line">            requestCaptID, State:          0, IDLE                       </span><br><span class="line">          captId, TimestampTicks:          0,   6476832867277            </span><br><span class="line">                                                                         </span><br><span class="line">      Externals Description                                              </span><br><span class="line">            pos[0-3], angle[0-2]:  [ 0.00, 0.00, 0.00],[  0.0,  0.0]     </span><br><span class="line">                                                                         </span><br><span class="line">     ___________________________________________________________________ </span><br><span class="line">     Sensor[ 1]:         Shutter:     10000 us,  Gain: 0.00              </span><br><span class="line">                                                                         </span><br><span class="line">                   x0, y0       :  (    0,    0)                         </span><br><span class="line">            binX,     binY      :  (    1,    1)                         </span><br><span class="line">        subsmplX, subsmplY, flip:  (    1,    1,0x00)                    </span><br><span class="line">    (img)          dx, dy, pitch:  ( 1280, 1024), 1280                   </span><br><span class="line">                                                                         </span><br><span class="line">    (img) st, ccmp1, ccmp2, type:  0xb69c2080, 0x00000000, 0x00000000, 0 </span><br><span class="line">                                                                         </span><br><span class="line">      Description                                                        </span><br><span class="line">       Sen dx, Sen dy, Sen pitch:   1280, 1024, 1280                     </span><br><span class="line">       Max dx, Max dy, Max pitch:   1280, 1024, 1280                     </span><br><span class="line">    Binning Max (dx, dy), Square:      2,    1,    1                     </span><br><span class="line">    Subsmpl Max (dx, dy), Square:      8,    8,    0                     </span><br><span class="line">       Init       st,ccmp1,ccmp2:  0xb69c2080, 0x00000000, 0x00000000    </span><br><span class="line">       Init  Shutter, Gain, Type:       10000,  0.00, GREY   (0)         </span><br><span class="line">                  FD, Port, Type:  5, 1, E2V_EV76C560ABT_1_0             </span><br><span class="line">                                                                         </span><br><span class="line">      Volatile Description                                               </span><br><span class="line">            requestCaptID, State:          0, IDLE                       </span><br><span class="line">          captId, TimestampTicks:          0,   6476832867284            </span><br><span class="line">                                                                         </span><br><span class="line">      Externals Description                                              </span><br><span class="line">            pos[0-3], angle[0-2]:  [ 0.00, 0.00, 0.00],[  0.0,  0.0]     </span><br><span class="line">                                                                         </span><br><span class="line"> ----------------------------------------------------------------------- </span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<h3 id="2-2-2-imageCaptFPS"><a href="#2-2-2-imageCaptFPS" class="headerlink" title="2.2.2 imageCaptFPS"></a>2.2.2 imageCaptFPS</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">03:41:47[root@VC-Z] /home/user/vc/Eclipse_Example_Projects_VC_Z/imageCaptFPS</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">./imageCaptFPS</span> </span><br><span class="line">dy= 1024  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     780685us  for 1000 Cycles ==  34.745525fps.</span><br><span class="line">dy= 768  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     789899us  for 1000 Cycles ==  34.734402fps.</span><br><span class="line">dy= 640  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     790000us  for 1000 Cycles ==  34.734283fps.</span><br><span class="line">dy= 512  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     790012us  for 1000 Cycles ==  34.734268fps.</span><br><span class="line">dy= 384  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     790005us  for 1000 Cycles ==  34.734280fps.</span><br><span class="line">dy= 256  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     790000us  for 1000 Cycles ==  34.734283fps.</span><br><span class="line">dy= 192  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     790021us  for 1000 Cycles ==  34.734257fps.</span><br><span class="line">dy= 128  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     789984us  for 1000 Cycles ==  34.734303fps.</span><br><span class="line">dy= 64  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     789987us  for 1000 Cycles ==  34.734299fps.</span><br><span class="line">dy= 32  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     789997us  for 1000 Cycles ==  34.734287fps.</span><br><span class="line">dy= 16  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     790017us  for 1000 Cycles ==  34.734264fps.</span><br><span class="line">dy= 8  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     790002us  for 1000 Cycles ==  34.734280fps.</span><br><span class="line">dy= 4  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     789985us  for 1000 Cycles ==  34.734303fps.</span><br><span class="line">dy= 2  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     789997us  for 1000 Cycles ==  34.734287fps.</span><br><span class="line">dy= 1  Clock=100000000  Acquisiton&amp;Copy Duration:         28s     789994us  for 1000 Cycles ==  34.734291fps.</span><br></pre></td></tr></table></figure>

<p><span style="color:red"><strong>The above 2 examples are directly run on <a target="_blank" rel="noopener" href="https://www.vision-components.com/en/products/oem/3d-systems/arm-stereo-vision/">Vision Components’s board</a> without display, for the given cable is of <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/VGA_connector">VGA connector</a>, which is ALREADY outdated for many years</strong></span>. Therefore, in order to show the captured image pairs, in the next section, we’ll have to stream the captured data to a host computer, and display the real-time video pairs.</p>
<h2 id="2-3-Stream-Display-From-Host-Computer"><a href="#2-3-Stream-Display-From-Host-Computer" class="headerlink" title="2.3 Stream&#x2F;Display From Host Computer"></a>2.3 Stream&#x2F;Display From Host Computer</h2><p>Due to <strong>Vision Componenets’ Official documentation <a target="_blank" rel="noopener" href="https://www.vision-components.com/fileadmin/user_upload/DE/service-support/doku/doku_ARM-LINUX/VCLinux_Getting_Started.pdf">VCLinux_Getting_Started.pdf</a></strong>, images captured from camera can be displayed on a remote hosting PC.</p>
<h3 id="2-3-1-Eclipse-Example-Projects-VC-Z-Not-Preferred"><a href="#2-3-1-Eclipse-Example-Projects-VC-Z-Not-Preferred" class="headerlink" title="2.3.1 Eclipse_Example_Projects_VC_Z (Not Preferred)"></a>2.3.1 Eclipse_Example_Projects_VC_Z (Not Preferred)</h3><p><a target="_blank" rel="noopener" href="http://files.vision-components.com/Support/Eclipse_Example_Projects_VC_Z.zip">Eclipse_Example_Projects_VC_Z.zip</a> provides some source code, which displays images captured from camera on the hosting PC’s Eclipse, by adding the camera as a <span style="color:red"><strong>Remote System to Eclipse</strong></span>.<br>Anyway, by using this method, you need to prepare <strong>ALL</strong> the following software and packages in advance.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.eclipse.org/">Eclipse</a></li>
<li><a target="_blank" rel="noopener" href="https://www.eclipse.org/cdt/downloads.php">CDT</a>: install by <strong>Check for Updates</strong> with <strong>p2 software repository: <a target="_blank" rel="noopener" href="http://download.eclipse.org/tools/cdt/releases/9.8">http://download.eclipse.org/tools/cdt/releases/9.8</a></strong></li>
<li><a target="_blank" rel="noopener" href="https://marketplace.eclipse.org/content/direct-remote-c-debugging">Direct Remote C++ Debugging</a>: installed from <a target="_blank" rel="noopener" href="https://marketplace.eclipse.org/">Eclipse Marketplace</a></li>
</ul>
<h3 id="2-3-2-vcimgnetclient-py"><a href="#2-3-2-vcimgnetclient-py" class="headerlink" title="2.3.2 vcimgnetclient.py"></a>2.3.2 <a target="_blank" rel="noopener" href="http://vcimgnetclient.py/">vcimgnetclient.py</a></h3><p>Besides the above method, a much more straightforward method is to adopt python script <a target="_blank" rel="noopener" href="http://files.vision-components.com/Support/vcimgnet_PC_clients.zip">vcimgnetclient.py</a> provided by <a target="_blank" rel="noopener" href="https://www.vision-components.com/en/">Vision Components</a>. <span style="color:red"><strong>However</strong></span>, <a target="_blank" rel="noopener" href="http://files.vision-components.com/Support/vcimgnet_PC_clients.zip">vcimgnetclient.py</a> is <span style="color:red"><strong>ONLY python2</strong></span> compatible, and Vision Components has <strong>NO</strong> plan to provide a <span style="color:red"><strong>python3</strong></span> compatible version of <a target="_blank" rel="noopener" href="http://files.vision-components.com/Support/vcimgnet_PC_clients.zip">vcimgnetclient.py</a>.</p>
<p>Therefore, the <strong>KEY</strong> to use the 2nd method is to make <a target="_blank" rel="noopener" href="http://files.vision-components.com/Support/vcimgnet_PC_clients.zip">vcimgnetclient.py</a> python3 compatible.</p>
<h4 id="2-3-2-1-2to3"><a href="#2-3-2-1-2to3" class="headerlink" title="2.3.2.1 2to3"></a>2.3.2.1 2to3</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">2to3 vcimgnetclient.py</span></span><br><span class="line">RefactoringTool: Skipping optional fixer: buffer</span><br><span class="line">RefactoringTool: Skipping optional fixer: idioms</span><br><span class="line">RefactoringTool: Skipping optional fixer: set_literal</span><br><span class="line">RefactoringTool: Skipping optional fixer: ws_comma</span><br><span class="line">RefactoringTool: Refactored vcimgnetclient.py</span><br><span class="line">--- vcimgnetclient.py	(original)</span><br><span class="line">+++ vcimgnetclient.py	(refactored)</span><br><span class="line">@@ -274,11 +274,11 @@</span><br><span class="line">             if(chk_rgb_true):</span><br><span class="line">                 dy /= 3</span><br><span class="line">                 #img_data_packed = bytearray(chain.from_iterable(izip(mv_img_data[2 * pitch * dy:], mv_img_data[1 * pitch * dy:], mv_img_data[0 * pitch * dy:])))</span><br><span class="line">-                img_data_packed = bytearray(chain.from_iterable(zip(mv_img_data[2 * pitch * dy:], mv_img_data[1 * pitch * dy:], mv_img_data[0 * pitch * dy:])))</span><br><span class="line">+                img_data_packed = bytearray(chain.from_iterable(list(zip(mv_img_data[2 * pitch * dy:], mv_img_data[1 * pitch * dy:], mv_img_data[0 * pitch * dy:]))))</span><br><span class="line">             else:</span><br><span class="line">                 dy /= 1</span><br><span class="line">                 #img_data_packed = bytearray(chain.from_iterable(izip(mv_img_data[0 * pitch * dy:], mv_img_data[0 * pitch * dy:], mv_img_data[0 * pitch * dy:])))</span><br><span class="line">-            img_data_packed = bytearray(chain.from_iterable(zip(mv_img_data[0 * pitch * dy:], mv_img_data[0 * pitch * dy:], mv_img_data[0 * pitch * dy:])))</span><br><span class="line">+            img_data_packed = bytearray(chain.from_iterable(list(zip(mv_img_data[0 * pitch * dy:], mv_img_data[0 * pitch * dy:], mv_img_data[0 * pitch * dy:]))))</span><br><span class="line">             cpb = Gdk.pixbuf_new_from_data(buffer(img_data_packed), Gdk.COLORSPACE_RGB, False, 8, dx, dy, 3*pitch)</span><br><span class="line">             cpb.save(path, &quot;png&quot;)</span><br><span class="line">             </span><br><span class="line">@@ -589,16 +589,16 @@</span><br><span class="line">                         dy /= 3</span><br><span class="line">                         mv_img_data = memoryview(img[&#x27;data&#x27;])</span><br><span class="line">                         #img_data_packed = bytearray(chain.from_iterable(izip(mv_img_data[2 * pitch * dy:], mv_img_data[1 * pitch * dy:], mv_img_data[0 * pitch * dy:])))</span><br><span class="line">-                        img_data_packed = bytearray(chain.from_iterable(zip(mv_img_data[2 * pitch * dy:], mv_img_data[1 * pitch * dy:], mv_img_data[0 * pitch * dy:])))</span><br><span class="line">+                        img_data_packed = bytearray(chain.from_iterable(list(zip(mv_img_data[2 * pitch * dy:], mv_img_data[1 * pitch * dy:], mv_img_data[0 * pitch * dy:]))))</span><br><span class="line">                         self.area.window.draw_rgb_image(gc, 0,0, dx,dy, Gdk.RGB_DITHER_NONE, buffer(img_data_packed),3*pitch,0,0)</span><br><span class="line">                     else:</span><br><span class="line">                         if(&#x27;flscol&#x27;==self.how_select):</span><br><span class="line">                             mv_img_data = memoryview(img[&#x27;data&#x27;]).tolist()</span><br><span class="line">-                            r_data = map(falsecolor_r,mv_img_data[0 * pitch * dy:])</span><br><span class="line">-                            g_data = map(falsecolor_g,mv_img_data[0 * pitch * dy:])</span><br><span class="line">-                            b_data = map(falsecolor_b,mv_img_data[0 * pitch * dy:])</span><br><span class="line">+                            r_data = list(map(falsecolor_r,mv_img_data[0 * pitch * dy:]))</span><br><span class="line">+                            g_data = list(map(falsecolor_g,mv_img_data[0 * pitch * dy:]))</span><br><span class="line">+                            b_data = list(map(falsecolor_b,mv_img_data[0 * pitch * dy:]))</span><br><span class="line">                             #img_data_packed = bytearray(chain.from_iterable(izip(r_data, g_data, b_data)))</span><br><span class="line">-                            img_data_packed = bytearray(chain.from_iterable(zip(r_data, g_data, b_data)))</span><br><span class="line">+                            img_data_packed = bytearray(chain.from_iterable(list(zip(r_data, g_data, b_data))))</span><br><span class="line">                             self.area.window.draw_rgb_image(gc, 0,0, dx,dy, Gdk.RGB_DITHER_NONE, buffer(img_data_packed),3*pitch,0,0)</span><br><span class="line">                         else: #grey</span><br><span class="line">                             self.area.window.draw_gray_image(gc, 0,0, </span><br><span class="line">RefactoringTool: Files that need to be modified:</span><br><span class="line">RefactoringTool: vcimgnetclient.py</span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-2-pygi-convert"><a href="#2-3-2-2-pygi-convert" class="headerlink" title="2.3.2.2 pygi-convert"></a>2.3.2.2 pygi-convert</h4><p>Please refer to <a target="_blank" rel="noopener" href="https://pygobject.readthedocs.io/en/latest/guide/porting.html">General Porting Tips</a></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">./pygi-convert.sh vcimgnetclient.py</span></span><br><span class="line"><span class="meta prompt_">longervision-GT72-6QE%</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-3-Try-Running"><a href="#2-3-2-3-Try-Running" class="headerlink" title="2.3.2.3 Try Running"></a>2.3.2.3 Try Running</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">python vcimgnetclient.py</span> </span><br><span class="line">vcimgnetclient.py:330: PyGTKDeprecationWarning: Using positional arguments with the GObject constructor has been deprecated. Please specify keyword(s) for &quot;type&quot; or use a class specific constructor. See: https://wiki.gnome.org/PyGObject/InitializerDeprecations</span><br><span class="line">  self.window =  Gtk.Window(Gtk.WindowType.TOPLEVEL)</span><br><span class="line">vcimgnetclient.py:628: PyGTKDeprecationWarning: Using positional arguments with the GObject constructor has been deprecated. Please specify keyword(s) for &quot;label&quot; or use a class specific constructor. See: https://wiki.gnome.org/PyGObject/InitializerDeprecations</span><br><span class="line">  mfQuit =  Gtk.MenuItem(&quot;Quit&quot;)</span><br><span class="line">vcimgnetclient.py:629: PyGIDeprecationWarning: Using non GObject arguments for connect_object() is deprecated, use: connect_data(signal, callback, data, connect_flags=GObject.ConnectFlags.SWAPPED)</span><br><span class="line">  mfQuit.connect_object(&quot;activate&quot;, lambda a: Gtk.main_quit(), &quot;mfQuit&quot;)</span><br><span class="line">vcimgnetclient.py:637: PyGTKDeprecationWarning: Using positional arguments with the GObject constructor has been deprecated. Please specify keyword(s) for &quot;label&quot; or use a class specific constructor. See: https://wiki.gnome.org/PyGObject/InitializerDeprecations</span><br><span class="line">  bmf = Gtk.MenuItem(&quot;File&quot;)</span><br><span class="line">vcimgnetclient.py:646: PyGTKDeprecationWarning: Using positional arguments with the GObject constructor has been deprecated. Please specify keyword(s) for &quot;label&quot; or use a class specific constructor. See: https://wiki.gnome.org/PyGObject/InitializerDeprecations</span><br><span class="line">  mhAbout =  Gtk.MenuItem(&quot;About&quot;)</span><br><span class="line">vcimgnetclient.py:654: PyGTKDeprecationWarning: Using positional arguments with the GObject constructor has been deprecated. Please specify keyword(s) for &quot;label&quot; or use a class specific constructor. See: https://wiki.gnome.org/PyGObject/InitializerDeprecations</span><br><span class="line">  bmh = Gtk.MenuItem(&quot;Help&quot;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;vcimgnetclient.py&quot;, line 812, in &lt;module&gt;</span><br><span class="line">    Main()</span><br><span class="line">  File &quot;vcimgnetclient.py&quot;, line 719, in __init__</span><br><span class="line">    Frontend.__init__(self, self.img_access)</span><br><span class="line">  File &quot;vcimgnetclient.py&quot;, line 301, in __init__</span><br><span class="line">    self.winMain = self.WinMain(arg_img_access, self.dialog)</span><br><span class="line">  File &quot;vcimgnetclient.py&quot;, line 341, in __init__</span><br><span class="line">    vbox.pack_start(self.menu_bar, False, False)</span><br><span class="line">TypeError: Gtk.Box.pack_start() takes exactly 5 arguments (4 given)</span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-4"><a href="#2-3-2-4" class="headerlink" title="2.3.2.4"></a>2.3.2.4</h4><p>For <strong>ALL</strong> <code>vbox.pack_start</code>, add one parameter <strong>0</strong> at the end for each case. For instance:<br><code>vbox.pack_start(self.menu_bar, False, False)</code><br>to<br><code>vbox.pack_start(self.menu_bar, False, False, 0)</code></p>
<p><span style="color:red"><strong>Oh my god … There are STILL SO MANY things to do, in order to make <a target="_blank" rel="noopener" href="http://files.vision-components.com/Support/vcimgnet_PC_clients.zip">vcimgnetclient.py</a> <a target="_blank" rel="noopener" href="https://www.python.org/downloads/">Python3</a> compatible.</strong></span> Therefore, I implement my own <strong>vcimgnetclient_qt.py</strong> based on <a target="_blank" rel="noopener" href="https://pypi.org/project/PyQt5/">PyQt5</a>.</p>
<h3 id="2-3-3-Longer-Vision’s-vcimgnetclient-qt-py"><a href="#2-3-3-Longer-Vision’s-vcimgnetclient-qt-py" class="headerlink" title="2.3.3 Longer Vision’s vcimgnetclient_qt.py"></a>2.3.3 <a target="_blank" rel="noopener" href="http://www.longervision.cn/">Longer Vision</a>’s vcimgnetclient_qt.py</h3><h4 id="2-3-3-1-Server"><a href="#2-3-3-1-Server" class="headerlink" title="2.3.3.1 Server"></a>2.3.3.1 Server</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">22:42:22[root@VC-Z] /home/user</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">whoami</span></span></span><br><span class="line">root</span><br><span class="line"></span><br><span class="line">22:42:24[root@VC-Z] /home/user</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">vcimgnetsrv &amp;</span></span><br><span class="line">[1] 896</span><br><span class="line"></span><br><span class="line">22:42:30[root@VC-Z] /home/user</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ps -e | grep vcimgnetsrv</span></span><br><span class="line">  896 pts/0    00:00:00 vcimgnetsrv</span><br><span class="line"></span><br><span class="line">22:42:40[root@VC-Z] /home/user</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">vctp</span></span><br><span class="line">Acquisiton&amp;Copy Duration:          4s      39644us  for 100 Cycles ==  24.754656fps.</span><br><span class="line"></span><br><span class="line">Acquisiton&amp;Copy Duration:          4s      34709us  for 100 Cycles ==  24.784935fps.</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<h4 id="2-3-3-2-Client"><a href="#2-3-3-2-Client" class="headerlink" title="2.3.3.2 Client"></a>2.3.3.2 Client</h4><p>Sorry, I’m <strong>NOT</strong> going to show my code, but the performance can be demonstrated as follows:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/FPGA/lvt_vc_pyqt5_grab.png" alt="LVT VC PyQt5 GUI"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2019/08/25/SBCs/ARM/lvt-h3-armbian/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/25/SBCs/ARM/lvt-h3-armbian/" class="post-title-link" itemprop="url">Install Armbian Debian onto Longer Vision Technology H3 Board</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-08-25 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-25T00:00:00-07:00">2019-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/ARM/" itemprop="url" rel="index"><span itemprop="name">ARM</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Today’s weather is perfect for this party: annual summer alumni party of <a target="_blank" rel="noopener" href="https://en.whu.edu.cn/">Wuhan University</a>.</p>
<table>
<thead>
<tr>
<th align="center">Alumni</th>
<th align="center">Me</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2019/WHUAlumniParty/Alumni.jpg" alt="Alumni"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/festivals/2019/WHUAlumniParty/Me.jpg" alt="Me"></td>
</tr>
</tbody></table>
<p>Today, I’ve got another GOOD news: <span style="color:red"><strong>our ARM Linux board based on <a target="_blank" rel="noopener" href="http://www.allwinnertech.com/index.php?c=product&a=index&id=47">AllWinner H3</a> is demonstrated successful</strong>.</span></p>
<h1 id="1-Hardware"><a href="#1-Hardware" class="headerlink" title="1. Hardware"></a>1. Hardware</h1><h2 id="1-1-Appearance"><a href="#1-1-Appearance" class="headerlink" title="1.1 Appearance"></a>1.1 Appearance</h2><p>Yeah, this is how <span style="color:red"><strong>OUR OWN board</strong></span> looks like:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/LVT/h3/lvt_h3_board.jpg" alt="LongerVisionTech H3 Board"></p>
<h2 id="1-2-Specifications"><a href="#1-2-Specifications" class="headerlink" title="1.2 Specifications"></a>1.2 Specifications</h2><p>From the appearance, it’s <strong>NOT</strong> hard to tell the <strong>specifications</strong>:</p>
<table>
<thead>
<tr>
<th align="center">Device</th>
<th align="center">Version</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">USB</td>
<td align="center">2.0</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">Wired</td>
<td align="center">100Mbps</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">HDMI</td>
<td align="center">1.4</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">Power Adaptor</td>
<td align="center">5V</td>
<td align="center">1</td>
</tr>
</tbody></table>
<h1 id="2-Flash-Armbian-Debian"><a href="#2-Flash-Armbian-Debian" class="headerlink" title="2. Flash Armbian Debian"></a>2. Flash Armbian Debian</h1><h2 id="2-1-Armbian-for-AllWinner-H3"><a href="#2-1-Armbian-for-AllWinner-H3" class="headerlink" title="2.1 Armbian for AllWinner H3"></a>2.1 Armbian for <a target="_blank" rel="noopener" href="http://www.allwinnertech.com/index.php?c=product&a=index&id=47">AllWinner H3</a></h2><p><a target="_blank" rel="noopener" href="https://www.armbian.com/">Armbian</a> provides abundant info for <a target="_blank" rel="noopener" href="http://www.allwinnertech.com/index.php?c=product&a=index&id=47">AllWinner H3</a>:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.armbian.com/Hardware_Allwinner-H3/">Armbian Documentation - Allwinner H3 boards</a></li>
<li><a target="_blank" rel="noopener" href="https://forum.armbian.com/forum/13-allwinner-h2-h3/">Armbian Forum - Allwinner H2 &amp; H3</a></li>
</ul>
<h2 id="2-2-Armbian-for-Orange-Pi-PC"><a href="#2-2-Armbian-for-Orange-Pi-PC" class="headerlink" title="2.2 Armbian for Orange Pi PC"></a>2.2 Armbian for <a target="_blank" rel="noopener" href="https://www.armbian.com/orange-pi-pc/">Orange Pi PC</a></h2><p><span style="color:red"><strong>I’m so lucky today that I tried ONLY ONE TIME</strong></span> and have this <a target="_blank" rel="noopener" href="https://www.armbian.com/orange-pi-pc/">Debian Buster with Armbian Linux for Orange Pi PC</a> successfully installed and run on our board. You just need to download and extract <a target="_blank" rel="noopener" href="https://dl.armbian.com/orangepipc/Debian_buster_next.7z">Armbian_5.91_Orangepipc_Debian_buster_next_4.19.59.img</a> out, and have it installed by <strong>dd</strong>.</p>
<h2 id="2-3-Longer-Vision-Technology-H3-Board-Test"><a href="#2-3-Longer-Vision-Technology-H3-Board-Test" class="headerlink" title="2.3 Longer Vision Technology H3 Board Test"></a>2.3 Longer Vision Technology H3 Board Test</h2><p>It’s <strong>NOT</strong> hard to find out your board’s IP address</p>
<ul>
<li>either from within your router</li>
<li>or boot your board with a monitor and run the command <code>ip -c address</code>.</li>
</ul>
<p>Now, you should be able to <strong>SSH</strong> into your H3 baord directly as follows:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/LVT/h3/armbian_lvt_h3.jpg" alt="Armbian for LVT H3 Board"></p>
<p>After you run</p>
<ul>
<li><code>sudo apt update and sudo apt upgrade</code></li>
<li><code>sudo armbian-config</code></li>
</ul>
<p>you should be able to upgrade your <strong>Debian Buster with Armbian Linux</strong> from <strong>4.19.59-sunxi</strong> to <strong>4.19.62-sunxi</strong>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">longervision-GT72-6QE% ssh longervision@192.168.1.96</span><br><span class="line">longervision@192.168.1.96&#x27;s password: </span><br><span class="line">  ___  ____  _   ____   ____ </span><br><span class="line"> / _ \|  _ \(_) |  _ \ / ___|</span><br><span class="line">| | | | |_) | | | |_) | |    </span><br><span class="line">| |_| |  __/| | |  __/| |___ </span><br><span class="line"> \___/|_|   |_| |_|    \____|</span><br><span class="line">                             </span><br><span class="line">Welcome to Debian Buster with Armbian Linux 4.19.62-sunxi</span><br><span class="line">System load:   0.16 0.12 0.08  	Up time:       6 min		</span><br><span class="line">Memory usage:  18 % of 460MB  	IP:            192.168.1.96</span><br><span class="line">CPU temp:      79°C           	</span><br><span class="line">Usage of /:    2% of 58G    	</span><br><span class="line"></span><br><span class="line">Last login: Sun Aug 25 20:13:29 2019 from 192.168.1.200</span><br></pre></td></tr></table></figure>


<h1 id="3-Issues"><a href="#3-Issues" class="headerlink" title="3. Issues"></a>3. Issues</h1><p>It’s a kind of late. Let me finish this up for now ASAP.</p>
<h2 id="3-1-Hardware-Issues"><a href="#3-1-Hardware-Issues" class="headerlink" title="3.1 Hardware Issues"></a>3.1 Hardware Issues</h2><ul>
<li><strong>ONLY 1</strong> USB 2.0 port is working properly.</li>
<li>It’s <strong>EASY</strong> to reach the critical temperature, as showing:</li>
</ul>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/LVT/h3/lvt_h3_hot.jpg" alt="Critial Temperature Reached"></p>
<h2 id="3-2-Features-Expected"><a href="#3-2-Features-Expected" class="headerlink" title="3.2 Features Expected"></a>3.2 Features Expected</h2><p>We really need a better low-cost chip to provide the support for:</p>
<ul>
<li>USB 3.0</li>
<li>GigE</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2019/08/23/MachineVision/ARMLinux/jevois/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/23/MachineVision/ARMLinux/jevois/" class="post-title-link" itemprop="url">JeVois Smart Machine Vision Camera</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-08-23 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-23T00:00:00-07:00">2019-08-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Vision/" itemprop="url" rel="index"><span itemprop="name">Machine Vision</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Vision/ARMLinux/" itemprop="url" rel="index"><span itemprop="name">ARMLinux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <div style="font-size:5rem;width:100%;text-align:center;">
    <span class="emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span>
</div>

<p><a target="_blank" rel="noopener" href="http://jevois.org/">JeVois</a> is an ARM Linux based camera module, delivered by <a target="_blank" rel="noopener" href="https://www.jevoisinc.com/">JeVois Inc.</a>. So far, this is the <strong>ONLY ARM Linux based camera module</strong> that I’m recommending, for its well-designed community as well as <a target="_blank" rel="noopener" href="https://github.com/jevois">plenty of source code on Github</a>.</p>
<h1 id="1-Specifications"><a href="#1-Specifications" class="headerlink" title="1. Specifications"></a>1. Specifications</h1><p>Clearly:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jevoisinc.com/pages/hardware">JeVois Hardware Page</a>: JeVois is based on the <strong>Made In China</strong> ARM Linux chip <a target="_blank" rel="noopener" href="http://www.allwinnertech.com/index.php?c=product&a=index&id=23">Allwinners A33</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jevoisinc.com/pages/software">JeVois Software Page</a>: <a target="_blank" rel="noopener" href="http://jevois.org/">JeVois</a> runs a full Linux operating system.</li>
</ul>
<h1 id="2-Getting-Started-with-Jevois"><a href="#2-Getting-Started-with-Jevois" class="headerlink" title="2. Getting Started with Jevois"></a>2. Getting Started with Jevois</h1><p>The <strong>BEST</strong> place to start with <a target="_blank" rel="noopener" href="http://jevois.org/">JeVois</a> is the following Youtube video:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pfLlk30uF6Y?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>

<p>I’m <strong>NOT</strong> going to repeat this step-by-step setup but move forward to the demonstration step directly.</p>
<h1 id="3-Connect-JeVois-with-Host"><a href="#3-Connect-JeVois-with-Host" class="headerlink" title="3. Connect JeVois with Host"></a>3. Connect <a target="_blank" rel="noopener" href="http://jevois.org/">JeVois</a> with Host</h1><p>After having flashed <a target="_blank" rel="noopener" href="http://jevois.org/">JeVois</a>’s TF card with the <a target="_blank" rel="noopener" href="http://jevois.org/start/software.html">LATEST Linux image</a>, we connect <a target="_blank" rel="noopener" href="http://jevois.org/">JeVois</a> camera module into the laptop. This TF card will <strong>NOT</strong> mount onto the computer as a device automatically, but can be detected by <strong>lsusb</strong> as follows:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">lsusb</span></span><br><span class="line">......</span><br><span class="line">Bus 001 Device 016: ID 1d6b:0102 Linux Foundation EEM Gadget</span><br><span class="line">......</span><br></pre></td></tr></table></figure>


<h1 id="4-Simple-Demonstration"><a href="#4-Simple-Demonstration" class="headerlink" title="4. Simple Demonstration"></a>4. Simple Demonstration</h1><h2 id="4-1-Guvcview"><a href="#4-1-Guvcview" class="headerlink" title="4.1 Guvcview"></a>4.1 Guvcview</h2><table>
<thead>
<tr>
<th align="center">Get Started</th>
<th align="center">Image Control Default Settings</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/01_jevois-get-started.jpg" alt="Get Started"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/02_jevois-image-control.jpg" alt="Image Control Default Settings"></td>
</tr>
<tr>
<td align="center">Video Control Settings 640x480</td>
<td align="center">Video Control Settings 640x360</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/03_jevois-video-control-640x480.jpg" alt="Video Control Settings 640x480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/04_jevois-video-control-640x360.jpg" alt="Video Control Settings 640x360"></td>
</tr>
</tbody></table>
<h2 id="4-2-JeVois-Inventor"><a href="#4-2-JeVois-Inventor" class="headerlink" title="4.2 JeVois Inventor"></a>4.2 JeVois Inventor</h2><h3 id="4-2-1-JeVois-Tutorial"><a href="#4-2-1-JeVois-Tutorial" class="headerlink" title="4.2.1 JeVois Tutorial"></a>4.2.1 JeVois Tutorial</h3><p>Again, a Youtube video is suggested to follow for the demonstration:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/XVMk8lRvm8k?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>

<h3 id="4-2-2-My-Test"><a href="#4-2-2-My-Test" class="headerlink" title="4.2.2 My Test"></a>4.2.2 My Test</h3><p>You can either download <strong>JeVois Inventor</strong> directly from the <a target="_blank" rel="noopener" href="http://jevois.org/start/software.html">Official Website</a>, or like me, build <a target="_blank" rel="noopener" href="https://github.com/jevois/jevois-inventor">JeVois Inventor source code</a> from scratch, based on my own <strong>QT</strong>, etc. Anyway, after <a target="_blank" rel="noopener" href="http://jevois.org/start/">JeVois Inventor</a> has been successfully installed, it’s the time for us to test it out.</p>
<table>
<thead>
<tr>
<th align="center">JeVois Inventor Info</th>
<th align="center">JeVois Inventor Parameters</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/05_jevois_inventor-info.jpg" alt="JeVois Inventor Info"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/06_jevois_inventor-parameters.jpg" alt="JeVois Inventor Parameters"></td>
</tr>
<tr>
<td align="center">JeVois Inventor Console</td>
<td align="center">JeVois Inventor Camera</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/07_jevois_inventor-console.jpg" alt="JeVois Inventor Console"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/08_jevois_inventor-camera.jpg" alt="JeVois Inventor Camera"></td>
</tr>
<tr>
<td align="center">JeVois Inventor Config</td>
<td align="center">JeVois Inventor Code C++</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/09_jevois_inventor-config.jpg" alt="JeVois Inventor Config"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/10_jevois_inventor-code-c++.jpg" alt="JeVois Inventor Code C++"></td>
</tr>
<tr>
<td align="center">JeVois Inventor Console</td>
<td align="center">JeVois Inventor Camera</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/11_jevois_inventor-code-python-dnn.jpg" alt="JeVois Inventor Code Python DNN"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/12_jevois_inventor-system.jpg" alt="JeVois Inventor System"></td>
</tr>
<tr>
<td align="center">JeVois Inventor Console</td>
<td align="center">JeVois Inventor Camera</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/13_jevois_inventor-system-export-sdcard.jpg" alt="JeVois Inventor System Export SD Card"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/ARMLinux/jevois/14_jevois_inventor-system-export-sdcard-content.jpg" alt="JeVois Inventor System Export SD Card Content"></td>
</tr>
</tbody></table>
<p><span style="color:red"><strong>Being quite busy these days. Seriously, ARM board based on <a target="_blank" rel="noopener" href="http://www.allwinnertech.com/index.php?c=product&a=index&id=47">AllWinner H3</a> from my company <a target="_blank" rel="noopener" href="http://www.longervision.cn/">Longer Vision</a> is manufactured, and under test. Let’s have some fun.</strong></span></p>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span>
</div>

<p><span style="color:red"><strong>In the end, better to listen to some music while blogging.</strong></span></p>
<iframe src="https://open.spotify.com/embed/track/1mKXFLRA179hdOWQBwUk9e" width="large" height="undefined" frameborder="0" allowtransparency="allowtransparency" allow="encrypted-media"></iframe>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2019/08/22/MachineVision/MCU/exp32cam/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/22/MachineVision/MCU/exp32cam/" class="post-title-link" itemprop="url">ESP32-Cam</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-08-22 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-22T00:00:00-07:00">2019-08-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Vision/" itemprop="url" rel="index"><span itemprop="name">Machine Vision</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Vision/MCU/" itemprop="url" rel="index"><span itemprop="name">MCU</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <iframe width="560" height="315" src="https://www.youtube.com/embed/YQHsXMglC9A?rel=0&amp;showinfo=0" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>



<h1 id="0-Preface"><a href="#0-Preface" class="headerlink" title="0. Preface"></a>0. Preface</h1><p>My <a target="_blank" rel="noopener" href="https://makeradvisor.com/esp32-cam-ov2640-camera/">ESP32-Cam</a> has finally arrived today. The brand of <a target="_blank" rel="noopener" href="https://www.ai-thinker.com/">AI Thinker</a> has been demonstrated to be reliable.</p>
<p>In fact, I strictly followed <a target="_blank" rel="noopener" href="https://randomnerdtutorials.com/">randomnerdtutorials</a>‘s blog <a target="_blank" rel="noopener" href="https://randomnerdtutorials.com/esp32-cam-video-streaming-face-recognition-arduino-ide/">ESP32-CAM Video Streaming and Face Recognition with Arduino IDE</a> to demonstrate this <strong>low-cost</strong> video surveillance camera. So, in this blog, I <strong>ONLY</strong> enumerate some <strong>KEY POINTS</strong> that should be emphasized.</p>
<h1 id="1-Connection"><a href="#1-Connection" class="headerlink" title="1. Connection"></a>1. Connection</h1><h2 id="1-1-Schematic"><a href="#1-1-Schematic" class="headerlink" title="1.1 Schematic"></a>1.1 Schematic</h2><p><a target="_blank" rel="noopener" href="https://makeradvisor.com/esp32-cam-ov2640-camera/">ESP32-Cam</a> can be connected to my laptop exactly the same as shown (cited directly from <a target="_blank" rel="noopener" href="https://randomnerdtutorials.com/esp32-cam-video-streaming-face-recognition-arduino-ide/">ESP32-CAM Video Streaming and Face Recognition with Arduino IDE</a>).</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/MCU/ESP32-CAM-wiring-FTDI1.png" alt="ESP32-Cam Wiring FTDI 1"></p>
<h2 id="1-2-Real-Connection"><a href="#1-2-Real-Connection" class="headerlink" title="1.2 Real Connection"></a>1.2 Real Connection</h2><p>The real connection looks as:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/MCU/ESP32-CAM-wiring-FTDI.jpg" alt="ESP32-Cam Wiring FTDI"></p>
<h2 id="1-3-lsub"><a href="#1-3-lsub" class="headerlink" title="1.3 lsub"></a>1.3 lsub</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">longervision-GT72-6QE% </span><span class="language-bash">lsusb</span></span><br><span class="line">......</span><br><span class="line">Bus 001 Device 010: ID 0403:6001 Future Technology Devices International, Ltd FT232 Serial (UART) IC</span><br><span class="line">......</span><br></pre></td></tr></table></figure>



<h1 id="2-Key-Points-on-Flashing-ESP32-Cam"><a href="#2-Key-Points-on-Flashing-ESP32-Cam" class="headerlink" title="2. Key Points on Flashing ESP32-Cam"></a>2. Key Points on Flashing <a target="_blank" rel="noopener" href="https://makeradvisor.com/esp32-cam-ov2640-camera/">ESP32-Cam</a></h1><h2 id="2-1-Code-Modification"><a href="#2-1-Code-Modification" class="headerlink" title="2.1 Code Modification"></a>2.1 Code Modification</h2><p>Example code <strong>CameraWebServer</strong> should be trivially modified as:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Select camera model</span></span><br><span class="line"><span class="comment">//#define CAMERA_MODEL_WROVER_KIT</span></span><br><span class="line"><span class="comment">//#define CAMERA_MODEL_ESP_EYE</span></span><br><span class="line"><span class="comment">//#define CAMERA_MODEL_M5STACK_PSRAM</span></span><br><span class="line"><span class="comment">//#define CAMERA_MODEL_M5STACK_WIDE</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CAMERA_MODEL_AI_THINKER</span></span><br></pre></td></tr></table></figure>


<h2 id="2-2-Verify-Compile-and-Upload"><a href="#2-2-Verify-Compile-and-Upload" class="headerlink" title="2.2 Verify&#x2F;Compile and Upload"></a>2.2 Verify&#x2F;Compile and Upload</h2><h3 id="2-2-1-Verify-Compile"><a href="#2-2-1-Verify-Compile" class="headerlink" title="2.2.1 Verify&#x2F;Compile"></a>2.2.1 Verify&#x2F;Compile</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Sketch uses 2241942 bytes (71%) of program storage space. Maximum is 3145728 bytes.</span><br><span class="line">Global variables use 52696 bytes (16%) of dynamic memory, leaving 274984 bytes for local variables. Maximum is 327680 bytes.</span><br></pre></td></tr></table></figure>

<h3 id="2-2-2-Upload"><a href="#2-2-2-Upload" class="headerlink" title="2.2.2 Upload"></a>2.2.2 Upload</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">esptool.py v2.6</span><br><span class="line">Serial port /dev/ttyUSB0</span><br><span class="line">Connecting....</span><br><span class="line">Chip is ESP32D0WDQ5 (revision 1)</span><br><span class="line">Features: WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None</span><br><span class="line">MAC: c4:4f:33:13:32:7d</span><br><span class="line">Uploading stub...</span><br><span class="line">Running stub...</span><br><span class="line">Stub running...</span><br><span class="line">Configuring flash size...</span><br><span class="line">Auto-detected Flash size: 4MB</span><br><span class="line">Compressed 8192 bytes to 47...</span><br><span class="line"></span><br><span class="line">Writing at 0x0000e000... (100 %)</span><br><span class="line">Wrote 8192 bytes (47 compressed) at 0x0000e000 in 0.0 seconds (effective 4102.7 kbit/s)...</span><br><span class="line">Hash of data verified.</span><br><span class="line">Compressed 16832 bytes to 10888...</span><br><span class="line"></span><br><span class="line">Writing at 0x00001000... (100 %)</span><br><span class="line">Wrote 16832 bytes (10888 compressed) at 0x00001000 in 1.0 seconds (effective 138.0 kbit/s)...</span><br><span class="line">Hash of data verified.</span><br><span class="line">Compressed 2242064 bytes to 1795627...</span><br><span class="line"></span><br><span class="line">Writing at 0x00010000... (0 %)</span><br><span class="line">Writing at 0x00014000... (1 %)</span><br><span class="line">Writing at 0x00018000... (2 %)</span><br><span class="line">Writing at 0x0001c000... (3 %)</span><br><span class="line">Writing at 0x00020000... (4 %)</span><br><span class="line">Writing at 0x00024000... (5 %)</span><br><span class="line">Writing at 0x00028000... (6 %)</span><br><span class="line">Writing at 0x0002c000... (7 %)</span><br><span class="line">Writing at 0x00030000... (8 %)</span><br><span class="line">Writing at 0x00034000... (9 %)</span><br><span class="line">Writing at 0x00038000... (10 %)</span><br><span class="line">Writing at 0x0003c000... (10 %)</span><br><span class="line">Writing at 0x00040000... (11 %)</span><br><span class="line">Writing at 0x00044000... (12 %)</span><br><span class="line">Writing at 0x00048000... (13 %)</span><br><span class="line">Writing at 0x0004c000... (14 %)</span><br><span class="line">Writing at 0x00050000... (15 %)</span><br><span class="line">Writing at 0x00054000... (16 %)</span><br><span class="line">Writing at 0x00058000... (17 %)</span><br><span class="line">Writing at 0x0005c000... (18 %)</span><br><span class="line">Writing at 0x00060000... (19 %)</span><br><span class="line">Writing at 0x00064000... (20 %)</span><br><span class="line">Writing at 0x00068000... (20 %)</span><br><span class="line">Writing at 0x0006c000... (21 %)</span><br><span class="line">Writing at 0x00070000... (22 %)</span><br><span class="line">Writing at 0x00074000... (23 %)</span><br><span class="line">Writing at 0x00078000... (24 %)</span><br><span class="line">Writing at 0x0007c000... (25 %)</span><br><span class="line">Writing at 0x00080000... (26 %)</span><br><span class="line">Writing at 0x00084000... (27 %)</span><br><span class="line">Writing at 0x00088000... (28 %)</span><br><span class="line">Writing at 0x0008c000... (29 %)</span><br><span class="line">Writing at 0x00090000... (30 %)</span><br><span class="line">Writing at 0x00094000... (30 %)</span><br><span class="line">Writing at 0x00098000... (31 %)</span><br><span class="line">Writing at 0x0009c000... (32 %)</span><br><span class="line">Writing at 0x000a0000... (33 %)</span><br><span class="line">Writing at 0x000a4000... (34 %)</span><br><span class="line">Writing at 0x000a8000... (35 %)</span><br><span class="line">Writing at 0x000ac000... (36 %)</span><br><span class="line">Writing at 0x000b0000... (37 %)</span><br><span class="line">Writing at 0x000b4000... (38 %)</span><br><span class="line">Writing at 0x000b8000... (39 %)</span><br><span class="line">Writing at 0x000bc000... (40 %)</span><br><span class="line">Writing at 0x000c0000... (40 %)</span><br><span class="line">Writing at 0x000c4000... (41 %)</span><br><span class="line">Writing at 0x000c8000... (42 %)</span><br><span class="line">Writing at 0x000cc000... (43 %)</span><br><span class="line">Writing at 0x000d0000... (44 %)</span><br><span class="line">Writing at 0x000d4000... (45 %)</span><br><span class="line">Writing at 0x000d8000... (46 %)</span><br><span class="line">Writing at 0x000dc000... (47 %)</span><br><span class="line">Writing at 0x000e0000... (48 %)</span><br><span class="line">Writing at 0x000e4000... (49 %)</span><br><span class="line">Writing at 0x000e8000... (50 %)</span><br><span class="line">Writing at 0x000ec000... (50 %)</span><br><span class="line">Writing at 0x000f0000... (51 %)</span><br><span class="line">Writing at 0x000f4000... (52 %)</span><br><span class="line">Writing at 0x000f8000... (53 %)</span><br><span class="line">Writing at 0x000fc000... (54 %)</span><br><span class="line">Writing at 0x00100000... (55 %)</span><br><span class="line">Writing at 0x00104000... (56 %)</span><br><span class="line">Writing at 0x00108000... (57 %)</span><br><span class="line">Writing at 0x0010c000... (58 %)</span><br><span class="line">Writing at 0x00110000... (59 %)</span><br><span class="line">Writing at 0x00114000... (60 %)</span><br><span class="line">Writing at 0x00118000... (60 %)</span><br><span class="line">Writing at 0x0011c000... (61 %)</span><br><span class="line">Writing at 0x00120000... (62 %)</span><br><span class="line">Writing at 0x00124000... (63 %)</span><br><span class="line">Writing at 0x00128000... (64 %)</span><br><span class="line">Writing at 0x0012c000... (65 %)</span><br><span class="line">Writing at 0x00130000... (66 %)</span><br><span class="line">Writing at 0x00134000... (67 %)</span><br><span class="line">Writing at 0x00138000... (68 %)</span><br><span class="line">Writing at 0x0013c000... (69 %)</span><br><span class="line">Writing at 0x00140000... (70 %)</span><br><span class="line">Writing at 0x00144000... (70 %)</span><br><span class="line">Writing at 0x00148000... (71 %)</span><br><span class="line">Writing at 0x0014c000... (72 %)</span><br><span class="line">Writing at 0x00150000... (73 %)</span><br><span class="line">Writing at 0x00154000... (74 %)</span><br><span class="line">Writing at 0x00158000... (75 %)</span><br><span class="line">Writing at 0x0015c000... (76 %)</span><br><span class="line">Writing at 0x00160000... (77 %)</span><br><span class="line">Writing at 0x00164000... (78 %)</span><br><span class="line">Writing at 0x00168000... (79 %)</span><br><span class="line">Writing at 0x0016c000... (80 %)</span><br><span class="line">Writing at 0x00170000... (80 %)</span><br><span class="line">Writing at 0x00174000... (81 %)</span><br><span class="line">Writing at 0x00178000... (82 %)</span><br><span class="line">Writing at 0x0017c000... (83 %)</span><br><span class="line">Writing at 0x00180000... (84 %)</span><br><span class="line">Writing at 0x00184000... (85 %)</span><br><span class="line">Writing at 0x00188000... (86 %)</span><br><span class="line">Writing at 0x0018c000... (87 %)</span><br><span class="line">Writing at 0x00190000... (88 %)</span><br><span class="line">Writing at 0x00194000... (89 %)</span><br><span class="line">Writing at 0x00198000... (90 %)</span><br><span class="line">Writing at 0x0019c000... (90 %)</span><br><span class="line">Writing at 0x001a0000... (91 %)</span><br><span class="line">Writing at 0x001a4000... (92 %)</span><br><span class="line">Writing at 0x001a8000... (93 %)</span><br><span class="line">Writing at 0x001ac000... (94 %)</span><br><span class="line">Writing at 0x001b0000... (95 %)</span><br><span class="line">Writing at 0x001b4000... (96 %)</span><br><span class="line">Writing at 0x001b8000... (97 %)</span><br><span class="line">Writing at 0x001bc000... (98 %)</span><br><span class="line">Writing at 0x001c0000... (99 %)</span><br><span class="line">Writing at 0x001c4000... (100 %)</span><br><span class="line">Wrote 2242064 bytes (1795627 compressed) at 0x00010000 in 159.6 seconds (effective 112.4 kbit/s)...</span><br><span class="line">Hash of data verified.</span><br><span class="line">Compressed 3072 bytes to 134...</span><br><span class="line"></span><br><span class="line">Writing at 0x00008000... (100 %)</span><br><span class="line">Wrote 3072 bytes (134 compressed) at 0x00008000 in 0.0 seconds (effective 1534.2 kbit/s)...</span><br><span class="line">Hash of data verified.</span><br><span class="line"></span><br><span class="line">Leaving...</span><br><span class="line">Hard resetting via RTS pin...</span><br></pre></td></tr></table></figure>


<h2 id="2-3-Disconnect-GPIO-0-from-GND"><a href="#2-3-Disconnect-GPIO-0-from-GND" class="headerlink" title="2.3 Disconnect GPIO 0 from GND"></a>2.3 Disconnect GPIO 0 from GND</h2><p>Before testing the code, be sure to <span style="color:red"><strong>disconnect GPIO 0 from GND</strong></span>.</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/MCU/ESP32-CAM-Disconnect.jpg" alt="ESP32-Cam Disconnect"></p>
<h2 id="2-4-RESET-ESP32-Cam-Board"><a href="#2-4-RESET-ESP32-Cam-Board" class="headerlink" title="2.4 RESET ESP32-Cam Board"></a>2.4 RESET ESP32-Cam Board</h2><p>It’s <strong>VERY</strong> important that you <span style="color:red"><strong>open the Serial Monitor dialog to monitor the serial port</strong></span>. You will see the following outputs after <strong>resetting <a target="_blank" rel="noopener" href="https://makeradvisor.com/esp32-cam-ov2640-camera/">ESP32-Cam</a> board</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ets Jun  8 2016 00:22:57</span><br><span class="line"></span><br><span class="line">rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)</span><br><span class="line">configsip: 0, SPIWP:0xee</span><br><span class="line">clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00</span><br><span class="line">mode:DIO, clock div:1</span><br><span class="line">load:0x3fff0018,len:4</span><br><span class="line">load:0x3fff001c,len:1100</span><br><span class="line">load:0x40078000,len:9232</span><br><span class="line">load:0x40080400,len:6400</span><br><span class="line">entry 0x400806a8</span><br><span class="line"></span><br><span class="line">[E][sccb.c:154] SCCB_Write(): SCCB_Write Failed addr:0x30, reg:0xff, data:0x01, ret:-1</span><br><span class="line">.........</span><br><span class="line">WiFi connected</span><br><span class="line">Starting web server on port: &#x27;80&#x27;</span><br><span class="line">Starting stream server on port: &#x27;81&#x27;</span><br><span class="line">Camera Ready! Use &#x27;http://192.168.1.94&#x27; to connect</span><br></pre></td></tr></table></figure>


<h2 id="2-5-Video-Streaming"><a href="#2-5-Video-Streaming" class="headerlink" title="2.5 Video Streaming"></a>2.5 Video Streaming</h2><p>By visiting the allocated IP address within any web browser, you’ll see the following picture:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/MCU/ESP32-CAM-OV2460.jpg" alt="ESP32-Cam OV2460"></p>
<p>And you’ll notice the streaming info from serial port:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">ets Jun  8 2016 00:22:57</span><br><span class="line"></span><br><span class="line">rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)</span><br><span class="line">configsip: 0, SPIWP:0xee</span><br><span class="line">clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00</span><br><span class="line">mode:DIO, clock div:1</span><br><span class="line">load:0x3fff0018,len:4</span><br><span class="line">load:0x3fff001c,len:1100</span><br><span class="line">load:0x40078000,len:9232</span><br><span class="line">load:0x40080400,len:6400</span><br><span class="line">entry 0x400806a8</span><br><span class="line"></span><br><span class="line">[E][sccb.c:154] SCCB_Write(): SCCB_Write Failed addr:0x30, reg:0xff, data:0x01, ret:-1</span><br><span class="line">.........</span><br><span class="line">WiFi connected</span><br><span class="line">Starting web server on port: &#x27;80&#x27;</span><br><span class="line">Starting stream server on port: &#x27;81&#x27;</span><br><span class="line">Camera Ready! Use &#x27;http://192.168.1.94&#x27; to connect</span><br><span class="line">MJPG: 5297B 63ms (15.9fps), AVG: 63ms (15.9fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5301B 40ms (25.0fps), AVG: 51ms (19.6fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5460B 39ms (25.6fps), AVG: 47ms (21.3fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5301B 40ms (25.0fps), AVG: 45ms (22.2fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5460B 43ms (23.3fps), AVG: 45ms (22.2fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5374B 41ms (24.4fps), AVG: 44ms (22.7fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5460B 37ms (27.0fps), AVG: 43ms (23.3fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5464B 43ms (23.3fps), AVG: 43ms (23.3fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5460B 37ms (27.0fps), AVG: 42ms (23.8fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5464B 46ms (21.7fps), AVG: 42ms (23.8fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5460B 30ms (33.3fps), AVG: 41ms (24.4fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5464B 43ms (23.3fps), AVG: 41ms (24.4fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5460B 39ms (25.6fps), AVG: 41ms (24.4fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5464B 37ms (27.0fps), AVG: 41ms (24.4fps), 0+0+0+0=0 0</span><br><span class="line">MJPG: 5460B 37ms (27.0fps), AVG: 41ms (24.4fps), 0+0+0+0=0 0</span><br><span class="line">......</span><br></pre></td></tr></table></figure>



<h1 id="3-Multiple-Camera-Streaming-with-Static-IPs"><a href="#3-Multiple-Camera-Streaming-with-Static-IPs" class="headerlink" title="3. Multiple Camera Streaming with Static IPs"></a>3. Multiple Camera Streaming with Static IPs</h1><p>I’m <strong>NOT</strong> going to talk about how to set up static IPs for IP cameras (well, yes, clearly, <a target="_blank" rel="noopener" href="https://makeradvisor.com/esp32-cam-ov2640-camera/">ESP32-Cam</a> can be looked on as a low-cost video surveillance IP camera for sure). We <strong>ONLY</strong> demonstrate 4 <a target="_blank" rel="noopener" href="https://makeradvisor.com/esp32-cam-ov2640-camera/">ESP32-Cams</a> are under streaming simultaneously with 4 statically allocated IP addresses.</p>
<p>We show the capturing effects <strong>FIRST</strong>:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/MCU/4-esp32-cams-capturing.jpg" alt="Four ESP32-Cams Capturing"></p>
<p>Then, we show how the cables are connected by using a power bank and an extra bread board. Here, <strong>FTDI</strong> is just used as a power adaptor to provide <strong>5V</strong> voltage.</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/MCU/4-esp32-cams-power_01.jpg" alt="Four ESP32-Cams Power On"></p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/MCU/4-esp32-cams_02.jpg" alt="Four ESP32-Cams Cable Connection"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2019/08/15/Personal/mourn-for-classmate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/15/Personal/mourn-for-classmate/" class="post-title-link" itemprop="url">Mourn For Classmate</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-08-15 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-15T00:00:00-07:00">2019-08-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Personal/" itemprop="url" rel="index"><span itemprop="name">Personal</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
        <div id="aplayer-gazGMJum" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;">
            <pre class="aplayer-lrc-content"></pre>
        </div>
        <script>
          var ap = new APlayer({
            element: document.getElementById("aplayer-gazGMJum"),
            narrow: false,
            autoplay: true,
            showlrc: false,
            music: {
              title: "鸿雁",
              author: "nobody",
              url: "http://www.longervision.com/musics/mine/HongYan.m4a",
              pic: "https://raw.githubusercontent.com/LongerVision/Resource/master/music/mine/HongYan.jpg",
              lrc: ""
            }
          });
          window.aplayers || (window.aplayers = []);
          window.aplayers.push(ap);
        </script>


<p>噩耗传来，今晨，高中同学逝世，年仅43岁。今天是2019年8月15日，是日军投降的日子。同学经历4个月急性胰腺炎的煎熬，耗光所有家财，于北京时间早上9时11分不治。这两个神奇的时间…</p>
<p>难忘高中一起踢球、打麻将的日子。在球场上，他是跑不死的。而且身体肌肉比较多，所以才有两个外号：“施瓦辛格”、“周扎实”。</p>
<p>我的印象，他应该是我们高中班第一位走的同学。人生无常，想当年，他也是我们班第一位获得保送的同学吧？老天爷就是这样不公平。1995年，湖北省是高考前先保送，但是保送了之后还要参加高考，保送者确定必须过一本线才能进入所保送的大学就读。他心态好的出奇，保送东北大学之后就不再学习了，每天看金庸小说。高考竟然考到652？不太记得分数。总之，是一个在湖北省稳稳上清华的分数。经历了本硕连读，东大阿派的锤炼，他成功完成香港中文大学博士学位，并令人羡慕的进入珠海某大学就职，面朝大海、春暖花开的海景房，曾经令我幻想羡慕不已…可惜至今，我也没有机会去看过。</p>
<p>他的婚礼是在武汉办的，我是亲自参加的，他娶了一位非常漂亮的嫂子。他在婚礼上非常紧张，大概是兴奋的？夫妻对拜的时候，竟然说出“感谢娶我为妻”！这个证据确凿，每每想起，忍俊不止。</p>
<p>我在英国的时候，他给我介绍了一个很漂亮的女朋友。可惜缘分没有让我们走到一起。我还是通过这位已经是两个孩子的妈妈，获悉同学的病情，并立即通知高中同班同学筹款。只可惜还是…听到病危病重，真的是不敢相信自己的耳朵！确定水滴筹的照片就是他本人，已经瘦得不成人形！获悉同学病情的前三天，每天早上起床，眼睛湿润都不自知…前几年我到珠海，我们几位高中同学还吃海鲜聚会，没有见到他。没想到那次错过，就错过了一世…</p>
<p>这几年，见得太多了！这个社会，好像真的是：越是好人，越走得早？老天爷啊…“逢庙必拜、遇观必香”…人到中年，真的开始有点相信神佛…根本还没来得及小小欢庆几小时前首次带父母到美国小游，就…明天去列治文拜佛祈福。</p>
<p>我很喜欢卡拉OK，一直想要在hexo blog 加入自己原唱作为背景音乐（这也算是创新吧？），今天这篇不算是祷文的blog，纪念我同学，也算督促我完成了这个小小任务。回到家、刚刚开始check wechat，就看到这个噩耗，真的是… 这是我第一次发全民K歌，中间有跑调，我觉得没有必要修改任何！因为这就是我自己原唱，在听到消息之后，也着实情绪不能控制…</p>
<p>人生的意义在什么？“且行且珍惜”！珍惜身边拥有的一切吧！想起去年某台姐对我说：“看到你一家三口团聚，就感觉很幸福”。是啊…台姐本人从小姥姥带大、10岁出头一个人给姥姥送葬；而周伯伯白发人送黑发人，这…人，真的不能太“不知足”！我思想还没成熟呢！这么大了，怎么长的？太幼稚！！种地，有什么不好？？</p>
<p>不知不觉，温哥华当地时间2019年8月15日凌晨3点20分。愿你在天堂没有痛苦…</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2019/08/07/SBCs/RISC-V/Widora-AIRV-K210-AI-Kendryte/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/07/SBCs/RISC-V/Widora-AIRV-K210-AI-Kendryte/" class="post-title-link" itemprop="url">Widora AIRV/K210 Board with ESP8266/ESP8285 Espressif Wifi and Kendryte K210 AI</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-08-07 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-07T00:00:00-07:00">2019-08-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-14 15:09:34" itemprop="dateModified" datetime="2023-09-14T15:09:34-07:00">2023-09-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/Risc-V/" itemprop="url" rel="index"><span itemprop="name">Risc-V</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Having been keeping an eye on <a target="_blank" rel="noopener" href="https://www.widora.io/">Widora</a> and <a target="_blank" rel="noopener" href="https://www.espressif.com/">Espressif</a> for quite a bit. I finally decided to test out <a target="_blank" rel="noopener" href="https://www.widora.io/">Widora</a>‘s development board <a target="_blank" rel="noopener" href="https://dev.widora.io/zh/airv">AIRV</a>.</p>
<h1 id="1-Background-Knowledge"><a href="#1-Background-Knowledge" class="headerlink" title="1. Background Knowledge"></a>1. Background Knowledge</h1><h2 id="1-1-Espressif"><a href="#1-1-Espressif" class="headerlink" title="1.1 Espressif"></a>1.1 Espressif</h2><p><a target="_blank" rel="noopener" href="https://www.espressif.com/">Espressif</a> is based in Shanghai, China, focusing on Wifi&#x2F;Bluetooth chips, now have two main Wifi modules:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.espressif.com/en/products/hardware/esp32/overview">ESP32</a>: Wifi with Bluetooth</li>
<li><a target="_blank" rel="noopener" href="https://www.espressif.com/en/products/hardware/esp8266ex/overview">ESP8266&#x2F;ESP8285</a>: Wifi <strong>ONLY</strong></li>
</ul>
<h2 id="1-2-Widora"><a href="#1-2-Widora" class="headerlink" title="1.2 Widora"></a>1.2 Widora</h2><p><a target="_blank" rel="noopener" href="https://www.widora.io/">Widora</a> is headquartered in Beijing, China, providing development boards using <a target="_blank" rel="noopener" href="https://www.espressif.com/">Espressif</a> Wifi&#x2F;Bluetooth chips.</p>
<h2 id="1-3-Kendryte"><a href="#1-3-Kendryte" class="headerlink" title="1.3 Kendryte"></a>1.3 Kendryte</h2><p><strong>NEVER</strong> heard of <a target="_blank" rel="noopener" href="https://kendryte.com/">Kendryte</a> before. It seems <a target="_blank" rel="noopener" href="https://kendryte.com/">Kendryte</a> develops some AI based on <a target="_blank" rel="noopener" href="https://riscv.org/">Risc-V</a> chip architecture? That seems to be a good concept…</p>
<h2 id="1-4-HiFive"><a href="#1-4-HiFive" class="headerlink" title="1.4 HiFive"></a>1.4 HiFive</h2><p>As for <a target="_blank" rel="noopener" href="https://riscv.org/">Risc-V</a>, <a target="_blank" rel="noopener" href="https://www.sifive.com/boards/hifive-unleashed">HiFive</a> developed by <a target="_blank" rel="noopener" href="https://www.sifive.com/">SiFive</a> has to be mentioned in any case.</p>
<p>For me, a <strong>NOBODY</strong> has <strong>NOT</strong> had any chance or capability to deal with chips… So… shame… Anyway, let’s test it out… ^_^</p>
<h1 id="2-Test-on-Widora-AIRV-Face-Detection"><a href="#2-Test-on-Widora-AIRV-Face-Detection" class="headerlink" title="2. Test on Widora AIRV Face Detection"></a>2. Test on Widora AIRV Face Detection</h1><p>By using a <span style="color:red"><strong>RUBBISH</strong></span> USB cable, you should already be able to run the face detection sample code existing inside the board.</p>
<table>
<thead>
<tr>
<th align="center">Normal</th>
<th align="center">Occlusion</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/chips/RISC-V/Widora/Widora_AIRV_01.jpg" alt="Widora AIRV Face Detection"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/chips/RISC-V/Widora/Widora_AIRV_02.jpg" alt="Widora AIRV Face Detection with Occlusion"></td>
</tr>
</tbody></table>
<p>However, you really need to use a <span style="color:red"><strong>QUALIFIED</strong></span> <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/USB_hardware#Micro_connectors">Micro-B USB</a> to <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/USB">USB Type A</a> cable, in order to list the device out by <strong>lsusb</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsusb</span><br><span class="line">Bus 001 Device 010: ID 10c4:ea60 Cygnal Integrated Products, Inc. CP2102/CP2109 UART Bridge Controller [CP210x family]</span><br></pre></td></tr></table></figure>


<h1 id="3-PlatformIO-IDE-for-VSCode"><a href="#3-PlatformIO-IDE-for-VSCode" class="headerlink" title="3. PlatformIO IDE for VSCode"></a>3. PlatformIO IDE for VSCode</h1><p><a target="_blank" rel="noopener" href="https://platformio.org/platformio-ide">PlatformIO IDE</a></p>
<h1 id="4-Reflash-Widora-AIRV"><a href="#4-Reflash-Widora-AIRV" class="headerlink" title="4. Reflash Widora AIRV"></a>4. Reflash Widora AIRV</h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Nobody</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
