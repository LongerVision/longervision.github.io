<!DOCTYPE html>
<html lang="English">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"longervision.ca","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Longer Vision Technology Github Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Longer Vision Technology">
<meta property="og:url" content="http://longervision.ca/page/2/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="Longer Vision Technology Github Blog">
<meta property="og:locale">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Longer Vision, Computer Vision, AI, Machine Learning">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://longervision.ca/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"English","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Longer Vision Technology</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Longer Vision Technology</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Github Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">Longer Vision Technology Github Blog</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">98</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">95</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/09/26/MachineVision/IntelRealSense/L515/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/26/MachineVision/IntelRealSense/L515/" class="post-title-link" itemprop="url">Intel RealSense LiDAR Camera L515</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-09-26 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-26T00:00:00-07:00">2020-09-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:21" itemprop="dateModified" datetime="2021-06-05T21:18:21-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Vision/" itemprop="url" rel="index"><span itemprop="name">Machine Vision</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>What a performance!! <a target="_blank" rel="noopener" href="https://www.intelrealsense.com/lidar-camera-l515/">Intel RealSense LiDAR Camera L515</a></p>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="github-emoji" alias="+1" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f44d.png?v8">&#x1f44d;</span>
</div>


<iframe width="861" height="807" src="https://www.youtube.com/embed/tC4gAvozXvc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/09/24/Robotics/Arduino_MiniRadar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/24/Robotics/Arduino_MiniRadar/" class="post-title-link" itemprop="url">Arduino Based Mini Radar</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-09-24 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-24T00:00:00-07:00">2020-09-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:21" itemprop="dateModified" datetime="2021-06-05T21:18:21-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Robotics/" itemprop="url" rel="index"><span itemprop="name">Robotics</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hmmm… This Mini Radar from <a target="_blank" rel="noopener" href="https://www.taobao.com/">Taobao</a> is recommended.</p>
<table>
<thead>
<tr>
<th align="center">Start</th>
<th align="center">A Chair</th>
<th align="center">Arduino</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Robots/Radar/radar_01.jpg" alt="Overview Seattle on Space Needle"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Robots/Radar/radar_02.jpg" alt="Around Space Needle"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Robots/Radar/radar_03.jpg" alt="Around Space Needle"></td>
</tr>
<tr>
<td align="center">Ultrasound</td>
<td align="center">My Hand</td>
<td align="center">Whole View</td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Robots/Radar/radar_04.jpg" alt="Overview Seattle on Space Needle"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Robots/Radar/radar_05.jpg" alt="Around Space Needle"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Robots/Radar/radar_06.jpg" alt="Whole View"></td>
</tr>
</tbody></table>
<iframe width="1280" height="807" src="https://www.youtube.com/embed/QJiq7PIxdyY" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<!-- [Mini Radar]:  -->

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/09/23/AI/DeepLearning/Darknet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/23/AI/DeepLearning/Darknet/" class="post-title-link" itemprop="url">AlexeyAB's Darknet</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-09-23 00:00:00" itemprop="dateCreated datePublished" datetime="2020-09-23T00:00:00-07:00">2020-09-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:22" itemprop="dateModified" datetime="2021-06-05T21:18:22-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/DeepLearning/" itemprop="url" rel="index"><span itemprop="name">DeepLearning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Salute to <a target="_blank" rel="noopener" href="https://github.com/AlexeyAB/darknet">AlexeyAB’s Darknet</a>:</p>
<iframe width="957" height="807" src="https://www.youtube.com/embed/nEPjtgblEx4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<iframe width="1280" height="720" src="https://www.youtube.com/embed/hh4-mPpBC10" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>




      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/09/03/ComputerVision/Face/deepfake/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/09/03/ComputerVision/Face/deepfake/" class="post-title-link" itemprop="url">Deepfake</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-09-03 06:59:47" itemprop="dateCreated datePublished" datetime="2020-09-03T06:59:47-07:00">2020-09-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:22" itemprop="dateModified" datetime="2021-06-05T21:18:22-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Vision/" itemprop="url" rel="index"><span itemprop="name">Computer Vision</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Computer-Vision/Face/" itemprop="url" rel="index"><span itemprop="name">Face</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Long time <strong>NO</strong> see…  <div style="font-size:5rem;width:100%;text-align:center;"><br>    <span class="github-emoji" alias="wink" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f609.png?v8">&#x1f609;</span></p>
</div>

<p>Have <strong>NO</strong> time for blogging these days.</p>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/UibIz3hLLLo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<iframe width="1280" height="720" src="https://www.youtube.com/embed/aj9gx7r4NBE" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p><a target="_blank" rel="noopener" href="https://youtu.be/UibIz3hLLLo">https://youtu.be/UibIz3hLLLo</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/08/16/SBCs/RISC-V/RISC-V-Assembly/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/08/16/SBCs/RISC-V/RISC-V-Assembly/" class="post-title-link" itemprop="url">RISC-V Assembly</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-16 00:00:00" itemprop="dateCreated datePublished" datetime="2020-08-16T00:00:00-07:00">2020-08-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:21" itemprop="dateModified" datetime="2021-06-05T21:18:21-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/Risc-V/" itemprop="url" rel="index"><span itemprop="name">Risc-V</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://web.eecs.utk.edu/~smarz1/courses/ece356/notes/assembly/">https://web.eecs.utk.edu/~smarz1/courses/ece356/notes/assembly/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/06/23/Cloud/cluster-rpi-kubernetes-docker-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/23/Cloud/cluster-rpi-kubernetes-docker-3/" class="post-title-link" itemprop="url">A Cluster of Raspberry Pis (3) - k3s</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-06-23 20:17:51" itemprop="dateCreated datePublished" datetime="2020-06-23T20:17:51-07:00">2020-06-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:21" itemprop="dateModified" datetime="2021-06-05T21:18:21-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>In this blog, we’re going to explore <a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a>. However, there is a <strong>VERY FIRST</strong> question to be answered: what is the relationship between <a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a> and <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>? Let’s start our journey of today:</p>
<h1 id="1-Kubernetes"><a href="#1-Kubernetes" class="headerlink" title="1 Kubernetes"></a>1 <a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a></h1><p><code>Kubernetes (commonly stylized as k8s) is an open-source container-orchestration system for automating application deployment, scaling, and management.</code> (cited from <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kubernetes">Wikipedia</a>)</p>
<p>On <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>, a lightweight variant of <a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a> is normally preferred. A variety of choices are available:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://microk8s.io/">MicroK8s</a>: <code>MicroK8s is only available for 64-bit Ubuntu images.</code> (Cited from <a target="_blank" rel="noopener" href="https://ubuntu.com/tutorials/how-to-kubernetes-cluster-on-raspberry-pi#3-setting-up-each-pi">How to build a Raspberry Pi Kubernetes cluster using MicroK8s: Setting up each Pi</a>)</li>
<li><a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a>, <a target="_blank" rel="noopener" href="https://k3d.io/">k3d</a>, <a target="_blank" rel="noopener" href="https://k3d.io/">k3d</a></li>
<li><a target="_blank" rel="noopener" href="https://minikube.sigs.k8s.io/">Minikube</a></li>
<li><a target="_blank" rel="noopener" href="https://kind.sigs.k8s.io/">kind</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/kubernetes/kubeadm">Kubeadm</a></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://brennerm.github.io/posts/minikube-vs-kind-vs-k3s.html">Minikube vs. kind vs. k3s - What should I use?</a> elaborates the differences among <a target="_blank" rel="noopener" href="https://minikube.sigs.k8s.io/">Minikube</a>, <a target="_blank" rel="noopener" href="https://kind.sigs.k8s.io/">kind</a> and <a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a>. Its final table is cited as follows:</p>
<table>
<thead>
<tr>
<th align="left"></th>
<th align="left"><a target="_blank" rel="noopener" href="https://minikube.sigs.k8s.io/">minikube</a></th>
<th align="left"><a target="_blank" rel="noopener" href="https://kind.sigs.k8s.io/">kind</a></th>
<th align="left"><a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a></th>
</tr>
</thead>
<tbody><tr>
<td align="left">runtime</td>
<td align="left">VM</td>
<td align="left">container</td>
<td align="left">native</td>
</tr>
<tr>
<td align="left">supported architectures</td>
<td align="left">AMD64</td>
<td align="left">AMD64</td>
<td align="left">AMD64, ARMv7, ARM64</td>
</tr>
<tr>
<td align="left">supported container runtimes</td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>, <a target="_blank" rel="noopener" href="https://cri-o.io/">CRI-O</a>, <a target="_blank" rel="noopener" href="https://containerd.io/">containerd</a>, <a target="_blank" rel="noopener" href="https://gvisor.dev/">gVisor</a></td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></td>
<td align="left"><a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>, <a target="_blank" rel="noopener" href="https://containerd.io/">containerd</a></td>
</tr>
<tr>
<td align="left">startup time: initial/following</td>
<td align="left">5:19 / 3:15</td>
<td align="left">2:48 / 1:06</td>
<td align="left">0:15 / 0:15</td>
</tr>
<tr>
<td align="left">memory requirements</td>
<td align="left">2GB</td>
<td align="left">8GB (Windows, MacOS)</td>
<td align="left">512 MB</td>
</tr>
<tr>
<td align="left">requires root?</td>
<td align="left">no</td>
<td align="left">no</td>
<td align="left">yes (rootless is experimental)</td>
</tr>
<tr>
<td align="left">multi-cluster support</td>
<td align="left">yes</td>
<td align="left">yes</td>
<td align="left">no (can be achieved using containers)</td>
</tr>
<tr>
<td align="left">multi-node support</td>
<td align="left">no</td>
<td align="left">yes</td>
<td align="left">yes</td>
</tr>
<tr>
<td align="left">project page</td>
<td align="left"><a target="_blank" rel="noopener" href="https://minikube.sigs.k8s.io/">minikube</a></td>
<td align="left"><a target="_blank" rel="noopener" href="https://kind.sigs.k8s.io/">kind</a></td>
<td align="left"><a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a></td>
</tr>
</tbody></table>
<p>Here in my case, I’m going to use <a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a> to manage and monitor the cluster. The following 2 blogs are strongly recommended from me.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://opensource.com/article/20/3/kubernetes-raspberry-pi-k3s">Run Kubernetes on a Raspberry Pi with k3s</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/@alexellisuk/kubernetes-1-18-broke-kubectl-run-heres-what-to-do-about-it-2a88e5fb389a">Kubernetes 1.18 broke “kubectl run”, here’s what to do about it</a></li>
</ul>
<h1 id="2-Preparation"><a href="#2-Preparation" class="headerlink" title="2. Preparation"></a>2. Preparation</h1><p>Let’s take a look at the <strong>IP</strong> info of <strong>ALL</strong> 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s. Let’s take <strong>pi04</strong> as the example this time. <strong>pi01</strong>, <strong>pi02</strong>, <strong>pi03</strong> are having very similar <strong>IP</strong> info as <strong>pi04</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether b8:27:eb:c1:b8:76 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.247/24 brd 192.168.1.255 scope global noprefixroute eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 2001:569:7fb8:c600:ca9b:d758:2534:8a9d/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7480sec preferred_lft 7180sec</span><br><span class="line">    inet6 fe80::80b5:3a3e:defe:24aa/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: wlan0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000</span><br><span class="line">    link/ether b8:27:eb:94:ed:23 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: wlan1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    link/ether e8:4e:06:35:16:6d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.245/24 brd 192.168.1.255 scope global dynamic noprefixroute wlan1</span><br><span class="line">       valid_lft 86060sec preferred_lft 75260sec</span><br><span class="line">    inet6 2001:569:7fb8:c600:5996:3c23:ef08:c367/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7480sec preferred_lft 7180sec</span><br><span class="line">    inet6 fe80::a0ff:56e3:77f5:9bf2/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>


<p>As mentioned in <a href="../../../../../2020/06/07/Cloud/cluster-rpi-kubernetes-docker-1/">A Cluster of Raspberry Pis (1) - Configuration</a>, <strong>pi04</strong> is an old <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3 Model B Rev 1.2 1GB</a>, which is unfortunately with a broken <strong>Wifi</strong> interface <strong>wlan0</strong>. Therefore, I’ve got to insert a <strong>Wifi</strong> dongle in order to have <strong>Wifi wlan1</strong> enabled.</p>
<h1 id="3-k3s-Installation-and-Configuration"><a href="#3-k3s-Installation-and-Configuration" class="headerlink" title="3. k3s Installation and Configuration"></a>3. <a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a> Installation and Configuration</h1><h2 id="3-1-k3s-Installation-on-Master-Node-pi01"><a href="#3-1-k3s-Installation-on-Master-Node-pi01" class="headerlink" title="3.1 k3s Installation on Master Node pi01"></a>3.1 <a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a> Installation on Master Node pi01</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ curl -sfL https://get.k3s.io | sh -</span><br><span class="line">[INFO]  Finding release for channel stable</span><br><span class="line">[INFO]  Using v1.18.3+k3s1 as release</span><br><span class="line">[INFO]  Downloading hash https://github.com/rancher/k3s/releases/download/v1.18.3+k3s1/sha256sum-arm.txt</span><br><span class="line">[INFO]  Downloading binary https://github.com/rancher/k3s/releases/download/v1.18.3+k3s1/k3s-armhf</span><br><span class="line">[INFO]  Verifying binary download</span><br><span class="line">[INFO]  Installing k3s to /usr/local/bin/k3s</span><br><span class="line">[INFO]  Creating /usr/local/bin/kubectl symlink to k3s</span><br><span class="line">[INFO]  Creating /usr/local/bin/crictl symlink to k3s</span><br><span class="line">[INFO]  Skipping /usr/local/bin/ctr symlink to k3s, command exists in PATH at /usr/bin/ctr</span><br><span class="line">[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh</span><br><span class="line">[INFO]  Creating uninstall script /usr/local/bin/k3s-uninstall.sh</span><br><span class="line">[INFO]  env: Creating environment file /etc/systemd/system/k3s.service.env</span><br><span class="line">[INFO]  systemd: Creating service file /etc/systemd/system/k3s.service</span><br><span class="line">[INFO]  systemd: Enabling k3s unit</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/k3s.service → /etc/systemd/system/k3s.service.</span><br><span class="line">[INFO]  systemd: Starting k3s</span><br><span class="line">pi@pi01:~ $ sudo kubectl get nodes</span><br><span class="line">NAME   STATUS   ROLES    AGE     VERSION</span><br><span class="line">pi01   Ready    master   2m42s   v1.18.3+k3s1</span><br></pre></td></tr></table></figure>


<p>If we take a look at <strong>IP</strong> info, one additional <strong>flannel.1</strong> interface is added as follows:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">4: flannel.1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UNKNOWN group default </span><br><span class="line">    link/ether 3e:53:91:ce:b9:46 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 10.42.0.0/32 brd 10.42.0.0 scope global flannel.1</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet 169.254.238.88/16 brd 169.254.255.255 scope global noprefixroute flannel.1</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::59c5:fbf9:aaf7:46fb/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>



<h2 id="3-2-k3s-Installation-on-Work-Node-pi01-pi02-pi03"><a href="#3-2-k3s-Installation-on-Work-Node-pi01-pi02-pi03" class="headerlink" title="3.2 k3s Installation on Work Node pi01, pi02, pi03"></a>3.2 <a target="_blank" rel="noopener" href="https://k3s.io/">k3s</a> Installation on Work Node pi01, pi02, pi03</h2><p>Before moving forward, we need to write down <strong>node token</strong> on the <strong>master node</strong>, which will be used while the other <strong>work nodes</strong> join in the cluster.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ sudo cat /var/lib/rancher/k3s/server/node-token</span><br><span class="line">K10cedbc6396ab68f6bee0d2df3eb005f0ff9ea17275aed2763b6bf07a06e83ce47::server:9a0d84f3bd8044b341c95f967badd5d3</span><br></pre></td></tr></table></figure>


<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pi@pi0X:~ $ curl -sfL http://get.k3s.io | K3S_URL=https://192.168.1.253:6443 \</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> K3S_TOKEN=K10cedbc6396ab68f6bee0d2df3eb005f0ff9ea17275aed2763b6bf07a06e83ce47::server:9a0d84f3bd8044b341c95f967badd5d3 sh -</span></span><br><span class="line">[INFO]  Finding release for channel stable</span><br><span class="line">[INFO]  Using v1.18.3+k3s1 as release</span><br><span class="line">[INFO]  Downloading hash https://github.com/rancher/k3s/releases/download/v1.18.3+k3s1/sha256sum-arm.txt</span><br><span class="line">[INFO]  Skipping binary downloaded, installed k3s matches hash</span><br><span class="line">[INFO]  Skipping /usr/local/bin/kubectl symlink to k3s, command exists in PATH at /usr/bin/kubectl</span><br><span class="line">[INFO]  Skipping /usr/local/bin/crictl symlink to k3s, command exists in PATH at /usr/bin/crictl</span><br><span class="line">[INFO]  Skipping /usr/local/bin/ctr symlink to k3s, command exists in PATH at /usr/bin/ctr</span><br><span class="line">[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh</span><br><span class="line">[INFO]  Creating uninstall script /usr/local/bin/k3s-agent-uninstall.sh</span><br><span class="line">[INFO]  env: Creating environment file /etc/systemd/system/k3s-agent.service.env</span><br><span class="line">[INFO]  systemd: Creating service file /etc/systemd/system/k3s-agent.service</span><br><span class="line">[INFO]  systemd: Enabling k3s-agent unit</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/k3s-agent.service → /etc/systemd/system/k3s-agent.service.</span><br><span class="line">[INFO]  systemd: Starting k3s-agent</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=2, or 3, or 4</strong>.</p>
<h2 id="3-3-Take-a-Look-on-pi01"><a href="#3-3-Take-a-Look-on-pi01" class="headerlink" title="3.3 Take a Look on pi01"></a>3.3 Take a Look on pi01</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ sudo kubectl get nodes</span><br><span class="line">NAME   STATUS   ROLES    AGE     VERSION</span><br><span class="line">pi02   Ready    &lt;none&gt;   5m7s    v1.18.3+k3s1</span><br><span class="line">pi03   Ready    &lt;none&gt;   4m18s   v1.18.3+k3s1</span><br><span class="line">pi01   Ready    master   20m     v1.18.3+k3s1</span><br><span class="line">pi04   Ready    &lt;none&gt;   11s     v1.18.3+k3s1</span><br></pre></td></tr></table></figure>


<h2 id="3-4-Access-Raspberry-Pi-Cluster-from-PC"><a href="#3-4-Access-Raspberry-Pi-Cluster-from-PC" class="headerlink" title="3.4 Access Raspberry Pi Cluster from PC"></a>3.4 Access <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a> Cluster from PC</h2><p>We can further configure our PC to be able to access the <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a> Cluster. For details, please refer to <a target="_blank" rel="noopener" href="https://opensource.com/article/20/3/kubernetes-raspberry-pi-k3s">Run Kubernetes on a Raspberry Pi with k3s</a>. On my laptop, I can do:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> ✔  kubectl get nodes</span><br><span class="line">NAME   STATUS   ROLES    AGE     VERSION</span><br><span class="line">pi02   Ready    &lt;none&gt;   3h27m   v1.18.3+k3s1</span><br><span class="line">pi03   Ready    &lt;none&gt;   3h26m   v1.18.3+k3s1</span><br><span class="line">pi04   Ready    &lt;none&gt;   3h22m   v1.18.3+k3s1</span><br><span class="line">pi01   Ready    master   3h42m   v1.18.3+k3s1</span><br></pre></td></tr></table></figure>

<p>We can even specify the role name by the following command:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> ✔  kubectl label nodes pi0X kubernetes.io/role=worker</span><br><span class="line">node/pi0X labeled</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=2, or 3, or 4</strong>.</p>
<p>Let’s take a look at all nodes again:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> 64  ✔  kubectl get nodes</span><br><span class="line">NAME   STATUS   ROLES    AGE    VERSION</span><br><span class="line">pi04   Ready    worker   2d7h   v1.18.3+k3s1</span><br><span class="line">pi03   Ready    worker   2d7h   v1.18.3+k3s1</span><br><span class="line">pi01   Ready    master   2d7h   v1.18.3+k3s1</span><br><span class="line">pi02   Ready    worker   2d7h   v1.18.3+k3s1</span><br><span class="line"> 66  ✘  kubectl get pods --all-namespaces</span><br><span class="line">  ~ </span><br><span class="line">NAMESPACE              NAME                                         READY   STATUS             RESTARTS   AGE</span><br><span class="line">kube-system            helm-install-traefik-m49zm                   0/1     Completed          0          2d7h</span><br><span class="line">kube-system            svclb-traefik-djtgw                          2/2     Running            2          2d7h</span><br><span class="line">kube-system            svclb-traefik-cn76f                          2/2     Running            2          2d7h</span><br><span class="line">kube-system            local-path-provisioner-6d59f47c7-5gz67       1/1     Running            1          2d7h</span><br><span class="line">kube-system            svclb-traefik-7bwtl                          2/2     Running            2          2d7h</span><br><span class="line">kube-system            coredns-8655855d6-wg68z                      1/1     Running            1          2d7h</span><br><span class="line">kube-system            traefik-758cd5fc85-vn7xg                     1/1     Running            1          2d7h</span><br><span class="line">kube-system            metrics-server-7566d596c8-v2vgp              1/1     Running            1          2d7h</span><br><span class="line">kube-system            svclb-traefik-r9x5v                          2/2     Running            4          2d7h</span><br><span class="line">kubernetes-dashboard   dashboard-metrics-scraper-6b4884c9d5-ct6lh   1/1     Running            0          43h</span><br><span class="line">kubernetes-dashboard   kubernetes-dashboard-7b544877d5-s4spx        0/1     CrashLoopBackOff   489        43h</span><br><span class="line"> 67  ✔  kubectl get pods</span><br><span class="line">  ~ </span><br><span class="line">No resources found in default namespace.</span><br></pre></td></tr></table></figure>



<h1 id="4-Create-Deployment"><a href="#4-Create-Deployment" class="headerlink" title="4. Create Deployment"></a>4. Create Deployment</h1><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 73  ✔  kubectl create deployment nginx-sample --image=nginx</span><br><span class="line">  ~ </span><br><span class="line">deployment.apps/nginx-sample created</span><br></pre></td></tr></table></figure>

<p>After a while, <strong>nginx-sample</strong> will be successfully deployed.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> 79  ✔  kubectl get deployments</span><br><span class="line">  ~ </span><br><span class="line">NAME           READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx-sample   1/1     1            1           12m</span><br><span class="line"> 80  ✔  kubectl get pods</span><br><span class="line">  ~ </span><br><span class="line">NAME                           READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx-sample-879f5cf56-kg6xf   1/1     Running   0          12m</span><br><span class="line"> 81  ✔  kubectl get pods -o wide</span><br><span class="line">  ~ </span><br><span class="line">NAME                           READY   STATUS    RESTARTS   AGE   IP           NODE   NOMINATED NODE   READINESS GATES</span><br><span class="line">nginx-sample-879f5cf56-kg6xf   1/1     Running   0          12m   10.42.0.15   pi01   &lt;none&gt;           &lt;none&gt;</span><br></pre></td></tr></table></figure>


<p>Now, let’s expose this service and take a look from the browser:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> 82  ✔  kubectl expose deployment nginx-sample --type=&quot;NodePort&quot; --port 80 </span><br><span class="line">  ~ </span><br><span class="line">service/nginx-sample exposed</span><br><span class="line"> 83  ✔  kubectl get services </span><br><span class="line">  ~ </span><br><span class="line">NAME           TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">kubernetes     ClusterIP   10.43.0.1       &lt;none&gt;        443/TCP        96m</span><br><span class="line">nginx-sample   NodePort    10.43.195.237   &lt;none&gt;        80:30734/TCP   72s</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/06/22/Cloud/cluster-rpi-kubernetes-docker-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/22/Cloud/cluster-rpi-kubernetes-docker-2/" class="post-title-link" itemprop="url">A Cluster of Raspberry Pis (2) - docker & docker swarm</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-06-22 13:22:19" itemprop="dateCreated datePublished" datetime="2020-06-22T13:22:19-07:00">2020-06-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:21" itemprop="dateModified" datetime="2021-06-05T21:18:21-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="1-Container-VS-Virtual-Machine"><a href="#1-Container-VS-Virtual-Machine" class="headerlink" title="1. Container VS. Virtual Machine"></a>1. Container VS. Virtual Machine</h1><p>Briefly refer to: <a target="_blank" rel="noopener" href="https://www.backblaze.com/blog/vm-vs-containers/">What’s the Diff: VMs vs Containers</a> and <a target="_blank" rel="noopener" href="https://www.trustradius.com/buyer-blog/bare-metal-servers-virtual-servers-and-containerization">Bare Metal Servers, Virtual Servers, and Containerization</a>.</p>
<h1 id="2-Docker-VS-VMWare"><a href="#2-Docker-VS-VMWare" class="headerlink" title="2. Docker VS. VMWare"></a>2. <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> VS. <a target="_blank" rel="noopener" href="https://www.vmware.com/">VMWare</a></h1><p>Briefly refer to: <a target="_blank" rel="noopener" href="https://www.upguard.com/articles/docker-vs.-vmware-how-do-they-stack-up">Docker vs VMWare: How Do They Stack Up?</a>.</p>
<p>For me, I used to use <a target="_blank" rel="noopener" href="https://www.virtualbox.org/">Virtual Box</a> (a virtual machine) a lot, but now start using <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> (the leading container).</p>
<h1 id="3-Install-Docker-on-Raspberry-Pi"><a href="#3-Install-Docker-on-Raspberry-Pi" class="headerlink" title="3. Install Docker on Raspberry Pi"></a>3. Install <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> on <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a></h1><p>I heavily refer to Alex Ellis’ blogs:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.alexellis.io/getting-started-with-docker-on-raspberry-pi/">Get Started with Docker on Raspberry Pi</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.alexellis.io/hands-on-docker-raspberrypi/">Hands-on Docker for Raspberry Pi</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.alexellis.io/5-things-docker-rpi/">5 things about Docker on Raspberry Pi</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.alexellis.io/live-deep-dive-pi-swarm/">Live Deep Dive - Docker Swarm Mode on the Pi</a></li>
</ul>
<h2 id="3-1-Modify-boot-config-txt"><a href="#3-1-Modify-boot-config-txt" class="headerlink" title="3.1 Modify /boot/config.txt"></a>3.1 Modify /boot/config.txt</h2><table style="text-align:center;">
  <tr>
    <td>Hostname</td>
    <td>/boot/config.txt</td>
  </tr>
  <tr>
    <td>pi01</td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ tail -5 /boot/config.txt</span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=128</span><br><span class="line"><span class="comment">#arm_64bit=1</span></span><br></pre></td></tr></table></figure>
    </td>
  </tr>
  <tr>
    <td>pi02</td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ tail -5 /boot/config.txt</span><br><span class="line"></span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=64</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
    <tr>
    <td>pi03</td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  pi@pi03:~ $ tail -5 /boot/config.txt</span><br><span class="line"></span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=32</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
  <tr>
    <td>pi04</td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ tail -5 /boot/config.txt</span><br><span class="line"></span><br><span class="line">[all]</span><br><span class="line"><span class="comment">#dtoverlay=vc4-fkms-v3d</span></span><br><span class="line">start_x=1</span><br><span class="line">gpu_mem=32</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
</table>


<h2 id="3-2-Docker-Installation"><a href="#3-2-Docker-Installation" class="headerlink" title="3.2 Docker Installation"></a>3.2 <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> Installation</h2><h3 id="3-2-1-Installation"><a href="#3-2-1-Installation" class="headerlink" title="3.2.1 Installation"></a>3.2.1 Installation</h3><p>To install <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> is <strong>ONLY</strong> one single command:</p>
<ul>
<li><code>curl -sSL https://get.docker.com | sh</code></li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ curl -sSL https://get.docker.com | sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> Executing docker install script, commit: 26ff363bcf3b3f5a00498ac43694bf1c7d9ce16c</span></span><br><span class="line">Warning: the &quot;docker&quot; command appears to already exist on this system.</span><br><span class="line"></span><br><span class="line">If you already have Docker installed, this script can cause trouble, which is</span><br><span class="line">why we&#x27;re displaying this warning and provide the opportunity to cancel the</span><br><span class="line">installation.</span><br><span class="line"></span><br><span class="line">If you installed the current Docker package using this script and are using it</span><br><span class="line">again to update Docker, you can safely ignore this message.</span><br><span class="line"></span><br><span class="line">You may press Ctrl+C now to abort this script.</span><br><span class="line">+ sleep 20</span><br><span class="line">+ sudo -E sh -c apt-get update -qq &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c curl -fsSL &quot;https://download.docker.com/linux/raspbian/gpg&quot; | apt-key add -qq - &gt;/dev/null</span><br><span class="line">Warning: apt-key output should not be parsed (stdout is not a terminal)</span><br><span class="line">+ sudo -E sh -c echo &quot;deb [arch=armhf] https://download.docker.com/linux/raspbian buster stable&quot; &gt; /etc/apt/sources.list.d/docker.list</span><br><span class="line">+ sudo -E sh -c apt-get update -qq &gt;/dev/null</span><br><span class="line">+ [ -n  ]</span><br><span class="line">+ sudo -E sh -c apt-get install -y -qq --no-install-recommends docker-ce &gt;/dev/null</span><br><span class="line">+ sudo -E sh -c docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.11</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.13.10</span><br><span class="line"> Git commit:        42e35e6</span><br><span class="line"> Built:             Mon Jun  1 09:20:15 2020</span><br><span class="line"> OS/Arch:           linux/arm</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.11</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.13.10</span><br><span class="line">  Git commit:       42e35e6</span><br><span class="line">  Built:            Mon Jun  1 09:14:09 2020</span><br><span class="line">  OS/Arch:          linux/arm</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.2.13</span><br><span class="line">  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc10</span><br><span class="line">  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br><span class="line">If you would like to use Docker as a non-root user, you should now consider</span><br><span class="line">adding your user to the &quot;docker&quot; group with something like:</span><br><span class="line"></span><br><span class="line">  sudo usermod -aG docker pi</span><br><span class="line"></span><br><span class="line">Remember that you will have to log out and back in for this to take effect!</span><br><span class="line"></span><br><span class="line">WARNING: Adding a user to the &quot;docker&quot; group will grant the ability to run</span><br><span class="line">         containers which can be used to obtain root privileges on the</span><br><span class="line">         docker host.</span><br><span class="line">         Refer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface</span><br><span class="line">         for more information.</span><br></pre></td></tr></table></figure>


<p>Let’s take a look at the <strong>IP</strong> info of <strong>pi01</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ ip -c address</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    link/ether dc:a6:32:b1:22:36 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.253/24 brd 192.168.1.255 scope global dynamic noprefixroute eth0</span><br><span class="line">       valid_lft 47285sec preferred_lft 36485sec</span><br><span class="line">    inet6 2001:569:7fb8:c600:ca77:4302:3dbb:5b94/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7469sec preferred_lft 7169sec</span><br><span class="line">    inet6 fe80::bdf2:287f:4b0a:abc5/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether dc:a6:32:b1:22:37 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.1.252/24 brd 192.168.1.255 scope global dynamic noprefixroute wlan0</span><br><span class="line">       valid_lft 47282sec preferred_lft 36482sec</span><br><span class="line">    inet6 2001:569:7fb8:c600:d413:3cdf:1f56:7056/64 scope global dynamic mngtmpaddr noprefixroute </span><br><span class="line">       valid_lft 7469sec preferred_lft 7169sec</span><br><span class="line">    inet6 fe80::7f55:cb40:9bf7:c903/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">4: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default </span><br><span class="line">    link/ether 02:42:ff:90:ba:f3 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>


<p>Clearly, there is <strong>one more</strong> interface <strong>docker0</strong> added into <strong>pi01</strong>‘s <strong>IP</strong> info, but it’s now <strong>DOWN</strong>.</p>
<h3 id="3-2-2-Uninstall"><a href="#3-2-2-Uninstall" class="headerlink" title="3.2.2 Uninstall"></a>3.2.2 Uninstall</h3><p>By the way, to uninstall <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a>, 2 commands are required:</p>
<ul>
<li><code>sudo apt remove docker-ce</code></li>
<li><code>sudo ip link delete docker0</code></li>
</ul>
<p>Beside have <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> uninstalled, you may have to manually remove the <strong>IP</strong> link to <strong>docker0</strong>.</p>
<h3 id="3-2-3-Enable-Start-Docker"><a href="#3-2-3-Enable-Start-Docker" class="headerlink" title="3.2.3 Enable/Start Docker"></a>3.2.3 Enable/Start <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></h3><p>Then, let’s enable and start <strong>docker</strong> service, and add user <strong>pi</strong> into group <strong>docker</strong> to be able to run <strong>docker</strong> as user <strong>root</strong>.</p>
<ul>
<li><code>sudo systemctl enable docker</code></li>
<li><code>sudo systemctl start docker</code></li>
<li><code>sudo usermod -aG docker pi</code></li>
</ul>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ sudo systemctl enable docker</span><br><span class="line">Synchronizing state of docker.service with SysV service script with /lib/systemd/systemd-sysv-install.</span><br><span class="line">Executing: /lib/systemd/systemd-sysv-install enable docker</span><br><span class="line">pi@pi01:~ $ sudo systemctl start docker</span><br><span class="line">pi@pi01:~ $ sudo usermod -aG docker pi</span><br></pre></td></tr></table></figure>


<p>Afterwards, reboot all <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>.</p>
<p>Now, let’s check the installed <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> version:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">pi@pi0X:~ $ docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           19.03.11</span><br><span class="line"> API version:       1.40</span><br><span class="line"> Go version:        go1.13.10</span><br><span class="line"> Git commit:        42e35e6</span><br><span class="line"> Built:             Mon Jun  1 09:20:15 2020</span><br><span class="line"> OS/Arch:           linux/arm</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          19.03.11</span><br><span class="line">  API version:      1.40 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.13.10</span><br><span class="line">  Git commit:       42e35e6</span><br><span class="line">  Built:            Mon Jun  1 09:14:09 2020</span><br><span class="line">  OS/Arch:          linux/arm</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.2.13</span><br><span class="line">  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0-rc10</span><br><span class="line">  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.18.0</span><br><span class="line">  GitCommit:        fec3683</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=1, or 2, or 3, or 4</strong>.</p>
<h2 id="3-3-Test-ARM-Image-Pulled-from-Docker-Hub"><a href="#3-3-Test-ARM-Image-Pulled-from-Docker-Hub" class="headerlink" title="3.3 Test ARM Image Pulled from Docker Hub"></a>3.3 Test ARM Image Pulled from <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a></h2><h3 id="3-3-1-Docker-Pull-Docker-Run-Docker-Exec"><a href="#3-3-1-Docker-Pull-Docker-Run-Docker-Exec" class="headerlink" title="3.3.1 Docker Pull, Docker Run, Docker Exec"></a>3.3.1 Docker Pull, Docker Run, Docker Exec</h3><p>Due to respective architectures of these 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s, I tried to use <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> image <a target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/alpine/">arm64v8/alpine</a> for <strong>pi01</strong>, and <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> image <a target="_blank" rel="noopener" href="https://hub.docker.com/r/arm32v6/alpine/">arm32v6/alpine</a> for <strong>pi02</strong>, <strong>pi03</strong> and <strong>pi04</strong>. However, it finally turns out that <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4 64-bit raspbian kernel</a> is <strong>NOT</strong> quite stable yet.</p>
<h4 id="pi01-Docker-Hub-arm64v8-is-NOT-stable-yet"><a href="#pi01-Docker-Hub-arm64v8-is-NOT-stable-yet" class="headerlink" title="pi01 ~ Docker Hub arm64v8 is NOT stable yet."></a>pi01 ~ <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> <a target="_blank" rel="noopener" href="https://hub.docker.com/u/arm64v8/">arm64v8</a> is NOT stable yet.</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker pull arm64v8/alpine</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from arm64v8/alpine</span><br><span class="line">b538f80385f9: Pull complete </span><br><span class="line">Digest: sha256:3b3f647d2d99cac772ed64c4791e5d9b750dd5fe0b25db653ec4976f7b72837c</span><br><span class="line">Status: Downloaded newer image for arm64v8/alpine:latest</span><br><span class="line">docker.io/arm64v8/alpine:latest</span><br><span class="line">pi@pi01:~ $ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm64v8/alpine      latest              62ee0e9f8440        11 days ago         5.32MB</span><br><span class="line">pi@pi01:~ $ docker run -it -d arm64v8/alpine</span><br><span class="line">4deed42b3a29231bde40176c5c385d9f04bbf5188383b2ede4a09383360d69bb</span><br><span class="line">pi@pi01:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS               NAMES</span><br><span class="line">4deed42b3a29        arm64v8/alpine      &quot;/bin/sh&quot;           49 seconds ago      Restarting (159) 8 seconds ago                       inspiring_mendeleev</span><br><span class="line">pi@pi01:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">4deed42b3a29        arm64v8/alpine      &quot;/bin/sh&quot;           51 seconds ago      Up 2 seconds                            inspiring_mendeleev</span><br><span class="line">pi@pi02:~ $ </span><br></pre></td></tr></table></figure>

<p>It looks <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> images from repository <a target="_blank" rel="noopener" href="https://hub.docker.com/u/arm64v8/">arm64v8</a> are <strong>NOT</strong> able to stably work on my <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry Pi 4 Model B Rev 1.4 8GB</a> with <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4 64-bit raspbian kernel</a>. To <strong>further</strong> demonstrate this, I also tested some other images from repository <a target="_blank" rel="noopener" href="https://hub.docker.com/u/arm64v8/">arm64v8</a> and even deprecated <a target="_blank" rel="noopener" href="https://hub.docker.com/u/aarch64/">aarch64</a>, as follows:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">alpine              latest              3ddac682c5b6        12 days ago         4.77MB</span><br><span class="line">arm64v8/alpine      latest              62ee0e9f8440        12 days ago         5.32MB</span><br><span class="line">arm64v8/ubuntu      latest              dbc66a3d7b82        6 weeks ago         66.7MB</span><br><span class="line">aarch64/ubuntu      latest              5227400055a2        3 years ago         122MB</span><br><span class="line">pi@pi01:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES</span><br><span class="line">e06eaba12e82        alpine              &quot;/bin/sh&quot;           2 hours ago         Up 2 hours                                     relaxed_cerf</span><br><span class="line">ba8d858d36f0        aarch64/ubuntu      &quot;/bin/bash&quot;         2 hours ago         Exited (159) 2 hours ago                       nifty_sutherland</span><br><span class="line">08346701599a        arm64v8/ubuntu      &quot;/bin/bash&quot;         2 hours ago         Exited (159) 2 hours ago                       jolly_fermi</span><br><span class="line">ccda6c95f81d        arm64v8/alpine      &quot;/bin/sh&quot;           4 hours ago         Exited (159) 4 hours ago                       nifty_gates</span><br></pre></td></tr></table></figure>

<p>None of the three images <a target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/alpine/">arm64v8/alpine</a>, <a target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/ubuntu/">arm64v8/ubuntu</a>, <a target="_blank" rel="noopener" href="https://hub.docker.com/r/aarch64/ubuntu/">aarch64/ubuntu</a> can <strong>UP</strong> for 3 seconds.</p>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="github-emoji" alias="sweat" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f613.png?v8">&#x1f613;</span>
    <span class="github-emoji" alias="pensive" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f614.png?v8">&#x1f614;</span>
</div> 

<p>Well, I can pull <strong>alpine</strong> and keep it <strong>UP</strong> instead of <a target="_blank" rel="noopener" href="https://hub.docker.com/r/arm64v8/alpine/">arm64v8/alpine</a> though.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker pull alpine</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/alpine</span><br><span class="line">b4b72e716706: Pull complete </span><br><span class="line">Digest: sha256:185518070891758909c9f839cf4ca393ee977ac378609f700f60a771a2dfe321</span><br><span class="line">Status: Downloaded newer image for alpine:latest</span><br><span class="line">docker.io/library/alpine:latest</span><br><span class="line">pi@pi01:~ $ docker run -it -d alpine</span><br><span class="line">e06eaba12e82d9266aa3dacd8eb0484e385f810e08806f0bec282bc3b5122a85</span><br><span class="line">pi@pi01:~ $ docker ps </span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">e06eaba12e82        alpine              &quot;/bin/sh&quot;           10 seconds ago      Up 2 seconds                            relaxed_cerf</span><br><span class="line">pi@pi01:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">e06eaba12e82        alpine              &quot;/bin/sh&quot;           12 seconds ago      Up 5 seconds                                      relaxed_cerf</span><br><span class="line">ba8d858d36f0        aarch64/ubuntu      &quot;/bin/bash&quot;         3 minutes ago       Exited (159) 2 minutes ago                        nifty_sutherland</span><br><span class="line">08346701599a        arm64v8/ubuntu      &quot;/bin/bash&quot;         28 minutes ago      Exited (159) 28 minutes ago                       jolly_fermi</span><br><span class="line">ccda6c95f81d        arm64v8/alpine      &quot;/bin/sh&quot;           2 hours ago         Exited (159) 2 hours ago                          nifty_gates</span><br><span class="line">pi@pi01:~ $ docker exec -it e06eaba12e82 /bin/sh</span><br><span class="line">/ # cat /etc/os-release</span><br><span class="line">NAME=&quot;Alpine Linux&quot;</span><br><span class="line">ID=alpine</span><br><span class="line">VERSION_ID=3.12.0</span><br><span class="line">PRETTY_NAME=&quot;Alpine Linux v3.12&quot;</span><br><span class="line">HOME_URL=&quot;https://alpinelinux.org/&quot;</span><br><span class="line">BUG_REPORT_URL=&quot;https://bugs.alpinelinux.org/&quot;</span><br><span class="line">/ # uname -a</span><br><span class="line">Linux e06eaba12e82 5.4.44-v8+ #1320 SMP PREEMPT Wed Jun 3 16:20:05 BST 2020 aarch64 Linux</span><br><span class="line">/ # exit</span><br><span class="line">pi@pi01:~ $ </span><br></pre></td></tr></table></figure>


<p>However, due to a bunch of the other instabilities, I <strong>downgrade</strong> the system from <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4 64-bit raspbian kernel</a> to <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry Pi OS (32-bit) with desktop 2020-05-27</a>. <span style="color:red">And it’s interesting that image from <strong>arm32v6/alpine</strong> is exactly the same as image directly from <strong>alpine</strong>, namely image ID <strong>3ddac682c5b6</strong></span>.</p>
<p>By the way, please refer to my posts:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/alpinelinux/docker-alpine/issues/92">https://github.com/alpinelinux/docker-alpine/issues/92</a>,</li>
<li><a target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?f=29&t=250730&p=1677106#p1677005">https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677005</a></li>
<li><a target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?f=29&t=250730&p=1677106#p1677106">https://www.raspberrypi.org/forums/viewtopic.php?f=29&amp;t=250730&amp;p=1677106#p1677106</a></li>
</ul>
<h4 id="pi0X-Docker-Hub-arm32v6-is-tested"><a href="#pi0X-Docker-Hub-arm32v6-is-tested" class="headerlink" title="pi0X ~ Docker Hub arm32v6 is tested."></a>pi0X ~ <a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a> <a target="_blank" rel="noopener" href="https://hub.docker.com/u/arm32v6/">arm32v6</a> is tested.</h4><p>Let’s take <strong>pi02</strong> as an example.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker pull arm32v6/alpine</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from arm32v6/alpine</span><br><span class="line">Digest: sha256:71465c7d45a086a2181ce33bb47f7eaef5c233eace65704da0c5e5454a79cee5</span><br><span class="line">Status: Image is up to date for arm32v6/alpine:latest</span><br><span class="line">docker.io/arm32v6/alpine:latest</span><br><span class="line">pi@pi02:~ $ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm32v6/alpine      latest              3ddac682c5b6        3 weeks ago         4.77MB</span><br><span class="line">pi@pi02:~ $ docker run -it -d arm32v6/alpine</span><br><span class="line">66b813b4c07426294e01f3c7b2ff03f6608f6be10f8f7bf9fde581f605e6a5bc</span><br><span class="line">pi@pi02:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">66b813b4c074        arm32v6/alpine      &quot;/bin/sh&quot;           10 seconds ago      Up 5 seconds                            intelligent_gates</span><br><span class="line">pi@pi02:~ $ docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">66b813b4c074        arm32v6/alpine      &quot;/bin/sh&quot;           12 seconds ago      Up 8 seconds                            intelligent_gates</span><br><span class="line">pi@pi02:~ $ docker exec -it 66b813b4c074 /bin/sh</span><br><span class="line">/ # cat /etc/os-release</span><br><span class="line">NAME=&quot;Alpine Linux&quot;</span><br><span class="line">ID=alpine</span><br><span class="line">VERSION_ID=3.12.0</span><br><span class="line">PRETTY_NAME=&quot;Alpine Linux v3.12&quot;</span><br><span class="line">HOME_URL=&quot;https://alpinelinux.org/&quot;</span><br><span class="line">BUG_REPORT_URL=&quot;https://bugs.alpinelinux.org/&quot;</span><br><span class="line">/ # uname -a</span><br><span class="line">Linux 66b813b4c074 4.19.118-v7l+ #1311 SMP Mon Apr 27 14:26:42 BST 2020 armv7l Linux</span><br><span class="line">/ # exit</span><br><span class="line">pi@pi02:~ $ </span><br></pre></td></tr></table></figure>
<p>, where <strong>X=1, or 2, or 3, or 4</strong>.</p>
<p>Now, we can see <strong>docker0</strong> is <strong>UP</strong>. And a wired connection is running as the additional interface <strong>vethc6e4f97</strong>, which is actually <strong><span style="color: red">just eth0 running in docker image <a target="_blank" rel="noopener" href="https://hub.docker.com/r/arm32v6/alpine/">arm32v6/alpine</a></span></strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ ip -c address</span><br><span class="line">...</span><br><span class="line">4: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    link/ether 02:42:0e:a2:30:0d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:eff:fea2:300d/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">6: vethc6e4f97@if5: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default </span><br><span class="line">    link/ether 3e:cf:32:5f:92:e8 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 169.254.108.166/16 brd 169.254.255.255 scope global noprefixroute vethc6e4f97</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::f8c1:6d4c:aa67:11af/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>


<h3 id="3-3-2-Docker-Login-amp-Docker-Commit"><a href="#3-3-2-Docker-Login-amp-Docker-Commit" class="headerlink" title="3.3.2 Docker Login &amp; Docker Commit"></a>3.3.2 Docker Login &amp; Docker Commit</h3><p>In order to avoid issues about <strong>registry</strong>, we can run <strong>docker login</strong>, so that a configuration file <code>/home/pi/.docker/config.json</code> will also be automatically generated.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker login</span><br><span class="line">Login with your Docker ID to push and pull images from Docker Hub. If you don&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.</span><br><span class="line">Username: jiapei100</span><br><span class="line">Password: </span><br><span class="line">WARNING! Your password will be stored unencrypted in /home/pi/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br><span class="line">pi@pi01:~ $ docker commit 561025c3974e</span><br><span class="line">sha256:4fb0183bf76ad8dd0e3620e90b162a58c7bebb135e0081454cee4b2ae40d6881</span><br></pre></td></tr></table></figure>


<h2 id="3-4-Docker-Info"><a href="#3-4-Docker-Info" class="headerlink" title="3.4 Docker Info"></a>3.4 <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> Info</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker info</span><br><span class="line">Client:</span><br><span class="line"> Debug Mode: false</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Containers: 1</span><br><span class="line">  Running: 1</span><br><span class="line">  Paused: 0</span><br><span class="line">  Stopped: 0</span><br><span class="line"> Images: 1</span><br><span class="line"> Server Version: 19.03.11</span><br><span class="line"> Storage Driver: overlay2</span><br><span class="line">  Backing Filesystem: extfs</span><br><span class="line">  Supports d_type: true</span><br><span class="line">  Native Overlay Diff: true</span><br><span class="line"> Logging Driver: json-file</span><br><span class="line"> Cgroup Driver: cgroupfs</span><br><span class="line"> Plugins:</span><br><span class="line">  Volume: local</span><br><span class="line">  Network: bridge host ipvlan macvlan null overlay</span><br><span class="line">  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog</span><br><span class="line"> Swarm: inactive</span><br><span class="line"> Runtimes: runc</span><br><span class="line"> Default Runtime: runc</span><br><span class="line"> Init Binary: docker-init</span><br><span class="line"> containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429</span><br><span class="line"> runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd</span><br><span class="line"> init version: fec3683</span><br><span class="line"> Security Options:</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: default</span><br><span class="line"> Kernel Version: 4.19.118-v7l+</span><br><span class="line"> Operating System: Raspbian GNU/Linux 10 (buster)</span><br><span class="line"> OSType: linux</span><br><span class="line"> Architecture: armv7l</span><br><span class="line"> CPUs: 4</span><br><span class="line"> Total Memory: 7.729GiB</span><br><span class="line"> Name: pi01</span><br><span class="line"> ID: ONE2:WOIF:K6MY:KO77:2NMA:F3OC:S3UH:3ZV7:GTFE:APXH:DST2:RX2C</span><br><span class="line"> Docker Root Dir: /var/lib/docker</span><br><span class="line"> Debug Mode: false</span><br><span class="line"> Username: jiapei100</span><br><span class="line"> Registry: https://index.docker.io/v1/</span><br><span class="line"> Labels:</span><br><span class="line"> Experimental: false</span><br><span class="line"> Insecure Registries:</span><br><span class="line">  127.0.0.0/8</span><br><span class="line"> Live Restore Enabled: false</span><br><span class="line"></span><br><span class="line">WARNING: No swap limit support</span><br><span class="line">WARNING: No cpu cfs quota support</span><br><span class="line">WARNING: No cpu cfs period support</span><br></pre></td></tr></table></figure>



<h1 id="4-Docker-Swarm"><a href="#4-Docker-Swarm" class="headerlink" title="4. Docker Swarm"></a>4. <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a></h1><p>From the above command <code>docker info</code>, you can see clearly that <code>Swarm: inactive</code>. <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> now has a <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm Mode</a>. Now, let’s begin playing with <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>.</p>
<h2 id="4-1-Docker-Swarm-Initialization-on-Master"><a href="#4-1-Docker-Swarm-Initialization-on-Master" class="headerlink" title="4.1 Docker Swarm Initialization on Master"></a>4.1 <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a> Initialization on Master</h2><p>If you’ve got both <strong>Wired</strong> and <strong>Wifi</strong> enabled at the same time, without specifying with connection you are going to use for initializing your <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a>, you’ll meet the following <strong>ERROR</strong> message.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker swarm init</span><br><span class="line">Error response from daemon: could not choose an IP address to advertise since this system has multiple addresses on different interfaces (192.168.1.253 on eth0 and 192.168.1.252 on wlan0) - specify one with --advertise-addr</span><br></pre></td></tr></table></figure>


<p>By specifying the argument <code>--advertise-addr</code>, <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a> can be successfully initialized as:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker swarm init --advertise-addr 192.168.1.253</span><br><span class="line">Swarm initialized: current node (q7w8gwf9z6keb86rltvqx0f7z) is now a manager.</span><br><span class="line"></span><br><span class="line">To add a worker to this swarm, run the following command:</span><br><span class="line"></span><br><span class="line">    docker swarm join --token SWMTKN-1-5ivkmmwk8kfw92gs0emkmgzg78d4cwitqmi827ghikpajzvrjt-6i326au3t4ka3g1wa74n4rhe4 192.168.1.253:2377</span><br><span class="line"></span><br><span class="line">To add a manager to this swarm, run &#x27;docker swarm join-token manager&#x27; and follow the instructions.</span><br></pre></td></tr></table></figure>



<h2 id="4-2-Docker-Swarm-Initialization-on-Worker"><a href="#4-2-Docker-Swarm-Initialization-on-Worker" class="headerlink" title="4.2 Docker Swarm Initialization on Worker"></a>4.2 <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a> Initialization on Worker</h2><p>On each <strong>worker</strong>, just run the following command to join <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a> created by <strong>master</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi0X:~ $ docker swarm join --token SWMTKN-1-5ivkmmwk8kfw92gs0emkmgzg78d4cwitqmi827ghikpajzvrjt-6i326au3t4ka3g1wa74n4rhe4 192.168.1.253:2377</span><br><span class="line">This node joined a swarm as a worker.</span><br></pre></td></tr></table></figure>
<p>, where <strong>X=2, or 3, or 4</strong>.</p>
<h2 id="4-3-List-Docker-Nodes-In-Leader"><a href="#4-3-List-Docker-Nodes-In-Leader" class="headerlink" title="4.3 List Docker Nodes In Leader"></a>4.3 List Docker Nodes In Leader</h2><p>Come back to <strong>pi01</strong>, namely, <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a> <strong>master</strong>, also the <strong>leader</strong>, and list all nodes:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker node ls</span><br><span class="line">ID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS      ENGINE VERSION</span><br><span class="line">q7w8gwf9z6keb86rltvqx0f7z *   pi01                Ready               Active              Leader              19.03.11</span><br><span class="line">sdiwqlawhfjobfsymmp38xivn     pi02                Ready               Active                                  19.03.11</span><br><span class="line">97h11ixu7nvce4p64td2o5one     pi03                Ready               Active                                  19.03.11</span><br><span class="line">tzrqp2fcj4yht20j84r83s5ps     pi04                Ready               Active                                  19.03.11</span><br></pre></td></tr></table></figure>


<p>In our test, we <strong>ONLY</strong> designate a single <strong>leader</strong>. You can of course have the option to designate multiple <strong>leader</strong>s by using command <code>docker node promote</code>.</p>
<h2 id="4-4-Swarmmode-Test"><a href="#4-4-Swarmmode-Test" class="headerlink" title="4.4 Swarmmode Test"></a>4.4 Swarmmode Test</h2><p>Here, we test all Alex Ellis’ <a target="_blank" rel="noopener" href="https://github.com/alexellis/swarmmode-tests/tree/master/arm">Swarmmode tests on ARM</a>.</p>
<h3 id="4-4-1-Scenario-1-Replicate-Service"><a href="#4-4-1-Scenario-1-Replicate-Service" class="headerlink" title="4.4.1 Scenario 1 - Replicate Service"></a>4.4.1 Scenario 1 - Replicate Service</h3><p>Create the service on <strong>leader</strong> with 4 replicas on both the <strong>master</strong> and 3 <strong>worker</strong>s.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --name ping1 --replicas=4 alexellis2/arm-pingcurl ping google.com</span><br><span class="line">63n31w2jyr6uuqg2670r985h6</span><br><span class="line">overall progress: 4 out of 4 tasks </span><br><span class="line">1/4: running   [==================================================&gt;] </span><br><span class="line">2/4: running   [==================================================&gt;] </span><br><span class="line">3/4: running   [==================================================&gt;] </span><br><span class="line">4/4: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>

<p>Then, we can list the created docker service on the <strong>leader</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                            PORTS</span><br><span class="line">63n31w2jyr6u        ping1               replicated          4/4                 alexellis2/arm-pingcurl:latest   </span><br><span class="line">pi@pi01:~ $ docker service ps ping1</span><br><span class="line">ID                  NAME                IMAGE                            NODE                DESIRED STATE       CURRENT STATE         ERROR               PORTS</span><br><span class="line">xqjxus8ayetx        ping1.1             alexellis2/arm-pingcurl:latest   pi02                Running             Running 2 hours ago                       </span><br><span class="line">9lemwgls6hp6        ping1.2             alexellis2/arm-pingcurl:latest   pi03                Running             Running 2 hours ago                       </span><br><span class="line">b2y2muif9h2x        ping1.3             alexellis2/arm-pingcurl:latest   pi04                Running             Running 2 hours ago                       </span><br><span class="line">2uqbcrn0j7et        ping1.4             alexellis2/arm-pingcurl:latest   pi01                Running             Running 2 hours ago      </span><br></pre></td></tr></table></figure>


<h4 id="4-4-1-1-On-Master"><a href="#4-4-1-1-On-Master" class="headerlink" title="4.4.1.1 On Master"></a>4.4.1.1 On Master</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">7d72a046d2f4        alexellis2/arm-pingcurl:latest      &quot;ping google.com&quot;   41 minutes ago      Up 41 minutes                           ping1.4.2uqbcrn0j7ettnqndxfq6s44b</span><br><span class="line">71ef4e0107a7        arm32v6/alpine                      &quot;/bin/sh&quot;           9 hours ago         Up 9 hours                              great_saha</span><br><span class="line">pi@pi01:~ $ docker logs 7d72a046d2f4 | tail -n 10</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42461 ttl=119 time=5.98 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42462 ttl=119 time=5.53 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42463 ttl=119 time=5.69 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42464 ttl=119 time=5.98 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42465 ttl=119 time=5.97 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42466 ttl=119 time=5.65 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42467 ttl=119 time=6.22 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42468 ttl=119 time=6.33 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42469 ttl=119 time=9.93 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42470 ttl=119 time=5.82 ms</span><br></pre></td></tr></table></figure>


<h4 id="4-4-1-2-On-Worker"><a href="#4-4-1-2-On-Worker" class="headerlink" title="4.4.1.2 On Worker"></a>4.4.1.2 On Worker</h4><p>This time, let’s take <strong>pi04</strong> as our example:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~/Downloads $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">2520e1ea0ea8        alexellis2/arm-pingcurl:latest   &quot;ping google.com&quot;   44 minutes ago      Up 44 minutes                           ping1.3.b2y2muif9h2xa847rlibcv5nz</span><br><span class="line">746386fce983        arm32v6/alpine                   &quot;/bin/sh&quot;           11 days ago         Up 9 hours                              serene_chebyshev</span><br><span class="line">pi@pi04:~ $ docker logs 2520e1ea0ea8 | tail -n 10</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42491 ttl=119 time=7.22 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42492 ttl=119 time=9.10 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42493 ttl=119 time=6.97 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42494 ttl=119 time=6.76 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42495 ttl=119 time=6.74 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42496 ttl=119 time=7.03 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42497 ttl=119 time=7.06 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42498 ttl=119 time=6.17 ms</span><br><span class="line">64 bytes from sea15s12-in-f14.1e100.net (172.217.3.206): icmp_seq=42499 ttl=119 time=6.74 ms</span><br><span class="line">64 bytes from sea15s12-in-f206.1e100.net (172.217.3.206): icmp_seq=42500 ttl=119 time=6.23 ms</span><br></pre></td></tr></table></figure>


<h3 id="4-4-2-Scenario-2-Replicate-Webservice"><a href="#4-4-2-Scenario-2-Replicate-Webservice" class="headerlink" title="4.4.2 Scenario 2 - Replicate Webservice"></a>4.4.2 Scenario 2 - Replicate Webservice</h3><p>In this example, we will create 2 replicas <strong>only</strong> for fun.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --name hello1 --publish 3000:3000 --replicas=2 alexellis2/arm-alpinehello</span><br><span class="line">pe19as7evzmgi5qiq36z2pk63</span><br><span class="line">overall progress: 2 out of 2 tasks </span><br><span class="line">1/2: running   [==================================================&gt;] </span><br><span class="line">2/2: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>

<p>Again, let’s list our created services.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                               PORTS</span><br><span class="line">pe19as7evzmg        hello1              replicated          2/2                 alexellis2/arm-alpinehello:latest   *:3000-&gt;3000/tcp</span><br><span class="line">63n31w2jyr6u        ping1               replicated          4/4                 alexellis2/arm-pingcurl:latest      </span><br><span class="line">pi@pi01:~ $ docker service ps hello1</span><br><span class="line">ID                  NAME                IMAGE                               NODE                DESIRED STATE       CURRENT STATE               ERROR               PORTS</span><br><span class="line">z9k8a10hkxqv        hello1.1            alexellis2/arm-alpinehello:latest   pi02                Running             Running about an hour ago                       </span><br><span class="line">7xuhpuru0r5u        hello1.2            alexellis2/arm-alpinehello:latest   pi01                Running             Running about an hour ago        </span><br></pre></td></tr></table></figure>


<h4 id="4-4-2-1-On-Master-and-Worker-pi02"><a href="#4-4-2-1-On-Master-and-Worker-pi02" class="headerlink" title="4.4.2.1 On Master and Worker pi02"></a>4.4.2.1 On Master and Worker pi02</h4><p>On <strong>master</strong> <strong>pi01</strong> and <strong>worker</strong> <strong>pi02</strong>, there are 3 running <strong>docker images</strong>:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker images</span><br><span class="line">REPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm32v6/alpine               latest              3ddac682c5b6        3 weeks ago         4.77MB</span><br><span class="line">alexellis2/arm-pingcurl      &lt;none&gt;              86a225e3a07b        3 years ago         6.19MB</span><br><span class="line">alexellis2/arm-alpinehello   &lt;none&gt;              2ad6d1f9b6ae        3 years ago         33.8MB</span><br></pre></td></tr></table></figure>

<p>, and 3 running <strong>docker container</strong>s.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">918e211b5784        alexellis2/arm-alpinehello:latest   &quot;npm start&quot;         22 minutes ago      Up 22 minutes       3000/tcp            hello1.1.z9k8a10hkxqvsovuu6omw4axy</span><br><span class="line">a92acd03471a        alexellis2/arm-pingcurl:latest      &quot;ping google.com&quot;   About an hour ago   Up About an hour                        ping1.1.xqjxus8ayetxiip2cmw4fm54x</span><br><span class="line">66b813b4c074        arm32v6/alpine                      &quot;/bin/sh&quot;           11 hours ago        Up 11 hours                             intelligent_gates</span><br></pre></td></tr></table></figure>


<h4 id="4-4-2-2-On-Worker-pi03-and-Worker-pi04"><a href="#4-4-2-2-On-Worker-pi03-and-Worker-pi04" class="headerlink" title="4.4.2.2 On Worker pi03 and Worker pi04"></a>4.4.2.2 On Worker pi03 and Worker pi04</h4><p>On <strong>master</strong> <strong>pi03</strong> and <strong>worker</strong> <strong>pi04</strong>, there are <strong>only</strong> 2 running <strong>docker images</strong>:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ docker images</span><br><span class="line">REPOSITORY                TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">arm32v6/alpine            latest              3ddac682c5b6        3 weeks ago         4.77MB</span><br><span class="line">alexellis2/arm-pingcurl   &lt;none&gt;              86a225e3a07b        3 years ago         6.19MB</span><br></pre></td></tr></table></figure>

<p>, and 3 running <strong>docker container</strong>s.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">5670e6944779        alexellis2/arm-pingcurl:latest   &quot;ping google.com&quot;   About an hour ago   Up About an hour                        ping1.2.9lemwgls6hp6wnpyg14aeyeva</span><br><span class="line">f3d1670dfc7a        arm32v6/alpine                   &quot;/bin/sh&quot;           11 days ago         Up 9 hours                              infallible_cerf</span><br></pre></td></tr></table></figure>


<h4 id="4-4-2-3-Test-The-Webservice"><a href="#4-4-2-3-Test-The-Webservice" class="headerlink" title="4.4.2.3 Test The Webservice"></a>4.4.2.3 Test The Webservice</h4><p>Finally, let’s test the webservice:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $ curl -4 localhost:3000</span><br><span class="line">Hellopi@pi01:~ $</span><br></pre></td></tr></table></figure>


<p>Since service <code>alexellis2/arm-alpinehello</code> is <strong>only</strong> running on <strong>master</strong> <strong>pi01</strong> and <strong>worker</strong> <strong>pi02</strong>, let’s just check respective <strong>docker logs</strong> in the following:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker logs b2c313ac8200</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> hello@1.0.0 start /root</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> node index.js</span></span><br><span class="line"></span><br><span class="line">I&#x27;m listening.</span><br></pre></td></tr></table></figure>


<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker logs 918e211b5784</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> hello@1.0.0 start /root</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> node index.js</span></span><br><span class="line"></span><br><span class="line">I&#x27;m listening.</span><br></pre></td></tr></table></figure>



<h3 id="4-4-3-Scenario-3-Inter-Container-Communication"><a href="#4-4-3-Scenario-3-Inter-Container-Communication" class="headerlink" title="4.4.3 Scenario 3 - Inter-Container Communication"></a>4.4.3 Scenario 3 - Inter-Container Communication</h3><p>We <strong>first</strong> create a distributed subnetwork named <strong>armnet</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker network create --driver overlay --subnet 20.0.14.0/24 armnet</span><br><span class="line">qzcwsh0y0fx22sw7088luxybr</span><br></pre></td></tr></table></figure>

<p>Afterwards, a redis database service is created and runs on a <strong>single</strong> node, here, <strong>master</strong> <strong>pi01</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --replicas=1 --network=armnet --name redis alexellis2/redis-arm:v6</span><br><span class="line">kmk663ad1t88nfjf567tkctmr</span><br><span class="line">overall progress: 1 out of 1 tasks </span><br><span class="line">1/1: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>

<p>Finally, 2 replicas of docker service <strong>counter</strong> are created in this created subnetwork <strong>armnet</strong> and listening to port <strong>3333</strong>. </p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service create --name counter --replicas=2 --network=armnet --publish 3333:3333 alexellis2/arm_redis_counter</span><br><span class="line">ivdubq3vzdil3r2i5z0r1d2va</span><br><span class="line">overall progress: 2 out of 2 tasks </span><br><span class="line">1/2: running   [==================================================&gt;] </span><br><span class="line">2/2: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>



<p>Now, let’s list all created docker service on the leader.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker service ls</span><br><span class="line">ID                  NAME                MODE                REPLICAS            IMAGE                                 PORTS</span><br><span class="line">ivdubq3vzdil        counter             replicated          2/2                 alexellis2/arm_redis_counter:latest   *:3333-&gt;3333/tcp</span><br><span class="line">pe19as7evzmg        hello1              replicated          2/2                 alexellis2/arm-alpinehello:latest     *:3000-&gt;3000/tcp</span><br><span class="line">63n31w2jyr6u        ping1               replicated          4/4                 alexellis2/arm-pingcurl:latest        </span><br><span class="line">kmk663ad1t88        redis               replicated          1/1                 alexellis2/redis-arm:v6               </span><br><span class="line">pi@pi01:~ $ docker service ps counter</span><br><span class="line">ID                  NAME                IMAGE                                 NODE                DESIRED STATE       CURRENT STATE               ERROR               PORTS</span><br><span class="line">ip6z9yacmjbz        counter.1           alexellis2/arm_redis_counter:latest   pi04                Running             Running about an hour ago                       </span><br><span class="line">nzhx6q1vugm9        counter.2           alexellis2/arm_redis_counter:latest   pi02                Running             Running about an hour ago                       </span><br><span class="line">pi@pi01:~ $ docker service ps redis</span><br><span class="line">ID                  NAME                IMAGE                     NODE                DESIRED STATE       CURRENT STATE         ERROR               PORTS</span><br><span class="line">z1tqve759bh6        redis.1             alexellis2/redis-arm:v6   pi03                Running             Running 2 hours ago                       </span><br></pre></td></tr></table></figure>

<p>It’s interesting that this time:</p>
<ul>
<li>the 2 replicas of service <strong>counter</strong> are automatically created on node <strong>pi02</strong> and <strong>pi04</strong> </li>
<li>the unique replica of service <strong>redis</strong> is allocated for node <strong>pi03</strong></li>
</ul>
<p><span style="color:red">I’ve got no idea how the created services are distributed to different nodes. The <strong>ONLY</strong> thing I can do is to run <code>docker ps</code> and show the distribution results</span>:</p>
<ul>
<li><p><strong>pi01</strong></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">b2c313ac8200        alexellis2/arm-alpinehello:latest   &quot;npm start&quot;         3 hours ago         Up 3 hours          3000/tcp            hello1.2.7xuhpuru0r5ujkyrp4g558ehu</span><br><span class="line">7d72a046d2f4        alexellis2/arm-pingcurl:latest      &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.4.2uqbcrn0j7ettnqndxfq6s44b</span><br><span class="line">71ef4e0107a7        arm32v6/alpine                      &quot;/bin/sh&quot;           11 hours ago        Up 11 hours                             great_saha</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>pi02</strong></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                                 COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">da2452b474af        alexellis2/arm_redis_counter:latest   &quot;node ./app.js&quot;     2 hours ago         Up 2 hours          3000/tcp            counter.2.nzhx6q1vugm9w7ouqyots5x43</span><br><span class="line">918e211b5784        alexellis2/arm-alpinehello:latest     &quot;npm start&quot;         3 hours ago         Up 3 hours          3000/tcp            hello1.1.z9k8a10hkxqvsovuu6omw4axy</span><br><span class="line">a92acd03471a        alexellis2/arm-pingcurl:latest        &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.1.xqjxus8ayetxiip2cmw4fm54x</span><br><span class="line">66b813b4c074        arm32v6/alpine                        &quot;/bin/sh&quot;           14 hours ago        Up 14 hours                             intelligent_gates</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>pi03</strong></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                            COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">5fd9a0b8dd08        alexellis2/redis-arm:v6          &quot;redis-server&quot;      2 hours ago         Up 2 hours          6379/tcp            redis.1.z1tqve759bh6hdw2udnk6hh7t</span><br><span class="line">5670e6944779        alexellis2/arm-pingcurl:latest   &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.2.9lemwgls6hp6wnpyg14aeyeva</span><br><span class="line">f3d1670dfc7a        arm32v6/alpine                   &quot;/bin/sh&quot;           12 days ago         Up 11 hours                             infallible_cerf</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>pi04</strong></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                                 COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">aca52fdaf2d4        alexellis2/arm_redis_counter:latest   &quot;node ./app.js&quot;     2 hours ago         Up 2 hours          3000/tcp            counter.1.ip6z9yacmjbzjaeax45tuh2oa</span><br><span class="line">2520e1ea0ea8        alexellis2/arm-pingcurl:latest        &quot;ping google.com&quot;   3 hours ago         Up 3 hours                              ping1.3.b2y2muif9h2xa847rlibcv5nz</span><br><span class="line">746386fce983        arm32v6/alpine                        &quot;/bin/sh&quot;           12 days ago         Up 11 hours                             serene_chebyshev</span><br></pre></td></tr></table></figure>


</li>
</ul>
<p>Clearly, </p>
<ul>
<li><strong>service</strong> <code>alexellis2/arm_redis_counter</code> is running on both nodes <strong>pi02</strong> and <strong>pi04</strong>, <strong>but not</strong> on nodes <strong>pi01</strong> or <strong>pi03</strong></li>
<li><strong>service</strong> <code>alexellis2/arm-alpinehello</code> is running on both nodes <strong>pi01</strong> and <strong>pi02</strong>, <strong>but not</strong> on nodes <strong>pi03</strong> or <strong>pi04</strong></li>
<li><strong>service</strong> <code>alexellis2/arm-pingcurl</code> is running on all 4 nodes <strong>pi01</strong>, <strong>pi02</strong>. <strong>pi03</strong>, and <strong>pi04</strong></li>
</ul>
<p><span style="color:red">So far, <code>curl localhost:3333/incr</code> is NOT running. Why?</span></p>
<p><span style="color:red"><strong>What’s more</strong>:</span></p>
<ul>
<li>without touching anything for a whole night,  <strong>service</strong> <code>alexellis2/arm_redis_counter</code> seems to automatically <strong>shundown</strong> with the <strong>ERROR</strong>: <code>task: non-zero exit (1)</code> for multiple times.</li>
<li><code>alexellis2/arm_redis_counter</code> is now running on nodes <strong>master</strong> <strong>pi01</strong> and <strong>worker</strong> <strong>pi04</strong>, instead of original <strong>master</strong> <strong>pi02</strong> and <strong>worker</strong> <strong>pi04</strong>.</li>
<li>it’s interesting that <code>alexellis2/redis-arm</code> is still running on node <strong>pi03</strong>.</li>
</ul>
<h2 id="4-5-Docker-Swarm-Visualizer"><a href="#4-5-Docker-Swarm-Visualizer" class="headerlink" title="4.5 Docker Swarm Visualizer"></a>4.5 <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">Docker Swarm</a> Visualizer</h2><p>Our final topie of this blog is the <a target="_blank" rel="noopener" href="https://hub.docker.com/r/dockersamples/visualizer">Docker Swarm Visualizer</a>. Official <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> documentation has provided the details <a target="_blank" rel="noopener" href="https://hub.docker.com/r/dockersamples/visualizer">Docker Swarm Visualizer</a>, and <a target="_blank" rel="noopener" href="https://github.com/dockersamples/docker-swarm-visualizer">Docker Swarm Visualizer Source Code</a> has also been provided on Github.</p>
<h3 id="4-5-1-On-Leader"><a href="#4-5-1-On-Leader" class="headerlink" title="4.5.1 On Leader"></a>4.5.1 On Leader</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ docker run -it -d -p 8080:8080 -v /var/run/docker.sock:/var/run/docker.sock dockersamples/visualizer</span><br><span class="line">Unable to find image &#x27;dockersamples/visualizer:latest&#x27; locally</span><br><span class="line">latest: Pulling from dockersamples/visualizer</span><br><span class="line">cd784148e348: Pull complete </span><br><span class="line">f6268ae5d1d7: Pull complete </span><br><span class="line">97eb9028b14b: Pull complete </span><br><span class="line">9975a7a2a3d1: Pull complete </span><br><span class="line">ba903e5e6801: Pull complete </span><br><span class="line">7f034edb1086: Pull complete </span><br><span class="line">cd5dbf77b483: Pull complete </span><br><span class="line">5e7311667ddb: Pull complete </span><br><span class="line">687c1072bfcb: Pull complete </span><br><span class="line">aa18e5d3472c: Pull complete </span><br><span class="line">a3da1957bd6b: Pull complete </span><br><span class="line">e42dbf1c67c4: Pull complete </span><br><span class="line">5a18b01011d2: Pull complete </span><br><span class="line">Digest: sha256:54d65cbcbff52ee7d789cd285fbe68f07a46e3419c8fcded437af4c616915c85</span><br><span class="line">Status: Downloaded newer image for dockersamples/visualizer:latest</span><br><span class="line">910e83cd7ba4de02be370f4b0280d7f7fecb9d80ed8578f3238f68beab28aac7</span><br><span class="line">pi@pi01:~ $ docker service create \</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">   --name=viz \</span></span><br><span class="line"><span class="bash">&gt;   --publish=8080:8080/tcp \</span></span><br><span class="line"><span class="bash">&gt;   --constraint=node.role==manager \</span></span><br><span class="line"><span class="bash">&gt;   --mount=<span class="built_in">type</span>=<span class="built_in">bind</span>,src=/var/run/docker.sock,dst=/var/run/docker.sock \</span></span><br><span class="line"><span class="bash">&gt;   alexellis2/visualizer-arm:latest</span></span><br><span class="line">61tr8x3conmamkekzp6cqro6a</span><br><span class="line">overall progress: 1 out of 1 tasks </span><br><span class="line">1/1: running   [==================================================&gt;] </span><br><span class="line">verify: Service converged </span><br></pre></td></tr></table></figure>


<h3 id="4-5-2-On-Remote-Laptop"><a href="#4-5-2-On-Remote-Laptop" class="headerlink" title="4.5.2 On Remote Laptop"></a>4.5.2 On Remote Laptop</h3><p>Now, let’s visualize our <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/swarm/">docker swarm</a> beautifully from laptop by entering the <strong>leader</strong>‘s IP address at port <strong>8080</strong>:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/docker_swarm_visualizer.png" alt="Docker Swarm Visualizer on My Raspberry Pi Cluster"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/06/16/SBCs/MCU/microbit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/16/SBCs/MCU/microbit/" class="post-title-link" itemprop="url">micro:bit</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-06-16 23:25:59" itemprop="dateCreated datePublished" datetime="2020-06-16T23:25:59-07:00">2020-06-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:21" itemprop="dateModified" datetime="2021-06-05T21:18:21-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/MCU/" itemprop="url" rel="index"><span itemprop="name">MCU</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Hmmm… Happened to get this chance of playing with <a target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> for fun, then take this opportunity to write a blog. It seems this BBC products is very convenient. Let’s just <strong>plug and play</strong>.</p>
<h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h1><h2 id="1-1-lsusb"><a href="#1-1-lsusb" class="headerlink" title="1.1 lsusb"></a>1.1 lsusb</h2><p>Just plug in and <code>lsusb</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">Bus 001 Device 008: ID 0d28:0204 NXP LPC1768</span><br><span class="line">......</span><br></pre></td></tr></table></figure>


<h2 id="1-2-Hardware-Specification"><a href="#1-2-Hardware-Specification" class="headerlink" title="1.2 Hardware Specification"></a>1.2 Hardware Specification</h2><p>Refer to <a target="_blank" rel="noopener" href="https://tech.microbit.org/hardware/">micro:bit Hardware Specification</a></p>
<h2 id="1-3-User-Guide-Overview"><a href="#1-3-User-Guide-Overview" class="headerlink" title="1.3 User Guide Overview"></a>1.3 User Guide Overview</h2><p>Refer to <a target="_blank" rel="noopener" href="https://microbit.org/get-started/user-guide/overview/">micro:bit User Guide Overview</a></p>
<h1 id="2-Tutorials-and-Configurations"><a href="#2-Tutorials-and-Configurations" class="headerlink" title="2. Tutorials and Configurations"></a>2. Tutorials and Configurations</h1><ul>
<li><a target="_blank" rel="noopener" href="https://makecode.microbit.org/tutorials">Makecode Tutorials</a>: this so called <strong>makecode</strong> looks very similar to <a target="_blank" rel="noopener" href="https://developers.google.com/blockly/">Google Blockly</a></li>
<li><a target="_blank" rel="noopener" href="https://microbit-micropython.readthedocs.io/">BBC micro:bit MicroPython</a>: this seems to be <strong>BBC Official tutorial</strong>, which adopts <strong>Python</strong> as the programming language</li>
<li><a target="_blank" rel="noopener" href="https://microbit-challenges.readthedocs.io/">UCL’s BBC Micro:bit Tutorials</a>: this is a <a target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> tutorial from <a target="_blank" rel="noopener" href="https://www.ucl.ac.uk/">University College London</a>, but the <span style="color:red">ONLY defect</span> is: it seems it’s developed under Windows? Please check <a target="_blank" rel="noopener" href="https://microbit-challenges.readthedocs.io/en/latest/misc/cmd.html">UCL’s BBC Micro:bit Tutorials - Command Line Interface</a>.</li>
<li><a target="_blank" rel="noopener" href="https://lancaster-university.github.io/microbit-docs/">Lancaster University micro:bit Runtime</a>: this seems to be a little complicated, but adopts my favorite coding language: <strong>C/C++</strong></li>
</ul>
<p>Since I’m <strong>NOT</strong> a professional <strong>Makecode</strong> coder, I’ll run a couple of simple <a target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> projects using either <strong>Python</strong> or <strong>C/C++</strong>.</p>
<div style="font-size:5rem;width:100%;text-align:center;">
    <span class="github-emoji" alias="sweat" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f613.png?v8">&#x1f613;</span>
    <span class="github-emoji" alias="relieved" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60c.png?v8">&#x1f60c;</span>
</div> 



<h1 id="3-Display-Hellow-World-Using-micro-bit-MicroPython"><a href="#3-Display-Hellow-World-Using-micro-bit-MicroPython" class="headerlink" title="3. Display Hellow World Using micro:bit MicroPython"></a>3. Display <code>Hellow World</code> Using <a target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> <a target="_blank" rel="noopener" href="https://micropython.org/">MicroPython</a></h1><h2 id="3-1-Required-Configuration-on-Your-Host"><a href="#3-1-Required-Configuration-on-Your-Host" class="headerlink" title="3.1 Required Configuration on Your Host"></a>3.1 Required Configuration on Your Host</h2><p>Please refer to <a target="_blank" rel="noopener" href="https://microbit-micropython.readthedocs.io/en/latest/devguide/installation.html#microbit-linux">micro:bit MicroPython Installation</a></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo add-apt-repository -y ppa:team-gcc-arm-embedded</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo add-apt-repository -y ppa:pmiller-opensource/ppa</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install gcc-arm-none-eabi srecord libssl-dev</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> pip3 install yotta</span></span><br></pre></td></tr></table></figure>

<p>and now ,let’s check <strong>yotta</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  ✔  pip show yotta </span><br><span class="line">  ~ </span><br><span class="line">Name: yotta</span><br><span class="line">Version: 0.20.5</span><br><span class="line">Summary: Re-usable components for embedded software.</span><br><span class="line">Home-page: https://github.com/ARMmbed/yotta</span><br><span class="line">Author: James Crosby</span><br><span class="line">Author-email: James.Crosby@arm.com</span><br><span class="line">License: Apache-2.0</span><br><span class="line">Location: /home/longervision/.local/lib/python3.6/site-packages</span><br><span class="line">Requires: jsonschema, PyJWT, PyGithub, mbed-test-wrapper, Jinja2, valinor, requests, intelhex, jsonpointer, hgapi, colorama, argcomplete, semantic-version, cryptography, pathlib, certifi</span><br><span class="line">Required-by: </span><br></pre></td></tr></table></figure>


<h2 id="3-2-Connect-micro-bit"><a href="#3-2-Connect-micro-bit" class="headerlink" title="3.2 Connect micro:bit"></a>3.2 Connect <a target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a></h2><p>Please refer to <a target="_blank" rel="noopener" href="https://microbit-micropython.readthedocs.io/en/latest/devguide/repl.html">micro:bit MicroPython Dev Guide REPL</a>, and now let’s connect <a target="_blank" rel="noopener" href="https://microbit.org/">micro:bit</a> using <a target="_blank" rel="noopener" href="https://linux.die.net/man/8/picocom">picocom</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"> 12  ✔  sudo picocom /dev/ttyACM0 -b 115200                                                             ~ </span><br><span class="line">picocom v2.2</span><br><span class="line"></span><br><span class="line">port is        : /dev/ttyACM0</span><br><span class="line">flowcontrol    : none</span><br><span class="line">baudrate is    : 115200</span><br><span class="line">parity is      : none</span><br><span class="line">databits are   : 8</span><br><span class="line">stopbits are   : 1</span><br><span class="line">escape is      : C-a</span><br><span class="line">local echo is  : no</span><br><span class="line">noinit is      : no</span><br><span class="line">noreset is     : no</span><br><span class="line">nolock is      : no</span><br><span class="line">send_cmd is    : sz -vv</span><br><span class="line">receive_cmd is : rz -vv -E</span><br><span class="line">imap is        : </span><br><span class="line">omap is        : </span><br><span class="line">emap is        : crcrlf,delbs,</span><br><span class="line"></span><br><span class="line">Type [C-a] [C-h] to see available commands</span><br><span class="line"></span><br><span class="line">Terminal ready</span><br><span class="line"></span><br><span class="line">*** Picocom commands (all prefixed by [C-a])</span><br><span class="line"></span><br><span class="line">*** [C-x] : Exit picocom</span><br><span class="line">*** [C-q] : Exit without reseting serial port</span><br><span class="line">*** [C-b] : Set baudrate</span><br><span class="line">*** [C-u] : Increase baudrate (baud-up)</span><br><span class="line">*** [C-d] : Decrease baudrate (baud-down)</span><br><span class="line">*** [C-i] : Change number of databits</span><br><span class="line">*** [C-j] : Change number of stopbits</span><br><span class="line">*** [C-f] : Change flow-control mode</span><br><span class="line">*** [C-y] : Change parity mode</span><br><span class="line">*** [C-p] : Pulse DTR</span><br><span class="line">*** [C-t] : Toggle DTR</span><br><span class="line">*** [C-|] : Send break</span><br><span class="line">*** [C-c] : Toggle local echo</span><br><span class="line">*** [C-s] : Send file</span><br><span class="line">*** [C-r] : Receive file</span><br><span class="line">*** [C-v] : Show port settings</span><br><span class="line">*** [C-h] : Show this message</span><br></pre></td></tr></table></figure>


<p><span style="color:red">Oh, my god… why can’t I just code directly here from within the console??? That’s ABSOLUTELY NOT my style.</span></p>
<h2 id="3-3-Code-amp-Run"><a href="#3-3-Code-amp-Run" class="headerlink" title="3.3 Code &amp; Run"></a>3.3 Code &amp; Run</h2><p>The <strong>VERY FIRST</strong> demo is <strong>ALWAYS</strong> displaying <code>Hello World</code>. To fulfill this task, please refer to <a target="_blank" rel="noopener" href="https://support.microbit.org/support/solutions/articles/19000013986-how-do-i-transfer-my-code-onto-the-micro-bit-via-usb">How do I transfer my code onto the micro:bit via USB</a>.</p>
<p><span style="color:red"> As mentioned above, the UNACCEPTABLE thing is: it seems we have to use <a target="_blank" rel="noopener" href="https://python.microbit.org/">micro:bit Python IDE</a> for python coding for micro:bit?????</span> Anyway, my generated <strong>HEX</strong> of <code>Hello World</code> is <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/helloworld.hex">here</a>.</p>
<h1 id="4-Flash-Lancaster-microbit-samples-Using-Yotta"><a href="#4-Flash-Lancaster-microbit-samples-Using-Yotta" class="headerlink" title="4. Flash Lancaster microbit-samples Using Yotta"></a>4. Flash <a target="_blank" rel="noopener" href="https://github.com/lancaster-university/microbit-samples">Lancaster microbit-samples</a> Using <a target="_blank" rel="noopener" href="https://yottabuild.org/">Yotta</a></h1><p>Please strictly follow <a target="_blank" rel="noopener" href="https://lancaster-university.github.io/microbit-docs/offline-toolchains/#installation-on-linux">Lancaster University micro:bit Yotta</a>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"> 141  ✔  cd microbit-samples/</span><br><span class="line"> 142   master  ✔  ls</span><br><span class="line">debugOnVisualStudioCode.gif*  LICENSE*  module.json*  README.md*  source/</span><br><span class="line"> 143   master  ✔  yt target bbc-microbit-classic-gcc</span><br><span class="line">info: get versions for bbc-microbit-classic-gcc</span><br><span class="line">info: download bbc-microbit-classic-gcc@0.2.3 from the public module registry</span><br><span class="line">info: get versions for mbed-gcc</span><br><span class="line">info: download mbed-gcc@0.1.3 from the public module registry</span><br><span class="line"> 144   master  ✔  yt build</span><br><span class="line">info: get versions for microbit</span><br><span class="line">info: download microbit@v2.1.1 from GitHub lancaster-university/microbit</span><br><span class="line">info: get versions for microbit-dal</span><br><span class="line">info: download microbit-dal@v2.1.1 from GitHub lancaster-university/microbit-dal</span><br><span class="line">info: get versions for mbed-classic</span><br><span class="line">info: download mbed-classic@microbit_hfclk+mb6 from GitHub lancaster-university/mbed-classic</span><br><span class="line">info: get versions for ble</span><br><span class="line">info: download ble@v2.5.0+mb3 from GitHub lancaster-university/BLE_API</span><br><span class="line">info: get versions for ble-nrf51822</span><br><span class="line">info: download ble-nrf51822@v2.5.0+mb7 from GitHub lancaster-university/nRF51822</span><br><span class="line">info: get versions for nrf51-sdk</span><br><span class="line">info: download nrf51-sdk@v2.2.0+mb4 from GitHub lancaster-university/nrf51-sdk</span><br><span class="line">info: generate for target: bbc-microbit-classic-gcc 0.2.3 at ....../microbit-samples/yotta_targets/bbc-microbit-classic-gcc</span><br><span class="line">CMake Deprecation Warning at CMakeLists.txt:16 (cmake_policy):</span><br><span class="line">  The OLD behavior for policy CMP0017 will be removed from a future version</span><br><span class="line">  of CMake.</span><br><span class="line"></span><br><span class="line">  The cmake-policies(7) manual explains that the OLD behaviors of all</span><br><span class="line">  policies are deprecated and that a policy should be set to OLD only under</span><br><span class="line">  specific short-term circumstances.  Projects should be ported to the NEW</span><br><span class="line">  behavior and not rely on setting a policy to OLD.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CMake Deprecation Warning at /usr/local/share/cmake-3.17/Modules/CMakeForceCompiler.cmake:75 (message):</span><br><span class="line">  The CMAKE_FORCE_C_COMPILER macro is deprecated.  Instead just set</span><br><span class="line">  CMAKE_C_COMPILER and allow CMake to identify the compiler.</span><br><span class="line">Call Stack (most recent call first):</span><br><span class="line">  ....../microbit-samples/yotta_targets/mbed-gcc/CMake/toolchain.cmake:78 (cmake_force_c_compiler)</span><br><span class="line">  toolchain.cmake:8 (include)</span><br><span class="line">  /usr/local/share/cmake-3.17/Modules/CMakeDetermineSystem.cmake:93 (include)</span><br><span class="line">  CMakeLists.txt:76 (project)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CMake Deprecation Warning at /usr/local/share/cmake-3.17/Modules/CMakeForceCompiler.cmake:89 (message):</span><br><span class="line">  The CMAKE_FORCE_CXX_COMPILER macro is deprecated.  Instead just set</span><br><span class="line">  CMAKE_CXX_COMPILER and allow CMake to identify the compiler.</span><br><span class="line">Call Stack (most recent call first):</span><br><span class="line">  ....../microbit-samples/yotta_targets/mbed-gcc/CMake/toolchain.cmake:79 (cmake_force_cxx_compiler)</span><br><span class="line">  toolchain.cmake:8 (include)</span><br><span class="line">  /usr/local/share/cmake-3.17/Modules/CMakeDetermineSystem.cmake:93 (include)</span><br><span class="line">  CMakeLists.txt:76 (project)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">GCC version is: 6.3.1</span><br><span class="line">-- The ASM compiler identification is GNU</span><br><span class="line">-- Found assembler: /usr/bin/arm-none-eabi-gcc</span><br><span class="line">suppressing warnings from ble-nrf51822</span><br><span class="line">suppressing warnings from nrf51-sdk</span><br><span class="line">suppressing ALL warnings from mbed-classic, ble, ble-nrf51822 &amp; nrf51-sdk</span><br><span class="line">-- Configuring done</span><br><span class="line">-- Generating done</span><br><span class="line">-- Build files have been written to: ....../microbit-samples/build/bbc-microbit-classic-gcc</span><br><span class="line">[112/172] Building CXX object ym/microbit-dal/source/CMakeFiles/microbit-dal.dir/core/MicroBitHeapAllocator.cpp.o</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitHeapAllocator.cpp: In function &#x27;void free(void*)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitHeapAllocator.cpp:342:13: warning: this &#x27;if&#x27; clause does not guard... [-Wmisleading-indentation]</span><br><span class="line">             if (*cb == 0 || *cb &amp; MICROBIT_HEAP_BLOCK_FREE)</span><br><span class="line">             ^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitHeapAllocator.cpp:345:10: note: ...this statement, but the latter is misleadingly indented as if it is guarded by the &#x27;if&#x27;</span><br><span class="line">          *cb |= MICROBIT_HEAP_BLOCK_FREE;</span><br><span class="line">          ^</span><br><span class="line">[120/172] Building CXX object ym/microbit-dal/source/CMakeFiles/microbit-dal.dir/core/MicroBitFiber.cpp.o</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp: In function &#x27;void scheduler_init(EventModel&amp;)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp:189:5: warning: this &#x27;if&#x27; clause does not guard... [-Wmisleading-indentation]</span><br><span class="line">     if (fiber_scheduler_running())</span><br><span class="line">     ^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp:194:2: note: ...this statement, but the latter is misleadingly indented as if it is guarded by the &#x27;if&#x27;</span><br><span class="line">  messageBus = &amp;_messageBus;</span><br><span class="line">  ^~~~~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp: In function &#x27;int fiber_wait_for_event(uint16_t, uint16_t)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp:388:5: warning: this &#x27;if&#x27; clause does not guard... [-Wmisleading-indentation]</span><br><span class="line">     if(ret == MICROBIT_OK)</span><br><span class="line">     ^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/core/MicroBitFiber.cpp:391:2: note: ...this statement, but the latter is misleadingly indented as if it is guarded by the &#x27;if&#x27;</span><br><span class="line">  return ret;</span><br><span class="line">  ^~~~~~</span><br><span class="line">[159/172] Building CXX object ym/microbit-dal/source/CMakeFiles/microbit-dal.dir/bluetooth/MicroBitIOPinService.cpp.o</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp: In member function &#x27;void MicroBitIOPinService::onDataWritten(const GattWriteCallbackParams*)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:179:42: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 io.pin[i].getDigitalValue();</span><br><span class="line">                 ~~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:182:41: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 io.pin[i].getAnalogValue();</span><br><span class="line">                 ~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:199:41: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                io.pin[i].getDigitalValue();</span><br><span class="line">                ~~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:202:40: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                io.pin[i].getAnalogValue();</span><br><span class="line">                ~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:224:43: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 io.pin[pin].setAnalogValue(value);</span><br><span class="line">                 ~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:225:46: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 io.pin[pin].setAnalogPeriodUs(period);</span><br><span class="line">                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:245:51: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                  io.pin[data-&gt;pin].setDigitalValue(data-&gt;value);</span><br><span class="line">                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:247:50: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                  io.pin[data-&gt;pin].setAnalogValue(data-&gt;value == 255 ? 1023 : data-&gt;value &lt;&lt; 2);</span><br><span class="line">                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp: In member function &#x27;void MicroBitIOPinService::updateBLEInputs(bool)&#x27;:</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:136:50: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 value = io.pin[i].getDigitalValue();</span><br><span class="line">                         ~~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">....../microbit-samples/yotta_modules/microbit-dal/source/bluetooth/MicroBitIOPinService.cpp:138:49: warning: array subscript is above array bounds [-Warray-bounds]</span><br><span class="line">                 value = io.pin[i].getAnalogValue() &gt;&gt; 2;</span><br><span class="line">                         ~~~~~~~~~~~~~~~~~~~~~~~~^~</span><br><span class="line">[172/172] Linking CXX executable source/microbit-samples</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(atexit_arm.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(new_opv.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(del_opv.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(del_op.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(new_op.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line">/usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/bin/ld: warning: /usr/lib/gcc/arm-none-eabi/6.3.1/../../../arm-none-eabi/lib/thumb/v6-m/libstdc++_nano.a(new_handler.o) uses 2-byte wchar_t yet the output is to use 4-byte wchar_t; use of wchar_t values across objects may fail</span><br><span class="line"> 145   master  ✘  cp ./build/bbc-microbit-classic-gcc/source/microbit-samples-combined.hex /media/longervision/MICROBIT</span><br><span class="line"> 146   master  ✔  </span><br></pre></td></tr></table></figure>


<h1 id="5-Projects-Field"><a href="#5-Projects-Field" class="headerlink" title="5. Projects Field"></a>5. Projects Field</h1><p>Please refer to <a target="_blank" rel="noopener" href="https://microbit.org/projects/make-it-code-it/?filters=python">micro:bit Official Python Projects</a>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/06/07/Cloud/cluster-rpi-kubernetes-docker-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/06/07/Cloud/cluster-rpi-kubernetes-docker-1/" class="post-title-link" itemprop="url">A Cluster of Raspberry Pis (1) - Configuration</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-06-07 00:00:00" itemprop="dateCreated datePublished" datetime="2020-06-07T00:00:00-07:00">2020-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:21" itemprop="dateModified" datetime="2021-06-05T21:18:21-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <table>
<thead>
<tr>
<th align="center">Profile</th>
<th align="center">Frontal</th>
<th align="center">Top</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/profile.jpg" alt="Profile View"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/front.jpg" alt="Frontal View"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/cloud/rpicluster/top.jpg" alt="Top View"></td>
</tr>
</tbody></table>
<p>Today is Sunday. Vancouver is sunny. It’s been quite a while that I haven’t written anything. It took me a couple of weeks to have my tax reported finally. Hmmm… Anyway, finally, I’ve got some time to talk about  <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Supercomputer">Supercomputer</a>:</p>
<ul>
<li>a cluster of 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s. In my case:<ul>
<li>1 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry Pi 4 Model B Rev 1.4 8GB</a>, installed with <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4 64-bit raspbian kernel</a></li>
<li>1 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry Pi 4 Model B Rev 1.1 4GB</a>, installed with <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry Pi OS (32-bit) with desktop 2020-05-27</a></li>
<li>2 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3 Model B Rev 1.2 1GB</a>, installed with [<br>Raspberry Pi OS (32-bit) with desktop 2020-05-27]</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></li>
<li><a target="_blank" rel="noopener" href="https://kubernetes.io/">Kubernetes</a></li>
</ul>
<p>This is going to be <strong>a series of 3 blogs</strong>.</p>
<h1 id="1-Compare-All-Raspberry-Pi-Variants"><a href="#1-Compare-All-Raspberry-Pi-Variants" class="headerlink" title="1. Compare All Raspberry Pi Variants"></a>1. Compare All <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a> Variants</h1><p>Refer to: <a target="_blank" rel="noopener" href="https://socialcompare.com/en/comparison/raspberrypi-models-comparison">Comparison of All Raspberry Pi Variants</a>.</p>
<h1 id="2-Four-Raspberry-Pis"><a href="#2-Four-Raspberry-Pis" class="headerlink" title="2. Four Raspberry Pis"></a>2. Four <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s</h1><p>Here, please guarantee the 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s are respectively designated with the following hostnames:</p>
<ul>
<li><strong>pi01</strong></li>
<li><strong>pi02</strong></li>
<li><strong>pi03</strong></li>
<li><strong>pi04</strong></li>
</ul>
<h2 id="2-1-pi01-Raspberry-Pi-4-Model-B-Rev-1-4-8GB-with-Raspberry-Pi-OS-32-bit-with-desktop-2020-05-27"><a href="#2-1-pi01-Raspberry-Pi-4-Model-B-Rev-1-4-8GB-with-Raspberry-Pi-OS-32-bit-with-desktop-2020-05-27" class="headerlink" title="2.1 pi01: Raspberry Pi 4 Model B Rev 1.4 8GB with Raspberry Pi OS (32-bit) with desktop 2020-05-27"></a>2.1 pi01: <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry Pi 4 Model B Rev 1.4 8GB</a> with <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry Pi OS (32-bit) with desktop 2020-05-27</a></h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ hostname</span><br><span class="line">pi01</span><br><span class="line">pi@pi01:~ $ uname -a</span><br><span class="line">Linux pi01 4.19.118-v7l+ #1311 SMP Mon Apr 27 14:26:42 BST 2020 armv7l GNU/Linux</span><br><span class="line">pi@pi01:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi01:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:        8104404 kB</span><br><span class="line">MemFree:         7275484 kB</span><br><span class="line">MemAvailable:    7712212 kB</span><br><span class="line">Buffers:           41552 kB</span><br><span class="line">Cached:           592328 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           326536 kB</span><br><span class="line">Inactive:         373352 kB</span><br><span class="line">Active(anon):      65820 kB</span><br><span class="line">Inactive(anon):     9980 kB</span><br><span class="line">Active(file):     260716 kB</span><br><span class="line">Inactive(file):   363372 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">HighTotal:       7405568 kB</span><br><span class="line">HighFree:        6735192 kB</span><br><span class="line">LowTotal:         698836 kB</span><br><span class="line">LowFree:          540292 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                 0 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         66020 kB</span><br><span class="line">Mapped:            70740 kB</span><br><span class="line">Shmem:             11760 kB</span><br><span class="line">Slab:              68352 kB</span><br><span class="line">SReclaimable:      35736 kB</span><br><span class="line">SUnreclaim:        32616 kB</span><br><span class="line">KernelStack:        1320 kB</span><br><span class="line">PageTables:         1964 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:     4154596 kB</span><br><span class="line">Committed_AS:     498204 kB</span><br><span class="line">VmallocTotal:     245760 kB</span><br><span class="line">VmallocUsed:           0 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              656 kB</span><br><span class="line">CmaTotal:         262144 kB</span><br><span class="line">CmaFree:          223228 kB</span><br><span class="line">pi@pi01:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: d03114</span><br><span class="line">Serial		: 10000000bc6e6e05</span><br><span class="line">Model		: Raspberry Pi 4 Model B Rev 1.4</span><br></pre></td></tr></table></figure>


<p>In fact, at the very beginning, I used to try <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4 64-bit raspbian kernel</a>, as following:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ hostname</span><br><span class="line">pi01</span><br><span class="line">pi@pi01:~ $ uname -a</span><br><span class="line">Linux pi01 5.4.44-v8+ #1320 SMP PREEMPT Wed Jun 3 16:20:05 BST 2020 aarch64 GNU/Linux</span><br><span class="line">pi@pi01:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi01:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:        7950652 kB</span><br><span class="line">MemFree:         7749820 kB</span><br><span class="line">MemAvailable:    7770884 kB</span><br><span class="line">Buffers:           16092 kB</span><br><span class="line">Cached:           105460 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:            91600 kB</span><br><span class="line">Inactive:          47532 kB</span><br><span class="line">Active(anon):      17832 kB</span><br><span class="line">Inactive(anon):     8404 kB</span><br><span class="line">Active(file):      73768 kB</span><br><span class="line">Inactive(file):    39128 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                44 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         17628 kB</span><br><span class="line">Mapped:            26968 kB</span><br><span class="line">Shmem:              8652 kB</span><br><span class="line">KReclaimable:      16632 kB</span><br><span class="line">Slab:              35720 kB</span><br><span class="line">SReclaimable:      16632 kB</span><br><span class="line">SUnreclaim:        19088 kB</span><br><span class="line">KernelStack:        2304 kB</span><br><span class="line">PageTables:         1284 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:     4077720 kB</span><br><span class="line">Committed_AS:     181984 kB</span><br><span class="line">VmallocTotal:   262930368 kB</span><br><span class="line">VmallocUsed:        7680 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              688 kB</span><br><span class="line">CmaTotal:         262144 kB</span><br><span class="line">CmaFree:          256244 kB</span><br><span class="line">pi@pi01:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: fp asimd evtstrm crc32 cpuid</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: fp asimd evtstrm crc32 cpuid</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: fp asimd evtstrm crc32 cpuid</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: fp asimd evtstrm crc32 cpuid</span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 8</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: d03114</span><br><span class="line">Serial		: 10000000bc6e6e05</span><br><span class="line">Model		: Raspberry Pi 4 Model B Rev 1.4</span><br></pre></td></tr></table></figure>


<p><span style="color:red">However, there are still quite a lot of issues about <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4 64-bit raspbian kernel</a>, I have to downgrade the system from <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/forums/viewtopic.php?t=250730">Pi4 64-bit raspbian kernel</a> to <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry Pi OS (32-bit) with desktop 2020-05-27</a> in the end.</span></p>
<h2 id="2-2-pi02-Raspberry-Pi-4-Model-B-Rev-1-1-4GB-with-Raspberry-Pi-OS-32-bit-with-desktop-2020-05-27"><a href="#2-2-pi02-Raspberry-Pi-4-Model-B-Rev-1-1-4GB-with-Raspberry-Pi-OS-32-bit-with-desktop-2020-05-27" class="headerlink" title="2.2 pi02: Raspberry Pi 4 Model B Rev 1.1 4GB with Raspberry Pi OS (32-bit) with desktop 2020-05-27"></a>2.2 pi02: <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry Pi 4 Model B Rev 1.1 4GB</a> with <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry Pi OS (32-bit) with desktop 2020-05-27</a></h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ hostname</span><br><span class="line">pi02</span><br><span class="line">pi@pi02:~ $ uname -a</span><br><span class="line">Linux pi02 4.19.118-v7l+ #1311 SMP Mon Apr 27 14:26:42 BST 2020 armv7l GNU/Linux</span><br><span class="line">pi@pi02:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi02:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:        3999744 kB</span><br><span class="line">MemFree:         3556984 kB</span><br><span class="line">MemAvailable:    3761604 kB</span><br><span class="line">Buffers:           42296 kB</span><br><span class="line">Cached:           270688 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           196952 kB</span><br><span class="line">Inactive:         133824 kB</span><br><span class="line">Active(anon):      18036 kB</span><br><span class="line">Inactive(anon):     8376 kB</span><br><span class="line">Active(file):     178916 kB</span><br><span class="line">Inactive(file):   125448 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">HighTotal:       3264512 kB</span><br><span class="line">HighFree:        2965564 kB</span><br><span class="line">LowTotal:         735232 kB</span><br><span class="line">LowFree:          591420 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                40 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         17848 kB</span><br><span class="line">Mapped:            26708 kB</span><br><span class="line">Shmem:              8624 kB</span><br><span class="line">Slab:              54128 kB</span><br><span class="line">SReclaimable:      27336 kB</span><br><span class="line">SUnreclaim:        26792 kB</span><br><span class="line">KernelStack:        1024 kB</span><br><span class="line">PageTables:         1172 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:     2102268 kB</span><br><span class="line">Committed_AS:     184320 kB</span><br><span class="line">VmallocTotal:     245760 kB</span><br><span class="line">VmallocUsed:           0 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              656 kB</span><br><span class="line">CmaTotal:         262144 kB</span><br><span class="line">CmaFree:          223228 kB</span><br><span class="line">pi@pi02:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">model name	: ARMv7 Processor rev 3 (v7l)</span><br><span class="line">BogoMIPS	: 108.00</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd08</span><br><span class="line">CPU revision	: 3</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: c03111</span><br><span class="line">Serial		: 100000006c0c9b01</span><br><span class="line">Model		: Raspberry Pi 4 Model B Rev 1.1</span><br></pre></td></tr></table></figure>


<h2 id="2-3-pi03-Raspberry-Pi-3-Model-B-Rev-1-2-1GB-with-Raspberry-Pi-OS-32-bit-with-desktop-2020-05-27"><a href="#2-3-pi03-Raspberry-Pi-3-Model-B-Rev-1-2-1GB-with-Raspberry-Pi-OS-32-bit-with-desktop-2020-05-27" class="headerlink" title="2.3 pi03: Raspberry Pi 3 Model B Rev 1.2 1GB with Raspberry Pi OS (32-bit) with desktop 2020-05-27"></a>2.3 pi03: <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3 Model B Rev 1.2 1GB</a> with <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry Pi OS (32-bit) with desktop 2020-05-27</a></h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ hostname</span><br><span class="line">pi03</span><br><span class="line">pi@pi03:~ $ uname -a</span><br><span class="line">Linux pi03 4.19.118-v7+ #1311 SMP Mon Apr 27 14:21:24 BST 2020 armv7l GNU/Linux</span><br><span class="line">pi@pi03:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi03:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:         895500 kB</span><br><span class="line">MemFree:          375644 kB</span><br><span class="line">MemAvailable:     709712 kB</span><br><span class="line">Buffers:           54464 kB</span><br><span class="line">Cached:           317028 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           244084 kB</span><br><span class="line">Inactive:         197180 kB</span><br><span class="line">Active(anon):      70032 kB</span><br><span class="line">Inactive(anon):     6488 kB</span><br><span class="line">Active(file):     174052 kB</span><br><span class="line">Inactive(file):   190692 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                20 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         69816 kB</span><br><span class="line">Mapped:            80468 kB</span><br><span class="line">Shmem:              6752 kB</span><br><span class="line">Slab:              59000 kB</span><br><span class="line">SReclaimable:      28552 kB</span><br><span class="line">SUnreclaim:        30448 kB</span><br><span class="line">KernelStack:        1600 kB</span><br><span class="line">PageTables:         3252 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:      550144 kB</span><br><span class="line">Committed_AS:     837224 kB</span><br><span class="line">VmallocTotal:    1163264 kB</span><br><span class="line">VmallocUsed:           0 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              640 kB</span><br><span class="line">CmaTotal:           8192 kB</span><br><span class="line">CmaFree:            6280 kB</span><br><span class="line">pi@pi03:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: a02082</span><br><span class="line">Serial		: 000000009fcc6a22</span><br><span class="line">Model		: Raspberry Pi 3 Model B Rev 1.2</span><br></pre></td></tr></table></figure>


<h2 id="2-4-pi04-Raspberry-Pi-3-Model-B-Rev-1-2-1GB-with-Raspberry-Pi-OS-32-bit-with-desktop-2020-05-27"><a href="#2-4-pi04-Raspberry-Pi-3-Model-B-Rev-1-2-1GB-with-Raspberry-Pi-OS-32-bit-with-desktop-2020-05-27" class="headerlink" title="2.4 pi04: Raspberry Pi 3 Model B Rev 1.2 1GB with Raspberry Pi OS (32-bit) with desktop 2020-05-27"></a>2.4 pi04: <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3 Model B Rev 1.2 1GB</a> with <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/downloads/raspberry-pi-os/">Raspberry Pi OS (32-bit) with desktop 2020-05-27</a></h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ hostname</span><br><span class="line">pi04</span><br><span class="line">pi@pi04:~ $ uname -a</span><br><span class="line">Linux pi04 4.19.118-v7+ #1311 SMP Mon Apr 27 14:21:24 BST 2020 armv7l GNU/Linux</span><br><span class="line">pi@pi04:~ $ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Raspbian</span><br><span class="line">Description:	Raspbian GNU/Linux 10 (buster)</span><br><span class="line">Release:	10</span><br><span class="line">Codename:	buster</span><br><span class="line">pi@pi04:~ $ cat /proc/meminfo</span><br><span class="line">MemTotal:         895500 kB</span><br><span class="line">MemFree:          417612 kB</span><br><span class="line">MemAvailable:     727524 kB</span><br><span class="line">Buffers:           50624 kB</span><br><span class="line">Cached:           296456 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           225904 kB</span><br><span class="line">Inactive:         174124 kB</span><br><span class="line">Active(anon):      53244 kB</span><br><span class="line">Inactive(anon):     5968 kB</span><br><span class="line">Active(file):     172660 kB</span><br><span class="line">Inactive(file):   168156 kB</span><br><span class="line">Unevictable:          16 kB</span><br><span class="line">Mlocked:              16 kB</span><br><span class="line">SwapTotal:        102396 kB</span><br><span class="line">SwapFree:         102396 kB</span><br><span class="line">Dirty:                16 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         52960 kB</span><br><span class="line">Mapped:            65096 kB</span><br><span class="line">Shmem:              6240 kB</span><br><span class="line">Slab:              57688 kB</span><br><span class="line">SReclaimable:      28096 kB</span><br><span class="line">SUnreclaim:        29592 kB</span><br><span class="line">KernelStack:        1464 kB</span><br><span class="line">PageTables:         2724 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:      550144 kB</span><br><span class="line">Committed_AS:     715652 kB</span><br><span class="line">VmallocTotal:    1163264 kB</span><br><span class="line">VmallocUsed:           0 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:              640 kB</span><br><span class="line">CmaTotal:           8192 kB</span><br><span class="line">CmaFree:            6152 kB</span><br><span class="line">pi@pi04:~ $ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">model name	: ARMv7 Processor rev 4 (v7l)</span><br><span class="line">BogoMIPS	: 38.40</span><br><span class="line">Features	: half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32 </span><br><span class="line">CPU implementer	: 0x41</span><br><span class="line">CPU architecture: 7</span><br><span class="line">CPU variant	: 0x0</span><br><span class="line">CPU part	: 0xd03</span><br><span class="line">CPU revision	: 4</span><br><span class="line"></span><br><span class="line">Hardware	: BCM2835</span><br><span class="line">Revision	: a22082</span><br><span class="line">Serial		: 000000003fc1b876</span><br><span class="line">Model		: Raspberry Pi 3 Model B Rev 1.2</span><br></pre></td></tr></table></figure>


<h1 id="3-Raspberry-Pi-Cluster-Configuration"><a href="#3-Raspberry-Pi-Cluster-Configuration" class="headerlink" title="3. Raspberry Pi Cluster Configuration"></a>3. <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a> Cluster Configuration</h1><p>This section heavily refers to the following blogs:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://magpi.raspberrypi.org/articles/build-a-raspberry-pi-cluster-computer">Build a Raspberry Pi cluster computer</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.alexellis.io/build-your-own-bare-metal-arm-cluster/">Build your own bare-metal ARM cluster</a></li>
<li><a target="_blank" rel="noopener" href="https://thenewstack.io/installing-mpi-python-raspberry-pi-cluster-runs-docker/">Installing MPI for Python on a Raspberry Pi Cluster</a></li>
<li><a target="_blank" rel="noopener" href="https://www.instructables.com/id/How-to-Make-a-Raspberry-Pi-SuperComputer/">Instructables: How to Make a Raspberry Pi SuperComputer!</a></li>
</ul>
<p>Actually, the cluster can certainly be arbitrarily configured as you wish. A typical configuration is <strong>1-master-3-workers</strong>, but which one should be the <strong>master</strong>? Is it really a good idea to <strong>ALWAYS</strong> designate the <strong>MOST powerful</strong> one as the <strong>master</strong>? Particularly, in my case, 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s are of different versions, so that they are of different computing capability.</p>
<h2 id="3-1-Configure-Hostfile"><a href="#3-1-Configure-Hostfile" class="headerlink" title="3.1 Configure Hostfile"></a>3.1 Configure Hostfile</h2><p>It’s always a good idea to create a <strong>hostfile</strong> on the <strong>master</strong> node. However, as reasons mentioned above, there is <strong>NO</strong> priority among <strong>ALL</strong> nodes in my case, I configured <strong>the hostfile</strong> for <strong>ALL</strong> 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s.</p>
<table>
<thead>
<tr>
<th>node</th>
<th align="center">hostfile</th>
</tr>
</thead>
<tbody><tr>
<td>pi01</td>
<td align="center">192.168.1.253   slots=4 <br> 192.168.1.251   slots=4 <br> 192.168.1.249   slots=4 <br> 192.168.1.247   slots=4</td>
</tr>
<tr>
<td>pi02</td>
<td align="center">192.168.1.251   slots=4 <br> 192.168.1.253   slots=4 <br> 192.168.1.249   slots=4 <br> 192.168.1.247   slots=4</td>
</tr>
<tr>
<td>pi03</td>
<td align="center">192.168.1.249   slots=4 <br> 192.168.1.253   slots=4 <br> 192.168.1.251   slots=4 <br> 192.168.1.247   slots=4</td>
</tr>
<tr>
<td>pi04</td>
<td align="center">192.168.1.247   slots=4 <br> 192.168.1.253   slots=4 <br> 192.168.1.251   slots=4 <br> 192.168.1.249   slots=4</td>
</tr>
</tbody></table>
<h2 id="3-2-SSH-KEYGEN"><a href="#3-2-SSH-KEYGEN" class="headerlink" title="3.2 SSH-KEYGEN"></a>3.2 SSH-KEYGEN</h2><p>In order to test multiple nodes across the cluster, we need to generate SSH keys to avoid inputting password for logging into the other nodes all the time. In such, for each <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>, you’ll have to generate a SSH key by <code>ssh-keygen -t rsa</code>, and push this generated key using command <code>ssh-copy-id</code> onto the other 3 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s. Finally, for a cluster of 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s, there are 3 authorized keys (for these other 3 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s) stored in file <code>/home/pi/.ssh/authorized_keys</code> on each of the 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s.</p>
<h1 id="4-Cluster-Test"><a href="#4-Cluster-Test" class="headerlink" title="4. Cluster Test"></a>4. Cluster Test</h1><h2 id="4-1-Command-mpiexec"><a href="#4-1-Command-mpiexec" class="headerlink" title="4.1 Command mpiexec"></a>4.1 Command mpiexec</h2><h3 id="4-1-1-Argument-hostfile-and-n"><a href="#4-1-1-Argument-hostfile-and-n" class="headerlink" title="4.1.1 Argument: -hostfile and -n"></a>4.1.1 Argument: -hostfile and -n</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -hostfile hostfile -n 16 hostname </span><br><span class="line">pi01</span><br><span class="line">pi01</span><br><span class="line">pi01</span><br><span class="line">pi01</span><br><span class="line">pi02</span><br><span class="line">pi02</span><br><span class="line">pi02</span><br><span class="line">pi03</span><br><span class="line">pi03</span><br><span class="line">pi03</span><br><span class="line">pi02</span><br><span class="line">pi03</span><br><span class="line">pi04</span><br><span class="line">pi04</span><br><span class="line">pi04</span><br><span class="line">pi04</span><br></pre></td></tr></table></figure>

<p>For a cluster of 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s, there will be 4*4=16 CPUs in total. Therefore, the maximum number to specify for argument <strong>-n</strong> will be 16. Otherwise, you’ll meet the following <strong>ERROR</strong> message:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -hostfile hostfile -n 20 hostname </span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line">There are not enough slots available in the system to satisfy the 20 slots</span><br><span class="line">that were requested by the application:</span><br><span class="line">  hostname</span><br><span class="line"></span><br><span class="line">Either request fewer slots for your application, or make more slots available</span><br><span class="line">for use.</span><br><span class="line">--------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>


<h3 id="4-1-2-Execute-Python-Example-mpi4py-helloworld-py"><a href="#4-1-2-Execute-Python-Example-mpi4py-helloworld-py" class="headerlink" title="4.1.2 Execute Python Example mpi4py helloworld.py"></a>4.1.2 Execute Python Example <a target="_blank" rel="noopener" href="https://bitbucket.org/mpi4py/mpi4py/src/master/demo/helloworld.py">mpi4py helloworld.py</a></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -hostfile hostfile -n 16 python Downloads/helloworld.py </span><br><span class="line">Hello, World! I am process 1 of 16 on pi01.</span><br><span class="line">Hello, World! I am process 5 of 16 on pi02.</span><br><span class="line">Hello, World! I am process 6 of 16 on pi02.</span><br><span class="line">Hello, World! I am process 7 of 16 on pi02.</span><br><span class="line">Hello, World! I am process 4 of 16 on pi02.</span><br><span class="line">Hello, World! I am process 15 of 16 on pi04.</span><br><span class="line">Hello, World! I am process 12 of 16 on pi04.</span><br><span class="line">Hello, World! I am process 13 of 16 on pi04.</span><br><span class="line">Hello, World! I am process 14 of 16 on pi04.</span><br><span class="line">Hello, World! I am process 2 of 16 on pi01.</span><br><span class="line">Hello, World! I am process 0 of 16 on pi01.</span><br><span class="line">Hello, World! I am process 3 of 16 on pi01.</span><br><span class="line">Hello, World! I am process 9 of 16 on pi03.</span><br><span class="line">Hello, World! I am process 10 of 16 on pi03.</span><br><span class="line">Hello, World! I am process 11 of 16 on pi03.</span><br><span class="line">Hello, World! I am process 8 of 16 on pi03.</span><br></pre></td></tr></table></figure>


<h2 id="4-2-mpi4py-examples"><a href="#4-2-mpi4py-examples" class="headerlink" title="4.2 mpi4py-examples"></a>4.2 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples">mpi4py-examples</a></h2><p>Run all examples with argument <code>--hostfile ~/hostfile</code>, namely, 16 cores in a row.</p>
<h3 id="4-2-1-mpi4py-examples-01-hello-world"><a href="#4-2-1-mpi4py-examples-01-hello-world" class="headerlink" title="4.2.1 mpi4py-examples 01-hello-world"></a>4.2.1 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/01-hello-world">mpi4py-examples 01-hello-world</a></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --hostfile ~/hostfile ./01-hello-world </span><br><span class="line">Hello! I&#x27;m rank 1 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 2 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 3 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 0 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 6 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 7 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 4 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 5 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 12 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 10 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 11 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 13 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 9 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 14 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 8 from 16 running in total...</span><br><span class="line">Hello! I&#x27;m rank 15 from 16 running in total...</span><br></pre></td></tr></table></figure>


<h3 id="4-2-2-mpi4py-examples-02-broadcast"><a href="#4-2-2-mpi4py-examples-02-broadcast" class="headerlink" title="4.2.2 mpi4py-examples 02-broadcast"></a>4.2.2 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/02-broadcast">mpi4py-examples 02-broadcast</a></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --hostfile ~/hostfile ./02-broadcast </span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">  Running on 16 cores</span><br><span class="line"> ------------------------------------------------------------------------------</span><br><span class="line"> [00] [0. 1. 2. 3. 4.]</span><br><span class="line">[04] [0. 1. 2. 3. 4.]</span><br><span class="line">[03] [0. 1. 2. 3. 4.]</span><br><span class="line">[05] [0. 1. 2. 3. 4.]</span><br><span class="line">[07] [0. 1. 2. 3. 4.]</span><br><span class="line">[01] [0. 1. 2. 3. 4.]</span><br><span class="line">[15] [0. 1. 2. 3. 4.]</span><br><span class="line">[13] [0. 1. 2. 3. 4.]</span><br><span class="line">[12] [0. 1. 2. 3. 4.]</span><br><span class="line">[11] [0. 1. 2. 3. 4.]</span><br><span class="line">[08] [0. 1. 2. 3. 4.]</span><br><span class="line">[09] [0. 1. 2. 3. 4.]</span><br><span class="line">[02] [0. 1. 2. 3. 4.]</span><br><span class="line">[10] [0. 1. 2. 3. 4.]</span><br><span class="line">[06] [0. 1. 2. 3. 4.]</span><br><span class="line">[14] [0. 1. 2. 3. 4.]</span><br></pre></td></tr></table></figure>


<h3 id="4-2-3-mpi4py-examples-03-scatter-gather"><a href="#4-2-3-mpi4py-examples-03-scatter-gather" class="headerlink" title="4.2.3 mpi4py-examples 03-scatter-gather"></a>4.2.3 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/03-scatter-gather">mpi4py-examples 03-scatter-gather</a></h3><p><strong><span style="color:red">Sometimes, without specifying the parameter btl_tcp_if_include, the running program will hang:</span></strong></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --np 16 --hostfile ~/hostfile  03-scatter-gather</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">  Running on 16 cores</span><br><span class="line"> ------------------------------------------------------------------------------</span><br><span class="line"> After Scatter:</span><br><span class="line"> [0] [0. 1. 2. 3.]</span><br><span class="line">[1] [4. 5. 6. 7.]</span><br><span class="line">[pi03][[1597,1],8][btl_tcp_endpoint.c:626:mca_btl_tcp_endpoint_recv_connect_ack] received unexpected process identifier [[1597,1],10]</span><br><span class="line">[pi01][[1597,1],0][btl_tcp_endpoint.c:626:mca_btl_tcp_endpoint_recv_connect_ack] received unexpected process identifier [[1597,1],3]</span><br><span class="line">[2] [ 8.  9. 10. 11.]</span><br><span class="line">^C^Z</span><br><span class="line">[1]+  Stopped                 mpirun --np 16 --hostfile ~/hostfile 03-scatter-gather</span><br></pre></td></tr></table></figure>

<p><strong><span style="color:red">Please refer to the explanation <a target="_blank" rel="noopener" href="https://github.com/open-mpi/ompi/issues/6240">TCP: unexpected process identifier in connect_ack</a></span></strong>. Now, let’s specify the parameter as <code>--mca btl_tcp_if_include &quot;192.168.1.251/24,192.168.1.249/24,192.168.1.247/24&quot;</code>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --np 16 --hostfile ~/hostfile --mca btl_tcp_if_include &quot;192.168.1.251/24,192.168.1.249/24,192.168.1.247/24&quot;  03-scatter-gather</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">  Running on 16 cores</span><br><span class="line"> ------------------------------------------------------------------------------</span><br><span class="line"> After Scatter:</span><br><span class="line"> [0] [0. 1. 2. 3.]</span><br><span class="line">[1] [4. 5. 6. 7.]</span><br><span class="line">[2] [ 8.  9. 10. 11.]</span><br><span class="line">[3] [12. 13. 14. 15.]</span><br><span class="line">[4] [16. 17. 18. 19.]</span><br><span class="line">[5] [20. 21. 22. 23.]</span><br><span class="line">[6] [24. 25. 26. 27.]</span><br><span class="line">[7] [28. 29. 30. 31.]</span><br><span class="line">[8] [32. 33. 34. 35.]</span><br><span class="line">[9] [36. 37. 38. 39.]</span><br><span class="line">[10] [40. 41. 42. 43.]</span><br><span class="line">[11] [44. 45. 46. 47.]</span><br><span class="line">[12] [48. 49. 50. 51.]</span><br><span class="line">[13] [52. 53. 54. 55.]</span><br><span class="line">[14] [56. 57. 58. 59.]</span><br><span class="line">[15] [60. 61. 62. 63.]</span><br><span class="line">After Allgather:</span><br><span class="line"> [0] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[1] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[2] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[3] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[4] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[5] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[6] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[7] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[8] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[9] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[10] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[11] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[12] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[13] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[14] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br><span class="line">[15] [  0.   2.   4.   6.   8.  10.  12.  14.  16.  18.  20.  22.  24.  26.</span><br><span class="line">  28.  30.  32.  34.  36.  38.  40.  42.  44.  46.  48.  50.  52.  54.</span><br><span class="line">  56.  58.  60.  62.  64.  66.  68.  70.  72.  74.  76.  78.  80.  82.</span><br><span class="line">  84.  86.  88.  90.  92.  94.  96.  98. 100. 102. 104. 106. 108. 110.</span><br><span class="line"> 112. 114. 116. 118. 120. 122. 124. 126.]</span><br></pre></td></tr></table></figure>


<h3 id="4-2-4-mpi4py-examples-04-image-spectrogram"><a href="#4-2-4-mpi4py-examples-04-image-spectrogram" class="headerlink" title="4.2.4 mpi4py-examples 04-image-spectrogram"></a>4.2.4 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/04-image-spectrogram">mpi4py-examples 04-image-spectrogram</a></h3><h3 id="4-2-5-mpi4py-examples-05-pseudo-whitening"><a href="#4-2-5-mpi4py-examples-05-pseudo-whitening" class="headerlink" title="4.2.5 mpi4py-examples 05-pseudo-whitening"></a>4.2.5 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/05-pseudo-whitening">mpi4py-examples 05-pseudo-whitening</a></h3><h3 id="4-2-6-NULL"><a href="#4-2-6-NULL" class="headerlink" title="4.2.6 NULL"></a>4.2.6 NULL</h3><h3 id="4-2-7-mpi4py-examples-07-matrix-vector-product"><a href="#4-2-7-mpi4py-examples-07-matrix-vector-product" class="headerlink" title="4.2.7 mpi4py-examples 07-matrix-vector-product"></a>4.2.7 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/07-matrix-vector-product">mpi4py-examples 07-matrix-vector-product</a></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-example $ mpirun --np 16 --hostfile ~/hostfile --mca btl_tcp_if_include &quot;192.168.1.251/24,192.168.1.249/24,192.168.1.247/24&quot;  07-matrix-vector-product</span><br><span class="line">============================================================================</span><br><span class="line">  Running 16 parallel MPI processes</span><br><span class="line">  20 iterations of size 10000 in  1.14s: 17.50 iterations per second</span><br><span class="line"> ============================================================================</span><br></pre></td></tr></table></figure>



<h3 id="4-2-8-mpi4py-examples-08-matrix-matrix-product-py"><a href="#4-2-8-mpi4py-examples-08-matrix-matrix-product-py" class="headerlink" title="4.2.8 mpi4py-examples 08-matrix-matrix-product.py"></a>4.2.8 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/08-matrix-matrix-product.py">mpi4py-examples 08-matrix-matrix-product.py</a></h3><h3 id="4-2-9-mpi4py-examples-09-task-pull-py"><a href="#4-2-9-mpi4py-examples-09-task-pull-py" class="headerlink" title="4.2.9 mpi4py-examples 09-task-pull.py"></a>4.2.9 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/09-task-pull.py">mpi4py-examples 09-task-pull.py</a></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~/Downloads/mpi4py-examples $ mpirun --hostfile ~/hostfile python ./09-task-pull.py </span><br><span class="line">Master starting with 15 workers</span><br><span class="line">I am a worker with rank 1 on pi01.</span><br><span class="line">I am a worker with rank 2 on pi01.</span><br><span class="line">I am a worker with rank 3 on pi01.</span><br><span class="line">I am a worker with rank 4 on pi02.</span><br><span class="line">I am a worker with rank 5 on pi02.</span><br><span class="line">I am a worker with rank 6 on pi02.</span><br><span class="line">I am a worker with rank 7 on pi02.</span><br><span class="line">Sending task 0 to worker 2</span><br><span class="line">Sending task 1 to worker 1</span><br><span class="line">Sending task 2 to worker 3</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 3 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 4 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 5 to worker 1</span><br><span class="line">Sending task 6 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 7 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 8 to worker 1</span><br><span class="line">Sending task 9 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 10 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 11 to worker 1</span><br><span class="line">Sending task 12 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 13 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 14 to worker 1</span><br><span class="line">Sending task 15 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 16 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 17 to worker 1</span><br><span class="line">Sending task 18 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 19 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Sending task 20 to worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 21 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 22 to worker 3</span><br><span class="line">Got data from worker 1</span><br><span class="line">Sending task 23 to worker 1</span><br><span class="line">Got data from worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 24 to worker 2</span><br><span class="line">Sending task 25 to worker 3</span><br><span class="line">Got data from worker 2</span><br><span class="line">Got data from worker 1</span><br><span class="line">Sending task 26 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 27 to worker 3</span><br><span class="line">Got data from worker 2</span><br><span class="line">Sending task 28 to worker 1</span><br><span class="line">Sending task 29 to worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Sending task 30 to worker 3</span><br><span class="line">Got data from worker 2</span><br><span class="line">Got data from worker 1</span><br><span class="line">Sending task 31 to worker 2</span><br><span class="line">Got data from worker 2</span><br><span class="line">Got data from worker 3</span><br><span class="line">Worker 2 exited.</span><br><span class="line">Worker 1 exited.</span><br><span class="line">Worker 3 exited.</span><br><span class="line">I am a worker with rank 15 on pi04.</span><br><span class="line">I am a worker with rank 12 on pi04.</span><br><span class="line">I am a worker with rank 8 on pi03.</span><br><span class="line">I am a worker with rank 13 on pi04.</span><br><span class="line">I am a worker with rank 9 on pi03.</span><br><span class="line">I am a worker with rank 14 on pi04.</span><br><span class="line">I am a worker with rank 10 on pi03.</span><br><span class="line">I am a worker with rank 11 on pi03.</span><br><span class="line">Worker 5 exited.</span><br><span class="line">Worker 4 exited.</span><br><span class="line">Worker 6 exited.</span><br><span class="line">Worker 7 exited.</span><br><span class="line">Worker 15 exited.</span><br><span class="line">Worker 8 exited.</span><br><span class="line">Worker 9 exited.</span><br><span class="line">Worker 10 exited.</span><br><span class="line">Worker 11 exited.</span><br><span class="line">Worker 12 exited.</span><br><span class="line">Worker 13 exited.</span><br><span class="line">Worker 14 exited.</span><br><span class="line">Master finishing</span><br></pre></td></tr></table></figure>


<h3 id="4-2-10-mpi4py-examples-10-task-pull-spawn-py"><a href="#4-2-10-mpi4py-examples-10-task-pull-spawn-py" class="headerlink" title="4.2.10 mpi4py-examples 10-task-pull-spawn.py"></a>4.2.10 <a target="_blank" rel="noopener" href="https://github.com/jbornschein/mpi4py-examples/blob/master/10-task-pull-spawn.py">mpi4py-examples 10-task-pull-spawn.py</a></h3><h2 id="4-3-Example-mpi4py-prime-py"><a href="#4-3-Example-mpi4py-prime-py" class="headerlink" title="4.3 Example mpi4py prime.py"></a>4.3 Example <a target="_blank" rel="noopener" href="https://github.com/mrpjevans/cluster-prime/blob/master/prime.py">mpi4py prime.py</a></h2><h3 id="4-3-1-Computing-Capability-For-Each-CPU"><a href="#4-3-1-Computing-Capability-For-Each-CPU" class="headerlink" title="4.3.1 Computing Capability For Each CPU"></a>4.3.1 Computing Capability For Each CPU</h3><p>Here, we’re taking <a target="_blank" rel="noopener" href="https://github.com/mrpjevans/cluster-prime/blob/master/prime.py">mpi4py prime.py</a> as our example.</p>
<table style="text-align:center;">
  <tr>
    <td>Hostname</td>
    <td>Computing Time</td>
  </tr>
  <tr>
    <td>pi01</td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -n 1 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 1</span><br><span class="line">Time elasped: 214.86 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
  <tr>
    <td>pi02</td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ mpiexec -n 1 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 1</span><br><span class="line">Time elasped: 212.2 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
    <tr>
    <td>pi03</td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ mpiexec -n 1 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 1</span><br><span class="line">Time elasped: 665.24 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
  <tr>
    <td>pi04</td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ mpiexec -n 1 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 1</span><br><span class="line">Time elasped: 684.64 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
</table>


<p><span style="color:red"> Clearly, the computing capability of each CPU on <strong>pi01/pi02</strong> is roughly 3 times faster than the CPU on <strong>pi03/pi04</strong>, which can be easily estimated from the parameter <strong>BogoMIPS</strong>: </span><br>$$ 108.00 (pi01/pi02) / 38.40 (pi03/pi04) \approx 3 $$</p>
<h3 id="4-3-2-Computing-Capability-For-Each-Raspberry-Pi"><a href="#4-3-2-Computing-Capability-For-Each-Raspberry-Pi" class="headerlink" title="4.3.2 Computing Capability For Each Raspberry Pi"></a>4.3.2 Computing Capability For Each <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a></h3><p>Clearly, on each of my <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>, including</p>
<ul>
<li>pi01: <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry Pi 4 Model B Rev 1.4 8GB</a></li>
<li>pi02: <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry Pi 4 Model B Rev 1.1 4GB</a></li>
<li>pi03 &amp; pi04: <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3 Model B Rev 1.2 1GB</a></li>
</ul>
<p>there are 4 CPUs. So, let’s take a look at the result when specify argument <code>-n 4</code>.</p>
<table style="text-align:center;">
  <tr>
    <td>Master</td>
    <td>Worker</td>
    <td>Computing Time</td>
  </tr>
  <tr>
    <td>pi01</td>
    <td>
      pi02<br>
      pi03<br>
      pi04
    </td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -n 4 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 4</span><br><span class="line">Time elasped: 50.92 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
  <tr>
    <td>pi02</td>
    <td>
      pi01<br>
      pi03<br>
      pi04
    </td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi02:~ $ mpiexec -n 4 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 4</span><br><span class="line">Time elasped: 52.83 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
  <tr>
    <td>pi03</td>
    <td>
      pi01<br>
      pi02<br>
      pi04
    </td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi03:~ $ mpiexec -n 4 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 4</span><br><span class="line">Time elasped: 171.81 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
  <tr>
    <td>pi04</td>
    <td>
      pi01<br>
      pi02<br>
      pi03
    </td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi04:~ $ mpiexec -n 4 python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 4</span><br><span class="line">Time elasped: 171.7 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
</table>


<!-- <span style="color:red"> It looks no matter which [Raspberry Pi] is designated as **master**, the computing time keeps **roughly the same**.</span> -->

<p><span style="color:red">Clearly, to make full use of 4 CPUs <code>-n 4</code> is roughly 4 times faster than just to use 1 CPU <code>-n 1</code>.</span>  </p>
<h3 id="4-3-3-Computing-Capability-For-The-cluster"><a href="#4-3-3-Computing-Capability-For-The-cluster" class="headerlink" title="4.3.3 Computing Capability For The cluster"></a>4.3.3 Computing Capability For The cluster</h3><p>I carried out 2 experiments:</p>
<ul>
<li><strong>Experiment 1</strong> is done on 4 nodes:<ul>
<li>1 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry Pi 4 Model B Rev 1.4 8GB</a></li>
<li>1 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry Pi 4 Model B Rev 1.1 4GB</a></li>
<li>2 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3 Model B Rev 1.2 1GB</a></li>
</ul>
</li>
<li><strong>Experiment 2</strong> is done on the <strong>FASTEST</strong> 2 nodes:<ul>
<li>1 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-8gb">Raspberry Pi 4 Model B Rev 1.4 8GB</a></li>
<li>1 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?variant=raspberry-pi-4-model-b-4gb">Raspberry Pi 4 Model B Rev 1.1 4GB</a></li>
</ul>
</li>
</ul>
<table style="text-align:center;">
  <tr>
    <td>hostfile on master</td>
    <td>Computing Time</td>
  </tr>
  <tr>
    <td>
      192.168.1.253   slots=4<br>
      192.168.1.251   slots=4<br>
      192.168.1.249   slots=4<br>
      192.168.1.247   slots=4
    </td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -np 16 --hostfile hostfile --mca btl_tcp_if_include <span class="string">&quot;192.168.1.251/24,192.168.1.249/24,192.168.1.247/24&quot;</span> python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 16</span><br><span class="line">Time elasped: 42.22 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
  <tr>
    <td>
      192.168.1.253   slots=4<br>
      192.168.1.251   slots=4
    </td>
    <td>
      <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pi@pi01:~ $ mpiexec -np 8 --hostfile hostfile --mca btl_tcp_if_include <span class="string">&quot;192.168.1.251/24&quot;</span> python prime.py 100000</span><br><span class="line">Find all primes up to: 100000</span><br><span class="line">Nodes: 8</span><br><span class="line">Time elasped: 29.56 seconds</span><br><span class="line">Primes discovered: 9592</span><br></pre></td></tr></table></figure>
    </td>
  </tr>
</table>


<p>The results are obviously telling:</p>
<ul>
<li>to calculate using a cluster of 4 <a target="_blank" rel="noopener" href="https://www.raspberrypi.org/">Raspberry Pi</a>s with 16 CPUs is <strong>ALWAYS</strong> faster than running on a single node with 4 CPUs.<br>$$ 42.22 \le 50 $$</li>
<li>to calculate using 2 fastest nodes is even faster than running on a cluster of 4 nodes. This clearly hints <strong><span style="color:red">the importance of <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Load_balancing_(computing)">Load Balancing</a><span></strong>.<br>$$ 29.56 \le 42.22 $$</li>
<li>the speed in <strong>Experiment 2</strong> is roughly doubled as that using a single node of <strong>pi03</strong> or <strong>pi04</strong>.<br>$$ 52 (pi01/pi02) / 29.56 (Experiment 2) \approx 2 $$</li>
</ul>
<p>In the end of this blog, as for <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Load_balancing_(computing)">Load Balancing</a>, I may talk about it some time in the future.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2020/04/28/GeoScience/Covid-19-ArcGIS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/04/28/GeoScience/Covid-19-ArcGIS/" class="post-title-link" itemprop="url">ArcGIS For Covid-19</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-04-28 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-28T00:00:00-07:00">2020-04-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2021-06-05 21:18:21" itemprop="dateModified" datetime="2021-06-05T21:18:21-07:00">2021-06-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Geo-Science/" itemprop="url" rel="index"><span itemprop="name">Geo Science</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>This is <strong>THOROUGHLY</strong> inspired by <strong>ArcGIS Blog</strong> <a target="_blank" rel="noopener" href="https://www.esri.com/arcgis-blog/products/arcgis-online/data-management/essential-configurations-for-highly-scalable-arcgis-online-web-applications-viral-applications/">Essential Configurations for Highly Scalable ArcGIS Online Web Applications (Viral Applications)</a>. And there are so many exisiting examples:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.mapquest.com/covid19">MapQuest COVID19</a></li>
<li><a target="_blank" rel="noopener" href="https://lhcathome.cern.ch/lhcathome/">LHC@home</a></li>
<li><a target="_blank" rel="noopener" href="https://covid19.gitlab.io/">COVID19@Gitlab</a></li>
<li><a target="_blank" rel="noopener" href="https://www.esri.com/en-us/covid-19/overview">Esri COVID-19</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nobody</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
