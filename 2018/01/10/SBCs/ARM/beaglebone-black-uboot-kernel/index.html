<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"longervision.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Happy new year everybody. How time flies. It is already 2018. Longer Vision has been struggling on this tough road towards a successful enterprise. Algorithms ONLY are NOT enough for nowadays business">
<meta property="og:type" content="article">
<meta property="og:title" content="Build U-Boot and Linux Kernel for Beaglebone and Beaglebone Black">
<meta property="og:url" content="http://longervision.github.io/2018/01/10/SBCs/ARM/beaglebone-black-uboot-kernel/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="Happy new year everybody. How time flies. It is already 2018. Longer Vision has been struggling on this tough road towards a successful enterprise. Algorithms ONLY are NOT enough for nowadays business">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/BBB.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/kernelconfiguration.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/afterkernelconfiguration.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/kernelbuilt.jpg">
<meta property="article:published_time" content="2018-01-10T08:00:00.000Z">
<meta property="article:modified_time" content="2023-11-22T07:06:29.176Z">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Beaglebone, Beaglebone Black, Linaro GCC, U-Boot, Linux Kernel, BSP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/BBB.jpg">


<link rel="canonical" href="http://longervision.github.io/2018/01/10/SBCs/ARM/beaglebone-black-uboot-kernel/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://longervision.github.io/2018/01/10/SBCs/ARM/beaglebone-black-uboot-kernel/","path":"2018/01/10/SBCs/ARM/beaglebone-black-uboot-kernel/","title":"Build U-Boot and Linux Kernel for Beaglebone and Beaglebone Black"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Build U-Boot and Linux Kernel for Beaglebone and Beaglebone Black | Longer Vision Technology</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Longer Vision Technology</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Github Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#PART-A-Cross-Compile-U-Boot-and-Linux-Kernel"><span class="nav-number">1.</span> <span class="nav-text">PART A: Cross Compile U-Boot and Linux Kernel</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Linaro-GCC"><span class="nav-number">1.1.</span> <span class="nav-text">1. Linaro GCC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-U-Boot"><span class="nav-number">1.2.</span> <span class="nav-text">2. U-Boot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Linux-Kernel"><span class="nav-number">1.3.</span> <span class="nav-text">3. Linux Kernel</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-version-sh"><span class="nav-number">1.3.1.</span> <span class="nav-text">1) version.sh</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-system-sh"><span class="nav-number">1.3.2.</span> <span class="nav-text">2) system.sh</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Root-File-System"><span class="nav-number">1.4.</span> <span class="nav-text">4. Root File System</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PART-B-Install-the-Linux-OS-onto-SD-Card"><span class="nav-number">2.</span> <span class="nav-text">PART B: Install the Linux OS onto SD Card</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Setup-microSD-card"><span class="nav-number">2.1.</span> <span class="nav-text">5. Setup microSD card</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-TF-Card-Preparation"><span class="nav-number">2.1.1.</span> <span class="nav-text">1) TF Card Preparation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Bootloader-installation"><span class="nav-number">2.1.2.</span> <span class="nav-text">2) Bootloader installation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Partition-Preparation"><span class="nav-number">2.1.3.</span> <span class="nav-text">3) Partition Preparation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Backup-Bootloader"><span class="nav-number">2.1.4.</span> <span class="nav-text">4) Backup Bootloader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Dealing-with-old-Bootloader-in-eMMC-Optional"><span class="nav-number">2.1.5.</span> <span class="nav-text">5) Dealing with old Bootloader in eMMC (Optional)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Kernel-Installation"><span class="nav-number">2.2.</span> <span class="nav-text">6. Kernel Installation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Export-MACRO-kernel-version"><span class="nav-number">2.2.1.</span> <span class="nav-text">1) Export MACRO kernel_version</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Extract-Debian-Root-File-System-onto-TF-Card"><span class="nav-number">2.2.2.</span> <span class="nav-text">2) Extract Debian Root File System onto TF Card</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Set-uname-r-in-boot-uEnv-txt"><span class="nav-number">2.2.3.</span> <span class="nav-text">3) Set uname_r in &#x2F;boot&#x2F;uEnv.txt</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Copy-Kernel-Image"><span class="nav-number">2.2.4.</span> <span class="nav-text">4) Copy Kernel Image</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Copy-Kernel-Device-Tree-Binaries"><span class="nav-number">2.2.5.</span> <span class="nav-text">5) Copy Kernel Device Tree Binaries</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-Copy-Kernel-Modules"><span class="nav-number">2.2.6.</span> <span class="nav-text">6) Copy Kernel Modules</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-Set-File-Systems-Table-etc-fstab"><span class="nav-number">2.2.7.</span> <span class="nav-text">7) Set File Systems Table (&#x2F;etc&#x2F;fstab)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Networking"><span class="nav-number">2.2.8.</span> <span class="nav-text">8) Networking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-Remove-TF-Card"><span class="nav-number">2.2.9.</span> <span class="nav-text">9) Remove TF Card</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#PART-C-Configurations-after-Booting-from-the-SD-Card"><span class="nav-number">3.</span> <span class="nav-text">PART C: Configurations after Booting from the SD Card</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">Longer Vision Technology Github Blog</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">135</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">129</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2018/01/10/SBCs/ARM/beaglebone-black-uboot-kernel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Build U-Boot and Linux Kernel for Beaglebone and Beaglebone Black | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Build U-Boot and Linux Kernel for Beaglebone and Beaglebone Black
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2018-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2018-01-10T00:00:00-08:00">2018-01-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-21 23:06:29" itemprop="dateModified" datetime="2023-11-21T23:06:29-08:00">2023-11-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/ARM/" itemprop="url" rel="index"><span itemprop="name">ARM</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>Happy new year everybody. How time flies. It is already 2018. <a target="_blank" rel="noopener" href="http://www.longervision.com/">Longer Vision</a> has been struggling on this tough road towards a successful enterprise. Algorithms <strong>ONLY</strong> are <strong>NOT</strong> enough for nowadays business. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Board_support_package">BSP (board support package)</a> and <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Integrated_circuit_design">IC design</a> are a must for a successful business nowadays. Thus, ever since 2018, <a target="_blank" rel="noopener" href="http://www.longervision.com/">Longer Vision</a> is going to balance <strong>both</strong> hardware <strong>and</strong> software, particularly, <a target="_blank" rel="noopener" href="http://www.arm.com/">ARM</a> based open source embedded development board and computer vision algorithms.</p>
<p>In this blog, we are going to talk about how to build and flash <a target="_blank" rel="noopener" href="http://www.denx.de/wiki/U-Boot/WebHome">U-Boot</a> and <a target="_blank" rel="noopener" href="https://www.kernel.org/">Linux Kernel</a> onto a <a target="_blank" rel="noopener" href="https://beagleboard.org/bone-original">Beaglebone</a> and <a target="_blank" rel="noopener" href="https://beagleboard.org/black">Beaglebone Black</a>, which adopts <a target="_blank" rel="noopener" href="http://www.ti.com/processors/sitara/arm-cortex-a8/am335x/overview.html">TI AM335x</a> as its CPU. The board looks like (cited from <a target="_blank" rel="noopener" href="https://beagleboard.org/black">Beaglebone Black</a> ):</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/BBB.jpg" alt="Beaglebone Black"></p>
<h1 id="PART-A-Cross-Compile-U-Boot-and-Linux-Kernel"><a href="#PART-A-Cross-Compile-U-Boot-and-Linux-Kernel" class="headerlink" title="PART A: Cross Compile U-Boot and Linux Kernel"></a>PART A: Cross Compile U-Boot and Linux Kernel</h1><h2 id="1-Linaro-GCC"><a href="#1-Linaro-GCC" class="headerlink" title="1. Linaro GCC"></a>1. Linaro GCC</h2><p><a target="_blank" rel="noopener" href="https://www.linaro.org/">Linaro</a> is a popular platform providing high-quality code for both <a target="_blank" rel="noopener" href="https://www.kernel.org/">Linux kernel</a> and <a target="_blank" rel="noopener" href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm">GCC tool chain</a>. Linaro’s GCC toolchain of varoius versions can be directly found <a target="_blank" rel="noopener" href="https://releases.linaro.org/components/toolchain/binaries/">here</a>.</p>
<p>Here, we download GCC latest-6 binary under <a target="_blank" rel="noopener" href="https://releases.linaro.org/components/toolchain/binaries/latest-6/arm-linux-gnueabihf/">arm-linux-gnueabihf</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ wget -c </span><br><span class="line">https://releases.linaro.org/components/toolchain/binaries/latest-6/arm-linux-gnueabihf/gcc-linaro-6.4.1-2017.11-x86_64_arm-linux-gnueabihf.tar.xz</span><br><span class="line">$ tar xf gcc-linaro-6.4.1-2017.11-x86_64_arm-linux-gnueabihf.tar.xz</span><br><span class="line">$ <span class="built_in">export</span> CC=`<span class="built_in">pwd</span>`/gcc-linaro-6.4.1-2017.11-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-</span><br></pre></td></tr></table></figure>

<p>Test the cross compiler:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="variable">$&#123;CC&#125;</span>gcc --version</span><br><span class="line">arm-linux-gnueabihf-gcc (Linaro GCC 6.4-2017.11) 6.4.1 20171012</span><br><span class="line">Copyright (C) 2017 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the <span class="built_in">source</span> <span class="keyword">for</span> copying conditions.  There is NO</span><br><span class="line">warranty; not even <span class="keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br></pre></td></tr></table></figure>


<h2 id="2-U-Boot"><a href="#2-U-Boot" class="headerlink" title="2. U-Boot"></a>2. U-Boot</h2><p><a target="_blank" rel="noopener" href="http://www.denx.de/wiki/U-Boot">U-Boot</a> is a universal boot loader. For <a target="_blank" rel="noopener" href="https://beagleboard.org/bone-original">Beaglebone</a> and <a target="_blank" rel="noopener" href="https://beagleboard.org/black">Beaglebone Black</a>, there are two patches which has been maintained by <a target="_blank" rel="noopener" href="http://eewiki.net/display/linuxonarm">eewiki Linux on ARM</a> on <a target="_blank" rel="noopener" href="https://github.com/eewiki/u-boot-patches">github</a>. We first download U-Boot and check out the latest release as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/u-boot/u-boot</span><br><span class="line">$ <span class="built_in">cd</span> u-boot/</span><br><span class="line">$ git checkout v2018.01</span><br></pre></td></tr></table></figure>

<p>Then check out the latest <a target="_blank" rel="noopener" href="https://github.com/eewiki/u-boot-patches">u-boot-patches</a> and patch two files under the latest release <a target="_blank" rel="noopener" href="https://github.com/eewiki/u-boot-patches/tree/master/v2018.01">v2018.01</a>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ../</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/eewiki/u-boot-patches.git</span><br><span class="line">$ <span class="built_in">cd</span> ./u-boot-patches/v2018.01</span><br><span class="line">$ <span class="built_in">cp</span> 0001-am335x_evm-uEnv.txt-bootz-n-fixes.patch ../../u-boot/</span><br><span class="line">$ <span class="built_in">cp</span> 0002-U-Boot-BeagleBone-Cape-Manager.patch ../../u-boot/</span><br><span class="line">$ <span class="built_in">cd</span> ../../u-boot</span><br><span class="line">$ patch -p1 &lt; 0001-am335x_evm-uEnv.txt-bootz-n-fixes.patch</span><br><span class="line">$ patch -p1 &lt; 0002-U-Boot-BeagleBone-Cape-Manager.patch</span><br></pre></td></tr></table></figure>

<p>Finally, we configure and build U-Boot for <a target="_blank" rel="noopener" href="https://beagleboard.org/bone-original">Beaglebone</a> and <a target="_blank" rel="noopener" href="https://beagleboard.org/black">Beaglebone Black</a> as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ make ARCH=arm CROSS_COMPILE=<span class="variable">$&#123;CC&#125;</span> distclean</span><br><span class="line">$ make ARCH=arm CROSS_COMPILE=<span class="variable">$&#123;CC&#125;</span> am335x_evm_defconfig</span><br><span class="line">$ make ARCH=arm CROSS_COMPILE=<span class="variable">$&#123;CC&#125;</span></span><br></pre></td></tr></table></figure>


<h2 id="3-Linux-Kernel"><a href="#3-Linux-Kernel" class="headerlink" title="3. Linux Kernel"></a>3. Linux Kernel</h2><p>Due to Robert Nelson’s summary at <a target="_blank" rel="noopener" href="http://eewiki.net/display/linuxonarm/BeagleBone+Black">eewiki</a>, there are two ways to build <a target="_blank" rel="noopener" href="https://beagleboard.org/bone-original">Beaglebone</a> and <a target="_blank" rel="noopener" href="https://beagleboard.org/black">Beaglebone Black</a>: - <a target="_blank" rel="noopener" href="https://github.com/RobertCNelson/bb-kernel">Mainline</a> - <a target="_blank" rel="noopener" href="https://github.com/RobertCNelson/ti-linux-kernel-dev">TI BSP</a></p>
<p>Their differences are: - bb-kernel: based on <a target="_blank" rel="noopener" href="https://github.com/RobertCNelson/bb-kernel">mainline</a>, no-smp, optimized for AM335x devices. - ti-linux-kernel-dev: based on <a target="_blank" rel="noopener" href="https://github.com/RobertCNelson/ti-linux-kernel-dev">TI’s git tree</a>, smp, optimized for AM335x&#x2F;AM43xx&#x2F;AM57x devices.</p>
<p>Here, we are going to use <a target="_blank" rel="noopener" href="https://github.com/RobertCNelson/bb-kernel">Mainline</a> to build our own Linux Kernel. We FIRST check out <a target="_blank" rel="noopener" href="https://github.com/RobertCNelson/bb-kernel">Robert Nelson’s bb-kernel</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/RobertCNelson/bb-kernel</span><br><span class="line">$ <span class="built_in">cd</span> bb-kernel/</span><br><span class="line">$ git checkout origin/am33x-v4.14 -b am33x-v4.14</span><br></pre></td></tr></table></figure>

<p>We then check out <a target="_blank" rel="noopener" href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git">Linus Torvalds’ stable Linux Kernel</a>, which can be also tracked on <a target="_blank" rel="noopener" href="https://github.com/torvalds/linux">github Torvalds Linux</a>. This will take you quite a while.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git</span><br></pre></td></tr></table></figure>

<p>Now, it’s the time to modify some of the configurations in .sh files under the checked out branch <strong>am33x-v4.14</strong>.</p>
<h3 id="1-version-sh"><a href="#1-version-sh" class="headerlink" title="1) version.sh"></a>1) version.sh</h3><p>Here, I’m using <strong>gcc_linaro_gnueabihf_6</strong> instead of <strong>gcc_linaro_gnueabihf_7</strong>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">toolchain=<span class="string">&quot;gcc_linaro_gnueabihf_6&quot;</span></span><br><span class="line"><span class="comment">#toolchain=&quot;gcc_linaro_gnueabihf_7&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-system-sh"><a href="#2-system-sh" class="headerlink" title="2) system.sh"></a>2) system.sh</h3><p>A file named <strong>system.sh.sample</strong> has been provided for us to configure accordingly. We FIRST do a copy.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cp</span> system.sh.sample system.sh</span><br></pre></td></tr></table></figure>

<p>Then, we manually re-specifying two MACROs: <strong>CC</strong> and <strong>LINUX_GIT</strong>, respectively to two directories containing the above downloaded Linaro GCC compiler and the current Torvalds’ Linux Kernel. We also specify <strong>MMC</strong> for TF&#x2F;SD Card as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CC=.../gcc-linaro-6.4.1-2017.11-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-</span><br><span class="line">LINUX_GIT=.../linux-stable</span><br><span class="line">MMC=/dev/mmcblk0</span><br></pre></td></tr></table></figure>

<p>After the above configurations, we start building the Linux Kernel using the following command line. This will probably take you one hour.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./build_kernel.sh</span><br></pre></td></tr></table></figure>

<p>When you see this <strong>Kernel Configuration</strong> page,</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/kernelconfiguration.jpg" alt="Kernel Configuration"></p>
<p><strong>Exit</strong> right away without any modification. And you will see:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/afterkernelconfiguration.jpg" alt="After Kernel Configuration"></p>
<p>After a while, you will see <strong>Linux Kernel</strong> has been successfully built:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/kernelbuilt.jpg" alt="The Built Kernel"></p>
<h2 id="4-Root-File-System"><a href="#4-Root-File-System" class="headerlink" title="4. Root File System"></a>4. Root File System</h2><p>We then install the latest Debian (for now, Debian 9.3) according to Robert Nelson’s minimal operating system. Three commands are to be executed in a row for downloading, verifying, and extraction.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ wget -c https://rcn-ee.com/rootfs/eewiki/minfs/debian-9.3-minimal-armhf-2017-12-09.tar.xz</span><br><span class="line">$ <span class="built_in">sha256sum</span> debian-9.3-minimal-armhf-2017-12-09.tar.xz</span><br><span class="line">5120fcfb8ff8af013737fae52dc0a7ecc2f52563a9aa8f5aa288aff0f3943d61  debian-9.3-minimal-armhf-2017-12-09.tar.xz</span><br><span class="line">$ tar xf debian-9.3-minimal-armhf-2017-12-09.tar.xz</span><br></pre></td></tr></table></figure>

<p>Until now, most components for booting have been downloaded and built. It is the time for us to flash our own OS onto a SD card.</p>
<h1 id="PART-B-Install-the-Linux-OS-onto-SD-Card"><a href="#PART-B-Install-the-Linux-OS-onto-SD-Card" class="headerlink" title="PART B: Install the Linux OS onto SD Card"></a>PART B: Install the Linux OS onto SD Card</h1><h2 id="5-Setup-microSD-card"><a href="#5-Setup-microSD-card" class="headerlink" title="5. Setup microSD card"></a>5. Setup microSD card</h2><h3 id="1-TF-Card-Preparation"><a href="#1-TF-Card-Preparation" class="headerlink" title="1) TF Card Preparation"></a>1) TF Card Preparation</h3><p>We first check which block device that we are going to install our built system onto by command <strong>lsblk</strong>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk</span><br><span class="line">NAME    MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sdd       8:48   0 931.5G  0 disk </span><br><span class="line">└─sdd1    8:49   0 931.5G  0 part /media/jiapei/Data</span><br><span class="line">sdb       8:16   0 238.5G  0 disk </span><br><span class="line">├─sdb4    8:20   0   900M  0 part </span><br><span class="line">├─sdb2    8:18   0   128M  0 part </span><br><span class="line">├─sdb3    8:19   0 237.2G  0 part /media/jiapei/Win10</span><br><span class="line">└─sdb1    8:17   0   300M  0 part /boot/efi</span><br><span class="line">sr0      11:0    1  1024M  0 rom  </span><br><span class="line">sdc       8:32   0 238.5G  0 disk </span><br><span class="line">├─sdc2    8:34   0  30.5G  0 part [SWAP]</span><br><span class="line">├─sdc3    8:35   0 207.5G  0 part /</span><br><span class="line">└─sdc1    8:33   0   512M  0 part </span><br><span class="line">mmcblk0 179:0    0    15G  0 disk</span><br></pre></td></tr></table></figure>

<p>We then define a MACRO <strong>DISK</strong> to specify the TF card device.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> DISK=/dev/mmcblk0</span><br></pre></td></tr></table></figure>

<p>Afterwards, erase partition table&#x2F;labels on TF card by:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=<span class="variable">$&#123;DISK&#125;</span> bs=1M count=10</span><br></pre></td></tr></table></figure>

<h3 id="2-Bootloader-installation"><a href="#2-Bootloader-installation" class="headerlink" title="2) Bootloader installation"></a>2) Bootloader installation</h3><p>Now, we install the built U-Boot onto the SD card:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">dd</span> <span class="keyword">if</span>=./u-boot/MLO of=<span class="variable">$&#123;DISK&#125;</span> count=1 seek=1 bs=128k</span><br><span class="line">$ sudo <span class="built_in">dd</span> <span class="keyword">if</span>=./u-boot/u-boot.img of=<span class="variable">$&#123;DISK&#125;</span> count=2 seek=1 bs=384k</span><br></pre></td></tr></table></figure>

<h3 id="3-Partition-Preparation"><a href="#3-Partition-Preparation" class="headerlink" title="3) Partition Preparation"></a>3) Partition Preparation</h3><p>We FIRST make sure which version of <strong>sfdisk</strong> is. In my case, it is of version 2.27.1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sfdisk --version</span><br><span class="line">sfdisk from util-linux 2.27.1</span><br></pre></td></tr></table></figure>

<p>Then we create the partition layout by:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sfdisk <span class="variable">$&#123;DISK&#125;</span> &lt;&lt;-<span class="string">__EOF__</span></span><br><span class="line"><span class="string">4M,,L,*</span></span><br><span class="line"><span class="string">__EOF__</span></span><br></pre></td></tr></table></figure>

<p>Afterwards, we need to format the created partition by <strong>mkfs.ext4</strong>. We also need to make sure which version of <strong>mkfs.ext4</strong> is. In my case, it is of version 1.42.13.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkfs.ext4 -V</span><br><span class="line">mke2fs 1.42.13 (17-May-2015)</span><br><span class="line">        Using EXT2FS Library version 1.42.13</span><br></pre></td></tr></table></figure>

<p>Then, we format the partition by:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkfs.ext4 -L rootfs <span class="variable">$&#123;DISK&#125;</span>p1</span><br></pre></td></tr></table></figure>

<p>After formatting, the TF card should be able to be either automatically mounted or manually mounted by the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">mkdir</span> -p /media/rootfs/</span><br><span class="line">$ sudo mount <span class="variable">$&#123;DISK&#125;</span>p1 /media/rootfs/</span><br></pre></td></tr></table></figure>

<h3 id="4-Backup-Bootloader"><a href="#4-Backup-Bootloader" class="headerlink" title="4) Backup Bootloader"></a>4) Backup Bootloader</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">mkdir</span> -p /media/rootfs/opt/backup/uboot/</span><br><span class="line">$ sudo <span class="built_in">cp</span> -v ./u-boot/MLO /media/rootfs/opt/backup/uboot/</span><br><span class="line">$ sudo <span class="built_in">cp</span> -v ./u-boot/u-boot.img /media/rootfs/opt/backup/uboot/</span><br></pre></td></tr></table></figure>

<h3 id="5-Dealing-with-old-Bootloader-in-eMMC-Optional"><a href="#5-Dealing-with-old-Bootloader-in-eMMC-Optional" class="headerlink" title="5) Dealing with old Bootloader in eMMC (Optional)"></a>5) Dealing with old Bootloader in eMMC (Optional)</h3><p>If the old bootloader in eMMC is to be kept, please copy the following file <strong>uEnv.txt</strong> to &#x2F;<strong>media&#x2F;rootfs&#x2F;</strong>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##This will work with: Angstrom&#x27;s 2013.06.20 u-boot.</span></span><br><span class="line"> </span><br><span class="line">loadaddr=0x82000000</span><br><span class="line">fdtaddr=0x88000000</span><br><span class="line">rdaddr=0x88080000</span><br><span class="line"> </span><br><span class="line">initrd_high=0xffffffff</span><br><span class="line">fdt_high=0xffffffff</span><br><span class="line"> </span><br><span class="line"><span class="comment">#for single partitions:</span></span><br><span class="line">mmcroot=/dev/mmcblk0p1</span><br><span class="line"> </span><br><span class="line">loadximage=load mmc 0:1 <span class="variable">$&#123;loadaddr&#125;</span> /boot/vmlinuz-<span class="variable">$&#123;uname_r&#125;</span></span><br><span class="line">loadxfdt=load mmc 0:1 <span class="variable">$&#123;fdtaddr&#125;</span> /boot/dtbs/<span class="variable">$&#123;uname_r&#125;</span>/<span class="variable">$&#123;fdtfile&#125;</span></span><br><span class="line">loadxrd=load mmc 0:1 <span class="variable">$&#123;rdaddr&#125;</span> /boot/initrd.img-<span class="variable">$&#123;uname_r&#125;</span>; setenv rdsize <span class="variable">$&#123;filesize&#125;</span></span><br><span class="line">loaduEnvtxt=load mmc 0:1 <span class="variable">$&#123;loadaddr&#125;</span> /boot/uEnv.txt ; <span class="built_in">env</span> import -t <span class="variable">$&#123;loadaddr&#125;</span> <span class="variable">$&#123;filesize&#125;</span>;</span><br><span class="line">loadall=run loaduEnvtxt; run loadximage; run loadxfdt;</span><br><span class="line"> </span><br><span class="line">mmcargs=setenv bootargs console=tty0 console=<span class="variable">$&#123;console&#125;</span> <span class="variable">$&#123;optargs&#125;</span> <span class="variable">$&#123;cape_disable&#125;</span> <span class="variable">$&#123;cape_enable&#125;</span> root=<span class="variable">$&#123;mmcroot&#125;</span> rootfstype=<span class="variable">$&#123;mmcrootfstype&#125;</span> <span class="variable">$&#123;cmdline&#125;</span></span><br><span class="line"> </span><br><span class="line">uenvcmd=run loadall; run mmcargs; bootz <span class="variable">$&#123;loadaddr&#125;</span> - <span class="variable">$&#123;fdtaddr&#125;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> -v ./uEnv.txt /media/rootfs/</span><br></pre></td></tr></table></figure>


<h2 id="6-Kernel-Installation"><a href="#6-Kernel-Installation" class="headerlink" title="6. Kernel Installation"></a>6. Kernel Installation</h2><h3 id="1-Export-MACRO-kernel-version"><a href="#1-Export-MACRO-kernel-version" class="headerlink" title="1) Export MACRO kernel_version"></a>1) Export MACRO kernel_version</h3><p>Under the folder <strong>bb-kernel</strong>, a file named <strong>kernel_version</strong> was generated while building <a target="_blank" rel="noopener" href="https://www.kernel.org/">Linux kernel</a>. In my case, I was building the NEWEST kernel <strong>4.14.13-bone12</strong>. For convenience, we export a new MACRO <strong>kernel_version</strong>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> kernel_version </span><br><span class="line">4.14.13-bone12</span><br><span class="line">$ <span class="built_in">export</span> kernel_version=4.14.13-bone12</span><br></pre></td></tr></table></figure>

<h3 id="2-Extract-Debian-Root-File-System-onto-TF-Card"><a href="#2-Extract-Debian-Root-File-System-onto-TF-Card" class="headerlink" title="2) Extract Debian Root File System onto TF Card"></a>2) Extract Debian Root File System onto TF Card</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tar xfvp ./debian-9.3-minimal-armhf-2017-12-09/armhf-rootfs-debian-stretch.tar -C /media/rootfs/</span><br><span class="line">$ <span class="built_in">sync</span></span><br><span class="line">$ sudo <span class="built_in">chown</span> root:root /media/rootfs/</span><br><span class="line">$ sudo <span class="built_in">chmod</span> 755 /media/rootfs/</span><br></pre></td></tr></table></figure>

<h3 id="3-Set-uname-r-in-boot-uEnv-txt"><a href="#3-Set-uname-r-in-boot-uEnv-txt" class="headerlink" title="3) Set uname_r in &#x2F;boot&#x2F;uEnv.txt"></a>3) Set uname_r in &#x2F;boot&#x2F;uEnv.txt</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sh -c <span class="string">&quot;echo &#x27;uname_r=<span class="variable">$&#123;kernel_version&#125;</span>&#x27; &gt;&gt; /media/rootfs/boot/uEnv.txt&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-Copy-Kernel-Image"><a href="#4-Copy-Kernel-Image" class="headerlink" title="4) Copy Kernel Image"></a>4) Copy Kernel Image</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">cp</span> -v ./bb-kernel/deploy/<span class="variable">$&#123;kernel_version&#125;</span>.zImage /media/rootfs/boot/vmlinuz-<span class="variable">$&#123;kernel_version&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-Copy-Kernel-Device-Tree-Binaries"><a href="#5-Copy-Kernel-Device-Tree-Binaries" class="headerlink" title="5) Copy Kernel Device Tree Binaries"></a>5) Copy Kernel Device Tree Binaries</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">mkdir</span> -p /media/rootfs/boot/dtbs/<span class="variable">$&#123;kernel_version&#125;</span>/</span><br><span class="line">$ sudo tar xfv ./bb-kernel/deploy/<span class="variable">$&#123;kernel_version&#125;</span>-dtbs.tar.gz -C /media/rootfs/boot/dtbs/<span class="variable">$&#123;kernel_version&#125;</span>/</span><br></pre></td></tr></table></figure>

<h3 id="6-Copy-Kernel-Modules"><a href="#6-Copy-Kernel-Modules" class="headerlink" title="6) Copy Kernel Modules"></a>6) Copy Kernel Modules</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tar xfv ./bb-kernel/deploy/<span class="variable">$&#123;kernel_version&#125;</span>-modules.tar.gz -C /media/rootfs/</span><br></pre></td></tr></table></figure>

<h3 id="7-Set-File-Systems-Table-etc-fstab"><a href="#7-Set-File-Systems-Table-etc-fstab" class="headerlink" title="7) Set File Systems Table (&#x2F;etc&#x2F;fstab)"></a>7) Set File Systems Table (&#x2F;etc&#x2F;fstab)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sh -c <span class="string">&quot;echo &#x27;/dev/mmcblk0p1  /  auto  errors=remount-ro  0  1&#x27; &gt;&gt; /media/rootfs/etc/fstab&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-Networking"><a href="#8-Networking" class="headerlink" title="8) Networking"></a>8) Networking</h3><p>To enable the Internet for the FIRST booting, we need to do the network configuration:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nano /media/rootfs/etc/network/interfaces</span><br></pre></td></tr></table></figure>

<p>Add the following content:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"> </span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet dhcp</span><br></pre></td></tr></table></figure>

<p>In order to use a shared SD card with multiple BeagleBones, and always enable the Ethernet interface as <strong>eth0</strong>, we need to add a particular <strong>udev rule</strong> as:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nano /media/rootfs/etc/udev/rules.d/70-persistent-net.rules</span><br></pre></td></tr></table></figure>

<p>Add the following content:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># BeagleBone: net device ()</span></span><br><span class="line">SUBSYSTEM==<span class="string">&quot;net&quot;</span>, ACTION==<span class="string">&quot;add&quot;</span>, DRIVERS==<span class="string">&quot;?*&quot;</span>, ATTR&#123;dev_id&#125;==<span class="string">&quot;0x0&quot;</span>, ATTR&#123;<span class="built_in">type</span>&#125;==<span class="string">&quot;1&quot;</span>, KERNEL==<span class="string">&quot;eth*&quot;</span>, NAME=<span class="string">&quot;eth0&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="9-Remove-TF-Card"><a href="#9-Remove-TF-Card" class="headerlink" title="9) Remove TF Card"></a>9) Remove TF Card</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sync</span></span><br><span class="line">$ sudo umount /media/rootfs</span><br></pre></td></tr></table></figure>


<h1 id="PART-C-Configurations-after-Booting-from-the-SD-Card"><a href="#PART-C-Configurations-after-Booting-from-the-SD-Card" class="headerlink" title="PART C: Configurations after Booting from the SD Card"></a>PART C: Configurations after Booting from the SD Card</h1><p>Insert TF card into a <a target="_blank" rel="noopener" href="https://beagleboard.org/black">Beaglebone Black</a>, connect BBB with an Internet cable, and connect a Micro HDMI cable on demand. After the flashing of on-board LEDs, you should be able to find the IP address of BBB via your router. All our future jobs are to be done via ssh command through this IP address. My personal preference is to set a static IP address for this particularly BBB in the router settings.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Beaglebone-Beaglebone-Black-Linaro-GCC-U-Boot-Linux-Kernel-BSP/" rel="tag"># Beaglebone, Beaglebone Black, Linaro GCC, U-Boot, Linux Kernel, BSP</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2017/03/18/ComputerVision/OpenCV/opencv-internal-calibration-circle-grid/" rel="prev" title="Camera Calibration Using a Circle Grid">
                  <i class="fa fa-angle-left"></i> Camera Calibration Using a Circle Grid
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2018/02/24/SBCs/ARM/nanopi-neo-armbian/" rel="next" title="Install Armbian Debian Server onto NanoPi NEO">
                  Install Armbian Debian Server onto NanoPi NEO <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Nobody</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
