<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="English">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo3d.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo3d_32X32.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo3d_16x16.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo3d.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Happy new year everybody. How time flies. It is already 2018. Longer Vision has been struggling on this tough road towards a successful enterprise. Algorithms ONLY are NOT enough for nowadays business">
<meta name="keywords" content="Beaglebone, Beaglebone Black, Linaro GCC, U-Boot, Linux Kernel, BSP">
<meta property="og:type" content="article">
<meta property="og:title" content="Build U-Boot and Linux Kernel for Beaglebone and Beaglebone Black">
<meta property="og:url" content="http://longervision.ca/2018/01/10/Embedded/beaglebone-black-uboot-kernel/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="Happy new year everybody. How time flies. It is already 2018. Longer Vision has been struggling on this tough road towards a successful enterprise. Algorithms ONLY are NOT enough for nowadays business">
<meta property="og:locale" content="English">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/BBB.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/kernelconfiguration.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/afterkernelconfiguration.jpg">
<meta property="og:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/kernelbuilt.jpg">
<meta property="og:updated_time" content="2018-10-23T02:54:57.474Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Build U-Boot and Linux Kernel for Beaglebone and Beaglebone Black">
<meta name="twitter:description" content="Happy new year everybody. How time flies. It is already 2018. Longer Vision has been struggling on this tough road towards a successful enterprise. Algorithms ONLY are NOT enough for nowadays business">
<meta name="twitter:image" content="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/BBB.jpg">






  <link rel="canonical" href="http://longervision.ca/2018/01/10/Embedded/beaglebone-black-uboot-kernel/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Build U-Boot and Linux Kernel for Beaglebone and Beaglebone Black | Longer Vision Technology</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="English">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Longer Vision Technology</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Github Blog</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2018/01/10/Embedded/beaglebone-black-uboot-kernel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nobody">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Build U-Boot and Linux Kernel for Beaglebone and Beaglebone Black
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-01-10 00:00:00" itemprop="dateCreated datePublished" datetime="2018-01-10T00:00:00-08:00">2018-01-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-10-22 19:54:57" itemprop="dateModified" datetime="2018-10-22T19:54:57-07:00">2018-10-22</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Embedded-Systems/" itemprop="url" rel="index"><span itemprop="name">Embedded Systems</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Happy new year everybody. How time flies. It is already 2018. <a href="http://www.longervision.com/" target="_blank" rel="noopener">Longer Vision</a> has been struggling on this tough road towards a successful enterprise. Algorithms <strong>ONLY</strong> are <strong>NOT</strong> enough for nowadays business. <a href="https://en.wikipedia.org/wiki/Board_support_package" target="_blank" rel="noopener">BSP (board support package)</a> and <a href="https://en.wikipedia.org/wiki/Integrated_circuit_design" target="_blank" rel="noopener">IC design</a> are a must for a successful business nowadays. Thus, ever since 2018, <a href="http://www.longervision.com/" target="_blank" rel="noopener">Longer Vision</a> is going to balance <strong>both</strong> hardware <strong>and</strong> software, particularly, <a href="http://www.arm.com/" target="_blank" rel="noopener">ARM</a> based open source embedded development board and computer vision algorithms.</p>
<p>In this blog, we are going to talk about how to build and flash <a href="http://www.denx.de/wiki/U-Boot/WebHome" target="_blank" rel="noopener">U-Boot</a> and <a href="https://www.kernel.org/" target="_blank" rel="noopener">Linux Kernel</a> onto a <a href="https://beagleboard.org/bone-original" target="_blank" rel="noopener">Beaglebone</a> and <a href="https://beagleboard.org/black" target="_blank" rel="noopener">Beaglebone Black</a>, which adopts <a href="http://www.ti.com/processors/sitara/arm-cortex-a8/am335x/overview.html" target="_blank" rel="noopener">TI AM335x</a> as its CPU. The board looks like (cited from <a href="https://beagleboard.org/black" target="_blank" rel="noopener">Beaglebone Black</a> ):</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/BBB.jpg" alt="Beaglebone Black"></p>
<h1 id="part-a-cross-compile-u-boot-and-linux-kernel"><a class="markdownIt-Anchor" href="#part-a-cross-compile-u-boot-and-linux-kernel"></a> PART A: Cross Compile U-Boot and Linux Kernel</h1>
<h2 id="1-linaro-gcc"><a class="markdownIt-Anchor" href="#1-linaro-gcc"></a> 1. Linaro GCC</h2>
<p><a href="https://www.linaro.org/" target="_blank" rel="noopener">Linaro</a> is a popular platform providing high-quality code for both <a href="https://www.kernel.org/" target="_blank" rel="noopener">Linux kernel</a> and <a href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm" target="_blank" rel="noopener">GCC tool chain</a>. Linaro’s GCC toolchain of varoius versions can be directly found <a href="https://releases.linaro.org/components/toolchain/binaries/" target="_blank" rel="noopener">here</a>.</p>
<p>Here, we download GCC latest-6 binary under <a href="https://releases.linaro.org/components/toolchain/binaries/latest-6/arm-linux-gnueabihf/" target="_blank" rel="noopener">arm-linux-gnueabihf</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ wget -c </span><br><span class="line">https://releases.linaro.org/components/toolchain/binaries/latest-6/arm-linux-gnueabihf/gcc-linaro-6.4.1-2017.11-x86_64_arm-linux-gnueabihf.tar.xz</span><br><span class="line">$ tar xf gcc-linaro-6.4.1-2017.11-x86_64_arm-linux-gnueabihf.tar.xz</span><br><span class="line">$ <span class="built_in">export</span> CC=`<span class="built_in">pwd</span>`/gcc-linaro-6.4.1-2017.11-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-</span><br></pre></td></tr></table></figure>
<p>Test the cross compiler:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="variable">$&#123;CC&#125;</span>gcc --version</span><br><span class="line">arm-linux-gnueabihf-gcc (Linaro GCC 6.4-2017.11) 6.4.1 20171012</span><br><span class="line">Copyright (C) 2017 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the <span class="built_in">source</span> <span class="keyword">for</span> copying conditions.  There is NO</span><br><span class="line">warranty; not even <span class="keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br></pre></td></tr></table></figure>
<h2 id="2-u-boot"><a class="markdownIt-Anchor" href="#2-u-boot"></a> 2. U-Boot</h2>
<p><a href="http://www.denx.de/wiki/U-Boot" target="_blank" rel="noopener">U-Boot</a> is a universal boot loader. For <a href="https://beagleboard.org/bone-original" target="_blank" rel="noopener">Beaglebone</a> and <a href="https://beagleboard.org/black" target="_blank" rel="noopener">Beaglebone Black</a>, there are two patches which has been maintained by <a href="http://eewiki.net/display/linuxonarm" target="_blank" rel="noopener">eewiki Linux on ARM</a> on <a href="https://github.com/eewiki/u-boot-patches" target="_blank" rel="noopener">github</a>. We first download U-Boot and check out the latest release as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/u-boot/u-boot</span><br><span class="line">$ <span class="built_in">cd</span> u-boot/</span><br><span class="line">$ git checkout v2018.01</span><br></pre></td></tr></table></figure>
<p>Then check out the latest <a href="https://github.com/eewiki/u-boot-patches" target="_blank" rel="noopener">u-boot-patches</a> and patch two files under the latest release <a href="https://github.com/eewiki/u-boot-patches/tree/master/v2018.01" target="_blank" rel="noopener">v2018.01</a>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ../</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/eewiki/u-boot-patches.git</span><br><span class="line">$ <span class="built_in">cd</span> ./u-boot-patches/v2018.01</span><br><span class="line">$ cp 0001-am335x_evm-uEnv.txt-bootz-n-fixes.patch ../../u-boot/</span><br><span class="line">$ cp 0002-U-Boot-BeagleBone-Cape-Manager.patch ../../u-boot/</span><br><span class="line">$ <span class="built_in">cd</span> ../../u-boot</span><br><span class="line">$ patch -p1 &lt; 0001-am335x_evm-uEnv.txt-bootz-n-fixes.patch</span><br><span class="line">$ patch -p1 &lt; 0002-U-Boot-BeagleBone-Cape-Manager.patch</span><br></pre></td></tr></table></figure>
<p>Finally, we configure and build U-Boot for <a href="https://beagleboard.org/bone-original" target="_blank" rel="noopener">Beaglebone</a> and <a href="https://beagleboard.org/black" target="_blank" rel="noopener">Beaglebone Black</a> as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ make ARCH=arm CROSS_COMPILE=<span class="variable">$&#123;CC&#125;</span> distclean</span><br><span class="line">$ make ARCH=arm CROSS_COMPILE=<span class="variable">$&#123;CC&#125;</span> am335x_evm_defconfig</span><br><span class="line">$ make ARCH=arm CROSS_COMPILE=<span class="variable">$&#123;CC&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-linux-kernel"><a class="markdownIt-Anchor" href="#3-linux-kernel"></a> 3. Linux Kernel</h2>
<p>Due to Robert Nelson’s summary at <a href="http://eewiki.net/display/linuxonarm/BeagleBone+Black" target="_blank" rel="noopener">eewiki</a>, there are two ways to build <a href="https://beagleboard.org/bone-original" target="_blank" rel="noopener">Beaglebone</a> and <a href="https://beagleboard.org/black" target="_blank" rel="noopener">Beaglebone Black</a>: - <a href="https://github.com/RobertCNelson/bb-kernel" target="_blank" rel="noopener">Mainline</a> - <a href="https://github.com/RobertCNelson/ti-linux-kernel-dev" target="_blank" rel="noopener">TI BSP</a></p>
<p>Their differences are: - bb-kernel: based on <a href="https://github.com/RobertCNelson/bb-kernel" target="_blank" rel="noopener">mainline</a>, no-smp, optimized for AM335x devices. - ti-linux-kernel-dev: based on <a href="https://github.com/RobertCNelson/ti-linux-kernel-dev" target="_blank" rel="noopener">TI’s git tree</a>, smp, optimized for AM335x/AM43xx/AM57x devices.</p>
<p>Here, we are going to use <a href="https://github.com/RobertCNelson/bb-kernel" target="_blank" rel="noopener">Mainline</a> to build our own Linux Kernel. We FIRST check out <a href="https://github.com/RobertCNelson/bb-kernel" target="_blank" rel="noopener">Robert Nelson’s bb-kernel</a>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/RobertCNelson/bb-kernel</span><br><span class="line">$ <span class="built_in">cd</span> bb-kernel/</span><br><span class="line">$ git checkout origin/am33x-v4.14 -b am33x-v4.14</span><br></pre></td></tr></table></figure>
<p>We then check out <a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git" target="_blank" rel="noopener">Linus Torvalds’ stable Linux Kernel</a>, which can be also tracked on <a href="https://github.com/torvalds/linux" target="_blank" rel="noopener">github Torvalds Linux</a>. This will take you quite a while.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git</span><br></pre></td></tr></table></figure>
<p>Now, it’s the time to modify some of the configurations in .sh files under the checked out branch <strong>am33x-v4.14</strong>.</p>
<h3 id="1-versionsh"><a class="markdownIt-Anchor" href="#1-versionsh"></a> 1) <a href="http://version.sh" target="_blank" rel="noopener">version.sh</a></h3>
<p>Here, I’m using <strong>gcc_linaro_gnueabihf_6</strong> instead of <strong>gcc_linaro_gnueabihf_7</strong>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">toolchain=<span class="string">"gcc_linaro_gnueabihf_6"</span></span><br><span class="line"><span class="comment">#toolchain="gcc_linaro_gnueabihf_7"</span></span><br></pre></td></tr></table></figure>
<h3 id="2-systemsh"><a class="markdownIt-Anchor" href="#2-systemsh"></a> 2) <a href="http://system.sh" target="_blank" rel="noopener">system.sh</a></h3>
<p>A file named <strong>system.sh.sample</strong> has been provided for us to configure accordingly. We FIRST do a copy.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp system.sh.sample system.sh</span><br></pre></td></tr></table></figure>
<p>Then, we manually re-specifying two MACROs: <strong>CC</strong> and <strong>LINUX_GIT</strong>, respectively to two directories containing the above downloaded Linaro GCC compiler and the current Torvalds’ Linux Kernel. We also specify <strong>MMC</strong> for TF/SD Card as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CC=.../gcc-linaro-6.4.1-2017.11-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-</span><br><span class="line">LINUX_GIT=.../linux-stable</span><br><span class="line">MMC=/dev/mmcblk0</span><br></pre></td></tr></table></figure>
<p>After the above configurations, we start building the Linux Kernel using the following command line. This will probably take you one hour.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./build_kernel.sh</span><br></pre></td></tr></table></figure>
<p>When you see this <strong>Kernel Configuration</strong> page,</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/kernelconfiguration.jpg" alt="Kernel Configuration"></p>
<p><strong>Exit</strong> right away without any modification. And you will see:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/afterkernelconfiguration.jpg" alt="After Kernel Configuration"></p>
<p>After a while, you will see <strong>Linux Kernel</strong> has been successfully built:</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/omap/beaglebone/black/images/kernelbuilt.jpg" alt="The Built Kernel"></p>
<h2 id="4-root-file-system"><a class="markdownIt-Anchor" href="#4-root-file-system"></a> 4. Root File System</h2>
<p>We then install the latest Debian (for now, Debian 9.3) according to Robert Nelson’s minimal operating system. Three commands are to be executed in a row for downloading, verifying, and extraction.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ wget -c https://rcn-ee.com/rootfs/eewiki/minfs/debian-9.3-minimal-armhf-2017-12-09.tar.xz</span><br><span class="line">$ sha256sum debian-9.3-minimal-armhf-2017-12-09.tar.xz</span><br><span class="line">5120fcfb8ff8af013737fae52dc0a7ecc2f52563a9aa8f5aa288aff0f3943d61  debian-9.3-minimal-armhf-2017-12-09.tar.xz</span><br><span class="line">$ tar xf debian-9.3-minimal-armhf-2017-12-09.tar.xz</span><br></pre></td></tr></table></figure>
<p>Until now, most components for booting have been downloaded and built. It is the time for us to flash our own OS onto a SD card.</p>
<h1 id="part-b-install-the-linux-os-onto-sd-card"><a class="markdownIt-Anchor" href="#part-b-install-the-linux-os-onto-sd-card"></a> PART B: Install the Linux OS onto SD Card</h1>
<h2 id="5-setup-microsd-card"><a class="markdownIt-Anchor" href="#5-setup-microsd-card"></a> 5. Setup microSD card</h2>
<h3 id="1-tf-card-preparation"><a class="markdownIt-Anchor" href="#1-tf-card-preparation"></a> 1) TF Card Preparation</h3>
<p>We first check which block device that we are going to install our built system onto by command <strong>lsblk</strong>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk</span><br><span class="line">NAME    MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sdd       8:48   0 931.5G  0 disk </span><br><span class="line">└─sdd1    8:49   0 931.5G  0 part /media/jiapei/Data</span><br><span class="line">sdb       8:16   0 238.5G  0 disk </span><br><span class="line">├─sdb4    8:20   0   900M  0 part </span><br><span class="line">├─sdb2    8:18   0   128M  0 part </span><br><span class="line">├─sdb3    8:19   0 237.2G  0 part /media/jiapei/Win10</span><br><span class="line">└─sdb1    8:17   0   300M  0 part /boot/efi</span><br><span class="line">sr0      11:0    1  1024M  0 rom  </span><br><span class="line">sdc       8:32   0 238.5G  0 disk </span><br><span class="line">├─sdc2    8:34   0  30.5G  0 part [SWAP]</span><br><span class="line">├─sdc3    8:35   0 207.5G  0 part /</span><br><span class="line">└─sdc1    8:33   0   512M  0 part </span><br><span class="line">mmcblk0 179:0    0    15G  0 disk</span><br></pre></td></tr></table></figure>
<p>We then define a MACRO <strong>DISK</strong> to specify the TF card device.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> DISK=/dev/mmcblk0</span><br></pre></td></tr></table></figure>
<p>Afterwards, erase partition table/labels on TF card by:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd <span class="keyword">if</span>=/dev/zero of=<span class="variable">$&#123;DISK&#125;</span> bs=1M count=10</span><br></pre></td></tr></table></figure>
<h3 id="2-bootloader-installation"><a class="markdownIt-Anchor" href="#2-bootloader-installation"></a> 2) Bootloader installation</h3>
<p>Now, we install the built U-Boot onto the SD card:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd <span class="keyword">if</span>=./u-boot/MLO of=<span class="variable">$&#123;DISK&#125;</span> count=1 seek=1 bs=128k</span><br><span class="line">$ sudo dd <span class="keyword">if</span>=./u-boot/u-boot.img of=<span class="variable">$&#123;DISK&#125;</span> count=2 seek=1 bs=384k</span><br></pre></td></tr></table></figure>
<h3 id="3-partition-preparation"><a class="markdownIt-Anchor" href="#3-partition-preparation"></a> 3) Partition Preparation</h3>
<p>We FIRST make sure which version of <strong>sfdisk</strong> is. In my case, it is of version 2.27.1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sfdisk --version</span><br><span class="line">sfdisk from util-linux 2.27.1</span><br></pre></td></tr></table></figure>
<p>Then we create the partition layout by:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sfdisk <span class="variable">$&#123;DISK&#125;</span> &lt;&lt;-__EOF__</span><br><span class="line">4M,,L,*</span><br><span class="line">__EOF__</span><br></pre></td></tr></table></figure>
<p>Afterwards, we need to format the created partition by <strong>mkfs.ext4</strong>. We also need to make sure which version of <strong>mkfs.ext4</strong> is. In my case, it is of version 1.42.13.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkfs.ext4 -V</span><br><span class="line">mke2fs 1.42.13 (17-May-2015)</span><br><span class="line">        Using EXT2FS Library version 1.42.13</span><br></pre></td></tr></table></figure>
<p>Then, we format the partition by:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkfs.ext4 -L rootfs <span class="variable">$&#123;DISK&#125;</span>p1</span><br></pre></td></tr></table></figure>
<p>After formatting, the TF card should be able to be either automatically mounted or manually mounted by the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkdir -p /media/rootfs/</span><br><span class="line">$ sudo mount <span class="variable">$&#123;DISK&#125;</span>p1 /media/rootfs/</span><br></pre></td></tr></table></figure>
<h3 id="4-backup-bootloader"><a class="markdownIt-Anchor" href="#4-backup-bootloader"></a> 4) Backup Bootloader</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkdir -p /media/rootfs/opt/backup/uboot/</span><br><span class="line">$ sudo cp -v ./u-boot/MLO /media/rootfs/opt/backup/uboot/</span><br><span class="line">$ sudo cp -v ./u-boot/u-boot.img /media/rootfs/opt/backup/uboot/</span><br></pre></td></tr></table></figure>
<h3 id="5-dealing-with-old-bootloader-in-emmc-optional"><a class="markdownIt-Anchor" href="#5-dealing-with-old-bootloader-in-emmc-optional"></a> 5) Dealing with old Bootloader in eMMC (Optional)</h3>
<p>If the old bootloader in eMMC is to be kept, please copy the following file <strong>uEnv.txt</strong> to /<strong>media/rootfs/</strong>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##This will work with: Angstrom's 2013.06.20 u-boot.</span></span><br><span class="line"> </span><br><span class="line">loadaddr=0x82000000</span><br><span class="line">fdtaddr=0x88000000</span><br><span class="line">rdaddr=0x88080000</span><br><span class="line"> </span><br><span class="line">initrd_high=0xffffffff</span><br><span class="line">fdt_high=0xffffffff</span><br><span class="line"> </span><br><span class="line"><span class="comment">#for single partitions:</span></span><br><span class="line">mmcroot=/dev/mmcblk0p1</span><br><span class="line"> </span><br><span class="line">loadximage=load mmc 0:1 <span class="variable">$&#123;loadaddr&#125;</span> /boot/vmlinuz-<span class="variable">$&#123;uname_r&#125;</span></span><br><span class="line">loadxfdt=load mmc 0:1 <span class="variable">$&#123;fdtaddr&#125;</span> /boot/dtbs/<span class="variable">$&#123;uname_r&#125;</span>/<span class="variable">$&#123;fdtfile&#125;</span></span><br><span class="line">loadxrd=load mmc 0:1 <span class="variable">$&#123;rdaddr&#125;</span> /boot/initrd.img-<span class="variable">$&#123;uname_r&#125;</span>; setenv rdsize <span class="variable">$&#123;filesize&#125;</span></span><br><span class="line">loaduEnvtxt=load mmc 0:1 <span class="variable">$&#123;loadaddr&#125;</span> /boot/uEnv.txt ; env import -t <span class="variable">$&#123;loadaddr&#125;</span> <span class="variable">$&#123;filesize&#125;</span>;</span><br><span class="line">loadall=run loaduEnvtxt; run loadximage; run loadxfdt;</span><br><span class="line"> </span><br><span class="line">mmcargs=setenv bootargs console=tty0 console=<span class="variable">$&#123;console&#125;</span> <span class="variable">$&#123;optargs&#125;</span> <span class="variable">$&#123;cape_disable&#125;</span> <span class="variable">$&#123;cape_enable&#125;</span> root=<span class="variable">$&#123;mmcroot&#125;</span> rootfstype=<span class="variable">$&#123;mmcrootfstype&#125;</span> <span class="variable">$&#123;cmdline&#125;</span></span><br><span class="line"> </span><br><span class="line">uenvcmd=run loadall; run mmcargs; bootz <span class="variable">$&#123;loadaddr&#125;</span> - <span class="variable">$&#123;fdtaddr&#125;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -v ./uEnv.txt /media/rootfs/</span><br></pre></td></tr></table></figure>
<h2 id="6-kernel-installation"><a class="markdownIt-Anchor" href="#6-kernel-installation"></a> 6. Kernel Installation</h2>
<h3 id="1-export-macro-kernel_version"><a class="markdownIt-Anchor" href="#1-export-macro-kernel_version"></a> 1) Export MACRO kernel_version</h3>
<p>Under the folder <strong>bb-kernel</strong>, a file named <strong>kernel_version</strong> was generated while building <a href="https://www.kernel.org/" target="_blank" rel="noopener">Linux kernel</a>. In my case, I was building the NEWEST kernel <strong>4.14.13-bone12</strong>. For convenience, we export a new MACRO <strong>kernel_version</strong>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat kernel_version </span><br><span class="line">4.14.13-bone12</span><br><span class="line">$ <span class="built_in">export</span> kernel_version=4.14.13-bone12</span><br></pre></td></tr></table></figure>
<h3 id="2-extract-debian-root-file-system-onto-tf-card"><a class="markdownIt-Anchor" href="#2-extract-debian-root-file-system-onto-tf-card"></a> 2) Extract Debian Root File System onto TF Card</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tar xfvp ./debian-9.3-minimal-armhf-2017-12-09/armhf-rootfs-debian-stretch.tar -C /media/rootfs/</span><br><span class="line">$ sync</span><br><span class="line">$ sudo chown root:root /media/rootfs/</span><br><span class="line">$ sudo chmod 755 /media/rootfs/</span><br></pre></td></tr></table></figure>
<h3 id="3-set-uname_r-in-bootuenvtxt"><a class="markdownIt-Anchor" href="#3-set-uname_r-in-bootuenvtxt"></a> 3) Set uname_r in /boot/uEnv.txt</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sh -c <span class="string">"echo 'uname_r=<span class="variable">$&#123;kernel_version&#125;</span>' &gt;&gt; /media/rootfs/boot/uEnv.txt"</span></span><br></pre></td></tr></table></figure>
<h3 id="4-copy-kernel-image"><a class="markdownIt-Anchor" href="#4-copy-kernel-image"></a> 4) Copy Kernel Image</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo cp -v ./bb-kernel/deploy/<span class="variable">$&#123;kernel_version&#125;</span>.zImage /media/rootfs/boot/vmlinuz-<span class="variable">$&#123;kernel_version&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-copy-kernel-device-tree-binaries"><a class="markdownIt-Anchor" href="#5-copy-kernel-device-tree-binaries"></a> 5) Copy Kernel Device Tree Binaries</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkdir -p /media/rootfs/boot/dtbs/<span class="variable">$&#123;kernel_version&#125;</span>/</span><br><span class="line">$ sudo tar xfv ./bb-kernel/deploy/<span class="variable">$&#123;kernel_version&#125;</span>-dtbs.tar.gz -C /media/rootfs/boot/dtbs/<span class="variable">$&#123;kernel_version&#125;</span>/</span><br></pre></td></tr></table></figure>
<h3 id="6-copy-kernel-modules"><a class="markdownIt-Anchor" href="#6-copy-kernel-modules"></a> 6) Copy Kernel Modules</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tar xfv ./bb-kernel/deploy/<span class="variable">$&#123;kernel_version&#125;</span>-modules.tar.gz -C /media/rootfs/</span><br></pre></td></tr></table></figure>
<h3 id="7-set-file-systems-table-etcfstab"><a class="markdownIt-Anchor" href="#7-set-file-systems-table-etcfstab"></a> 7) Set File Systems Table (/etc/fstab)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo sh -c <span class="string">"echo '/dev/mmcblk0p1  /  auto  errors=remount-ro  0  1' &gt;&gt; /media/rootfs/etc/fstab"</span></span><br></pre></td></tr></table></figure>
<h3 id="8-networking"><a class="markdownIt-Anchor" href="#8-networking"></a> 8) Networking</h3>
<p>To enable the Internet for the FIRST booting, we need to do the network configuration:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nano /media/rootfs/etc/network/interfaces</span><br></pre></td></tr></table></figure>
<p>Add the following content:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"> </span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet dhcp</span><br></pre></td></tr></table></figure>
<p>In order to use a shared SD card with multiple BeagleBones, and always enable the Ethernet interface as <strong>eth0</strong>, we need to add a particular <strong>udev rule</strong> as:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nano /media/rootfs/etc/udev/rules.d/70-persistent-net.rules</span><br></pre></td></tr></table></figure>
<p>Add the following content:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># BeagleBone: net device ()</span></span><br><span class="line">SUBSYSTEM==<span class="string">"net"</span>, ACTION==<span class="string">"add"</span>, DRIVERS==<span class="string">"?*"</span>, ATTR&#123;dev_id&#125;==<span class="string">"0x0"</span>, ATTR&#123;<span class="built_in">type</span>&#125;==<span class="string">"1"</span>, KERNEL==<span class="string">"eth*"</span>, NAME=<span class="string">"eth0"</span></span><br></pre></td></tr></table></figure>
<h3 id="9-remove-tf-card"><a class="markdownIt-Anchor" href="#9-remove-tf-card"></a> 9) Remove TF Card</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sync</span><br><span class="line">$ sudo umount /media/rootfs</span><br></pre></td></tr></table></figure>
<h1 id="part-c-configurations-after-booting-from-the-sd-card"><a class="markdownIt-Anchor" href="#part-c-configurations-after-booting-from-the-sd-card"></a> PART C: Configurations after Booting from the SD Card</h1>
<p>Insert TF card into a <a href="https://beagleboard.org/black" target="_blank" rel="noopener">Beaglebone Black</a>, connect BBB with an Internet cable, and connect a Micro HDMI cable on demand. After the flashing of on-board LEDs, you should be able to find the IP address of BBB via your router. All our future jobs are to be done via ssh command through this IP address. My personal preference is to set a static IP address for this particularly BBB in the router settings.</p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Beaglebone-Beaglebone-Black-Linaro-GCC-U-Boot-Linux-Kernel-BSP/" rel="tag"># Beaglebone, Beaglebone Black, Linaro GCC, U-Boot, Linux Kernel, BSP</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/18/OpenCV/opencv-internal-calibration-circle-grid/" rel="next" title="Camera Calibration Using a Circle Grid">
                <i class="fa fa-chevron-left"></i> Camera Calibration Using a Circle Grid
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/02/24/Embedded/nanopi-neo-armbian/" rel="prev" title="Install Armbian Debian Server onto NanoPi NEO">
                Install Armbian Debian Server onto NanoPi NEO <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Nobody</p>
              <p class="site-description motion-element" itemprop="description">Longer Vision Technology Github Blog</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">31</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">31</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#part-a-cross-compile-u-boot-and-linux-kernel"><span class="nav-number">1.</span> <span class="nav-text"> PART A: Cross Compile U-Boot and Linux Kernel</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-linaro-gcc"><span class="nav-number">1.1.</span> <span class="nav-text"> 1. Linaro GCC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-u-boot"><span class="nav-number">1.2.</span> <span class="nav-text"> 2. U-Boot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-linux-kernel"><span class="nav-number">1.3.</span> <span class="nav-text"> 3. Linux Kernel</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-versionsh"><span class="nav-number">1.3.1.</span> <span class="nav-text"> 1) version.sh</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-systemsh"><span class="nav-number">1.3.2.</span> <span class="nav-text"> 2) system.sh</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-root-file-system"><span class="nav-number">1.4.</span> <span class="nav-text"> 4. Root File System</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#part-b-install-the-linux-os-onto-sd-card"><span class="nav-number">2.</span> <span class="nav-text"> PART B: Install the Linux OS onto SD Card</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-setup-microsd-card"><span class="nav-number">2.1.</span> <span class="nav-text"> 5. Setup microSD card</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-tf-card-preparation"><span class="nav-number">2.1.1.</span> <span class="nav-text"> 1) TF Card Preparation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-bootloader-installation"><span class="nav-number">2.1.2.</span> <span class="nav-text"> 2) Bootloader installation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-partition-preparation"><span class="nav-number">2.1.3.</span> <span class="nav-text"> 3) Partition Preparation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-backup-bootloader"><span class="nav-number">2.1.4.</span> <span class="nav-text"> 4) Backup Bootloader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-dealing-with-old-bootloader-in-emmc-optional"><span class="nav-number">2.1.5.</span> <span class="nav-text"> 5) Dealing with old Bootloader in eMMC (Optional)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-kernel-installation"><span class="nav-number">2.2.</span> <span class="nav-text"> 6. Kernel Installation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-export-macro-kernel_version"><span class="nav-number">2.2.1.</span> <span class="nav-text"> 1) Export MACRO kernel_version</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-extract-debian-root-file-system-onto-tf-card"><span class="nav-number">2.2.2.</span> <span class="nav-text"> 2) Extract Debian Root File System onto TF Card</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-set-uname_r-in-bootuenvtxt"><span class="nav-number">2.2.3.</span> <span class="nav-text"> 3) Set uname_r in /boot/uEnv.txt</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-copy-kernel-image"><span class="nav-number">2.2.4.</span> <span class="nav-text"> 4) Copy Kernel Image</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-copy-kernel-device-tree-binaries"><span class="nav-number">2.2.5.</span> <span class="nav-text"> 5) Copy Kernel Device Tree Binaries</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-copy-kernel-modules"><span class="nav-number">2.2.6.</span> <span class="nav-text"> 6) Copy Kernel Modules</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-set-file-systems-table-etcfstab"><span class="nav-number">2.2.7.</span> <span class="nav-text"> 7) Set File Systems Table (/etc/fstab)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-networking"><span class="nav-number">2.2.8.</span> <span class="nav-text"> 8) Networking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-remove-tf-card"><span class="nav-number">2.2.9.</span> <span class="nav-text"> 9) Remove TF Card</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#part-c-configurations-after-booting-from-the-sd-card"><span class="nav-number">3.</span> <span class="nav-text"> PART C: Configurations after Booting from the SD Card</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nobody</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



	





  





  










  





  

  

  

  
  

  
  

  
    
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" type="text/css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->

   
  


  
  

  

  

  

  

  

</body>
</html>
