<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"longervision.ca","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Longer Vision Technology Github Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Longer Vision Technology">
<meta property="og:url" content="http://longervision.ca/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="Longer Vision Technology Github Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Longer Vision, Computer Vision, AI, Machine Learning">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://longervision.ca/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Longer Vision Technology</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Longer Vision Technology</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Github Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">Longer Vision Technology Github Blog</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">151</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">146</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/28/AI/EdgeComputing/raspberry-pi-5-hailo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/28/AI/EdgeComputing/raspberry-pi-5-hailo/" class="post-title-link" itemprop="url">Raspberry Pi 5 + Hailo AI</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-28 19:00:44" itemprop="dateCreated datePublished" datetime="2024-10-28T19:00:44-07:00">2024-10-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-11-04 23:46:33" itemprop="dateModified" datetime="2024-11-04T23:46:33-08:00">2024-11-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/Edge-Computing/" itemprop="url" rel="index"><span itemprop="name">Edge Computing</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="configuration">1. Configuration</h1>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Raspberry Pi 5 Hailo AI + M.2 SSD</th>
<th style="text-align: center;">Connection With M.2 Extention Board</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/Hailo/RaspberryPi5_HailoAI_M.2_SSD.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/Hailo/RaspberryPi5_HailoAI_M.2_SSD.png"
alt="Raspberry Pi 5 + Hailo AI + M.2 SSD" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/Hailo/RaspberryPi5_M.2_ExtensionBoard.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/Hailo/RaspberryPi5_M.2_ExtensionBoard.jpg"
alt="Raspberry Pi 5 M.2 Connection" /></a></td>
</tr>
</tbody>
</table>
<p><strong><span style="color:red">Since I personally do NOT like to <a
target="_blank" rel="noopener" href="https://community.hailo.ai/t/hailo-8l-on-ubuntu-24-04-using-docker/1771">Hailo-8L
on Ubuntu 24.04 using Docker</a>, I just struggled to have everything
directly run without <a
target="_blank" rel="noopener" href="https://www.docker.com/">docker</a>:</span></strong></p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/Hailo/hailort_4.19.0.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/Hailo/hailort_4.19.0.png"
alt="HailoRT 4.19.0" /></a></p>
<h1 id="libcamera">2. <code>libcamera</code></h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">➜  ./libcamera-hello </span><br><span class="line">[6:35:36.989225191] [42303]  INFO Camera camera_manager.cpp:325 libcamera v0.3.2+27-7330f29b</span><br><span class="line">[6:35:36.997513009] [42308]  INFO RPI pisp.cpp:695 libpisp version v1.0.7 28196ed6edcf 29-08-2024 (16:33:32)</span><br><span class="line">[6:35:37.101510511] [42308]  INFO RPI pisp.cpp:1154 Registered camera /base/axi/pcie@120000/rp1/i2c@80000/imx708@1a to CFE device /dev/media2 and ISP device /dev/media0 using PiSP variant BCM2712_C0</span><br><span class="line">Preview window unavailable</span><br><span class="line">Mode selection for 2304:1296:12:P</span><br><span class="line">    SRGGB10_CSI2P,1536x864/0 - Score: 3400</span><br><span class="line">    SRGGB10_CSI2P,2304x1296/0 - Score: 1000</span><br><span class="line">    SRGGB10_CSI2P,4608x2592/0 - Score: 1900</span><br><span class="line">Stream configuration adjusted</span><br><span class="line">[6:35:37.104412746] [42303]  INFO Camera camera.cpp:1197 configuring streams: (0) 2304x1296-YUV420 (1) 2304x1296-BGGR_PISP_COMP1</span><br><span class="line">[6:35:37.104513987] [42308]  INFO RPI pisp.cpp:1450 Sensor: /base/axi/pcie@120000/rp1/i2c@80000/imx708@1a - Selected sensor format: 2304x1296-SBGGR10_1X10 - Selected CFE format: 2304x1296-PC1B</span><br><span class="line">#0 (0.00 fps) exp 32680.00 ag 5.89 dg 1.37</span><br><span class="line">#1 (30.01 fps) exp 32680.00 ag 5.92 dg 1.37</span><br><span class="line">#2 (30.01 fps) exp 32680.00 ag 6.40 dg 1.26</span><br><span class="line">#3 (30.01 fps) exp 32680.00 ag 6.40 dg 1.26</span><br><span class="line">#4 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#5 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#6 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#7 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#8 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#9 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#10 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#11 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#12 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#13 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#14 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#15 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#16 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#17 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#18 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#19 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#20 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#21 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#22 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#23 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#24 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#25 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#26 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#27 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#28 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#29 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#30 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#31 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#32 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#33 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#34 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#35 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#36 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#37 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#38 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#39 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#40 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#41 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#42 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#43 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#44 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#45 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#46 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#47 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#48 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#49 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#50 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#51 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#52 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#53 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#54 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#55 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#56 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#57 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#58 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#59 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#60 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#61 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#62 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#63 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#64 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#65 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#66 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#67 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#68 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#69 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#70 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#71 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#72 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#73 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#74 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#75 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#76 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#77 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#78 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#79 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#80 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#81 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#82 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#83 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#84 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#85 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#86 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#87 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#88 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#89 (30.01 fps) exp 32680.00 ag 6.36 dg 1.27</span><br><span class="line">#90 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#91 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#92 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#93 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#94 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#95 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#96 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#97 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#98 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#99 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#100 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#101 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#102 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#103 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#104 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#105 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#106 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#107 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#108 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#109 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#110 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#111 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#112 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#113 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#114 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#115 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#116 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#117 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#118 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#119 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#120 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#121 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#122 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#123 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#124 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#125 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#126 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#127 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#128 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#129 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#130 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#131 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#132 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#133 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#134 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#135 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#136 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#137 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#138 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#139 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#140 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#141 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">#142 (30.01 fps) exp 32680.00 ag 6.32 dg 1.28</span><br><span class="line">➜  bin </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="hailo-model-zoo">3. <a
target="_blank" rel="noopener" href="https://github.com/hailo-ai/hailo_model_zoo">Hailo Model
Zoo</a></h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/hailo-ai/hailo_model_zoo">Hailo Model
Zoo</a></li>
<li>My Pull Request: <a
target="_blank" rel="noopener" href="https://github.com/hailo-ai/hailo_model_zoo/pull/137/">Remove the
dependency of lap</a></li>
<li><code>hailomz</code> command</li>
</ul>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/Hailo/hailomz.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/Hailo/hailomz.png"
alt="hailomz" /></a></p>
<h1 id="demonstration">4. Demonstration</h1>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/23/SBCs/RISC-V/BeagleV-Fire-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/23/SBCs/RISC-V/BeagleV-Fire-2/" class="post-title-link" itemprop="url">BeagleV-Fire 2</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-23 00:27:40" itemprop="dateCreated datePublished" datetime="2024-10-23T00:27:40-07:00">2024-10-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-24 17:59:07" itemprop="dateModified" datetime="2024-10-24T17:59:07-07:00">2024-10-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/Risc-V/" itemprop="url" rel="index"><span itemprop="name">Risc-V</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="prepare-for-beaglev-fire-ubuntu">1. Prepare For <a
target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu">BeagleV-Fire
Ubuntu</a></h1>
<p>Based on my previous blog <a
href="../../../../../../2023/12/19/SBCs/RISC-V/BeagleV-Fire-1">BeagleV-Fire-1.md</a>,
we firstly checkout <a
target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu">BeagleV-Fire
Ubuntu</a>, and do the following updates.</p>
<h2 id="git_sync.sh">1.1 <code>01_git_sync.sh</code></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">GIT_DEPTH=<span class="string">&quot;20&quot;</span></span><br><span class="line">GCC_VERSION=<span class="string">&quot;14.2.0&quot;</span></span><br><span class="line"></span><br><span class="line">HSS_BRANCH=<span class="string">&quot;v2024.09&quot;</span></span><br><span class="line">HSS_REPO=<span class="string">&quot;https://github.com/polarfire-soc/hart-software-services.git&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#UBOOT_BRANCH=&quot;mpfs-uboot-2022.01&quot;</span></span><br><span class="line">UBOOT_BRANCH=<span class="string">&quot;linux4microchip+fpga-2024.09&quot;</span></span><br><span class="line">UBOOT_REPO=<span class="string">&quot;https://github.com/linux4microchip/u-boot-mchp.git&quot;</span></span><br><span class="line"><span class="comment">#UBOOT_BRANCH=&quot;v2023.02-BeagleV-Fire&quot;</span></span><br><span class="line"><span class="comment">#UBOOT_REPO=&quot;https://openbeagle.org/beaglev-fire/beaglev-fire-u-boot.git&quot;</span></span><br><span class="line"><span class="comment">#UBOOT_REPO=&quot;git@openbeagle.org:beaglev-fire/beaglev-fire-u-boot.git&quot;</span></span><br><span class="line"></span><br><span class="line">DT_BRANCH=<span class="string">&quot;v6.6.x-Beagle&quot;</span></span><br><span class="line">DT_REPO=<span class="string">&quot;https://openbeagle.org/beagleboard/BeagleBoard-DeviceTrees.git&quot;</span></span><br><span class="line"><span class="comment">#DT_REPO=&quot;git@openbeagle.org:beagleboard/BeagleBoard-DeviceTrees.git&quot;</span></span><br><span class="line"></span><br><span class="line">LINUX_BRANCH=<span class="string">&quot;linux4microchip+fpga-2024.09.1&quot;</span></span><br><span class="line">LINUX_REPO=<span class="string">&quot;https://github.com/linux4microchip/linux.git&quot;</span></span><br><span class="line"><span class="comment">#LINUX_REPO=&quot;https://openbeagle.org/beaglev-fire/beaglev-fire-linux.git&quot;</span></span><br><span class="line"><span class="comment">#LINUX_REPO=&quot;git@openbeagle.org:beaglev-fire/beaglev-fire-linux.git&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#LINUX_BRANCH=&quot;master&quot;</span></span><br><span class="line"><span class="comment">#LINUX_REPO=&quot;https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f ./mirror/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/<span class="variable">$&#123;GCC_VERSION&#125;</span>/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz&quot;</span></span><br><span class="line">	wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/<span class="variable">$&#123;GCC_VERSION&#125;</span>/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f ./riscv-toolchain/bin/riscv64-linux-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span> ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;tar xf ./mirror/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/&quot;</span></span><br><span class="line">	tar xf ./mirror/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d ./hart-software-services/ ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">rm</span> -rf ./hart-software-services/ || <span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;git clone -b <span class="variable">$&#123;HSS_BRANCH&#125;</span> <span class="variable">$&#123;HSS_REPO&#125;</span> ./hart-software-services/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span>&quot;</span></span><br><span class="line">git <span class="built_in">clone</span> -b <span class="variable">$&#123;HSS_BRANCH&#125;</span> <span class="variable">$&#123;HSS_REPO&#125;</span> ./hart-software-services/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d ./u-boot ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">rm</span> -rf ./u-boot || <span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;git clone -b <span class="variable">$&#123;UBOOT_BRANCH&#125;</span> <span class="variable">$&#123;UBOOT_REPO&#125;</span> ./u-boot/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span>&quot;</span></span><br><span class="line">git <span class="built_in">clone</span> -b <span class="variable">$&#123;UBOOT_BRANCH&#125;</span> <span class="variable">$&#123;UBOOT_REPO&#125;</span> ./u-boot/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d ./device-tree ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">rm</span> -rf ./device-tree || <span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;git clone -b <span class="variable">$&#123;DT_BRANCH&#125;</span> <span class="variable">$&#123;DT_REPO&#125;</span> ./device-tree/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span>&quot;</span></span><br><span class="line">git <span class="built_in">clone</span> -b <span class="variable">$&#123;DT_BRANCH&#125;</span> <span class="variable">$&#123;DT_REPO&#125;</span> ./device-tree/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d ./linux ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">rm</span> -rf ./linux || <span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;git clone -b <span class="variable">$&#123;LINUX_BRANCH&#125;</span> <span class="variable">$&#123;LINUX_REPO&#125;</span> ./linux/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span>&quot;</span></span><br><span class="line">git <span class="built_in">clone</span> --reference-if-able ~/linux-src/ -b <span class="variable">$&#123;LINUX_BRANCH&#125;</span> <span class="variable">$&#123;LINUX_REPO&#125;</span> ./linux/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#BUILDROOT_BRANCH=&quot;bvf&quot;</span></span><br><span class="line"><span class="comment">#BUILDROOT_REPO=&quot;https://openbeagle.org/beaglev-fire/buildroot-external-microchip.git&quot;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#if [ -d ./buildroot ] ; then</span></span><br><span class="line">	<span class="comment">#rm -rf ./buildroot || true</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#echo &quot;git clone -b $&#123;BUILDROOT_BRANCH&#125; $&#123;BUILDROOT_REPO&#125; ./buildroot/ --depth=$&#123;GIT_DEPTH&#125;&quot;</span></span><br><span class="line"><span class="comment">#git clone -b $&#123;BUILDROOT_BRANCH&#125; $&#123;BUILDROOT_REPO&#125; ./buildroot/ --depth=$&#123;GIT_DEPTH&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure>
<h2 id="build_linux.sh">1.2 <code>04_build_linux.sh</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">CORES=$(getconf _NPROCESSORS_ONLN)</span><br><span class="line">wdir=`pwd`</span><br><span class="line">CC=$&#123;CC:-&quot;$&#123;wdir&#125;/riscv-toolchain/bin/riscv64-linux-&quot;&#125;</span><br><span class="line"></span><br><span class="line">cd ./linux/</span><br><span class="line"></span><br><span class="line">if [ ! -f ./.patched ] ; then</span><br><span class="line">	if [ -f arch/riscv/configs/mpfs_defconfig ] ; then</span><br><span class="line">		git am ../patches/linux/0002-PCIe-Change-controller-and-bridge-base-address.patch</span><br><span class="line">		git am ../patches/linux/0003-GPIO-Add-Microchip-CoreGPIO-driver.patch</span><br><span class="line">		git am ../patches/linux/0004-ADC-Add-Microchip-MCP356X-driver.patch</span><br><span class="line">		git am ../patches/linux/0005-Microchip-QSPI-Add-regular-transfers.patch</span><br><span class="line">		git am ../patches/linux/0006-BeagleV-Fire-Add-printk-to-IM219-driver-for-board-te.patch</span><br><span class="line">		git am ../patches/linux/0007-MMC-SPI-Hack-to-support-non-DMA-capable-SPI-ctrl.patch</span><br><span class="line">		git am ../patches/linux/0008-Add-wireless-regdb-regulatory-database-file.patch</span><br><span class="line">		git am ../patches/linux/0009-Makefile-build-mpfs-beaglev-fire.dtb.patch</span><br><span class="line">		git am ../patches/linux/0010-BeagleV-Fire-Add-MPFS-TVS-auxiliary-driver.patch</span><br><span class="line">	fi</span><br><span class="line">	touch .patched</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ -f arch/riscv/configs/mpfs_defconfig ] ; then</span><br><span class="line">#	cp -v ../patches/linux/Makefile arch/riscv/boot/dts/microchip/Makefile</span><br><span class="line">	cp -v ../device-tree/src/riscv/microchip/mpfs-beaglev-fire.dts arch/riscv/boot/dts/microchip/</span><br><span class="line">	cp -v ../device-tree/src/riscv/microchip/mpfs-beaglev-fire-fabric.dtsi arch/riscv/boot/dts/microchip/</span><br><span class="line">	cp -v ../device-tree/src/riscv/microchip/mpfs-beaglev-fire-pinmux.dtsi arch/riscv/boot/dts/microchip/</span><br><span class="line">	#echo &quot;************************************&quot;</span><br><span class="line">	#git diff arch/riscv/boot/dts/microchip/ &gt; log.txt ; cat log.txt ; rm log.txt</span><br><span class="line">	#echo &quot;************************************&quot;</span><br><span class="line">	#echo &quot;Current Device Tree Changes (5 second wait)&quot;</span><br><span class="line">	#sleep 5</span><br><span class="line">#else</span><br><span class="line">#	cp -v ../patches/linux/mainline/Makefile arch/riscv/boot/dts/microchip/Makefile</span><br><span class="line">#	cp -v ../patches/linux/mainline/dts/mpfs-beaglev-fire.dts arch/riscv/boot/dts/microchip/</span><br><span class="line">#	cp -v ../patches/linux/mainline/dts/mpfs-beaglev-fire-fabric.dtsi arch/riscv/boot/dts/microchip/</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;make ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; clean&quot;</span><br><span class="line">make ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; clean</span><br><span class="line"></span><br><span class="line">if [ -f arch/riscv/configs/mpfs_defconfig ] ; then</span><br><span class="line">	cp -v ../patches/linux/mpfs_defconfig ./arch/riscv/configs/mpfs_defconfig</span><br><span class="line"></span><br><span class="line">	echo &quot;make ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; mpfs_defconfig&quot;</span><br><span class="line">	make ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; mpfs_defconfig</span><br><span class="line"></span><br><span class="line">	./scripts/config --set-str CONFIG_LOCALVERSION &quot;-$(date +%Y%m%d)&quot;</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_OF_OVERLAY</span><br><span class="line">	./scripts/config --disable CONFIG_MODULE_DECOMPRESS</span><br><span class="line"></span><br><span class="line">	#enable CONFIG_DYNAMIC_FTRACE</span><br><span class="line">	./scripts/config --enable CONFIG_FUNCTION_TRACER</span><br><span class="line">	./scripts/config --enable CONFIG_DYNAMIC_FTRACE</span><br><span class="line"></span><br><span class="line">	./scripts/config --disable CONFIG_MODULE_COMPRESS_ZSTD</span><br><span class="line">	./scripts/config --enable CONFIG_MODULE_COMPRESS_XZ</span><br><span class="line">	./scripts/config --enable CONFIG_GPIO_AGGREGATOR</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_USER_API_HASH</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_USER_API_SKCIPHER</span><br><span class="line">	./scripts/config --enable CONFIG_KEY_DH_OPERATIONS</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_ECB</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_MD4</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_MD5</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_CBC</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_SHA256</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_AES</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_DES</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_CMAC</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_HMAC</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_SHA512</span><br><span class="line">	./scripts/config --enable CONFIG_CRYPTO_SHA1</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_SENSORS_TVS_MPFS</span><br><span class="line"></span><br><span class="line">	echo &quot;make -j$&#123;CORES&#125; ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; olddefconfig&quot;</span><br><span class="line">	make -j$&#123;CORES&#125; ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; olddefconfig</span><br><span class="line">else</span><br><span class="line">	echo &quot;make ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; defconfig&quot;</span><br><span class="line">	make ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; defconfig</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_PCIE_MICROCHIP_HOST</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_OF_OVERLAY</span><br><span class="line">	./scripts/config --enable CONFIG_MODULE_COMPRESS_ZSTD</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_I2C</span><br><span class="line">	./scripts/config --enable CONFIG_EEPROM_AT24</span><br><span class="line">	./scripts/config --enable CONFIG_I2C_MICROCHIP_CORE</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_SPI_MICROCHIP_CORE</span><br><span class="line">	./scripts/config --enable CONFIG_SPI_MICROCHIP_CORE_QSPI</span><br><span class="line">	./scripts/config --module CONFIG_SPI_SPIDEV</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_GPIO_SYSFS</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_HW_RANDOM_POLARFIRE_SOC</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_USB_MUSB_HDRC</span><br><span class="line">	./scripts/config --enable CONFIG_NOP_USB_XCEIV</span><br><span class="line">	./scripts/config --enable CONFIG_USB_MUSB_POLARFIRE_SOC</span><br><span class="line">	./scripts/config --enable CONFIG_USB_MUSB_DUAL_ROLE</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_MAILBOX</span><br><span class="line">	./scripts/config --enable CONFIG_POLARFIRE_SOC_MAILBOX</span><br><span class="line">	./scripts/config --disable CONFIG_SUN6I_MSGBOX</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_REMOTEPROC</span><br><span class="line">	./scripts/config --enable CONFIG_REMOTEPROC_CDEV</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_POLARFIRE_SOC_SYS_CTRL</span><br><span class="line"></span><br><span class="line">	./scripts/config --enable CONFIG_USB_GADGET</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS</span><br><span class="line">	./scripts/config --enable CONFIG_CONFIGFS_FS</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_SERIAL</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_ACM</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_OBEX</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_NCM</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_ECM</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_ECM_SUBSET</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_RNDIS</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_EEM</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_PHONET</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_MASS_STORAGE</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_F_LB_SS</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_F_FS</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_F_UAC1</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_F_UAC2</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_F_MIDI</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_F_HID</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_F_UVC</span><br><span class="line">	./scripts/config --enable CONFIG_USB_CONFIGFS_F_PRINTER</span><br><span class="line"></span><br><span class="line">	./scripts/config --module CONFIG_MEDIA_SUPPORT</span><br><span class="line">	./scripts/config --enable CONFIG_MEDIA_SUPPORT_FILTER</span><br><span class="line">	./scripts/config --enable CONFIG_MEDIA_SUBDRV_AUTOSELECT</span><br><span class="line">	./scripts/config --enable CONFIG_MEDIA_CAMERA_SUPPORT</span><br><span class="line">	./scripts/config --module CONFIG_VIDEO_IMX219</span><br><span class="line"></span><br><span class="line">	./scripts/config --module CONFIG_IIO</span><br><span class="line"></span><br><span class="line">	#Cleanup large DRM...</span><br><span class="line">	./scripts/config --disable CONFIG_DRM</span><br><span class="line">	./scripts/config --disable CONFIG_DRM_RADEON</span><br><span class="line">	./scripts/config --disable CONFIG_DRM_NOUVEAU</span><br><span class="line">	./scripts/config --disable CONFIG_DRM_SUN4I</span><br><span class="line"></span><br><span class="line">	#Optimize:</span><br><span class="line">	./scripts/config --enable CONFIG_IP_NF_IPTABLES</span><br><span class="line">	./scripts/config --enable CONFIG_NETFILTER_XTABLES</span><br><span class="line">	./scripts/config --enable CONFIG_NLS_ISO8859_1</span><br><span class="line">	./scripts/config --enable CONFIG_BLK_DEV_DM</span><br><span class="line"></span><br><span class="line">	./scripts/config --set-str CONFIG_LOCALVERSION &quot;-$(date +%Y%m%d)&quot;</span><br><span class="line"></span><br><span class="line">	echo &quot;make -j$&#123;CORES&#125; ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; olddefconfig&quot;</span><br><span class="line">	make -j$&#123;CORES&#125; ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; olddefconfig</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;make -j$&#123;CORES&#125; ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; Image modules dtbs&quot;</span><br><span class="line">make -j$&#123;CORES&#125; ARCH=riscv CROSS_COMPILE=&quot;ccache $&#123;CC&#125;&quot; Image modules dtbs</span><br><span class="line"></span><br><span class="line">if [ ! -f ./arch/riscv/boot/Image ] ; then</span><br><span class="line">	echo &quot;Build Failed&quot;</span><br><span class="line">	exit 2</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">KERNEL_UTS=$(cat &quot;$&#123;wdir&#125;/linux/include/generated/utsrelease.h&quot; | awk &#x27;&#123;print $3&#125;&#x27; | sed &#x27;s/\&quot;//g&#x27; )</span><br><span class="line"></span><br><span class="line">if [ -d &quot;$&#123;wdir&#125;/deploy/tmp/&quot; ] ; then</span><br><span class="line">	rm -rf &quot;$&#123;wdir&#125;/deploy/tmp/&quot;</span><br><span class="line">fi</span><br><span class="line">mkdir -p &quot;$&#123;wdir&#125;/deploy/tmp/&quot;</span><br><span class="line"></span><br><span class="line">make -s ARCH=riscv CROSS_COMPILE=$&#123;CC&#125; modules_install INSTALL_MOD_PATH=&quot;$&#123;wdir&#125;/deploy/tmp&quot;</span><br><span class="line"></span><br><span class="line">if [ -f &quot;$&#123;wdir&#125;/deploy/$&#123;KERNEL_UTS&#125;-modules.tar.gz&quot; ] ; then</span><br><span class="line">	rm -rf &quot;$&#123;wdir&#125;/deploy/$&#123;KERNEL_UTS&#125;-modules.tar.gz&quot; || true</span><br><span class="line">fi</span><br><span class="line">echo &quot;Compressing $&#123;KERNEL_UTS&#125;-modules.tar.gz...&quot;</span><br><span class="line">echo &quot;$&#123;KERNEL_UTS&#125;&quot; &gt; &quot;$&#123;wdir&#125;/deploy/.modules&quot;</span><br><span class="line">cd &quot;$&#123;wdir&#125;/deploy/tmp&quot; || true</span><br><span class="line">tar --create --gzip --file &quot;../$&#123;KERNEL_UTS&#125;-modules.tar.gz&quot; ./*</span><br><span class="line">cd &quot;$&#123;wdir&#125;/linux/&quot; || exit</span><br><span class="line">rm -rf &quot;$&#123;wdir&#125;/deploy/tmp&quot; || true</span><br><span class="line"></span><br><span class="line">if [ -f arch/riscv/configs/mpfs_defconfig ] ; then</span><br><span class="line">	cp -v ./.config ../patches/linux/mpfs_defconfig</span><br><span class="line">	cp -v ./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire.dts ../patches/linux/dts/mpfs-beaglev-fire.dts</span><br><span class="line">	cp -v ./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire-fabric.dtsi ../patches/linux/dts/mpfs-beaglev-fire-fabric.dtsi</span><br><span class="line">else</span><br><span class="line">	cp -v ./.config ../patches/linux/mainline/defconfig</span><br><span class="line">	cp -v ./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire.dts ../patches/linux/mainline/dts/mpfs-beaglev-fire.dts</span><br><span class="line">	cp -v ./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire-fabric.dtsi ../patches/linux/mainline/dts/mpfs-beaglev-fire-fabric.dtsi</span><br><span class="line">fi</span><br><span class="line">if [ ! -d ../deploy/input/ ] ; then</span><br><span class="line">	mkdir -p ../deploy/input/ || true</span><br><span class="line">fi</span><br><span class="line">cp -v ./arch/riscv/boot/Image ../deploy/input/</span><br><span class="line">cp -v ./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire.dtb ../deploy/input/</span><br><span class="line"></span><br><span class="line">cd ../</span><br><span class="line"></span><br><span class="line">cp -v ./patches/linux/beaglev_fire.its ./deploy/input/</span><br><span class="line">cd ./deploy/input/</span><br><span class="line">gzip -9 Image -c &gt; Image.gz</span><br><span class="line">if [ -f ../../u-boot/tools/mkimage ] ; then</span><br><span class="line">	../../u-boot/tools/mkimage -f beaglev_fire.its beaglev_fire.itb</span><br><span class="line">fi</span><br><span class="line">#</span><br></pre></td></tr></table></figure>
<h2 id="generate_ubuntu_console_root.sh">1.3
<code>06_generate_ubuntu_console_root.sh</code></h2>
<p>Just update <strong>23.04</strong> to <strong>24.04</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">if ! id | grep -q root; then</span><br><span class="line">	echo &quot;./06_generate_ubuntu_console_root.sh must be run as root:&quot;</span><br><span class="line">	echo &quot;sudo ./06_generate_ubuntu_console_root.sh&quot;</span><br><span class="line">	exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">wdir=`pwd`</span><br><span class="line"></span><br><span class="line">if [ -f /tmp/latest ] ; then</span><br><span class="line">	rm -rf /tmp/latest | true</span><br><span class="line">fi</span><br><span class="line">wget --quiet --directory-prefix=/tmp/ https://rcn-ee.net/rootfs/ubuntu-riscv64-24.04-minimal/latest || true</span><br><span class="line">if [ -f /tmp/latest ] ; then</span><br><span class="line">	latest_rootfs=$(cat &quot;/tmp/latest&quot;)</span><br><span class="line">	datestamp=$(cat &quot;/tmp/latest&quot; | awk -F &#x27;riscv64-&#x27; &#x27;&#123;print $2&#125;&#x27; | awk -F &#x27;.&#x27; &#x27;&#123;print $1&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">	if [ ! -f ./deploy/ubuntu-24.04.1-console-riscv64-$&#123;datestamp&#125;/riscv64-rootfs-ubuntu-lunar.tar ] ; then</span><br><span class="line">		if [ -f ./.gitlab-runner ] ; then</span><br><span class="line">			wget -c --directory-prefix=./deploy http://192.168.1.98/mirror/rcn-ee.us/rootfs/ubuntu-riscv64-24.04-minimal/$&#123;datestamp&#125;/$&#123;latest_rootfs&#125;</span><br><span class="line">		else</span><br><span class="line">			wget -c --directory-prefix=./deploy https://rcn-ee.net/rootfs/ubuntu-riscv64-24.04-minimal/$&#123;datestamp&#125;/$&#123;latest_rootfs&#125;</span><br><span class="line">		fi</span><br><span class="line">		cd ./deploy/</span><br><span class="line">		tar xf $&#123;latest_rootfs&#125;</span><br><span class="line">		cd ../</span><br><span class="line">	fi</span><br><span class="line">else</span><br><span class="line">	echo &quot;Failure: getting image&quot;</span><br><span class="line">	exit 2</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ -d ./ignore/.root ] ; then</span><br><span class="line">	rm -rf ./ignore/.root || true</span><br><span class="line">fi</span><br><span class="line">mkdir -p ./ignore/.root</span><br><span class="line"></span><br><span class="line">echo &quot;Extracting: ubuntu-24.04.1-console-riscv64-$&#123;datestamp&#125;/riscv64-rootfs-ubuntu-lunar.tar&quot;</span><br><span class="line">tar xfp ./deploy/ubuntu-24.04.1-console-riscv64-$&#123;datestamp&#125;/riscv64-rootfs-ubuntu-lunar.tar -C ./ignore/.root</span><br><span class="line">sync</span><br><span class="line"></span><br><span class="line">mkdir -p ./deploy/input/ || true</span><br><span class="line">cp -v ./deploy/boot.scr deploy/input/</span><br><span class="line">cp -v ./deploy/sysconf.txt deploy/input/</span><br><span class="line"></span><br><span class="line">echo &quot;label Linux eMMC&quot; &gt; ./deploy/input/extlinux.conf</span><br><span class="line">echo &quot;    kernel /Image&quot; &gt;&gt; ./deploy/input/extlinux.conf</span><br><span class="line">#echo &quot;    append root=/dev/mmcblk0p3 ro rootfstype=ext4 rootwait console=ttyS0,115200 earlycon uio_pdrv_genirq.of_id=generic-uio net.ifnames=0&quot; &gt;&gt; ./deploy/input/extlinux.conf</span><br><span class="line">echo &quot;    fdtdir /&quot; &gt;&gt; ./deploy/input/extlinux.conf</span><br><span class="line">echo &quot;    fdt /mpfs-beaglev-fire.dtb&quot; &gt;&gt; ./deploy/input/extlinux.conf</span><br><span class="line">echo &quot;    #fdtoverlays /overlays/&lt;file&gt;.dtbo&quot; &gt;&gt; ./deploy/input/extlinux.conf</span><br><span class="line"></span><br><span class="line">#echo &quot;extlinux/extlinux.conf&quot;</span><br><span class="line">#cat ./deploy/input/extlinux.conf</span><br><span class="line"></span><br><span class="line">mkdir -p ./ignore/.root/boot/firmware/ || true</span><br><span class="line"></span><br><span class="line">echo &#x27;/dev/mmcblk0p2  /boot/firmware/  vfat  user,uid=1000,gid=1000,defaults  0  2&#x27; &gt;&gt; ./ignore/.root/etc/fstab</span><br><span class="line">echo &#x27;/dev/mmcblk0p3  /  auto  errors=remount-ro  0  1&#x27; &gt;&gt; ./ignore/.root/etc/fstab</span><br><span class="line">echo &#x27;debugfs  /sys/kernel/debug  debugfs  mode=755,uid=root,gid=gpio,defaults  0  0&#x27; &gt;&gt; ./ignore/.root/etc/fstab</span><br><span class="line"></span><br><span class="line">#Network-Manager, ignore eth1</span><br><span class="line">#cp -v ./rootfs/etc/NetworkManager/conf.d/*.conf ./ignore/.root/etc/NetworkManager/conf.d/</span><br><span class="line"></span><br><span class="line">cp -v ./ignore/.root/etc/bbb.io/templates/eth0-DHCP.network ./ignore/.root/etc/systemd/network/eth0.network || true</span><br><span class="line">cp -v ./ignore/.root/etc/bbb.io/templates/eth1-DHCP.network ./ignore/.root/etc/systemd/network/eth1.network || true</span><br><span class="line"></span><br><span class="line"># setuid root ping+ping6</span><br><span class="line">chmod u+s ./ignore/.root/usr/bin/ping ./ignore/.root/usr/bin/ping6</span><br><span class="line"></span><br><span class="line">#Default nginx export</span><br><span class="line">rm -f ./ignore/.root/etc/nginx/sites-enabled/default || true</span><br><span class="line">cp -v ./ignore/.root/etc/bbb.io/templates/nginx/nginx-autoindex ./ignore/.root/etc/nginx/sites-enabled/default</span><br><span class="line">cp -v ./ignore/.root/etc/bbb.io/templates/nginx/*.html ./ignore/.root/var/www/html/</span><br><span class="line">rm -f ./ignore/.root/var/www/html/index.nginx-debian.html || true</span><br><span class="line"></span><br><span class="line">if [ -f ./deploy/.modules ] ; then</span><br><span class="line">	version=$(cat ./deploy/.modules || true)</span><br><span class="line">	if [ -f ./deploy/$&#123;version&#125;-modules.tar.gz ] ; then</span><br><span class="line">		tar xf ./deploy/$&#123;version&#125;-modules.tar.gz -C ./ignore/.root/usr/</span><br><span class="line">	fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &#x27;---------------------&#x27;</span><br><span class="line">echo &#x27;File Size&#x27;</span><br><span class="line">du -sh ignore/.root/ || true</span><br><span class="line">echo &#x27;---------------------&#x27;</span><br><span class="line"></span><br><span class="line">dd if=/dev/zero of=./deploy/input/root.ext4 bs=1 count=0 seek=3800M</span><br><span class="line">mkfs.ext4 -F ./deploy/input/root.ext4 -d ./ignore/.root</span><br><span class="line"></span><br><span class="line">if [ -f ./.06_generate_root.sh ] ; then</span><br><span class="line">	rm -f ./.06_generate_root.sh || true</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h2 id="git_linux_mainline.sh">1.4
<code>git_linux_mainline.sh</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">GCC_VERSION=&quot;14.2.0&quot;</span><br><span class="line"></span><br><span class="line">HSS_BRANCH=&quot;v2024.09&quot;</span><br><span class="line">HSS_REPO=&quot;https://github.com/polarfire-soc/hart-software-services.git&quot;</span><br><span class="line"></span><br><span class="line">#UBOOT_BRANCH=&quot;mpfs-uboot-2022.01&quot;</span><br><span class="line">UBOOT_BRANCH=&quot;linux4microchip+fpga-2024.09&quot;</span><br><span class="line">UBOOT_REPO=&quot;https://github.com/linux4microchip/u-boot-mchp&quot;</span><br><span class="line"></span><br><span class="line">#LINUX_BRANCH=&quot;linux4microchip+fpga-2023.06&quot;</span><br><span class="line">#LINUX_REPO=&quot;https://github.com/linux4microchip/linux.git&quot;</span><br><span class="line"></span><br><span class="line">LINUX_BRANCH=&quot;master&quot;</span><br><span class="line">LINUX_REPO=&quot;https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git&quot;</span><br><span class="line"></span><br><span class="line">#Use custom device tree and Makefile in patches/linux directory...</span><br><span class="line">#LINUX_BRANCH=&quot;linux-6.4.y&quot;</span><br><span class="line">#LINUX_BRANCH=&quot;linux-6.3.y&quot;</span><br><span class="line">#LINUX_BRANCH=&quot;linux-6.2.y&quot;</span><br><span class="line">#LINUX_BRANCH=&quot;linux-6.1.y&quot;</span><br><span class="line">#LINUX_REPO=&quot;https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git&quot;</span><br><span class="line"></span><br><span class="line">GIT_DEPTH=&quot;20&quot;</span><br><span class="line"></span><br><span class="line">if [ ! -f ./mirror/x86_64-gcc-$&#123;GCC_VERSION&#125;.0-nolibc-riscv64-linux.tar.xz ] ; then</span><br><span class="line">	echo &quot;wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/14.2.0/x86_64-gcc-14.2.0-nolibc-riscv64-linux.tar.xz&quot;</span><br><span class="line">	wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/14.2.0/x86_64-gcc-14.2.0-nolibc-riscv64-linux.tar.xz</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ ! -f ./riscv-toolchain/bin/riscv64-linux-gcc-$&#123;GCC_VERSION&#125;.0 ] ; then</span><br><span class="line">	echo &quot;tar xf ./mirror/x86_64-gcc-14.2.0-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/&quot;</span><br><span class="line">	tar xf ./mirror/x86_64-gcc-14.2.0-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">#if [ ! -f ./mirror/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz ] ; then</span><br><span class="line">#	echo &quot;wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/13.2.0/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz&quot;</span><br><span class="line">#	wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/13.2.0/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz</span><br><span class="line">#fi</span><br><span class="line"></span><br><span class="line">#if [ ! -f ./riscv-toolchain/bin/riscv64-linux-gcc-13.2.0 ] ; then</span><br><span class="line">#	echo &quot;tar xf ./mirror/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/&quot;</span><br><span class="line">#	tar xf ./mirror/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/</span><br><span class="line">#fi</span><br><span class="line"></span><br><span class="line">#if [ -d ./hart-software-services/ ] ; then</span><br><span class="line">#	rm -rf ./hart-software-services/ || true</span><br><span class="line">#fi</span><br><span class="line"></span><br><span class="line">#echo &quot;git clone -b $&#123;HSS_BRANCH&#125; $&#123;HSS_REPO&#125; ./hart-software-services/ --depth=$&#123;GIT_DEPTH&#125;&quot;</span><br><span class="line">#git clone -b $&#123;HSS_BRANCH&#125; $&#123;HSS_REPO&#125; ./hart-software-services/ --depth=$&#123;GIT_DEPTH&#125;</span><br><span class="line"></span><br><span class="line">#if [ -d ./u-boot ] ; then</span><br><span class="line">#	rm -rf ./u-boot || true</span><br><span class="line">#fi</span><br><span class="line"></span><br><span class="line">#echo &quot;git clone -b $&#123;UBOOT_BRANCH&#125; $&#123;UBOOT_REPO&#125; ./u-boot/ --depth=$&#123;GIT_DEPTH&#125;&quot;</span><br><span class="line">#git clone -b $&#123;UBOOT_BRANCH&#125; $&#123;UBOOT_REPO&#125; ./u-boot/ --depth=$&#123;GIT_DEPTH&#125;</span><br><span class="line"></span><br><span class="line">if [ -d ./linux ] ; then</span><br><span class="line">	rm -rf ./linux || true</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;git clone -b $&#123;LINUX_BRANCH&#125; $&#123;LINUX_REPO&#125; ./linux/ --depth=$&#123;GIT_DEPTH&#125;&quot;</span><br><span class="line">git clone -b $&#123;LINUX_BRANCH&#125; $&#123;LINUX_REPO&#125; ./linux/ --depth=$&#123;GIT_DEPTH&#125;</span><br><span class="line"></span><br><span class="line">#</span><br></pre></td></tr></table></figure>
<h2 id="git_linux_mpfs.sh">1.5 <code>git_linux_mpfs.sh</code></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">GCC_VERSION=<span class="string">&quot;14.2.0&quot;</span></span><br><span class="line"></span><br><span class="line">HSS_BRANCH=<span class="string">&quot;v2024.09&quot;</span></span><br><span class="line">HSS_REPO=<span class="string">&quot;https://github.com/polarfire-soc/hart-software-services.git&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#UBOOT_BRANCH=&quot;mpfs-uboot-2022.01&quot;</span></span><br><span class="line">UBOOT_BRANCH=<span class="string">&quot;u-boot-2024.07-mchp&quot;</span></span><br><span class="line">UBOOT_REPO=<span class="string">&quot;https://github.com/linux4microchip/u-boot-mchp.git&quot;</span></span><br><span class="line"></span><br><span class="line">LINUX_BRANCH=<span class="string">&quot;linux4microchip+fpga-2024.09&quot;</span></span><br><span class="line">LINUX_REPO=<span class="string">&quot;https://github.com/linux4microchip/linux.git&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#LINUX_BRANCH=&quot;master&quot;</span></span><br><span class="line"><span class="comment">#LINUX_REPO=&quot;https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git&quot;</span></span><br><span class="line"></span><br><span class="line">GIT_DEPTH=<span class="string">&quot;20&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f ./mirror/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/<span class="variable">$&#123;GCC_VERSION&#125;</span>/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz&quot;</span></span><br><span class="line">	wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/<span class="variable">$&#123;GCC_VERSION&#125;</span>/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -f ./riscv-toolchain/bin/riscv64-linux-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span> ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;tar xf ./mirror/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/&quot;</span></span><br><span class="line">	tar xf ./mirror/x86_64-gcc-<span class="variable">$&#123;GCC_VERSION&#125;</span>-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#if [ ! -f ./mirror/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz ] ; then</span></span><br><span class="line"><span class="comment">#	echo &quot;wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/13.2.0/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz&quot;</span></span><br><span class="line"><span class="comment">#	wget -c --directory-prefix=./mirror/ https://mirrors.edge.kernel.org/pub/tools/crosstool/files/bin/x86_64/13.2.0/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#if [ ! -f ./riscv-toolchain/bin/riscv64-linux-gcc-13.2.0 ] ; then</span></span><br><span class="line"><span class="comment">#	echo &quot;tar xf ./mirror/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/&quot;</span></span><br><span class="line"><span class="comment">#	tar xf ./mirror/x86_64-gcc-13.2.0-nolibc-riscv64-linux.tar.xz --strip-components=2 -C ./riscv-toolchain/</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#if [ -d ./hart-software-services/ ] ; then</span></span><br><span class="line"><span class="comment">#	rm -rf ./hart-software-services/ || true</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#echo &quot;git clone -b $&#123;HSS_BRANCH&#125; $&#123;HSS_REPO&#125; ./hart-software-services/ --depth=$&#123;GIT_DEPTH&#125;&quot;</span></span><br><span class="line"><span class="comment">#git clone -b $&#123;HSS_BRANCH&#125; $&#123;HSS_REPO&#125; ./hart-software-services/ --depth=$&#123;GIT_DEPTH&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#if [ -d ./u-boot ] ; then</span></span><br><span class="line"><span class="comment">#	rm -rf ./u-boot || true</span></span><br><span class="line"><span class="comment">#fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#echo &quot;git clone -b $&#123;UBOOT_BRANCH&#125; $&#123;UBOOT_REPO&#125; ./u-boot/ --depth=$&#123;GIT_DEPTH&#125;&quot;</span></span><br><span class="line"><span class="comment">#git clone -b $&#123;UBOOT_BRANCH&#125; $&#123;UBOOT_REPO&#125; ./u-boot/ --depth=$&#123;GIT_DEPTH&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d ./linux ] ; <span class="keyword">then</span></span><br><span class="line">	<span class="built_in">rm</span> -rf ./linux || <span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;git clone -b <span class="variable">$&#123;LINUX_BRANCH&#125;</span> <span class="variable">$&#123;LINUX_REPO&#125;</span> ./linux/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span>&quot;</span></span><br><span class="line">git <span class="built_in">clone</span> -b <span class="variable">$&#123;LINUX_BRANCH&#125;</span> <span class="variable">$&#123;LINUX_REPO&#125;</span> ./linux/ --depth=<span class="variable">$&#123;GIT_DEPTH&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure>
<h1
id="manually-flash-beaglev-fire-board-with-all-updates---failed-to-boot">2.
Manually Flash <a
target="_blank" rel="noopener" href="https://www.beagleboard.org/boards/beaglev-fire">BeagleV-Fire
Board</a> With ALL Updates - Failed To Boot</h1>
<h2 id="git_sync.sh-1">2.1 <code>01_git_sync.sh</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./01_git_sync.sh </span><br><span class="line">git clone -b v2024.09 https://github.com/polarfire-soc/hart-software-services.git ./hart-software-services/ --depth=20</span><br><span class="line">Cloning into &#x27;./hart-software-services&#x27;...</span><br><span class="line">remote: Enumerating objects: 1927, done.</span><br><span class="line">remote: Counting objects: 100% (1927/1927), done.</span><br><span class="line">remote: Compressing objects: 100% (1269/1269), done.</span><br><span class="line">remote: Total 1927 (delta 750), reused 1310 (delta 594), pack-reused 0 (from 0)</span><br><span class="line">Receiving objects: 100% (1927/1927), 4.34 MiB | 9.74 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (750/750), done.</span><br><span class="line">Note: switching to &#x27;d4f264196f6549a41eab246e1df4ab58b5744950&#x27;.</span><br><span class="line"></span><br><span class="line">You are in &#x27;detached HEAD&#x27; state. You can look around, make experimental</span><br><span class="line">changes and commit them, and you can discard any commits you make in this</span><br><span class="line">state without impacting any branches by switching back to a branch.</span><br><span class="line"></span><br><span class="line">If you want to create a new branch to retain commits you create, you may</span><br><span class="line">do so (now or later) by using -c with the switch command. Example:</span><br><span class="line"></span><br><span class="line">  git switch -c &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line">Or undo this operation with:</span><br><span class="line"></span><br><span class="line">  git switch -</span><br><span class="line"></span><br><span class="line">Turn off this advice by setting config variable advice.detachedHead to false</span><br><span class="line"></span><br><span class="line">git clone -b linux4microchip+fpga-2024.09 https://github.com/linux4microchip/u-boot-mchp.git ./u-boot/ --depth=20</span><br><span class="line">Cloning into &#x27;./u-boot&#x27;...</span><br><span class="line">remote: Enumerating objects: 21768, done.</span><br><span class="line">remote: Counting objects: 100% (21768/21768), done.</span><br><span class="line">remote: Compressing objects: 100% (18900/18900), done.</span><br><span class="line">remote: Total 21768 (delta 3895), reused 13023 (delta 2479), pack-reused 0 (from 0)</span><br><span class="line">Receiving objects: 100% (21768/21768), 28.80 MiB | 21.37 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (3895/3895), done.</span><br><span class="line">Note: switching to &#x27;f3858c18fa163210ebcb95d44e2ab181a234cdf0&#x27;.</span><br><span class="line"></span><br><span class="line">You are in &#x27;detached HEAD&#x27; state. You can look around, make experimental</span><br><span class="line">changes and commit them, and you can discard any commits you make in this</span><br><span class="line">state without impacting any branches by switching back to a branch.</span><br><span class="line"></span><br><span class="line">If you want to create a new branch to retain commits you create, you may</span><br><span class="line">do so (now or later) by using -c with the switch command. Example:</span><br><span class="line"></span><br><span class="line">  git switch -c &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line">Or undo this operation with:</span><br><span class="line"></span><br><span class="line">  git switch -</span><br><span class="line"></span><br><span class="line">Turn off this advice by setting config variable advice.detachedHead to false</span><br><span class="line"></span><br><span class="line">Updating files: 100% (19998/19998), done.</span><br><span class="line">git clone -b v6.6.x-Beagle https://openbeagle.org/beagleboard/BeagleBoard-DeviceTrees.git ./device-tree/ --depth=20</span><br><span class="line">Cloning into &#x27;./device-tree&#x27;...</span><br><span class="line">remote: Enumerating objects: 461, done.</span><br><span class="line">remote: Counting objects: 100% (461/461), done.</span><br><span class="line">remote: Compressing objects: 100% (301/301), done.</span><br><span class="line">remote: Total 461 (delta 202), reused 303 (delta 133), pack-reused 0 (from 0)</span><br><span class="line">Receiving objects: 100% (461/461), 421.34 KiB | 8.60 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (202/202), done.</span><br><span class="line">git clone -b linux4microchip+fpga-2024.09.1 https://github.com/linux4microchip/linux.git ./linux/ --depth=20</span><br><span class="line">Cloning into &#x27;./linux&#x27;...</span><br><span class="line">info: Could not add alternate for &#x27;/home/lvision/linux-src/&#x27;: path &#x27;/home/lvision/linux-src/&#x27; does not exist</span><br><span class="line">remote: Enumerating objects: 104359, done.</span><br><span class="line">remote: Counting objects: 100% (104359/104359), done.</span><br><span class="line">remote: Compressing objects: 100% (86274/86274), done.</span><br><span class="line">remote: Total 104359 (delta 20278), reused 99348 (delta 17156), pack-reused 0 (from 0)</span><br><span class="line">Receiving objects: 100% (104359/104359), 269.63 MiB | 16.51 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (20278/20278), done.</span><br><span class="line">Note: switching to &#x27;eed24b95b006240f806e6e7730ff3782a16074df&#x27;.</span><br><span class="line"></span><br><span class="line">You are in &#x27;detached HEAD&#x27; state. You can look around, make experimental</span><br><span class="line">changes and commit them, and you can discard any commits you make in this</span><br><span class="line">state without impacting any branches by switching back to a branch.</span><br><span class="line"></span><br><span class="line">If you want to create a new branch to retain commits you create, you may</span><br><span class="line">do so (now or later) by using -c with the switch command. Example:</span><br><span class="line"></span><br><span class="line">  git switch -c &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line">Or undo this operation with:</span><br><span class="line"></span><br><span class="line">  git switch -</span><br><span class="line"></span><br><span class="line">Turn off this advice by setting config variable advice.detachedHead to false</span><br><span class="line"></span><br><span class="line">Updating files: 100% (81932/81932), done.</span><br><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ </span><br></pre></td></tr></table></figure>
<h2 id="build_hss.sh">2.2 <code>./02_build_hss.sh</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./02_build_hss.sh </span><br><span class="line">make: Entering directory &#x27;....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator&#x27;</span><br><span class="line"> RM      ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/hss-payload-generator ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/main.o ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/yaml_parser.o ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/blob_handler.o ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/elf_parser.o ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/elf_strings.o ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/crc32.o ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/generate_payload.o ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/dump_payload.o ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/debug_printf.o</span><br><span class="line">make: Leaving directory &#x27;....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator&#x27;</span><br><span class="line">make -C hart-software-services/tools/hss-payload-generator/</span><br><span class="line">make: Entering directory &#x27;....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator&#x27;</span><br><span class="line"> CC        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/main.o</span><br><span class="line"> CC        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/yaml_parser.o</span><br><span class="line"> CC        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/blob_handler.o</span><br><span class="line"> CC        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/elf_parser.o</span><br><span class="line"> CC        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/elf_strings.o</span><br><span class="line"> CC        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/crc32.o</span><br><span class="line"> CC        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/generate_payload.o</span><br><span class="line"> CC        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/dump_payload.o</span><br><span class="line"> CC        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/debug_printf.o</span><br><span class="line"> LD        ....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/hss-payload-generator</span><br><span class="line">make: Leaving directory &#x27;....../BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator&#x27;</span><br><span class="line">&#x27;./hart-software-services/tools/hss-payload-generator/hss-payload-generator&#x27; -&gt; &#x27;./deploy/hss-payload-generator&#x27;</span><br></pre></td></tr></table></figure>
<h2 id="build_u-boot.sh">2.3 <code>./03_build_u-boot.sh</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./03_build_u-boot.sh </span><br><span class="line">make: Entering directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">make: Leaving directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">make: Entering directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">  HOSTCC  scripts/basic/fixdep</span><br><span class="line">  HOSTCC  scripts/kconfig/conf.o</span><br><span class="line">  YACC    scripts/kconfig/zconf.tab.c</span><br><span class="line">  LEX     scripts/kconfig/zconf.lex.c</span><br><span class="line">  HOSTCC  scripts/kconfig/zconf.tab.o</span><br><span class="line">  HOSTLD  scripts/kconfig/conf</span><br><span class="line">#</span><br><span class="line"># configuration written to .config</span><br><span class="line">#</span><br><span class="line">make: Leaving directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">make: Entering directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">scripts/kconfig/conf  --olddefconfig Kconfig</span><br><span class="line">#</span><br><span class="line"># configuration written to .config</span><br><span class="line">#</span><br><span class="line">make: Leaving directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">make: Entering directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">scripts/kconfig/conf  --savedefconfig=defconfig Kconfig</span><br><span class="line">make: Leaving directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">&#x27;./u-boot/defconfig&#x27; -&gt; &#x27;./u-boot/configs/microchip_mpfs_icicle_defconfig&#x27;</span><br><span class="line">&#x27;./u-boot/defconfig&#x27; -&gt; &#x27;./patches/u-boot/beaglev-fire/microchip_mpfs_icicle_defconfig&#x27;</span><br><span class="line">make -C u-boot -j48 ARCH=riscv CROSS_COMPILE=....../BeagleV-Fire-ubuntu/riscv-toolchain/bin/riscv64-linux- all</span><br><span class="line">make: Entering directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">scripts/kconfig/conf  --syncconfig Kconfig</span><br><span class="line">  UPD     include/config.h</span><br><span class="line">  CFG     u-boot.cfg</span><br><span class="line">  GEN     include/autoconf.mk.dep</span><br><span class="line">  GEN     include/autoconf.mk</span><br><span class="line">  UPD     include/generated/dt.h</span><br><span class="line">  ENVC    include/generated/env.txt</span><br><span class="line">  UPD     include/generated/timestamp_autogenerated.h</span><br><span class="line">  ENVP    include/generated/env.in</span><br><span class="line">  ENVT    include/generated/environment.h</span><br><span class="line">  HOSTCC  scripts/dtc/dtc.o</span><br><span class="line">  HOSTCC  scripts/dtc/flattree.o</span><br><span class="line">  HOSTCC  scripts/dtc/fstree.o</span><br><span class="line">  HOSTCC  scripts/dtc/data.o</span><br><span class="line">  HOSTCC  scripts/dtc/livetree.o</span><br><span class="line">  HOSTCC  scripts/dtc/treesource.o</span><br><span class="line">  HOSTCC  scripts/dtc/srcpos.o</span><br><span class="line">  HOSTCC  scripts/dtc/checks.o</span><br><span class="line">  HOSTCC  scripts/dtc/util.o</span><br><span class="line">  LEX     scripts/dtc/dtc-lexer.lex.c</span><br><span class="line">  YACC    scripts/dtc/dtc-parser.tab.h</span><br><span class="line">  YACC    scripts/dtc/dtc-parser.tab.c</span><br><span class="line">  HOSTCC  scripts/dtc/yamltree.o</span><br><span class="line">  UPD     include/config/uboot.release</span><br><span class="line">  UPD     include/generated/version_autogenerated.h</span><br><span class="line">  CC      lib/asm-offsets.s</span><br><span class="line">  CC      arch/riscv/lib/asm-offsets.s</span><br><span class="line">  HOSTCC  scripts/dtc/dtc-parser.tab.o</span><br><span class="line">  HOSTCC  scripts/dtc/dtc-lexer.lex.o</span><br><span class="line">  UPD     include/generated/generic-asm-offsets.h</span><br><span class="line">  UPD     include/generated/asm-offsets.h</span><br><span class="line">  LDS     u-boot.lds</span><br><span class="line">  HOSTLD  scripts/dtc/dtc</span><br><span class="line">  HOSTCC  tools/gen_eth_addr</span><br><span class="line">  HOSTCC  tools/gen_ethaddr_crc.o</span><br><span class="line">  WRAP    tools/lib/crc8.c</span><br><span class="line">  HOSTCC  tools/img2srec</span><br><span class="line">  HOSTCC  tools/mkenvimage.o</span><br><span class="line">  HOSTCC  tools/os_support.o</span><br><span class="line">  WRAP    tools/lib/crc32.c</span><br><span class="line">  HOSTCC  tools/aisimage.o</span><br><span class="line">  HOSTCC  tools/atmelimage.o</span><br><span class="line">  HOSTCC  tools/fit_common.o</span><br><span class="line">  HOSTCC  tools/fit_image.o</span><br><span class="line">  HOSTCC  tools/image-host.o</span><br><span class="line">  WRAP    tools/boot/image-fit.c</span><br><span class="line">  HOSTCC  tools/image-sig-host.o</span><br><span class="line">  WRAP    tools/boot/image-fit-sig.c</span><br><span class="line">  WRAP    tools/boot/image-cipher.c</span><br><span class="line">  WRAP    tools/boot/fdt_region.c</span><br><span class="line">  WRAP    tools/boot/bootm.c</span><br><span class="line">  HOSTCC  tools/lib/crc32.o</span><br><span class="line">  HOSTCC  tools/default_image.o</span><br><span class="line">  WRAP    tools/lib/fdtdec_common.c</span><br><span class="line">  WRAP    tools/lib/fdtdec.c</span><br><span class="line">  WRAP    tools/boot/image.c</span><br><span class="line">  WRAP    tools/boot/image-host.c</span><br><span class="line">  HOSTCC  tools/imagetool.o</span><br><span class="line">  HOSTCC  tools/imximage.o</span><br><span class="line">  HOSTCC  tools/imx8image.o</span><br><span class="line">  HOSTCC  tools/imx8mimage.o</span><br><span class="line">  HOSTCC  tools/kwbimage.o</span><br><span class="line">  WRAP    tools/lib/md5.c</span><br><span class="line">  HOSTCC  tools/lpc32xximage.o</span><br><span class="line">  HOSTCC  tools/mxsimage.o</span><br><span class="line">  HOSTCC  tools/omapimage.o</span><br><span class="line">  HOSTCC  tools/pblimage.o</span><br><span class="line">  HOSTCC  tools/pbl_crc32.o</span><br><span class="line">  HOSTCC  tools/renesas_spkgimage.o</span><br><span class="line">  HOSTCC  tools/vybridimage.o</span><br><span class="line">  HOSTCC  tools/stm32image.o</span><br><span class="line">  WRAP    tools/lib/rc4.c</span><br><span class="line">  HOSTCC  tools/rkcommon.o</span><br><span class="line">  HOSTCC  tools/rkimage.o</span><br><span class="line">  HOSTCC  tools/rksd.o</span><br><span class="line">  HOSTCC  tools/rkspi.o</span><br><span class="line">  HOSTCC  tools/socfpgaimage.o</span><br><span class="line">  HOSTCC  tools/sunxi_egon.o</span><br><span class="line">  WRAP    tools/lib/crc16-ccitt.c</span><br><span class="line">  WRAP    tools/lib/hash-checksum.c</span><br><span class="line">  WRAP    tools/lib/sha1.c</span><br><span class="line">  WRAP    tools/lib/sha256.c</span><br><span class="line">  WRAP    tools/lib/sha512.c</span><br><span class="line">  WRAP    tools/common/hash.c</span><br><span class="line">  HOSTCC  tools/ublimage.o</span><br><span class="line">  HOSTCC  tools/zynqimage.o</span><br><span class="line">  HOSTCC  tools/zynqmpimage.o</span><br><span class="line">  HOSTCC  tools/zynqmpbif.o</span><br><span class="line">  WRAP    tools/lib/fdt-libcrypto.c</span><br><span class="line">  HOSTCC  tools/sunxi_toc0.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt_ro.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt_wip.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt_sw.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt_rw.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt_strerror.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt_empty_tree.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt_addresses.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt_overlay.o</span><br><span class="line">  HOSTCC  tools/libfdt/fdt_check.o</span><br><span class="line">  HOSTCC  tools/gpimage.o</span><br><span class="line">  HOSTCC  tools/gpimage-common.o</span><br><span class="line">  HOSTCC  tools/mtk_image.o</span><br><span class="line">  HOSTCC  tools/mtk_nand_headers.o</span><br><span class="line">  WRAP    tools/lib/ecdsa/ecdsa-libcrypto.c</span><br><span class="line">  WRAP    tools/lib/rsa/rsa-sign.c</span><br><span class="line">  WRAP    tools/lib/rsa/rsa-verify.c</span><br><span class="line">  WRAP    tools/lib/rsa/rsa-mod-exp.c</span><br><span class="line">  WRAP    tools/lib/aes/aes-encrypt.c</span><br><span class="line">  WRAP    tools/lib/aes/aes-decrypt.c</span><br><span class="line">  HOSTCC  tools/dumpimage.o</span><br><span class="line">  HOSTCC  tools/boot/image-fit.o</span><br><span class="line">  HOSTCC  tools/boot/image-fit-sig.o</span><br><span class="line">  HOSTCC  tools/boot/image-cipher.o</span><br><span class="line">  HOSTCC  tools/boot/fdt_region.o</span><br><span class="line">  HOSTCC  tools/boot/bootm.o</span><br><span class="line">  HOSTCC  tools/lib/fdtdec_common.o</span><br><span class="line">  HOSTCC  tools/lib/fdtdec.o</span><br><span class="line">  HOSTCC  tools/boot/image.o</span><br><span class="line">  HOSTCC  tools/boot/image-host.o</span><br><span class="line">  HOSTCC  tools/lib/md5.o</span><br><span class="line">  HOSTCC  tools/lib/rc4.o</span><br><span class="line">  HOSTCC  tools/lib/crc16-ccitt.o</span><br><span class="line">  HOSTCC  tools/lib/hash-checksum.o</span><br><span class="line">  HOSTCC  tools/lib/sha1.o</span><br><span class="line">  HOSTCC  tools/lib/sha256.o</span><br><span class="line">  HOSTCC  tools/lib/sha512.o</span><br><span class="line">  HOSTCC  tools/common/hash.o</span><br><span class="line">  HOSTCC  tools/lib/fdt-libcrypto.o</span><br><span class="line">  HOSTCC  tools/lib/ecdsa/ecdsa-libcrypto.o</span><br><span class="line">  HOSTCC  tools/lib/rsa/rsa-sign.o</span><br><span class="line">  HOSTCC  tools/lib/rsa/rsa-verify.o</span><br><span class="line">  HOSTCC  tools/lib/rsa/rsa-mod-exp.o</span><br><span class="line">  HOSTCC  tools/lib/aes/aes-encrypt.o</span><br><span class="line">  HOSTCC  tools/lib/aes/aes-decrypt.o</span><br><span class="line">  HOSTCC  tools/mkimage.o</span><br><span class="line">  HOSTCC  tools/fit_info.o</span><br><span class="line">  HOSTCC  tools/fit_check_sign.o</span><br><span class="line">  HOSTCC  tools/fdt_add_pubkey.o</span><br><span class="line">  HOSTCC  tools/proftool.o</span><br><span class="line">  WRAP    tools/lib/abuf.c</span><br><span class="line">  HOSTCC  tools/prelink-riscv</span><br><span class="line">  HOSTCC  tools/fdtgrep.o</span><br><span class="line">  HOSTCC  tools/spl_size_limit</span><br><span class="line">  HOSTCC  tools/lib/crc8.o</span><br><span class="line">  HOSTLD  tools/mkenvimage</span><br><span class="line">  HOSTCC  tools/lib/abuf.o</span><br><span class="line">  HOSTLD  tools/gen_ethaddr_crc</span><br><span class="line">  HOSTLD  tools/fdtgrep</span><br><span class="line">  HOSTLD  tools/proftool</span><br><span class="line">  HOSTLD  tools/dumpimage</span><br><span class="line">  HOSTLD  tools/mkimage</span><br><span class="line">  HOSTLD  tools/fit_info</span><br><span class="line">  HOSTLD  tools/fit_check_sign</span><br><span class="line">  HOSTLD  tools/fdt_add_pubkey</span><br><span class="line">  CC      arch/riscv/cpu/cpu.o</span><br><span class="line">  AS      arch/riscv/cpu/mtrap.o</span><br><span class="line">  AS      arch/riscv/cpu/start.o</span><br><span class="line">  CC      arch/riscv/cpu/mpfs/dram.o</span><br><span class="line">  CC      arch/riscv/cpu/mpfs/cpu.o</span><br><span class="line">  CC      arch/riscv/lib/bootm.o</span><br><span class="line">  CC      arch/riscv/lib/image.o</span><br><span class="line">  CC      arch/riscv/lib/boot.o</span><br><span class="line">  CC      arch/riscv/lib/cache.o</span><br><span class="line">  CC      arch/riscv/lib/sbi.o</span><br><span class="line">  CC      board/microchip/mpfs_icicle/mpfs_icicle.o</span><br><span class="line">  CC      arch/riscv/lib/interrupts.o</span><br><span class="line">  AS      arch/riscv/lib/setjmp.o</span><br><span class="line">  CC      arch/riscv/lib/fdt_fixup.o</span><br><span class="line">  AS      arch/riscv/lib/memset.o</span><br><span class="line">  AS      arch/riscv/lib/memmove.o</span><br><span class="line">  AS      arch/riscv/lib/memcpy.o</span><br><span class="line">  AS      arch/riscv/lib/crt0_riscv_efi.o</span><br><span class="line">  CC      boot/bootm.o</span><br><span class="line">  CC      arch/riscv/lib/reloc_riscv_efi.o</span><br><span class="line">  CC      boot/bootm_os.o</span><br><span class="line">  CC      boot/pxe_utils.o</span><br><span class="line">  CC      boot/image.o</span><br><span class="line">  CC      boot/image-board.o</span><br><span class="line">  CC      boot/bootdev-uclass.o</span><br><span class="line">  CC      boot/bootflow.o</span><br><span class="line">  CC      boot/bootmeth-uclass.o</span><br><span class="line">  CC      boot/bootstd-uclass.o</span><br><span class="line">  CC      boot/bootmeth_extlinux.o</span><br><span class="line">  CC      cmd/boot.o</span><br><span class="line">  CC      boot/bootmeth_pxe.o</span><br><span class="line">  CC      cmd/bootm.o</span><br><span class="line">  CC      common/main.o</span><br><span class="line">  CC      boot/bootmeth_efi.o</span><br><span class="line">  CC      common/exports.o</span><br><span class="line">  CC      cmd/help.o</span><br><span class="line">  CC      disk/part.o</span><br><span class="line">  CC      common/cli_hush.o</span><br><span class="line">  CC      cmd/panic.o</span><br><span class="line">  CC      boot/image-fdt.o</span><br><span class="line">  CC      disk/disk-uclass.o</span><br><span class="line">  CC      common/init/board_init.o</span><br><span class="line">  CC      disk/part_dos.o</span><br><span class="line">  CC      boot/image-fit.o</span><br><span class="line">  CC      common/autoboot.o</span><br><span class="line">  CC      disk/part_iso.o</span><br><span class="line">  AR      cmd/riscv/built-in.o</span><br><span class="line">  AR      drivers/usb/cdns3/built-in.o</span><br><span class="line">  CC      disk/part_efi.o</span><br><span class="line">  CC      cmd/version.o</span><br><span class="line">  AR      drivers/usb/common/built-in.o</span><br><span class="line">  AR      drivers/adc/built-in.o</span><br><span class="line">  AR      drivers/ata/built-in.o</span><br><span class="line">  AR      drivers/usb/dwc3/built-in.o</span><br><span class="line">  AR      drivers/axi/built-in.o</span><br><span class="line">  CC      common/board_f.o</span><br><span class="line">  CC      common/board_r.o</span><br><span class="line">  CC      boot/vbe.o</span><br><span class="line">  CC      common/board_info.o</span><br><span class="line">  AR      drivers/bus/built-in.o</span><br><span class="line">  CC      drivers/block/blk-uclass.o</span><br><span class="line">  AR      drivers/usb/emul/built-in.o</span><br><span class="line">  CC      cmd/blk_common.o</span><br><span class="line">  AR      drivers/usb/eth/built-in.o</span><br><span class="line">  CC      common/fdt_support.o</span><br><span class="line">  CC      drivers/block/blkcache.o</span><br><span class="line">  AR      drivers/cache/built-in.o</span><br><span class="line">  CC      cmd/bootflow.o</span><br><span class="line">  AR      arch/riscv/cpu/mpfs/built-in.o</span><br><span class="line">  CC      common/miiphyutil.o</span><br><span class="line">  AR      drivers/clk/analogbits/built-in.o</span><br><span class="line">  AR      arch/riscv/cpu/built-in.o</span><br><span class="line">  CC      drivers/clk/imx/clk-gate2.o</span><br><span class="line">  CC      boot/vbe_request.o</span><br><span class="line">  AR      drivers/usb/host/built-in.o</span><br><span class="line">  CC      drivers/clk/microchip/mpfs_clk.o</span><br><span class="line">  AR      drivers/clk/tegra/built-in.o</span><br><span class="line">  AR      drivers/usb/isp1760/built-in.o</span><br><span class="line">  CC      common/splash.o</span><br><span class="line">  AR      drivers/usb/mtu3/built-in.o</span><br><span class="line">  CC      boot/vbe_simple.o</span><br><span class="line">  CC      boot/vbe_simple_os.o</span><br><span class="line">  CC      common/menu.o</span><br><span class="line">  CC      drivers/cpu/cpu-uclass.o</span><br><span class="line">  CC      drivers/core/device.o</span><br><span class="line">  AR      common/init/built-in.o</span><br><span class="line">  AR      drivers/clk/ti/built-in.o</span><br><span class="line">  CC      drivers/core/fdtaddr.o</span><br><span class="line">  CC      drivers/clk/imx/clk-pllv3.o</span><br><span class="line">  CC      common/cli_getch.o</span><br><span class="line">  CC      cmd/source.o</span><br><span class="line">  CC      drivers/clk/microchip/mpfs_clk_cfg.o</span><br><span class="line">  AR      arch/riscv/lib/built-in.o</span><br><span class="line">  CC      drivers/cpu/riscv_cpu.o</span><br><span class="line">  CC      drivers/clk/imx/clk-pfd.o</span><br><span class="line">  CC      drivers/clk/clk-uclass.o</span><br><span class="line">  CC      drivers/core/lists.o</span><br><span class="line">  AR      board/microchip/mpfs_icicle/built-in.o</span><br><span class="line">  AR      drivers/usb/musb/built-in.o</span><br><span class="line">  CC      drivers/core/root.o</span><br><span class="line">  CC      drivers/crypto/fsl/sec.o</span><br><span class="line">  AR      drivers/crypto/aspeed/built-in.o</span><br><span class="line">  CC      drivers/clk/microchip/mpfs_clk_periph.o</span><br><span class="line">  AR      drivers/crypto/hash/built-in.o</span><br><span class="line">  CC      drivers/clk/microchip/mpfs_clk_msspll.o</span><br><span class="line">  AR      drivers/crypto/nuvoton/built-in.o</span><br><span class="line">  CC      cmd/bdinfo.o</span><br><span class="line">  CC      drivers/core/uclass.o</span><br><span class="line">  CC      common/cli_readline.o</span><br><span class="line">  AR      drivers/dfu/built-in.o</span><br><span class="line">  CC      cmd/blkcache.o</span><br><span class="line">  AR      drivers/usb/phy/built-in.o</span><br><span class="line">  AR      drivers/gpio/built-in.o</span><br><span class="line">  AR      drivers/usb/ulpi/built-in.o</span><br><span class="line">  CC      cmd/bootefi.o</span><br><span class="line">  CC      drivers/core/util.o</span><br><span class="line">  CC      drivers/clk/clk_fixed_rate.o</span><br><span class="line">  CC      drivers/clk/clk_fixed_factor.o</span><br><span class="line">  CC      env/common.o</span><br><span class="line">  CC      common/cli_simple.o</span><br><span class="line">  CC      drivers/i2c/i2c-uclass.o</span><br><span class="line">  AR      drivers/crypto/rsa_mod_exp/built-in.o</span><br><span class="line">  CC      cmd/booti.o</span><br><span class="line">  CC      drivers/input/key_matrix.o</span><br><span class="line">  CC      drivers/core/tag.o</span><br><span class="line">  CC      fs/ext4/ext4fs.o</span><br><span class="line">  AR      drivers/crypto/fsl/built-in.o</span><br><span class="line">  CC      fs/fat/fat_write.o</span><br><span class="line">  AR      drivers/crypto/built-in.o</span><br><span class="line">  CC      drivers/clk/clk.o</span><br><span class="line">  AR      drivers/usb/musb-new/built-in.o</span><br><span class="line">  CC      common/console.o</span><br><span class="line">  CC      common/dlmalloc.o</span><br><span class="line">  AR      lib/crypto/built-in.o</span><br><span class="line">  CC      cmd/console.o</span><br><span class="line">  CC      net/arp.o</span><br><span class="line">  AR      drivers/iommu/built-in.o</span><br><span class="line">  AR      drivers/cpu/built-in.o</span><br><span class="line">  CC      lib/efi_driver/efi_uclass.o</span><br><span class="line">  CC      env/env.o</span><br><span class="line">  CC      lib/efi_driver/efi_block_device.o</span><br><span class="line">  CC      env/attr.o</span><br><span class="line">  CC      drivers/core/device-remove.o</span><br><span class="line">  CC      env/flags.o</span><br><span class="line">  CC      fs/ext4/ext4_common.o</span><br><span class="line">  CC      fs/ubifs/ubifs.o</span><br><span class="line">  CC      env/callback.o</span><br><span class="line">  CC      net/bootp.o</span><br><span class="line">  CC      cmd/cpu.o</span><br><span class="line">  AR      drivers/clk/imx/built-in.o</span><br><span class="line">  CC      cmd/dm.o</span><br><span class="line">  CC      lib/efi_loader/efi_bootmgr.o</span><br><span class="line">  CC      lib/efi_loader/efi_boottime.o</span><br><span class="line">  CC      drivers/core/simple-bus.o</span><br><span class="line">  AR      drivers/clk/microchip/built-in.o</span><br><span class="line">  CC      drivers/core/dump.o</span><br><span class="line">  CC      env/nowhere.o</span><br><span class="line">  CC      fs/ubifs/io.o</span><br><span class="line">  CC      net/eth-uclass.o</span><br><span class="line">  CC      lib/efi_loader/efi_helper.o</span><br><span class="line">  CC      common/malloc_simple.o</span><br><span class="line">  CC      fs/ubifs/super.o</span><br><span class="line">  AR      drivers/block/built-in.o</span><br><span class="line">  CC      lib/libfdt/fdt.o</span><br><span class="line">  CC      lib/efi_loader/efi_console.o</span><br><span class="line">  CC      net/eth_bootdev.o</span><br><span class="line">  AR      drivers/mailbox/built-in.o</span><br><span class="line">  CC      net/eth_common.o</span><br><span class="line">  CC      fs/ext4/dev.o</span><br><span class="line">  CC      drivers/clk/clk-divider.o</span><br><span class="line">  CC      lib/libfdt/fdt_ro.o</span><br><span class="line">  CC      common/event.o</span><br><span class="line">  CC      net/net.o</span><br><span class="line">  AR      drivers/input/built-in.o</span><br><span class="line">  CC      fs/fs.o</span><br><span class="line">  CC      lib/libfdt/fdt_wip.o</span><br><span class="line">  CC      fs/ubifs/sb.o</span><br><span class="line">  CC      fs/fs_internal.o</span><br><span class="line">  CC      drivers/core/regmap.o</span><br><span class="line">  CC      common/hash.o</span><br><span class="line">  CC      drivers/clk/clk-mux.o</span><br><span class="line">  CC      common/memsize.o</span><br><span class="line">  CC      drivers/clk/clk-gate.o</span><br><span class="line">  CC      drivers/clk/clk-fixed-factor.o</span><br><span class="line">  CC      net/nfs.o</span><br><span class="line">  CC      lib/efi_loader/efi_device_path.o</span><br><span class="line">  AR      disk/built-in.o</span><br><span class="line">  CC      drivers/i2c/i2c-microchip.o</span><br><span class="line">  AR      env/built-in.o</span><br><span class="line">  CC      lib/lzma/LzmaDec.o</span><br><span class="line">  CC      cmd/echo.o</span><br><span class="line">  CC      lib/efi_loader/efi_device_path_to_text.o</span><br><span class="line">  CC      cmd/eficonfig.o</span><br><span class="line">  CC      common/stdio.o</span><br><span class="line">  AR      lib/efi_driver/built-in.o</span><br><span class="line">  CC      lib/libfdt/fdt_strerror.o</span><br><span class="line">  CC      lib/libfdt/fdt_sw.o</span><br><span class="line">  CC      net/ping.o</span><br><span class="line">  CC      fs/ubifs/master.o</span><br><span class="line">  CC      fs/ubifs/lpt.o</span><br><span class="line">  CC      lib/libfdt/fdt_rw.o</span><br><span class="line">  CC      fs/ubifs/lpt_commit.o</span><br><span class="line">  CC      cmd/elf.o</span><br><span class="line">  AR      drivers/memory/built-in.o</span><br><span class="line">  CC      drivers/core/syscon-uclass.o</span><br><span class="line">  CC      net/tftp.o</span><br><span class="line">  AR      drivers/mfd/built-in.o</span><br><span class="line">  CC      lib/lzma/LzmaTools.o</span><br><span class="line">  CC      lib/libfdt/fdt_empty_tree.o</span><br><span class="line">  AR      drivers/misc/built-in.o</span><br><span class="line">  CC      lib/lzo/lzo1x_decompress.o</span><br><span class="line">  CC      lib/libfdt/fdt_check.o</span><br><span class="line">  CC      lib/libfdt/fdt_addresses.o</span><br><span class="line">  CC      fs/ubifs/scan.o</span><br><span class="line">  CC      fs/ubifs/lprops.o</span><br><span class="line">  CC      lib/efi_loader/efi_device_path_utilities.o</span><br><span class="line">  CC      drivers/core/of_extra.o</span><br><span class="line">  CC      drivers/mmc/mmc.o</span><br><span class="line">  CC      drivers/mmc/mmc-uclass.o</span><br><span class="line">  CC      lib/libfdt/fdt_overlay.o</span><br><span class="line">  CC      drivers/mmc/mmc_bootdev.o</span><br><span class="line">  CC      drivers/core/ofnode.o</span><br><span class="line">  CC      fs/ubifs/tnc.o</span><br><span class="line">  CC      drivers/core/read_extra.o</span><br><span class="line">  AR      fs/ext4/built-in.o</span><br><span class="line">  CC      fs/ubifs/tnc_misc.o</span><br><span class="line">  CC      cmd/exit.o</span><br><span class="line">  AR      boot/built-in.o</span><br><span class="line">  CC      lib/zlib/zlib.o</span><br><span class="line">  AR      drivers/clk/built-in.o</span><br><span class="line">  CC      fs/ubifs/debug.o</span><br><span class="line">  AR      drivers/i2c/built-in.o</span><br><span class="line">  CC      fs/ubifs/budget.o</span><br><span class="line">  CC      cmd/ext4.o</span><br><span class="line">  CC      cmd/ext2.o</span><br><span class="line">  AR      drivers/net/mscc_eswitch/built-in.o</span><br><span class="line">  AR      drivers/mtd/onenand/built-in.o</span><br><span class="line">  CC      drivers/mtd/nand/spi/core.o</span><br><span class="line">  AR      drivers/power/pmic/built-in.o</span><br><span class="line">  CC      drivers/mtd/nand/spi/gigadevice.o</span><br><span class="line">  CC      drivers/net/phy/phy.o</span><br><span class="line">  AR      drivers/net/qe/built-in.o</span><br><span class="line">  CC      drivers/mtd/nand/core.o</span><br><span class="line">  CC      drivers/mmc/mmc_write.o</span><br><span class="line">  AR      drivers/power/regulator/built-in.o</span><br><span class="line">  CC      common/cli.o</span><br><span class="line">  CC      drivers/mtd/nand/spi/macronix.o</span><br><span class="line">  CC      lib/efi_loader/efi_dt_fixup.o</span><br><span class="line">  CC      drivers/mtd/nand/bbt.o</span><br><span class="line">  CC      fs/ubifs/log.o</span><br><span class="line">  AR      drivers/power/built-in.o</span><br><span class="line">  CC      drivers/mtd/spi/sf-uclass.o</span><br><span class="line">  CC      drivers/net/phy/vitesse.o</span><br><span class="line">  CC      drivers/mtd/spi/sf_probe.o</span><br><span class="line">  CC      lib/efi_loader/efi_file.o</span><br><span class="line">  CC      drivers/mtd/spi/spi-nor-ids.o</span><br><span class="line">  CC      drivers/mtd/ubi/attach.o</span><br><span class="line">  CC      drivers/mtd/spi/spi-nor-core.o</span><br><span class="line">  CC      fs/ubifs/orphan.o</span><br><span class="line">  CC      lib/charset.o</span><br><span class="line">  AR      drivers/pwm/built-in.o</span><br><span class="line">  CC      lib/efi_loader/efi_hii.o</span><br><span class="line">  CC      cmd/fat.o</span><br><span class="line">  CC      lib/efi_loader/efi_image_loader.o</span><br><span class="line">  CC      lib/efi_loader/efi_load_options.o</span><br><span class="line">  CC      drivers/mtd/nand/spi/micron.o</span><br><span class="line">  CC      drivers/mtd/ubi/build.o</span><br><span class="line">  AR      lib/lzo/built-in.o</span><br><span class="line">  CC      common/command.o</span><br><span class="line">  CC      drivers/mtd/nand/spi/toshiba.o</span><br><span class="line">  AR      drivers/net/ti/built-in.o</span><br><span class="line">  CC      drivers/mmc/sdhci-adma.o</span><br><span class="line">  CC      cmd/fdt.o</span><br><span class="line">  CC      common/s_record.o</span><br><span class="line">  CC      fs/ubifs/recovery.o</span><br><span class="line">  CC      fs/ubifs/replay.o</span><br><span class="line">  CC      drivers/mtd/mtdcore.o</span><br><span class="line">  CC      lib/crc8.o</span><br><span class="line">  CC      fs/ubifs/gc.o</span><br><span class="line">  CC      common/xyzModem.o</span><br><span class="line">  AR      net/built-in.o</span><br><span class="line">  CC      drivers/mtd/nand/spi/winbond.o</span><br><span class="line">  CC      drivers/mtd/mtd_uboot.o</span><br><span class="line">  CC      drivers/mtd/ubi/vtbl.o</span><br><span class="line">  CC      lib/crc16.o</span><br><span class="line">  CC      lib/efi_loader/efi_memory.o</span><br><span class="line">  CC      drivers/mtd/mtd-uclass.o</span><br><span class="line">  CC      drivers/mmc/sdhci.o</span><br><span class="line">  CC      drivers/mtd/mtdpart.o</span><br><span class="line">  AR      lib/libfdt/built-in.o</span><br><span class="line">  CC      cmd/flash.o</span><br><span class="line">  AR      drivers/reset/built-in.o</span><br><span class="line">  CC      drivers/mtd/ubi/upd.o</span><br><span class="line">  CC      drivers/mtd/ubi/vmt.o</span><br><span class="line">  AR      drivers/mtd/nand/nandcore.o</span><br><span class="line">  AR      drivers/rtc/built-in.o</span><br><span class="line">  CC      lib/efi_loader/efi_root_node.o</span><br><span class="line">  AR      drivers/scsi/built-in.o</span><br><span class="line">  CC      drivers/net/macb.o</span><br><span class="line">  CC      cmd/fs.o</span><br><span class="line">  CC      lib/efi_loader/efi_runtime.o</span><br><span class="line">  CC      lib/crc16-ccitt.o</span><br><span class="line">  CC      lib/efi_loader/efi_setup.o</span><br><span class="line">  CC      drivers/mmc/sdhci-cadence.o</span><br><span class="line">  CC      drivers/mtd/ubi/kapi.o</span><br><span class="line">  CC      drivers/mtd/ubi/eba.o</span><br><span class="line">  CC      lib/fdtdec_common.o</span><br><span class="line">  CC      cmd/i2c.o</span><br><span class="line">  CC      lib/efi_loader/efi_string.o</span><br><span class="line">  CC      drivers/serial/serial-uclass.o</span><br><span class="line">  CC      lib/efi_loader/efi_unicode_collation.o</span><br><span class="line">  CC      drivers/mtd/ubi/io.o</span><br><span class="line">  CC      lib/smbios.o</span><br><span class="line">  AR      drivers/smem/built-in.o</span><br><span class="line">  AR      drivers/soc/built-in.o</span><br><span class="line">  CC      drivers/mtd/ubi/wl.o</span><br><span class="line">  CC      drivers/serial/ns16550.o</span><br><span class="line">  CC      drivers/mtd/ubi/crc32.o</span><br><span class="line">  CC      drivers/spi/spi-uclass.o</span><br><span class="line">  CC      drivers/spi/spi-mem.o</span><br><span class="line">  AR      drivers/sound/built-in.o</span><br><span class="line">  CC      drivers/mtd/ubi/misc.o</span><br><span class="line">  CC      drivers/spi/microchip_coreqspi.o</span><br><span class="line">  CC      drivers/mtd/ubi/debug.o</span><br><span class="line">  AR      drivers/spmi/built-in.o</span><br><span class="line">  CC      cmd/itest.o</span><br><span class="line">  CC      lib/ldiv.o</span><br><span class="line">  AR      drivers/net/phy/built-in.o</span><br><span class="line">  AR      lib/lzma/built-in.o</span><br><span class="line">  CC      lib/net_utils.o</span><br><span class="line">  AR      common/built-in.o</span><br><span class="line">  CC      lib/rc4.o</span><br><span class="line">  CC      lib/efi_loader/efi_var_common.o</span><br><span class="line">  CC      lib/efi_loader/efi_var_mem.o</span><br><span class="line">  CC      cmd/load.o</span><br><span class="line">  AR      drivers/core/built-in.o</span><br><span class="line">  CC      lib/rbtree.o</span><br><span class="line">  CC      cmd/mem.o</span><br><span class="line">  CC      cmd/mii.o</span><br><span class="line">  CC      drivers/sysreset/sysreset-uclass.o</span><br><span class="line">  CC      cmd/mdio.o</span><br><span class="line">  AR      drivers/thermal/built-in.o</span><br><span class="line">  CC      drivers/sysreset/sysreset_sbi.o</span><br><span class="line">  CC      cmd/sleep.o</span><br><span class="line">  CC      lib/list_sort.o</span><br><span class="line">  CC      lib/efi_loader/efi_var_file.o</span><br><span class="line">  CC      lib/md5.o</span><br><span class="line">  CC      lib/efi_loader/efi_variable.o</span><br><span class="line">  AR      drivers/mtd/nand/spi/spinand.o</span><br><span class="line">  CC      lib/hash-checksum.o</span><br><span class="line">  CC      cmd/mmc.o</span><br><span class="line">  AR      drivers/mtd/nand/spi/built-in.o</span><br><span class="line">  CC      drivers/timer/timer-uclass.o</span><br><span class="line">  AR      fs/fat/built-in.o</span><br><span class="line">  AR      drivers/mtd/nand/built-in.o</span><br><span class="line">  CC      lib/efi_loader/efi_watchdog.o</span><br><span class="line">  CC      drivers/timer/riscv_timer.o</span><br><span class="line">  CC      cmd/mtd.o</span><br><span class="line">  AR      drivers/ufs/built-in.o</span><br><span class="line">  AR      drivers/watchdog/built-in.o</span><br><span class="line">  CC      lib/sha1.o</span><br><span class="line">  CC      lib/efi_loader/efi_disk.o</span><br><span class="line">  AR      drivers/video/bridge/built-in.o</span><br><span class="line">  CC      lib/efi_loader/efi_net.o</span><br><span class="line">  AR      drivers/video/sunxi/built-in.o</span><br><span class="line">  CC      cmd/mtdparts.o</span><br><span class="line">  CC      lib/sha256.o</span><br><span class="line">  AR      drivers/video/tegra20/built-in.o</span><br><span class="line">  AR      drivers/video/ti/built-in.o</span><br><span class="line">  AR      drivers/mtd/mtd.o</span><br><span class="line">  CC      cmd/legacy-mtd-utils.o</span><br><span class="line">  AR      drivers/serial/built-in.o</span><br><span class="line">  CC      lib/gunzip.o</span><br><span class="line">  CC      cmd/net.o</span><br><span class="line">  CC      cmd/part.o</span><br><span class="line">  AR      drivers/video/built-in.o</span><br><span class="line">  AR      drivers/mtd/spi/spi-nor.o</span><br><span class="line">  CC      cmd/pxe.o</span><br><span class="line">  CC      cmd/sf.o</span><br><span class="line">  AR      drivers/mtd/spi/built-in.o</span><br><span class="line">  CC      lib/lz4_wrapper.o</span><br><span class="line">  CC      cmd/setexpr.o</span><br><span class="line">  CC      lib/efi_loader/efi_smbios.o</span><br><span class="line">  CC      cmd/sysboot.o</span><br><span class="line">  CC      lib/efi_loader/efi_riscv.o</span><br><span class="line">  CC      lib/fdtdec.o</span><br><span class="line">  CC      cmd/test.o</span><br><span class="line">  CC      lib/qsort.o</span><br><span class="line">  CC      lib/efi_loader/efi_load_initrd.o</span><br><span class="line">  CC      cmd/ubi.o</span><br><span class="line">  AR      drivers/sysreset/built-in.o</span><br><span class="line">  AR      drivers/mmc/built-in.o</span><br><span class="line">  CC      cmd/ubifs.o</span><br><span class="line">  CC      lib/efi_loader/efi_conformance.o</span><br><span class="line">  CC      lib/efi_loader/boothart.o</span><br><span class="line">  AR      drivers/spi/built-in.o</span><br><span class="line">  CC      lib/hashtable.o</span><br><span class="line">  AS      lib/efi_loader/efi_crt0.o</span><br><span class="line">  CC      lib/errno.o</span><br><span class="line">  CC      cmd/unlz4.o</span><br><span class="line">  CC      cmd/unzip.o</span><br><span class="line">  CC      lib/efi_loader/efi_reloc.o</span><br><span class="line">  AR      drivers/timer/built-in.o</span><br><span class="line">  CC      lib/efi_loader/efi_freestanding.o</span><br><span class="line">  CC      lib/display_options.o</span><br><span class="line">  CC      cmd/lzmadec.o</span><br><span class="line">  CC      lib/crc32.o</span><br><span class="line">  CC      lib/ctype.o</span><br><span class="line">  AR      drivers/net/built-in.o</span><br><span class="line">  CC      lib/efi_loader/helloworld.o</span><br><span class="line">  CC      lib/efi_loader/dtbdump.o</span><br><span class="line">  CC      lib/div64.o</span><br><span class="line">  CC      cmd/ximg.o</span><br><span class="line">  CC      lib/hang.o</span><br><span class="line">  CC      lib/linux_compat.o</span><br><span class="line">  CC      cmd/nvedit.o</span><br><span class="line">  CC      lib/linux_string.o</span><br><span class="line">  CC      lib/lmb.o</span><br><span class="line">  CC      lib/efi_loader/initrddump.o</span><br><span class="line">  CC      lib/membuff.o</span><br><span class="line">  CC      lib/slre.o</span><br><span class="line">  CC      lib/string.o</span><br><span class="line">  CC      lib/tables_csum.o</span><br><span class="line">  CC      lib/time.o</span><br><span class="line">  CC      lib/hexdump.o</span><br><span class="line">  CC      lib/uuid.o</span><br><span class="line">  CC      lib/rand.o</span><br><span class="line">  CC      lib/panic.o</span><br><span class="line">  CC      lib/vsprintf.o</span><br><span class="line">  CC      lib/strto.o</span><br><span class="line">  CC      lib/abuf.o</span><br><span class="line">  CC      lib/date.o</span><br><span class="line">  CC      lib/rtc-lib.o</span><br><span class="line">  CC      lib/elf.o</span><br><span class="line">  AR      lib/zlib/built-in.o</span><br><span class="line">  LD      lib/efi_loader/helloworld_efi.so</span><br><span class="line">  LD      lib/efi_loader/boothart_efi.so</span><br><span class="line">  OBJCOPY lib/efi_loader/helloworld.efi</span><br><span class="line">  OBJCOPY lib/efi_loader/boothart.efi</span><br><span class="line">  AR      lib/efi_loader/built-in.o</span><br><span class="line">  AR      fs/ubifs/built-in.o</span><br><span class="line">  AR      fs/built-in.o</span><br><span class="line">  AR      drivers/mtd/ubi/built-in.o</span><br><span class="line">  AR      drivers/mtd/built-in.o</span><br><span class="line">  LD      lib/efi_loader/dtbdump_efi.so</span><br><span class="line">  AR      drivers/built-in.o</span><br><span class="line">  LD      lib/efi_loader/initrddump_efi.so</span><br><span class="line">  OBJCOPY lib/efi_loader/dtbdump.efi</span><br><span class="line">  OBJCOPY lib/efi_loader/initrddump.efi</span><br><span class="line">  AR      cmd/built-in.o</span><br><span class="line">  AR      lib/built-in.o</span><br><span class="line">  LD      u-boot</span><br><span class="line">  OBJCOPY u-boot.srec</span><br><span class="line">  OBJCOPY u-boot-nodtb.bin</span><br><span class="line">  SYM     u-boot.sym</span><br><span class="line">  DTC     arch/riscv/dts/microchip-mpfs-icicle-kit.dtb</span><br><span class="line">  DTC     arch/riscv/dts/microchip-mpfs-icicle-kit-amp.dtb</span><br><span class="line">  DTC     arch/riscv/dts/microchip-mpfs-icicle-kit-qspi-nor.dtb</span><br><span class="line">arch/riscv/dts/.microchip-mpfs-icicle-kit.dtb.pre.tmp:74.4-63: Warning (dma_ranges_format): /reserved-memory/non-cached-low-buffer:dma-ranges: &quot;dma-ranges&quot; property has invalid length (24 bytes) (parent #address-cells == 2, child #address-cells == 2, #size-cells == 1)</span><br><span class="line">arch/riscv/dts/.microchip-mpfs-icicle-kit.dtb.pre.tmp:83.4-66: Warning (dma_ranges_format): /reserved-memory/non-cached-high-buffer:dma-ranges: &quot;dma-ranges&quot; property has invalid length (24 bytes) (parent #address-cells == 2, child #address-cells == 2, #size-cells == 1)</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:476.23-486.5: Warning (spi_bus_bridge): /soc/qspi@21000000: node name for SPI buses should be &#x27;spi&#x27;</span><br><span class="line">  also defined at arch/riscv/dts/.microchip-mpfs-icicle-kit.dtb.pre.tmp:203.7-216.3</span><br><span class="line">arch/riscv/dts/microchip-mpfs-icicle-kit.dtb: Warning (spi_bus_reg): Failed prerequisite &#x27;spi_bus_bridge&#x27;</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:37.36-41.6: Warning (interrupt_provider): /cpus/cpu@0/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:69.36-73.6: Warning (interrupt_provider): /cpus/cpu@1/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:101.36-105.6: Warning (interrupt_provider): /cpus/cpu@2/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:133.36-137.6: Warning (interrupt_provider): /cpus/cpu@3/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:165.36-169.6: Warning (interrupt_provider): /cpus/cpu@4/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:220.38-231.5: Warning (interrupt_provider): /soc/interrupt-controller@c000000: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/.microchip-mpfs-icicle-kit-amp.dtb.pre.tmp:75.4-63: Warning (dma_ranges_format): /reserved-memory/non-cached-low-buffer:dma-ranges: &quot;dma-ranges&quot; property has invalid length (24 bytes) (parent #address-cells == 2, child #address-cells == 2, #size-cells == 1)</span><br><span class="line">arch/riscv/dts/.microchip-mpfs-icicle-kit-amp.dtb.pre.tmp:84.4-66: Warning (dma_ranges_format): /reserved-memory/non-cached-high-buffer:dma-ranges: &quot;dma-ranges&quot; property has invalid length (24 bytes) (parent #address-cells == 2, child #address-cells == 2, #size-cells == 1)</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:476.23-486.5: Warning (spi_bus_bridge): /soc/qspi@21000000: node name for SPI buses should be &#x27;spi&#x27;</span><br><span class="line">  also defined at arch/riscv/dts/.microchip-mpfs-icicle-kit-amp.dtb.pre.tmp:211.7-223.3</span><br><span class="line">arch/riscv/dts/microchip-mpfs-icicle-kit-amp.dtb: Warning (spi_bus_reg): Failed prerequisite &#x27;spi_bus_bridge&#x27;</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:37.36-41.6: Warning (interrupt_provider): /cpus/cpu@0/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:69.36-73.6: Warning (interrupt_provider): /cpus/cpu@1/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:101.36-105.6: Warning (interrupt_provider): /cpus/cpu@2/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:133.36-137.6: Warning (interrupt_provider): /cpus/cpu@3/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:165.36-169.6: Warning (interrupt_provider): /cpus/cpu@4/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:220.38-231.5: Warning (interrupt_provider): /soc/interrupt-controller@c000000: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/.microchip-mpfs-icicle-kit-qspi-nor.dtb.pre.tmp:73.4-63: Warning (dma_ranges_format): /reserved-memory/non-cached-low-buffer:dma-ranges: &quot;dma-ranges&quot; property has invalid length (24 bytes) (parent #address-cells == 2, child #address-cells == 2, #size-cells == 1)</span><br><span class="line">arch/riscv/dts/.microchip-mpfs-icicle-kit-qspi-nor.dtb.pre.tmp:82.4-66: Warning (dma_ranges_format): /reserved-memory/non-cached-high-buffer:dma-ranges: &quot;dma-ranges&quot; property has invalid length (24 bytes) (parent #address-cells == 2, child #address-cells == 2, #size-cells == 1)</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:476.23-486.5: Warning (spi_bus_bridge): /soc/qspi@21000000: node name for SPI buses should be &#x27;spi&#x27;</span><br><span class="line">  also defined at arch/riscv/dts/.microchip-mpfs-icicle-kit-qspi-nor.dtb.pre.tmp:202.7-214.3</span><br><span class="line">arch/riscv/dts/microchip-mpfs-icicle-kit-qspi-nor.dtb: Warning (spi_bus_reg): Failed prerequisite &#x27;spi_bus_bridge&#x27;</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:37.36-41.6: Warning (interrupt_provider): /cpus/cpu@0/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:69.36-73.6: Warning (interrupt_provider): /cpus/cpu@1/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:101.36-105.6: Warning (interrupt_provider): /cpus/cpu@2/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:133.36-137.6: Warning (interrupt_provider): /cpus/cpu@3/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:165.36-169.6: Warning (interrupt_provider): /cpus/cpu@4/interrupt-controller: Missing #address-cells in interrupt provider</span><br><span class="line">arch/riscv/dts/microchip-mpfs.dtsi:220.38-231.5: Warning (interrupt_provider): /soc/interrupt-controller@c000000: Missing #address-cells in interrupt provider</span><br><span class="line">  SHIPPED dts/dt.dtb</span><br><span class="line">  CAT     u-boot-dtb.bin</span><br><span class="line">  COPY    u-boot.dtb</span><br><span class="line">  COPY    u-boot.bin</span><br><span class="line">  OFCHK   .config</span><br><span class="line">make: Leaving directory &#x27;....../BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">&#x27;./u-boot/u-boot.bin&#x27; -&gt; &#x27;./deploy/u-boot.bin&#x27;</span><br><span class="line">&#x27;./u-boot/u-boot.bin&#x27; -&gt; &#x27;./deploy/src.bin&#x27;</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">A new file</span></strong>
<code>patches/u-boot/beaglev-fire/microchip_mpfs_icicle_defconfig</code>
is generated as:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">CONFIG_RISCV=y</span><br><span class="line">CONFIG_SYS_MALLOC_LEN=0x800000</span><br><span class="line">CONFIG_SYS_MALLOC_F_LEN=0x2000</span><br><span class="line">CONFIG_HAS_CUSTOM_SYS_INIT_SP_ADDR=y</span><br><span class="line">CONFIG_CUSTOM_SYS_INIT_SP_ADDR=0x80200000</span><br><span class="line">CONFIG_ENV_SIZE=0x2000</span><br><span class="line">CONFIG_DEFAULT_DEVICE_TREE=&quot;microchip-mpfs-icicle-kit&quot;</span><br><span class="line">CONFIG_SYS_PROMPT=&quot;RISC-V # &quot;</span><br><span class="line">CONFIG_OF_LIBFDT_OVERLAY=y</span><br><span class="line">CONFIG_SYS_LOAD_ADDR=0x80200000</span><br><span class="line">CONFIG_TARGET_MICROCHIP_ICICLE=y</span><br><span class="line">CONFIG_ARCH_RV64I=y</span><br><span class="line">CONFIG_RISCV_SMODE=y</span><br><span class="line">CONFIG_FIT=y</span><br><span class="line">CONFIG_DISTRO_DEFAULTS=y</span><br><span class="line">CONFIG_DISPLAY_CPUINFO=y</span><br><span class="line">CONFIG_DISPLAY_BOARDINFO=y</span><br><span class="line">CONFIG_SYS_CBSIZE=256</span><br><span class="line">CONFIG_SYS_PBSIZE=282</span><br><span class="line">CONFIG_SYS_BOOTM_LEN=0x4000000</span><br><span class="line">CONFIG_MTDPARTS_DEFAULT=&quot;mtdparts=spi-nand0:2m(payload),119m(ubi)&quot;</span><br><span class="line">CONFIG_CMD_UBI=y</span><br><span class="line">CONFIG_SYS_RELOC_GD_ENV_ADDR=y</span><br><span class="line">CONFIG_BOOTP_SEND_HOSTNAME=y</span><br><span class="line">CONFIG_DM_MTD=y</span><br><span class="line">CONFIG_SYSRESET=y</span><br></pre></td></tr></table></figure>
<h2 id="build_linux.sh-1">2.4 <code>04_build_linux.sh</code></h2>
<p>You may meet the same issues solved in <a
href="../../../../../../2023/12/19/SBCs/RISC-V/BeagleV-Fire-1">BeagleV-Fire-1.md</a>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./04_build_linux.sh </span><br><span class="line">Applying: Add wireless-regdb regulatory database file</span><br><span class="line">&#x27;../device-tree/src/riscv/microchip/mpfs-beaglev-fire.dts&#x27; -&gt; &#x27;arch/riscv/boot/dts/microchip/mpfs-beaglev-fire.dts&#x27;</span><br><span class="line">&#x27;../device-tree/src/riscv/microchip/mpfs-beaglev-fire-fabric.dtsi&#x27; -&gt; &#x27;arch/riscv/boot/dts/microchip/mpfs-beaglev-fire-fabric.dtsi&#x27;</span><br><span class="line">&#x27;../device-tree/src/riscv/microchip/mpfs-beaglev-fire-pinmux.dtsi&#x27; -&gt; &#x27;arch/riscv/boot/dts/microchip/mpfs-beaglev-fire-pinmux.dtsi&#x27;</span><br><span class="line">make ARCH=riscv CROSS_COMPILE=....../BeagleV-Fire-ubuntu/riscv-toolchain/bin/riscv64-linux- clean</span><br><span class="line">  CLEAN   arch/riscv/kernel/compat_vdso</span><br><span class="line">  CLEAN   arch/riscv/kernel/pi</span><br><span class="line">  CLEAN   arch/riscv/kernel/vdso</span><br><span class="line">  CLEAN   arch/riscv/kernel</span><br><span class="line">  CLEAN   arch/riscv/purgatory</span><br><span class="line">  CLEAN   certs</span><br><span class="line">  CLEAN   drivers/base/firmware_loader/builtin</span><br><span class="line">  CLEAN   drivers/scsi</span><br><span class="line">  CLEAN   drivers/tty/vt</span><br><span class="line">  CLEAN   fs/unicode</span><br><span class="line">  CLEAN   init</span><br><span class="line">  CLEAN   kernel</span><br><span class="line">  CLEAN   lib/raid6</span><br><span class="line">  CLEAN   lib</span><br><span class="line">  CLEAN   net/wireless</span><br><span class="line">  CLEAN   usr</span><br><span class="line">  CLEAN   .</span><br><span class="line">&#x27;../patches/linux/mpfs_defconfig&#x27; -&gt; &#x27;./arch/riscv/configs/mpfs_defconfig&#x27;</span><br><span class="line">make ARCH=riscv CROSS_COMPILE=....../BeagleV-Fire-ubuntu/riscv-toolchain/bin/riscv64-linux- mpfs_defconfig</span><br><span class="line">  HOSTCC  scripts/basic/fixdep</span><br><span class="line">  HOSTCC  scripts/kconfig/conf.o</span><br><span class="line">  HOSTCC  scripts/kconfig/confdata.o</span><br><span class="line">  HOSTCC  scripts/kconfig/expr.o</span><br><span class="line">  LEX     scripts/kconfig/lexer.lex.c</span><br><span class="line">  YACC    scripts/kconfig/parser.tab.[ch]</span><br><span class="line">  HOSTCC  scripts/kconfig/lexer.lex.o</span><br><span class="line">  HOSTCC  scripts/kconfig/menu.o</span><br><span class="line">  HOSTCC  scripts/kconfig/parser.tab.o</span><br><span class="line">  HOSTCC  scripts/kconfig/preprocess.o</span><br><span class="line">  HOSTCC  scripts/kconfig/symbol.o</span><br><span class="line">  HOSTCC  scripts/kconfig/util.o</span><br><span class="line">  HOSTLD  scripts/kconfig/conf</span><br><span class="line">#</span><br><span class="line"># configuration written to .config</span><br><span class="line">#</span><br><span class="line">make -j48 ARCH=riscv CROSS_COMPILE=....../BeagleV-Fire-ubuntu/riscv-toolchain/bin/riscv64-linux- olddefconfig</span><br><span class="line">#</span><br><span class="line"># configuration written to .config</span><br><span class="line">#</span><br><span class="line">make -j48 ARCH=riscv CROSS_COMPILE=....../BeagleV-Fire-ubuntu/riscv-toolchain/bin/riscv64-linux- Image modules dtbs</span><br><span class="line">  SYNC    include/config/auto.conf.cmd</span><br><span class="line">  HOSTCC  scripts/dtc/dtc.o</span><br><span class="line">  HOSTCC  scripts/dtc/flattree.o</span><br><span class="line">  HOSTCC  scripts/dtc/fstree.o</span><br><span class="line">  HOSTCC  scripts/dtc/data.o</span><br><span class="line">  HOSTCC  scripts/dtc/treesource.o</span><br><span class="line">  HOSTCC  scripts/dtc/livetree.o</span><br><span class="line">  HOSTCC  scripts/dtc/srcpos.o</span><br><span class="line">  HOSTCC  scripts/dtc/checks.o</span><br><span class="line">  HOSTCC  scripts/dtc/util.o</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">  LD [M]  net/nsh/nsh.ko</span><br><span class="line">  LD [M]  net/hsr/hsr.ko</span><br><span class="line">  LD [M]  net/qrtr/qrtr.ko</span><br><span class="line">  LD [M]  net/qrtr/qrtr-smd.ko</span><br><span class="line">  LD [M]  net/qrtr/qrtr-tun.ko</span><br><span class="line">  LD [M]  net/qrtr/qrtr-mhi.ko</span><br><span class="line">  Kernel: arch/riscv/boot/Image is ready</span><br><span class="line">Compressing 6.6.51-linux4microchip+fpga-2024.09.1-20241024+-modules.tar.gz...</span><br><span class="line">&#x27;./.config&#x27; -&gt; &#x27;../patches/linux/mpfs_defconfig&#x27;</span><br><span class="line">&#x27;./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire.dts&#x27; -&gt; &#x27;../patches/linux/dts/mpfs-beaglev-fire.dts&#x27;</span><br><span class="line">&#x27;./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire-fabric.dtsi&#x27; -&gt; &#x27;../patches/linux/dts/mpfs-beaglev-fire-fabric.dtsi&#x27;</span><br><span class="line">&#x27;./arch/riscv/boot/Image&#x27; -&gt; &#x27;../deploy/input/Image&#x27;</span><br><span class="line">&#x27;./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire.dtb&#x27; -&gt; &#x27;../deploy/input/mpfs-beaglev-fire.dtb&#x27;</span><br><span class="line">&#x27;./patches/linux/beaglev_fire.its&#x27; -&gt; &#x27;./deploy/input/beaglev_fire.its&#x27;</span><br><span class="line">FIT description: U-Boot fitImage for the BeagleV-Fire</span><br><span class="line">Created:         Thu Oct 24 01:42:47 2024</span><br><span class="line"> Image 0 (kernel)</span><br><span class="line">  Description:  Linux kernel</span><br><span class="line">  Created:      Thu Oct 24 01:42:47 2024</span><br><span class="line">  Type:         Kernel Image</span><br><span class="line">  Compression:  gzip compressed</span><br><span class="line">  Data Size:    9687165 Bytes = 9460.12 KiB = 9.24 MiB</span><br><span class="line">  Architecture: RISC-V</span><br><span class="line">  OS:           Linux</span><br><span class="line">  Load Address: 0x80200000</span><br><span class="line">  Entry Point:  0x80200000</span><br><span class="line">  Hash algo:    sha256</span><br><span class="line">  Hash value:   218c9c8681afb659d7a05c80b95330a2b58398367d812ee22fd718030bdb7ffc</span><br><span class="line"> Image 1 (base_fdt)</span><br><span class="line">  Description:  Flattened Device Tree blob</span><br><span class="line">  Created:      Thu Oct 24 01:42:47 2024</span><br><span class="line">  Type:         Flat Device Tree</span><br><span class="line">  Compression:  uncompressed</span><br><span class="line">  Data Size:    19036 Bytes = 18.59 KiB = 0.02 MiB</span><br><span class="line">  Architecture: RISC-V</span><br><span class="line">  Load Address: 0x8a000000</span><br><span class="line">  Hash algo:    sha256</span><br><span class="line">  Hash value:   a254f5825e318de185b473b974d53bc291fe0106944b8bad6038c87296d73f03</span><br><span class="line"> Default Configuration: &#x27;kernel_dtb&#x27;</span><br><span class="line"> Configuration 0 (kernel_dtb)</span><br><span class="line">  Description:  1 Linux kernel, FDT blob</span><br><span class="line">  Kernel:       kernel</span><br><span class="line">  FDT:          base_fdt</span><br><span class="line"> Configuration 1 (base_dtb)</span><br><span class="line">  Description:  Base FDT blob for BeagleV-Fire board</span><br><span class="line">  Kernel:       unavailable</span><br><span class="line">  FDT:          base_fdt</span><br><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ </span><br></pre></td></tr></table></figure>
<p>Three files are generated as follows:</p>
<ul>
<li><code>patches/linux/dts/mpfs-beaglev-fire-fabric.dtsi</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: (GPL-2.0 OR MIT)</span><br><span class="line">/* Copyright (c) 2020-2021 Microchip Technology Inc */</span><br><span class="line"></span><br><span class="line">#include &quot;dt-bindings/mailbox/miv-ihc.h&quot;</span><br><span class="line"></span><br><span class="line">/ &#123;</span><br><span class="line">	fabric_clk3: fabric-clk3 &#123;</span><br><span class="line">		compatible = &quot;fixed-clock&quot;;</span><br><span class="line">		#clock-cells = &lt;0&gt;;</span><br><span class="line">		clock-frequency = &lt;50000000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	fabric_clk1: fabric-clk1 &#123;</span><br><span class="line">		compatible = &quot;fixed-clock&quot;;</span><br><span class="line">		#clock-cells = &lt;0&gt;;</span><br><span class="line">		clock-frequency = &lt;125000000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	fabric-bus@40000000 &#123;</span><br><span class="line">		compatible = &quot;simple-bus&quot;;</span><br><span class="line">		#address-cells = &lt;2&gt;;</span><br><span class="line">		#size-cells = &lt;2&gt;;</span><br><span class="line">		ranges = &lt;0x0 0x40000000 0x0 0x40000000 0x0 0x20000000&gt;, /* FIC3-FAB */</span><br><span class="line">				 &lt;0x0 0x60000000 0x0 0x60000000 0x0 0x20000000&gt;, /* FIC0, LO */</span><br><span class="line">				 &lt;0x0 0xe0000000 0x0 0xe0000000 0x0 0x20000000&gt;, /* FIC1, LO */</span><br><span class="line">				 &lt;0x20 0x0 0x20 0x0 0x10 0x0&gt;, /* FIC0,HI */</span><br><span class="line">				 &lt;0x30 0x0 0x30 0x0 0x10 0x0&gt;; /* FIC1,HI */</span><br><span class="line"></span><br><span class="line">		cape_gpios_p8: gpio@41100000 &#123;</span><br><span class="line">			compatible = &quot;microchip,coregpio-rtl-v3&quot;;</span><br><span class="line">			reg = &lt;0x0 0x41100000 0x0 0x1000&gt;;</span><br><span class="line">			clocks = &lt;&amp;fabric_clk3&gt;;</span><br><span class="line">			gpio-controller;</span><br><span class="line">			#gpio-cells = &lt;2&gt;;</span><br><span class="line">			ngpios = &lt;16&gt;;</span><br><span class="line">			gpio-line-names = &quot;P8_PIN31&quot;, &quot;P8_PIN32&quot;, &quot;P8_PIN33&quot;, &quot;P8_PIN34&quot;,</span><br><span class="line">					  &quot;P8_PIN35&quot;, &quot;P8_PIN36&quot;, &quot;P8_PIN37&quot;, &quot;P8_PIN38&quot;,</span><br><span class="line">					  &quot;P8_PIN39&quot;, &quot;P8_PIN40&quot;, &quot;P8_PIN41&quot;, &quot;P8_PIN42&quot;,</span><br><span class="line">					  &quot;P8_PIN43&quot;, &quot;P8_PIN44&quot;, &quot;P8_PIN45&quot;, &quot;P8_PIN46&quot;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		cape_gpios_p9: gpio@41200000 &#123;</span><br><span class="line">			compatible = &quot;microchip,coregpio-rtl-v3&quot;;</span><br><span class="line">			reg = &lt;0x0 0x41200000 0x0 0x1000&gt;;</span><br><span class="line">			clocks = &lt;&amp;fabric_clk3&gt;;</span><br><span class="line">			gpio-controller;</span><br><span class="line">			#gpio-cells = &lt;2&gt;;</span><br><span class="line">			ngpios = &lt;20&gt;;</span><br><span class="line">			gpio-line-names = &quot;P9_PIN11&quot;, &quot;P9_PIN12&quot;, &quot;P9_PIN13&quot;, &quot;P9_PIN14&quot;,</span><br><span class="line">					  &quot;P9_PIN15&quot;, &quot;P9_PIN16&quot;, &quot;P9_PIN17&quot;, &quot;P9_PIN18&quot;,</span><br><span class="line">					  &quot;P9_PIN21&quot;, &quot;P9_PIN22&quot;, &quot;P9_PIN23&quot;, &quot;P9_PIN24&quot;,</span><br><span class="line">					  &quot;P9_PIN25&quot;, &quot;P9_PIN26&quot;, &quot;P9_PIN27&quot;, &quot;P9_PIN28&quot;,</span><br><span class="line">					  &quot;P9_PIN29&quot;, &quot;P9_PIN31&quot;, &quot;P9_PIN41&quot;, &quot;P9_PIN42&quot;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		hsi_gpios: gpio@44000000 &#123;</span><br><span class="line">			compatible = &quot;microchip,coregpio-rtl-v3&quot;;</span><br><span class="line">			reg = &lt;0x0 0x44000000 0x0 0x1000&gt;;</span><br><span class="line">			clocks = &lt;&amp;fabric_clk3&gt;;</span><br><span class="line">			gpio-controller;</span><br><span class="line">			#gpio-cells = &lt;2&gt;;</span><br><span class="line">			ngpios = &lt;20&gt;;</span><br><span class="line">			gpio-line-names = &quot;B0_HSIO70N&quot;, &quot;B0_HSIO71N&quot;, &quot;B0_HSIO83N&quot;,</span><br><span class="line">					  &quot;B0_HSIO73N_C2P_CLKN&quot;, &quot;B0_HSIO70P&quot;, &quot;B0_HSIO71P&quot;,</span><br><span class="line">					  &quot;B0_HSIO83P&quot;, &quot;B0_HSIO73N_C2P_CLKP&quot;, &quot;XCVR1_RX_VALID&quot;,</span><br><span class="line">					  &quot;XCVR1_LOCK&quot;, &quot;XCVR1_ERROR&quot;, &quot;XCVR2_RX_VALID&quot;,</span><br><span class="line">					  &quot;XCVR2_LOCK&quot;, &quot;XCVR2_ERROR&quot;, &quot;XCVR3_RX_VALID&quot;,</span><br><span class="line">					  &quot;XCVR3_LOCK&quot;, &quot;XCVR3_ERROR&quot;, &quot;XCVR_0B_REF_CLK_PLL_LOCK&quot;,</span><br><span class="line">					  &quot;XCVR_0C_REF_CLK_PLL_LOCK&quot;, &quot;B0_HSIO81N&quot;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	ihc: mailbox &#123;</span><br><span class="line">		compatible = &quot;microchip,miv-ihc&quot;;</span><br><span class="line">		interrupt-parent = &lt;&amp;plic&gt;;</span><br><span class="line">		interrupts = &lt;IHC_HART1_INT&gt;;</span><br><span class="line">		microchip,miv-ihc-remote-context-id = &lt;IHC_CONTEXT_B&gt;;</span><br><span class="line">		#mbox-cells = &lt;1&gt;;</span><br><span class="line">		status = &quot;disabled&quot;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	fabric-pcie-bus@3000000000 &#123;</span><br><span class="line">		compatible = &quot;simple-bus&quot;;</span><br><span class="line">		#address-cells = &lt;2&gt;;</span><br><span class="line">		#size-cells = &lt;2&gt;;</span><br><span class="line">		ranges = &lt;0x0 0x40000000 0x0 0x40000000 0x0 0x20000000&gt;,</span><br><span class="line">			 &lt;0x30 0x0 0x30 0x0 0x10 0x0&gt;;</span><br><span class="line">		dma-ranges = &lt;0x0 0x0 0x0 0x80000000 0x0 0x4000000&gt;,</span><br><span class="line">			     &lt;0x0 0x4000000 0x0 0xc4000000 0x0 0x6000000&gt;,</span><br><span class="line">			     &lt;0x0 0xa000000 0x0 0x8a000000 0x0 0x8000000&gt;,</span><br><span class="line">			     &lt;0x0 0x12000000 0x14 0x12000000 0x0 0x10000000&gt;,</span><br><span class="line">			     &lt;0x0 0x22000000 0x10 0x22000000 0x0 0x5e000000&gt;;</span><br><span class="line"></span><br><span class="line">		pcie: pcie@3000000000 &#123;</span><br><span class="line">			compatible = &quot;microchip,pcie-host-1.0&quot;;</span><br><span class="line">			#address-cells = &lt;0x3&gt;;</span><br><span class="line">			#interrupt-cells = &lt;0x1&gt;;</span><br><span class="line">			#size-cells = &lt;0x2&gt;;</span><br><span class="line">			device_type = &quot;pci&quot;;</span><br><span class="line">			dma-noncoherent;</span><br><span class="line">			reg = &lt;0x30 0x0 0x0 0x8000000&gt;, &lt;0x0 0x43004000 0x0 0x2000&gt;, &lt;0x0 0x43006000 0x0 0x2000&gt;;</span><br><span class="line">			reg-names = &quot;cfg&quot;, &quot;bridge&quot;, &quot;ctrl&quot;;</span><br><span class="line">			bus-range = &lt;0x0 0x7f&gt;;</span><br><span class="line">			interrupt-parent = &lt;&amp;plic&gt;;</span><br><span class="line">			interrupts = &lt;119&gt;;</span><br><span class="line">			interrupt-map = &lt;0 0 0 1 &amp;pcie_intc 0&gt;,</span><br><span class="line">					&lt;0 0 0 2 &amp;pcie_intc 1&gt;,</span><br><span class="line">					&lt;0 0 0 3 &amp;pcie_intc 2&gt;,</span><br><span class="line">					&lt;0 0 0 4 &amp;pcie_intc 3&gt;;</span><br><span class="line">			interrupt-map-mask = &lt;0 0 0 7&gt;;</span><br><span class="line">			clocks = &lt;&amp;ccc_nw CLK_CCC_PLL0_OUT1&gt;,</span><br><span class="line">					 &lt;&amp;ccc_nw CLK_CCC_PLL0_OUT3&gt;;</span><br><span class="line">			clock-names = &quot;fic1&quot;, &quot;fic3&quot;;</span><br><span class="line">			ranges = &lt;0x43000000 0x0 0x9000000 0x30 0x9000000 0x0 0xf000000&gt;,</span><br><span class="line">				 &lt;0x1000000 0x0 0x8000000 0x30 0x8000000 0x0 0x1000000&gt;,</span><br><span class="line">				 &lt;0x3000000 0x0 0x18000000 0x30 0x18000000 0x0 0x70000000&gt;;</span><br><span class="line">			dma-ranges = &lt;0x3000000 0x0 0x80000000 0x0 0x0 0x0 0x4000000&gt;,</span><br><span class="line">				     &lt;0x3000000 0x0 0x84000000 0x0 0x4000000 0x0 0x6000000&gt;,</span><br><span class="line">				     &lt;0x3000000 0x0 0x8a000000 0x0 0xa000000 0x0 0x8000000&gt;,</span><br><span class="line">				     &lt;0x3000000 0x0 0x92000000 0x0 0x12000000 0x0 0x10000000&gt;,</span><br><span class="line">				     &lt;0x3000000 0x0 0xa2000000 0x0 0x22000000 0x0 0x5e000000&gt;;</span><br><span class="line">			msi-parent = &lt;&amp;pcie&gt;;</span><br><span class="line">			msi-controller;</span><br><span class="line">			status = &quot;disabled&quot;;</span><br><span class="line"></span><br><span class="line">			pcie_intc: interrupt-controller &#123;</span><br><span class="line">				#address-cells = &lt;0&gt;;</span><br><span class="line">				#interrupt-cells = &lt;1&gt;;</span><br><span class="line">				interrupt-controller;</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	refclk_ccc: cccrefclk &#123;</span><br><span class="line">		compatible = &quot;fixed-clock&quot;;</span><br><span class="line">		#clock-cells = &lt;0&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;ccc_nw &#123;</span><br><span class="line">	clocks = &lt;&amp;refclk_ccc&gt;, &lt;&amp;refclk_ccc&gt;, &lt;&amp;refclk_ccc&gt;, &lt;&amp;refclk_ccc&gt;,</span><br><span class="line">		 &lt;&amp;refclk_ccc&gt;, &lt;&amp;refclk_ccc&gt;;</span><br><span class="line">	clock-names = &quot;pll0_ref0&quot;, &quot;pll0_ref1&quot;, &quot;pll1_ref0&quot;, &quot;pll1_ref1&quot;,</span><br><span class="line">		      &quot;dll0_ref&quot;, &quot;dll1_ref&quot;;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>patches/linux/dts/mpfs-beaglev-fire.dts</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: (GPL-2.0 OR MIT)</span><br><span class="line">/* Copyright (c) 2020-2021 Microchip Technology Inc */</span><br><span class="line"></span><br><span class="line">/dts-v1/;</span><br><span class="line"></span><br><span class="line">#include &lt;dt-bindings/gpio/gpio.h&gt;</span><br><span class="line">#include &quot;mpfs.dtsi&quot;</span><br><span class="line">#include &quot;mpfs-beaglev-fire-fabric.dtsi&quot;</span><br><span class="line">#include &quot;mpfs-beaglev-fire-pinmux.dtsi&quot;</span><br><span class="line"></span><br><span class="line">/* Clock frequency (in Hz) of the rtcclk */</span><br><span class="line">#define RTCCLK_FREQ		1000000</span><br><span class="line"></span><br><span class="line">/ &#123;</span><br><span class="line">	#address-cells = &lt;2&gt;;</span><br><span class="line">	#size-cells = &lt;2&gt;;</span><br><span class="line">	model = &quot;BeagleBoard BeagleV-Fire&quot;;</span><br><span class="line">	compatible = &quot;beagle,beaglev-fire&quot;, &quot;microchip,mpfs&quot;;</span><br><span class="line"></span><br><span class="line">	soc &#123;</span><br><span class="line">		dma-ranges = &lt;0x14 0x0 0x0 0x80000000 0x0 0x4000000&gt;,</span><br><span class="line">			     &lt;0x14 0x4000000 0x0 0xc4000000 0x0 0x6000000&gt;,</span><br><span class="line">			     &lt;0x14 0xa000000 0x0 0x8a000000 0x0 0x8000000&gt;,</span><br><span class="line">			     &lt;0x14 0x12000000 0x14 0x12000000 0x0 0x10000000&gt;,</span><br><span class="line">			     &lt;0x14 0x22000000 0x10 0x22000000 0x0 0x5e000000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	aliases &#123;</span><br><span class="line">		serial0 = &amp;mmuart0;</span><br><span class="line">		serial1 = &amp;mmuart1;</span><br><span class="line">		serial2 = &amp;mmuart2;</span><br><span class="line">		serial3 = &amp;mmuart3;</span><br><span class="line">		serial4 = &amp;mmuart4;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	chosen &#123;</span><br><span class="line">		stdout-path = &quot;serial0:115200n8&quot;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	cpus &#123;</span><br><span class="line">		timebase-frequency = &lt;RTCCLK_FREQ&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	kernel: memory@80000000 &#123;</span><br><span class="line">		device_type = &quot;memory&quot;;</span><br><span class="line">		reg = &lt;0x0 0x80000000 0x0 0x4000000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	ddr_cached_low: memory@8a000000 &#123;</span><br><span class="line">		device_type = &quot;memory&quot;;</span><br><span class="line">		reg = &lt;0x0 0x8a000000 0x0 0x8000000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	ddr_non_cached_low: memory@c4000000 &#123;</span><br><span class="line">		device_type = &quot;memory&quot;;</span><br><span class="line">		reg = &lt;0x0 0xc4000000 0x0 0x6000000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	ddr_cached_high: memory@1022000000 &#123;</span><br><span class="line">		device_type = &quot;memory&quot;;</span><br><span class="line">		reg = &lt;0x10 0x22000000 0x0 0x5e000000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	ddr_non_cached_high: memory@1412000000 &#123;</span><br><span class="line">		device_type = &quot;memory&quot;;</span><br><span class="line">		reg = &lt;0x14 0x12000000 0x0 0x10000000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	reserved-memory &#123;</span><br><span class="line">		#address-cells = &lt;2&gt;;</span><br><span class="line">		#size-cells = &lt;2&gt;;</span><br><span class="line">		ranges;</span><br><span class="line"></span><br><span class="line">		hss: hss-buffer@103fc00000 &#123;</span><br><span class="line">			compatible = &quot;shared-dma-pool&quot;;</span><br><span class="line">			reg = &lt;0x10 0x3fc00000 0x0 0x400000&gt;;</span><br><span class="line">			no-map;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		dma_non_cached_low: non-cached-low-buffer &#123;</span><br><span class="line">			compatible = &quot;shared-dma-pool&quot;;</span><br><span class="line">			size = &lt;0x0 0x4000000&gt;;</span><br><span class="line">			no-map;</span><br><span class="line">			alloc-ranges = &lt;0x0 0xc4000000 0x0 0x4000000&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		dma_non_cached_high: non-cached-high-buffer &#123;</span><br><span class="line">			compatible = &quot;shared-dma-pool&quot;;</span><br><span class="line">			size = &lt;0x0 0x10000000&gt;;</span><br><span class="line">			no-map;</span><br><span class="line">			linux,dma-default;</span><br><span class="line">			alloc-ranges = &lt;0x14 0x12000000 0x0 0x10000000&gt;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	imx219_vana: fixedregulator-0 &#123;</span><br><span class="line">		compatible = &quot;regulator-fixed&quot;;</span><br><span class="line">		regulator-name = &quot;imx219_vana&quot;;</span><br><span class="line">		regulator-min-microvolt = &lt;2800000&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;2800000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	imx219_vdig: fixedregulator-1 &#123;</span><br><span class="line">		compatible = &quot;regulator-fixed&quot;;</span><br><span class="line">		regulator-name = &quot;imx219_vdig&quot;;</span><br><span class="line">		regulator-min-microvolt = &lt;1800000&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;1800000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	imx219_vddl: fixedregulator-2 &#123;</span><br><span class="line">		compatible = &quot;regulator-fixed&quot;;</span><br><span class="line">		regulator-name = &quot;imx219_vddl&quot;;</span><br><span class="line">		regulator-min-microvolt = &lt;1200000&gt;;</span><br><span class="line">		regulator-max-microvolt = &lt;1200000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	imx219_clk: camera-clk &#123;</span><br><span class="line">		compatible = &quot;fixed-clock&quot;;</span><br><span class="line">		#clock-cells = &lt;0&gt;;</span><br><span class="line">		clock-frequency = &lt;24000000&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;gpio0 &#123;</span><br><span class="line">	ngpios=&lt;14&gt;;</span><br><span class="line">	gpio-line-names = &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;,</span><br><span class="line">			  &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;SD_CARD_CS&quot;, &quot;USER_BUTTON&quot;;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line"></span><br><span class="line">	sd-card-cs-hog &#123;</span><br><span class="line">		gpio-hog;</span><br><span class="line">		gpios = &lt;12 12&gt;;</span><br><span class="line">		output-high;</span><br><span class="line">		line-name = &quot;SD_CARD_CS&quot;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	user-button-hog &#123;</span><br><span class="line">		gpio-hog;</span><br><span class="line">		gpios = &lt;13 13&gt;;</span><br><span class="line">		input;</span><br><span class="line">		line-name = &quot;USER_BUTTON&quot;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;gpio1 &#123;</span><br><span class="line">	ngpios=&lt;24&gt;;</span><br><span class="line">	gpio-line-names = &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;,</span><br><span class="line">			  &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;,</span><br><span class="line">			  &quot;ADC_IRQn&quot;, &quot;&quot;, &quot;&quot;, &quot;USB_OCn&quot;;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line"></span><br><span class="line">	adc-irqn-hog &#123;</span><br><span class="line">		gpio-hog;</span><br><span class="line">		gpios = &lt;20 20&gt;;</span><br><span class="line">		input;</span><br><span class="line">		line-name = &quot;ADC_IRQn&quot;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	usb-ocn-hog &#123;</span><br><span class="line">		gpio-hog;</span><br><span class="line">		gpios = &lt;23 23&gt;;</span><br><span class="line">		input;</span><br><span class="line">		line-name = &quot;USB_OCn&quot;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;gpio2 &#123;</span><br><span class="line">	ngpios=&lt;32&gt;;</span><br><span class="line">	gpio-line-names = &quot;P8_PIN3_USER_LED_0&quot;, &quot;P8_PIN4_USER_LED_1&quot;, &quot;P8_PIN5_USER_LED_2&quot;,</span><br><span class="line">			  &quot;P8_PIN6_USER_LED_3&quot;, &quot;P8_PIN7_USER_LED_4&quot;, &quot;P8_PIN8_USER_LED_5&quot;,</span><br><span class="line">			  &quot;P8_PIN9_USER_LED_6&quot;, &quot;P8_PIN10_USER_LED_7&quot;, &quot;P8_PIN11_USER_LED_8&quot;,</span><br><span class="line">			  &quot;P8_PIN12_USER_LED_9&quot;, &quot;P8_PIN13_USER_LED_10&quot;, &quot;P8_PIN14_USER_LED_11&quot;,</span><br><span class="line">			  &quot;P8_PIN15&quot;, &quot;P8_PIN16&quot;, &quot;P8_PIN17&quot;, &quot;P8_PIN18&quot;, &quot;P8_PIN19&quot;, &quot;P8_PIN20&quot;,</span><br><span class="line">			  &quot;P8_PIN21&quot;, &quot;P8_PIN22&quot;, &quot;P8_PIN23&quot;, &quot;P8_PIN24&quot;, &quot;P8_PIN25&quot;, &quot;P8_PIN26&quot;,</span><br><span class="line">			  &quot;P8_PIN27&quot;, &quot;P8_PIN28&quot;, &quot;P8_PIN29&quot;, &quot;P8_PIN30&quot;, &quot;M2_W_DISABLE1&quot;,</span><br><span class="line">			  &quot;M2_W_DISABLE2&quot;, &quot;VIO_ENABLE&quot;, &quot;SD_DET&quot;;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line"></span><br><span class="line">	vio-enable-hog &#123;</span><br><span class="line">		gpio-hog;</span><br><span class="line">		gpios = &lt;30 30&gt;;</span><br><span class="line">		output-high;</span><br><span class="line">		line-name = &quot;VIO_ENABLE&quot;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	sd-det-hog &#123;</span><br><span class="line">		gpio-hog;</span><br><span class="line">		gpios = &lt;31 31&gt;;</span><br><span class="line">		input;</span><br><span class="line">		line-name = &quot;SD_DET&quot;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2c0 &#123;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;i2c1 &#123;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line"></span><br><span class="line">	eeprom: eeprom@50 &#123;</span><br><span class="line">		compatible = &quot;at,24c32&quot;;</span><br><span class="line">		reg = &lt;0x50&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	imx219: sensor@10 &#123;</span><br><span class="line">		compatible = &quot;sony,imx219&quot;;</span><br><span class="line">		reg = &lt;0x10&gt;;</span><br><span class="line">		clocks = &lt;&amp;imx219_clk&gt;;</span><br><span class="line">		VANA-supply = &lt;&amp;imx219_vana&gt;;   /* 2.8v */</span><br><span class="line">		VDIG-supply = &lt;&amp;imx219_vdig&gt;;   /* 1.8v */</span><br><span class="line">		VDDL-supply = &lt;&amp;imx219_vddl&gt;;   /* 1.2v */</span><br><span class="line"></span><br><span class="line">		port &#123;</span><br><span class="line">			imx219_0: endpoint &#123;</span><br><span class="line">				data-lanes = &lt;1 2&gt;;</span><br><span class="line">				clock-noncontinuous;</span><br><span class="line">				link-frequencies = /bits/ 64 &lt;456000000&gt;;</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mac0 &#123;</span><br><span class="line">	dma-noncoherent;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">	phy-mode = &quot;sgmii&quot;;</span><br><span class="line">	phy-handle = &lt;&amp;phy0&gt;;</span><br><span class="line">	phy0: ethernet-phy@0 &#123;</span><br><span class="line">		reg = &lt;0&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mbox &#123;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mmc &#123;</span><br><span class="line">	dma-noncoherent;</span><br><span class="line">	bus-width = &lt;4&gt;;</span><br><span class="line">	disable-wp;</span><br><span class="line">	cap-sd-highspeed;</span><br><span class="line">	cap-mmc-highspeed;</span><br><span class="line">	mmc-ddr-1_8v;</span><br><span class="line">	mmc-hs200-1_8v;</span><br><span class="line">	sd-uhs-sdr12;</span><br><span class="line">	sd-uhs-sdr25;</span><br><span class="line">	sd-uhs-sdr50;</span><br><span class="line">	sd-uhs-sdr104;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mmuart0 &#123;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;mmuart1 &#123;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;refclk &#123;</span><br><span class="line">	clock-frequency = &lt;125000000&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;refclk_ccc &#123;</span><br><span class="line">	clock-frequency = &lt;50000000&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;rtc &#123;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;spi0 &#123;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;spi1 &#123;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;syscontroller &#123;</span><br><span class="line">	microchip,bitstream-flash = &lt;&amp;sys_ctrl_flash&gt;;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;syscontroller_qspi &#123;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line"></span><br><span class="line">	sys_ctrl_flash: flash@0 &#123; // MT25QL01GBBB8ESF-0SIT</span><br><span class="line">		compatible = &quot;jedec,spi-nor&quot;;</span><br><span class="line">		#address-cells = &lt;1&gt;;</span><br><span class="line">		#size-cells = &lt;1&gt;;</span><br><span class="line">		spi-max-frequency = &lt;20000000&gt;;</span><br><span class="line">		spi-rx-bus-width = &lt;1&gt;;</span><br><span class="line">		reg = &lt;0&gt;;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&amp;usb &#123;</span><br><span class="line">	dma-noncoherent;</span><br><span class="line">	status = &quot;okay&quot;;</span><br><span class="line">	dr_mode = &quot;otg&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>patches/linux/mpfs_defconfig</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># Automatically generated file; DO NOT EDIT.</span><br><span class="line"># Linux/riscv 6.6.51-linux4microchip+fpga-2024.09 Kernel Configuration</span><br><span class="line">#</span><br><span class="line">CONFIG_CC_VERSION_TEXT=&quot;riscv64-linux-gcc (GCC) 14.2.0&quot;</span><br><span class="line">CONFIG_CC_IS_GCC=y</span><br><span class="line">CONFIG_GCC_VERSION=140200</span><br><span class="line">CONFIG_CLANG_VERSION=0</span><br><span class="line">CONFIG_AS_IS_GNU=y</span><br><span class="line">CONFIG_AS_VERSION=24200</span><br><span class="line">CONFIG_LD_IS_BFD=y</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">#</span><br><span class="line"># Kernel Testing and Coverage</span><br><span class="line">#</span><br><span class="line"># CONFIG_KUNIT is not set</span><br><span class="line"># CONFIG_NOTIFIER_ERROR_INJECTION is not set</span><br><span class="line"># CONFIG_FUNCTION_ERROR_INJECTION is not set</span><br><span class="line"># CONFIG_FAULT_INJECTION is not set</span><br><span class="line">CONFIG_ARCH_HAS_KCOV=y</span><br><span class="line">CONFIG_CC_HAS_SANCOV_TRACE_PC=y</span><br><span class="line"># CONFIG_KCOV is not set</span><br><span class="line">CONFIG_RUNTIME_TESTING_MENU=y</span><br><span class="line"># CONFIG_TEST_DHRY is not set</span><br><span class="line"># CONFIG_LKDTM is not set</span><br><span class="line"># CONFIG_TEST_MIN_HEAP is not set</span><br><span class="line"># CONFIG_TEST_DIV64 is not set</span><br><span class="line"># CONFIG_BACKTRACE_SELF_TEST is not set</span><br><span class="line"># CONFIG_TEST_REF_TRACKER is not set</span><br><span class="line"># CONFIG_RBTREE_TEST is not set</span><br><span class="line"># CONFIG_REED_SOLOMON_TEST is not set</span><br><span class="line"># CONFIG_INTERVAL_TREE_TEST is not set</span><br><span class="line"># CONFIG_PERCPU_TEST is not set</span><br><span class="line"># CONFIG_ATOMIC64_SELFTEST is not set</span><br><span class="line"># CONFIG_TEST_HEXDUMP is not set</span><br><span class="line"># CONFIG_STRING_SELFTEST is not set</span><br><span class="line"># CONFIG_TEST_STRING_HELPERS is not set</span><br><span class="line"># CONFIG_TEST_KSTRTOX is not set</span><br><span class="line"># CONFIG_TEST_PRINTF is not set</span><br><span class="line"># CONFIG_TEST_SCANF is not set</span><br><span class="line"># CONFIG_TEST_BITMAP is not set</span><br><span class="line"># CONFIG_TEST_UUID is not set</span><br><span class="line"># CONFIG_TEST_XARRAY is not set</span><br><span class="line"># CONFIG_TEST_MAPLE_TREE is not set</span><br><span class="line"># CONFIG_TEST_RHASHTABLE is not set</span><br><span class="line"># CONFIG_TEST_IDA is not set</span><br><span class="line"># CONFIG_TEST_LKM is not set</span><br><span class="line"># CONFIG_TEST_BITOPS is not set</span><br><span class="line"># CONFIG_TEST_VMALLOC is not set</span><br><span class="line"># CONFIG_TEST_USER_COPY is not set</span><br><span class="line"># CONFIG_TEST_BPF is not set</span><br><span class="line"># CONFIG_TEST_BLACKHOLE_DEV is not set</span><br><span class="line"># CONFIG_FIND_BIT_BENCHMARK is not set</span><br><span class="line"># CONFIG_TEST_FIRMWARE is not set</span><br><span class="line"># CONFIG_TEST_SYSCTL is not set</span><br><span class="line"># CONFIG_TEST_UDELAY is not set</span><br><span class="line"># CONFIG_TEST_STATIC_KEYS is not set</span><br><span class="line"># CONFIG_TEST_DYNAMIC_DEBUG is not set</span><br><span class="line"># CONFIG_TEST_KMOD is not set</span><br><span class="line"># CONFIG_TEST_MEMCAT_P is not set</span><br><span class="line"># CONFIG_TEST_MEMINIT is not set</span><br><span class="line"># CONFIG_TEST_FREE_PAGES is not set</span><br><span class="line">CONFIG_ARCH_USE_MEMTEST=y</span><br><span class="line"># CONFIG_MEMTEST is not set</span><br><span class="line"># end of Kernel Testing and Coverage</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># Rust hacking</span><br><span class="line">#</span><br><span class="line"># end of Rust hacking</span><br><span class="line"># end of Kernel hacking</span><br></pre></td></tr></table></figure>
<h2 id="generate_payload.bin.sh">2.5
<code>05_generate_payload.bin.sh</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./05_generate_payload.bin.sh </span><br><span class="line">Hart Software Service formatted boot image generator v0.99.37</span><br><span class="line">Copyright (c) 2021-2022 Microchip FPGA Embedded Systems Solutions.</span><br><span class="line"></span><br><span class="line">Parsing set-name</span><br><span class="line">Parsing hart entry points</span><br><span class="line">	Entry Point U54_1 is 0x80200000</span><br><span class="line">	Entry Point U54_2 is 0x80200000</span><br><span class="line">	Entry Point U54_3 is 0x80200000</span><br><span class="line">	Entry Point U54_4 is 0x80200000</span><br><span class="line">Parsing payload &gt;&gt;src.bin&lt;&lt;</span><br><span class="line">	exec_addr is 0x80200000</span><br><span class="line">	owner is 1</span><br><span class="line">	secondary is 2</span><br><span class="line">	secondary is 3</span><br><span class="line">	secondary is 4</span><br><span class="line">	priv_mode is 1</span><br><span class="line"></span><br><span class="line">Processing ELF &gt;&gt;src.bin&lt;&lt;</span><br><span class="line">&gt;&gt;src.bin&lt;&lt; is not an ELF object</span><br><span class="line"></span><br><span class="line">Processing blob &gt;&gt;src.bin&lt;&lt; - placing at 0x80200000</span><br><span class="line">lastChunk is 0, numChunks is 1</span><br><span class="line">Set-name is &gt;&gt;PolarFire-SoC-HSS::U-Boot&lt;&lt;</span><br><span class="line">Output filename is &gt;&gt;./input/payload.bin&lt;&lt;</span><br><span class="line">Outputting Payload Header</span><br><span class="line">Outputting Code/Data Chunks</span><br><span class="line">Outputting ZI Chunks</span><br><span class="line">Outputting Binary Data</span><br><span class="line">Outputting Payload Header</span><br><span class="line">Thu 24 Oct 2024 02:26:49 AM PDT</span><br><span class="line">[u-boot.bin: U-Boot 2023.07.02-linux4microchip+fpga-2024.09-dirty (Oct 23 2024 - 23:26:07 -0700)]</span><br><span class="line">[src.bin:    U-Boot 2023.07.02-linux4microchip+fpga-2024.09-dirty (Oct 23 2024 - 23:26:07 -0700)]</span><br><span class="line">[payload.bin:U-Boot 2023.07.02-linux4microchip+fpga-2024.09-dirty (Oct 23 2024 - 23:26:07 -0700)]</span><br><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ </span><br></pre></td></tr></table></figure>
<h2 id="sudo-.06_generate_debian_console_root.sh">2.6
<code>sudo ./06_generate_debian_console_root.sh</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ sudo ./06_generate_debian_console_root.sh </span><br><span class="line">[sudo] password for lvision: </span><br><span class="line">--2024-10-24 02:30:20--  https://rcn-ee.net/rootfs/debian-riscv64-sid-minimal/2024-10-24/debian-sid-console-riscv64-2024-10-24.tar.xz</span><br><span class="line">Resolving rcn-ee.net (rcn-ee.net)... 5.161.107.156</span><br><span class="line">Connecting to rcn-ee.net (rcn-ee.net)|5.161.107.156|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 332982816 (318M) [application/x-xz]</span><br><span class="line">Saving to: ‘./deploy/debian-sid-console-riscv64-2024-10-24.tar.xz’</span><br><span class="line"></span><br><span class="line">debian-sid-console-riscv64-2024-10-24.tar.xz                   100%[==================================================================================================================================================&gt;] 317.56M  46.0MB/s    in 7.5s    </span><br><span class="line"></span><br><span class="line">2024-10-24 02:30:27 (42.6 MB/s) - ‘./deploy/debian-sid-console-riscv64-2024-10-24.tar.xz’ saved [332982816/332982816]</span><br><span class="line"></span><br><span class="line">Extracting: debian-sid-console-riscv64-2024-10-24/riscv64-rootfs-*.tar</span><br><span class="line">&#x27;./deploy/boot.scr&#x27; -&gt; &#x27;deploy/input/boot.scr&#x27;</span><br><span class="line">&#x27;./deploy/sysconf.txt&#x27; -&gt; &#x27;deploy/input/sysconf.txt&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/eth0-DHCP.network&#x27; -&gt; &#x27;./ignore/.root/etc/systemd/network/eth0.network&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/eth1-DHCP.network&#x27; -&gt; &#x27;./ignore/.root/etc/systemd/network/eth1.network&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/nginx/nginx-autoindex&#x27; -&gt; &#x27;./ignore/.root/etc/nginx/sites-enabled/default&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/nginx/Cockpit.html&#x27; -&gt; &#x27;./ignore/.root/var/www/html/Cockpit.html&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/nginx/Docs-BeagleBoard.html&#x27; -&gt; &#x27;./ignore/.root/var/www/html/Docs-BeagleBoard.html&#x27;</span><br><span class="line">---------------------</span><br><span class="line">File Size</span><br><span class="line">1.4G	ignore/.root/</span><br><span class="line">---------------------</span><br><span class="line">0+0 records in</span><br><span class="line">0+0 records out</span><br><span class="line">0 bytes copied, 2.196e-05 s, 0.0 kB/s</span><br><span class="line">mke2fs 1.47.0 (5-Feb-2023)</span><br><span class="line">./deploy/input/root.ext4 contains a ext4 file system</span><br><span class="line">	created on Wed Oct 23 02:58:30 2024</span><br><span class="line">Discarding device blocks: done                            </span><br><span class="line">Creating filesystem with 563200 4k blocks and 140832 inodes</span><br><span class="line">Filesystem UUID: 4630cf75-81d2-47ea-b1ce-79ae03739e62</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">	32768, 98304, 163840, 229376, 294912</span><br><span class="line"></span><br><span class="line">Allocating group tables: done                            </span><br><span class="line">Writing inode tables: done                            </span><br><span class="line">Creating journal (16384 blocks): done</span><br><span class="line">Copying files into the device: done</span><br><span class="line">Writing superblocks and filesystem accounting information: done </span><br><span class="line"></span><br><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ </span><br></pre></td></tr></table></figure>
<h2 id="sudo-.07_create_sdcard_img.sh">2.7
<code>sudo ./07_create_sdcard_img.sh</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ sudo ./07_create_sdcard_img.sh </span><br><span class="line">INFO: cmd: &quot;mkdir -p &quot;....../BeagleV-Fire-ubuntu/deploy/tmp&quot;&quot; (stderr):</span><br><span class="line">INFO: cmd: &quot;rm -rf &quot;....../BeagleV-Fire-ubuntu/deploy/tmp&quot;/*&quot; (stderr):</span><br><span class="line">INFO: cmd: &quot;mkdir -p &quot;....../BeagleV-Fire-ubuntu/deploy/tmp&quot;&quot; (stderr):</span><br><span class="line">INFO: cmd: &quot;cp -a &quot;....../BeagleV-Fire-ubuntu/deploy/root&quot; &quot;....../BeagleV-Fire-ubuntu/deploy/tmp/root&quot;&quot; (stderr):</span><br><span class="line">INFO: cmd: &quot;mkdir -p &quot;....../BeagleV-Fire-ubuntu/deploy/images&quot;&quot; (stderr):</span><br><span class="line">INFO: vfat(boot.vfat): cmd: &quot;mkdosfs   &#x27;....../BeagleV-Fire-ubuntu/deploy/images/boot.vfat&#x27;&quot; (stderr):</span><br><span class="line">INFO: vfat(boot.vfat): adding file &#x27;beaglev_fire.itb&#x27; as &#x27;beaglev_fire.itb&#x27; ...</span><br><span class="line">INFO: vfat(boot.vfat): cmd: &quot;MTOOLS_SKIP_CHECK=1 mcopy -sp -i &#x27;....../BeagleV-Fire-ubuntu/deploy/images/boot.vfat&#x27; &#x27;....../BeagleV-Fire-ubuntu/deploy/input/beaglev_fire.itb&#x27; &#x27;::&#x27;&quot; (stderr):</span><br><span class="line">INFO: vfat(boot.vfat): adding file &#x27;boot.scr&#x27; as &#x27;boot.scr&#x27; ...</span><br><span class="line">INFO: vfat(boot.vfat): cmd: &quot;MTOOLS_SKIP_CHECK=1 mcopy -sp -i &#x27;....../BeagleV-Fire-ubuntu/deploy/images/boot.vfat&#x27; &#x27;....../BeagleV-Fire-ubuntu/deploy/input/boot.scr&#x27; &#x27;::&#x27;&quot; (stderr):</span><br><span class="line">INFO: vfat(boot.vfat): adding file &#x27;sysconf.txt&#x27; as &#x27;sysconf.txt&#x27; ...</span><br><span class="line">INFO: vfat(boot.vfat): cmd: &quot;MTOOLS_SKIP_CHECK=1 mcopy -sp -i &#x27;....../BeagleV-Fire-ubuntu/deploy/images/boot.vfat&#x27; &#x27;....../BeagleV-Fire-ubuntu/deploy/input/sysconf.txt&#x27; &#x27;::&#x27;&quot; (stderr):</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;uboot&#x27; (in MBR) from &#x27;payload.bin&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;kernel&#x27; (in MBR) from &#x27;boot.vfat&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;rootfs&#x27; (in MBR) from &#x27;root.ext4&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;[MBR]&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;[GPT header]&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;[GPT array]&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;[GPT backup]&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): writing GPT</span><br><span class="line">INFO: hdimage(sdcard.img): writing protective MBR</span><br><span class="line">INFO: hdimage(sdcard.img): writing MBR</span><br><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ </span><br></pre></td></tr></table></figure>
<h2 id="take-a-look-at-the-image">2.8 Take A Look At The Image</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ll deploy/images </span><br><span class="line">total 1.5G</span><br><span class="line">4.0K drwxr-xr-x 2 root    root  4.0K Oct 23 03:18 ./</span><br><span class="line">4.0K drwxr-xr-x 6 lvision users 4.0K Oct 23 03:18 ../</span><br><span class="line">9.6M -rw-r--r-- 1 root    root  128M Oct 23 03:18 boot.vfat</span><br><span class="line">1.5G -rw-r--r-- 1 root    root  2.3G Oct 23 03:18 sdcard.img</span><br></pre></td></tr></table></figure>
<h2 id="failed-to-boot">2.9 Failed To Boot</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ tio /dev/ttyUSB0</span><br><span class="line">[02:34:42.727] tio v2.7</span><br><span class="line">[02:34:42.727] Press ctrl-t q to quit</span><br><span class="line">[02:34:42.741] Connected</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">HSS: decompressing from eNVM to L2 Scratch ... Passed</span><br><span class="line">DDR training ... Passed ( 5648 ms)</span><br><span class="line">                                                                </span><br><span class="line">---------------------------------</span><br><span class="line">--        BeagleV-Fire         --</span><br><span class="line">---------------------------------</span><br><span class="line"></span><br><span class="line">[5.711390] PolarFire(R) SoC Hart Software Services (HSS) - version 0.99.36-BVF-0.3.0</span><br><span class="line">MPFS HAL version 2.2.104 / DDR Driver version 0.4.023 / Mi-V IHC version 0.1.1 / BOARD=bvf</span><br><span class="line">(c) Copyright 2017-2022 Microchip FPGA Embedded Systems Solutions.</span><br><span class="line"></span><br><span class="line">incorporating OpenSBI - version 1.2</span><br><span class="line">(c) Copyright 2019-2022 Western Digital Corporation.</span><br><span class="line"></span><br><span class="line">[5.742377] Build ID: 3f0ed536ff6a0aaef3c9b81896adaee39ec4d8c1</span><br><span class="line">[5.749235] Built with the following tools:</span><br><span class="line"> - riscv64-unknown-elf-gcc (xPack GNU RISC-V Embedded GCC (Microsemi SoftConsole build), 64-bit) 8.3.0</span><br><span class="line"> - GNU ld (xPack GNU RISC-V Embedded GCC (Microsemi SoftConsole build), 64-bit) 2.32</span><br><span class="line"></span><br><span class="line">[5.771108] NOTICE: Running from L2 Scratchpad</span><br><span class="line"></span><br><span class="line">[5.776750] Serial Number: </span><br><span class="line">421ad5e6973fae72de847b6a5a30e90300000000000000000000000000000000000000000000000000000000000000000000</span><br><span class="line">[5.789423] Segment Configuration:</span><br><span class="line">        Cached: SEG0_0: offset 0x0080000000, physical DDR 0x00000000</span><br><span class="line">        Cached: SEG0_1: offset 0x1000000000, physical DDR 0x00000000</span><br><span class="line">    Non-cached: SEG1_2: offset 0x00c0000000, physical DDR 0x00000000</span><br><span class="line">    Non-cached: SEG1_3: offset 0x1400000000, physical DDR 0x00000000</span><br><span class="line">Non-cached WCB: SEG1_4: offset 0x00d0000000, physical DDR 0x00000000</span><br><span class="line">Non-cached WCB: SEG1_5: offset 0x1800000000, physical DDR 0x00000000</span><br><span class="line">[5.830306] L2 Cache Configuration:</span><br><span class="line">    L2-Scratchpad:  4 ways (512 KiB)</span><br><span class="line">         L2-Cache:  8 ways (1024 KiB)</span><br><span class="line">           L2-LIM:  4 ways (512 KiB)</span><br><span class="line">[5.844801] DDR-Lo size is   32 MiB</span><br><span class="line">[5.849055] DDR-Hi size is 1888 MiB</span><br><span class="line">[5.872864] Design Info: </span><br><span class="line">    Design Name: CI_DEFAULT_FD28A2CA1789CDC1137</span><br><span class="line">    Design Version: 02.00.2</span><br><span class="line">[5.883280] Attempting to select eMMC ... Passed</span><br><span class="line">[6.161422] User button NOT pressed</span><br><span class="line">Press a key to enter CLI, ESC to skip</span><br><span class="line">Timeout in 1 second</span><br><span class="line">.[6.281293] Character 13 pressed</span><br><span class="line"></span><br><span class="line">[6.285459] Type HELP for list of commands</span><br><span class="line">[6.290320] &gt;&gt; mmc</span><br><span class="line">[18.129310] Selecting SDCARD/MMC (fallback) as boot source ...</span><br><span class="line">[18.135994] Attempting to select eMMC ... Passed</span><br><span class="line">[18.391620] &gt;&gt; usbdmsc</span><br><span class="line">[280.344194] initialize MMC</span><br><span class="line">[280.347840] Attempting to select eMMC ... Passed</span><br><span class="line">[280.603552] MMC - 512 byte pages, 512 byte blocks, 30621696 pages</span><br><span class="line">Waiting for USB Host to connect... (CTRL-C to quit)</span><br><span class="line"> . 0 bytes written, 0 bytes readUSB Host connected. Waiting for disconnect... (CTRL-C to quit)</span><br><span class="line"> . 1724668416 bytes written, 1806021120 bytes read</span><br></pre></td></tr></table></figure>
<h1 id="flash-official-beaglev-fire-ubuntu-2023-11-21">3. Flash Official
<a
target="_blank" rel="noopener" href="https://www.beagleboard.org/distros/beaglev-fire-ubuntu-2023-11-21">BeagleV-Fire
Ubuntu 2023-11-21</a></h1>
<h2 id="apply-official-flash">3.1 Apply Official Flash</h2>
<p>The official website of <a
target="_blank" rel="noopener" href="https://www.beagleboard.org/boards/beaglev-fire">BeagleV-Fire
Board</a> provides the official OS <a
target="_blank" rel="noopener" href="https://www.beagleboard.org/distros/beaglev-fire-ubuntu-2023-11-21">BeagleV-Fire
Ubuntu 2023-11-21</a>, which is able to flash onto the board
directly.</p>
<p><strong><span style="color:red">Bingo! This time, we're good to
go.</span></strong></p>
<ul>
<li>The <strong>ONLY</strong> 2 commands we need to use before flashing
are:
<ul>
<li><code>mmc</code></li>
<li><code>usbdmsc</code></li>
</ul></li>
<li>And <strong>openssh-server</strong> has already been installed by
default. Namely: <code>ssh</code> is enabled by default.</li>
</ul>
<h2 id="ssh-into-beaglev-fire-board">3.2 <code>ssh</code> Into <a
target="_blank" rel="noopener" href="https://www.beagleboard.org/boards/beaglev-fire">BeagleV-Fire
Board</a></h2>
<p>The <strong>username</strong> and <strong>password</strong> are
respectively: - username: <code>beagle</code> - password:
<code>temppwd</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ uname -a</span><br><span class="line">Linux BeagleV 6.1.33-linux4microchip+fpga-2023.06-20231121+ #1 SMP Tue Nov 21 13:43:17 UTC 2023 riscv64 riscv64 riscv64 GNU/Linux</span><br><span class="line">➜  ~ uname -r</span><br><span class="line">6.1.33-linux4microchip+fpga-2023.06-20231121+</span><br><span class="line">➜  ~ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Ubuntu</span><br><span class="line">Description:	Ubuntu 23.04</span><br><span class="line">Release:	23.04</span><br><span class="line">Codename:	lunar</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/BeagleV/BeagleV-ssh-neofetch.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/BeagleV/BeagleV-ssh-neofetch.png"
alt="BeagleV SSH and Neofetch" /></a></p>
<h2 id="on-board-fpga">3.3 On-board <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Field-programmable_gate_array">FPGA</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lspci</span><br><span class="line">00:00.0 Unclassified device [0006]: Actel Device 1556</span><br><span class="line">➜  ~ lspci -v -s 00:00.0</span><br><span class="line"></span><br><span class="line">00:00.0 Unclassified device [0006]: Actel Device 1556 (prog-if 04)</span><br><span class="line">	!!! Invalid class 0006 for header type 01</span><br><span class="line">	Flags: fast devsel</span><br><span class="line">	Bus: primary=00, secondary=01, subordinate=01, sec-latency=0</span><br><span class="line">	I/O behind bridge: 1000-1fff [size=4K] [16-bit]</span><br><span class="line">	Memory behind bridge: 18000000-181fffff [size=2M] [32-bit]</span><br><span class="line">	Prefetchable memory behind bridge: 3009000000-30091fffff [size=2M] [32-bit]</span><br><span class="line">	Capabilities: &lt;access denied&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/18/SBCs/ARM/pinephone/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/18/SBCs/ARM/pinephone/" class="post-title-link" itemprop="url">PinePhone</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-18 22:25:28" itemprop="dateCreated datePublished" datetime="2024-10-18T22:25:28-07:00">2024-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-19 01:57:59" itemprop="dateModified" datetime="2024-10-19T01:57:59-07:00">2024-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/ARM/" itemprop="url" rel="index"><span itemprop="name">ARM</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Today, let me have some fun of the open source cellphone <a
target="_blank" rel="noopener" href="https://pine64.org/devices/pinephone/">PinePhone</a>.</p>
<h1 id="key-points">1. Key Points</h1>
<p>Please do strictly follow <a
target="_blank" rel="noopener" href="https://ubports.com/en/blog/ubports-news-1/post/pinephone-and-pinephone-pro-3889">PinePhone
and PinePhone Pro - 20.04 Focal Install and Update</a>.</p>
<ul>
<li><strong><span style="color:red">Flash</span></strong> <a
target="_blank" rel="noopener" href="https://github.com/Tow-Boot/Tow-Boot/">Tow-Boot</a> onto TF
Card</li>
<li><strong><span style="color:red">Hold</span></strong> <a
target="_blank" rel="noopener" href="https://pine64.org/devices/pinephone/">PinePhone</a>'s Power
button and Volume+ until blue led appears</li>
<li><strong><span style="color:red">Flash</span></strong> <a
target="_blank" rel="noopener" href="https://gitlab.com/ook37/pinephone-pro-debos">Pine64 20.04 Ubuntu
Touch Image Builder</a> onto eMMC of <a
target="_blank" rel="noopener" href="https://pine64.org/devices/pinephone/">PinePhone</a></li>
</ul>
<h1 id="demonstration">2. Demonstration</h1>
<h1 id="pinephone-flash-results">2.1. <a
target="_blank" rel="noopener" href="https://pine64.org/devices/pinephone/">PinePhone</a> Flash
Results</h1>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://ubports.com/en/blog/ubports-news-1/post/ubuntu-touch-ota-16-release-3744">Ubuntu
Touch 16.04</a> on eMMC Initially</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://gitlab.com/ook37/pinephone-pro-debos">Pine64 20.04 Ubuntu
Touch Image Builder</a> Flashed on eMMC In the End</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/PinePhone_Ubuntu16.04.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/PinePhone_Ubuntu16.04.jpg"
alt="Pine Phone Ubuntu Touch 16.04" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/PinePhone_Ubuntu20.04.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/PinePhone_Ubuntu20.04.jpg"
alt="Pine Phone Ubuntu Touch 20.04" /></a></td>
</tr>
</tbody>
</table>
<h1 id="tow-boot-process">2.2. <a
target="_blank" rel="noopener" href="https://github.com/Tow-Boot/Tow-Boot/">Tow-Boot</a> Process</h1>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://github.com/Tow-Boot/Tow-Boot/">Tow-Boot</a> Installer
Interface</th>
<th style="text-align: center;">eMMC Boot Erased</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/Tow-Boot.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/Tow-Boot.jpg"
alt="Tow-Boot" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/Tow-Boot_eMMCErased.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/Tow-Boot_eMMCErased.jpg"
alt="Tow-Boot" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Install <a
target="_blank" rel="noopener" href="https://github.com/Tow-Boot/Tow-Boot/">Tow-Boot</a>
Successfully</th>
<th style="text-align: center;">Booting</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/Tow-Boot_InstallationCompleted.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/Tow-Boot_InstallationCompleted.jpg"
alt="Tow-Boot" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/Boot.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Pine64/Boot.jpg"
alt="Boot" /></a></td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/15/SBCs/ARM/NVidia-Jetson-Orin-Nano-8G-Dev-Kit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/15/SBCs/ARM/NVidia-Jetson-Orin-Nano-8G-Dev-Kit/" class="post-title-link" itemprop="url">NVidia Jetson Orin Nano 8G Dev Kit</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-15 00:12:08" itemprop="dateCreated datePublished" datetime="2024-10-15T00:12:08-07:00">2024-10-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-22 11:11:55" itemprop="dateModified" datetime="2024-10-22T11:11:55-07:00">2024-10-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/ARM/" itemprop="url" rel="index"><span itemprop="name">ARM</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Today is <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Thanksgiving_(Canada)">Canada's
Thanksgiving</a>. Let me do something extra on <strong><a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson
Orin</a> Orin</strong>.</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/JetsonOrinNano.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/JetsonOrinNano.jpg"
alt="Jetson Orin Nano" /></a></p>
<h1 id="my-working-environment">1. My Working Environment</h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Ubuntu</span><br><span class="line">Description:	Ubuntu 24.04.1 LTS</span><br><span class="line">Release:	24.04</span><br><span class="line">Codename:	noble</span><br></pre></td></tr></table></figure>
<h1 id="flash-from-scratch">2. Flash From Scratch</h1>
<h2 id="entering-recovery-mode">2.1 Entering Recovery Mode</h2>
<p>In order to enter the <strong>Recovery Mode</strong>, we need to
connect <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson
Orin</a> Nano's <strong><span style="color:red">Pin 9</span></strong>
and <strong><span style="color:red"> Pin 10</span></strong> with a
jumper, and then turn on the power, and connect the <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson
Orin</a> Nano with your desktop, here in my case, <a
target="_blank" rel="noopener" href="https://ubuntu.com/download/desktop">Ubuntu 24.04.1 LTS</a>.</p>
<h2 id="lsusb">2.2 <code>lsusb</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  Resource git:(master) lsusb | grep NVIDIA</span><br><span class="line">Bus 009 Device 016: ID 0955:7523 NVIDIA Corp. APX</span><br></pre></td></tr></table></figure>
<h2 id="install-jetson-software-with-sdk-manager">2.3 <a
target="_blank" rel="noopener" href="https://docs.nvidia.com/sdk-manager/install-with-sdkm-jetson/index.html">Install
Jetson Software with SDK Manager</a></h2>
<p>To use <a target="_blank" rel="noopener" href="https://developer.nvidia.com/sdk-manager">SDK
Manager</a>, we need a <a
target="_blank" rel="noopener" href="https://releases.ubuntu.com/jammy/">Ubuntu 22.04.5 LTS</a> or <a
target="_blank" rel="noopener" href="https://releases.ubuntu.com/focal/">Ubuntu 20.04.6 LTS</a>. In my
case, I tried with <a target="_blank" rel="noopener" href="https://releases.ubuntu.com/focal/">Ubuntu
20.04.6 LTS</a>.</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Step 01</th>
<th style="text-align: center;">Step 02</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/SDKManager_Step01.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/SDKManager_Step01.png"
alt="Step 01" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/SDKManager_Step02.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/SDKManager_Step02.png"
alt="Step 02" /></a></td>
</tr>
</tbody>
</table>
<p><strong><span style="color:red">Get stucked at:</span></strong></p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/SDKManager_Step03_Stucked.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/SDKManager_Step03_Stucked.png"
alt="Step 03" /></a></p>
<h2
id="jetson-orin-nano-tutorial-ssd-install-boot-and-jetpack-setup">2.4 <a
target="_blank" rel="noopener" href="https://jetsonhacks.com/2023/05/30/jetson-orin-nano-tutorial-ssd-install-boot-and-jetpack-setup/">Jetson
Orin Nano Tutorial: SSD Install, Boot, and JetPack Setup</a></h2>
<p><strong><span style="color:red">What can I say?</span></strong></p>
<div style="text-align: center; font-size: 3em;">
<pre><code>😞😢😭</code></pre>
</div>
<p><strong><span style="color:red">My comment: so complicated. I'm too
lazy to follow.</span></strong></p>
<h2 id="dd-is-my-favorite-tool">2.5 <code>dd</code> Is My Favorite
Tool</h2>
<p>For <strong><span style="color:red">some reasons</span></strong>, on
my <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson
Orin</a> Nano, there is <strong><span style="color:red">NO TF card slot,
but a 128G SSD instead</span></strong>.</p>
<div style="text-align: center; font-size: 3em;">
<pre><code>😳😳😳</code></pre>
</div>
<p>Therefore, in my case, <strong><span style="color:red">my BEST
solution</span></strong> is to flash the <strong>SSD</strong>
directly.</p>
<p>Simply download and unzip <a
target="_blank" rel="noopener" href="https://developer.nvidia.com/downloads/embedded/l4t/r36_release_v4.0/jp61-orin-nano-sd-card-image.zip">JetPack
6.1 Orin Nano SD Card Image</a> first. Then, do <code>dd</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  jetson sudo dd bs=1M if=sd-blob.img of=/dev/sdb conv=fsync</span><br><span class="line"></span><br><span class="line">[sudo] password for lvision: </span><br><span class="line">22802+0 records in</span><br><span class="line">22802+0 records out</span><br><span class="line">23909629952 bytes (24 GB, 22 GiB) copied, 730.94 s, 32.7 MB/s</span><br><span class="line">➜  jetson </span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">However, again, it's NOT
working.</span></strong></p>
<div style="text-align: center; font-size: 3em;">
<pre><code>😞😢😭</code></pre>
</div>
<h1
id="my-last-and-final-attempt---jetson-linux-developer-guide-quick-start">3.
My LAST and FINAL Attempt - <a
target="_blank" rel="noopener" href="https://docs.nvidia.com/jetson/archives/r36.4/DeveloperGuide/IN/QuickStart.html">Jetson
Linux Developer Guide Quick Start</a></h1>
<p>I watched the entire video below, and was expecting a good
result.</p>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/q4fGac-nrTI" title="Jetson Orin Nano Tutorial: SSD Install, Boot, and JetPack Setup - Full Guide!" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
</iframe>
<h2 id="before-flash">3.1 Before Flash</h2>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/step2_preparation.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/step2_preparation.png"
alt="Preparation" /></a></p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/step2_extraction.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/step2_extraction.png"
alt="Extraction" /></a></p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/step2_prerequisites.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/step2_prerequisites.png"
alt="Prerequisites" /></a></p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/step2_apply_binaries.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/step2_apply_binaries.png"
alt="Apply Binaries" /></a></p>
<p>Let's try to do <code>sudo ./apply_binaries.sh</code> again:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br></pre></td><td class="code"><pre><span class="line">➜  Linux_for_Tegra sudo ./apply_binaries.sh</span><br><span class="line">Using rootfs directory of: ~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/rootfs</span><br><span class="line">Installing extlinux.conf into /boot/extlinux in target rootfs</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/nv_tegra/nv-apply-debs.sh</span><br><span class="line">Root file system directory is ~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/rootfs</span><br><span class="line">Copying public debian packages to rootfs</span><br><span class="line">Skipping installation of nvidia-igx-oem-config_36.4.0-20240912212859_arm64.deb ....</span><br><span class="line">Skipping installation of nvidia-igx-systemd-reboot-hooks_36.4.0-20240912212859_arm64.deb ....</span><br><span class="line">Skipping installation of nvidia-l4t-dgpu-apt-source_36.4.0-20240912212859_arm64.deb ....</span><br><span class="line">Skipping installation of nvidia-l4t-dgpu-config_36.4.0-20240912212859_arm64.deb ....</span><br><span class="line">Skipping installation of nvidia-l4t-dgpu-tools_36.4.0-20240912212859_arm64.deb ....</span><br><span class="line">Skipping installation of nvidia-l4t-dgpu-x11_36.4.0-20240912212859_arm64.deb ....</span><br><span class="line">Skipping installation of nvidia-l4t-factory-service_36.4.0-20240912212859_arm64.deb ....</span><br><span class="line">Skipping installation of nvidia-igx-bootloader_36.4.0-20240912212859_arm64.deb ....</span><br><span class="line">Skipping installation of nvidia-l4t-jetson-orin-nano-qspi-updater_36.4.0-20240912212859_arm64.deb ....</span><br><span class="line">Start L4T BSP package installation</span><br><span class="line">QEMU binary is not available, looking for QEMU from host system</span><br><span class="line">Found /usr/bin/qemu-aarch64-static</span><br><span class="line">Installing QEMU binary in rootfs</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/rootfs ~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra</span><br><span class="line">Host qemu-aarch64-static version: 8.2.2</span><br><span class="line">Skip ldconfig because this version of QEMU suffers from a known issue:</span><br><span class="line">https://gitlab.com/qemu-project/qemu/-/issues/1913</span><br><span class="line">Installing BSP Debian packages in ~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/rootfs</span><br><span class="line">Selecting previously unselected package nvidia-l4t-core.</span><br><span class="line">(Reading database ... 166870 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../nvidia-l4t-core_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Pre-installing... skip compatibility checking.</span><br><span class="line">Unpacking nvidia-l4t-core (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-core (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package jetson-gpio-common.</span><br><span class="line">(Reading database ... 166929 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../jetson-gpio-common_2.1.7ubuntu1_arm64.deb ...</span><br><span class="line">Unpacking jetson-gpio-common (2.1.7ubuntu1) ...</span><br><span class="line">Selecting previously unselected package python3-jetson-gpio.</span><br><span class="line">Preparing to unpack .../python3-jetson-gpio_2.1.7ubuntu1_arm64.deb ...</span><br><span class="line">Unpacking python3-jetson-gpio (2.1.7ubuntu1) ...</span><br><span class="line">Selecting previously unselected package python-jetson-gpio.</span><br><span class="line">Preparing to unpack .../python-jetson-gpio_2.1.7ubuntu1_arm64.deb ...</span><br><span class="line">Unpacking python-jetson-gpio (2.1.7ubuntu1) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-3d-core.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-3d-core_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-3d-core (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-apt-source.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-apt-source_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-apt-source (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-camera.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-camera_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-camera (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-configs.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-configs_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-configs (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-cuda.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-cuda_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-cuda (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-cuda-utils.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-cuda-utils_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-cuda-utils (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-firmware.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-firmware_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-firmware (36.4.0-20240912212859) ...</span><br><span class="line">Replacing files in old package linux-firmware (20220329.git681281e4-0ubuntu3.31) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-gbm.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-gbm_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-gbm (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-graphics-demos.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-graphics-demos_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-graphics-demos (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-init.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-init_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-init (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-initrd.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-initrd_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-initrd (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-jetson-io.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-jetson-io_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-jetson-io (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-jetsonpower-gui-tools.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-jetsonpower-gui-tools_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-jetsonpower-gui-tools (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-libwayland-client0.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-libwayland-client0_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-libwayland-client0 (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-libwayland-cursor0.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-libwayland-cursor0_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-libwayland-cursor0 (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-libwayland-egl1.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-libwayland-egl1_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-libwayland-egl1 (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-libwayland-server0.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-libwayland-server0_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-libwayland-server0 (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-multimedia.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-multimedia_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-multimedia (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-multimedia-utils.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-multimedia-utils_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-multimedia-utils (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-nvfancontrol.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-nvfancontrol_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-nvfancontrol (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-nvml.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-nvml_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-nvml (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-nvpmodel.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-nvpmodel_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-nvpmodel (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-nvpmodel-gui-tools.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-nvpmodel-gui-tools_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-nvpmodel-gui-tools (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-nvsci.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-nvsci_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-nvsci (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-oem-config.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-oem-config_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-oem-config (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-openwfd.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-openwfd_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-openwfd (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-optee.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-optee_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-optee (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-pva.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-pva_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-pva (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-tools.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-tools_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-tools (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-vulkan-sc.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-vulkan-sc_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-vulkan-sc (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-vulkan-sc-dev.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-vulkan-sc-dev_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-vulkan-sc-dev (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-vulkan-sc-samples.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-vulkan-sc-samples_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-vulkan-sc-samples (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-vulkan-sc-sdk.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-vulkan-sc-sdk_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-vulkan-sc-sdk (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-wayland.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-wayland_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-wayland (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-weston.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-weston_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-weston (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-x11.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-x11_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-x11 (36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-xusb-firmware.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-xusb-firmware_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-xusb-firmware (36.4.0-20240912212859) ...</span><br><span class="line">Replacing files in old package linux-firmware (20220329.git681281e4-0ubuntu3.31) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-display-kernel.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-display-kernel_5.15.148-tegra-36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-display-kernel (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-kernel.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-kernel_5.15.148-tegra-36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-kernel (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-kernel-dtbs.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-kernel-dtbs_5.15.148-tegra-36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-kernel-dtbs (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-kernel-headers.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-kernel-headers_5.15.148-tegra-36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-kernel-headers (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-kernel-oot-headers.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-kernel-oot-headers_5.15.148-tegra-36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-kernel-oot-headers (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-kernel-oot-modules.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-kernel-oot-modules_5.15.148-tegra-36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-kernel-oot-modules (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Selecting previously unselected package nvidia-l4t-bootloader.</span><br><span class="line">Preparing to unpack .../nvidia-l4t-bootloader_36.4.0-20240912212859_arm64.deb ...</span><br><span class="line">Unpacking nvidia-l4t-bootloader (36.4.0-20240912212859) ...</span><br><span class="line">Setting up jetson-gpio-common (2.1.7ubuntu1) ...</span><br><span class="line">Setting up python3-jetson-gpio (2.1.7ubuntu1) ...</span><br><span class="line">Setting up python-jetson-gpio (2.1.7ubuntu1) ...</span><br><span class="line">Setting up nvidia-l4t-apt-source (36.4.0-20240912212859) ...</span><br><span class="line">Pre-installing... skip changing source list.</span><br><span class="line">Setting up nvidia-l4t-configs (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-cuda (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-cuda-utils (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-firmware (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-init (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-jetsonpower-gui-tools (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-libwayland-client0 (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-libwayland-cursor0 (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-libwayland-egl1 (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-libwayland-server0 (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-multimedia-utils (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-nvfancontrol (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-nvml (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-nvpmodel (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-nvpmodel-gui-tools (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-nvsci (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-oem-config (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-openwfd (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-optee (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-pva (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-tools (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-vulkan-sc (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-vulkan-sc-dev (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-vulkan-sc-sdk (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-wayland (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-x11 (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-xusb-firmware (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-kernel (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Using the existing boot entry &#x27;primary&#x27;</span><br><span class="line">Pre-installing kernel package, skip flashing</span><br><span class="line">Setting up nvidia-l4t-kernel-dtbs (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Pre-installing kernel-dtbs package, skip flashing</span><br><span class="line">Setting up nvidia-l4t-kernel-headers (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-kernel-oot-headers (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-kernel-oot-modules (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-bootloader (36.4.0-20240912212859) ...</span><br><span class="line">Pre-installing bootloader package, skip flashing</span><br><span class="line">Setting up nvidia-l4t-3d-core (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-gbm (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-initrd (36.4.0-20240912212859) ...</span><br><span class="line">nv-update-initrd: deferring update (trigger activated)</span><br><span class="line">Pre-installing initrd package, skip flashing</span><br><span class="line">Setting up nvidia-l4t-jetson-io (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-multimedia (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-vulkan-sc-samples (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-weston (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-display-kernel (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-camera (36.4.0-20240912212859) ...</span><br><span class="line">Setting up nvidia-l4t-graphics-demos (36.4.0-20240912212859) ...</span><br><span class="line">Processing triggers for nvidia-l4t-kernel (5.15.148-tegra-36.4.0-20240912212859) ...</span><br><span class="line">Processing triggers for nvidia-l4t-initrd (36.4.0-20240912212859) ...</span><br><span class="line">Include /etc/nv-update-initrd/list.d/binlist</span><br><span class="line">Include /etc/nv-update-initrd/list.d/modules</span><br><span class="line">nv-update-initrd: Updating /boot/initrd from /etc/nv-update-initrd/list.d for kernel version 5.15.148-tegra..</span><br><span class="line">Add /usr/sbin/nvluks-srv-app</span><br><span class="line">Add /lib/modules/5.15.148-tegra/updates/drivers/net/ethernet/nvidia/nvethernet/nvethernet.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/updates/drivers/nvpps/nvpps.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/updates/drivers/net/ethernet/realtek/r8126/r8126.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/updates/drivers/net/ethernet/realtek/r8168/r8168.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/modules*</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/nvme/host/nvme.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/nvme/host/nvme-core.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/thermal/tegra/tegra-bpmp-thermal.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/pwm/pwm-tegra.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/hwmon/pwm-fan.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/pci/controller/dwc/pcie-tegra194.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/phy/tegra/phy-tegra194-p2u.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/usb/gadget/udc/tegra-xudc.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/usb/typec/ucsi/typec_ucsi.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/usb/typec/ucsi/ucsi_ccg.ko</span><br><span class="line">Add /lib/modules/5.15.148-tegra/kernel/drivers/usb/typec/typec.ko</span><br><span class="line">Updating modprobe.d configuration directories for modprobe..</span><br><span class="line">Add config /etc/modprobe.d/alsa-base.conf</span><br><span class="line">Add config /etc/modprobe.d/bcmdhd.conf</span><br><span class="line">Add config /etc/modprobe.d/blacklist-ath_pci.conf</span><br><span class="line">Add config /etc/modprobe.d/blacklist-firewire.conf</span><br><span class="line">Add config /etc/modprobe.d/blacklist-framebuffer.conf</span><br><span class="line">Add config /etc/modprobe.d/blacklist-modem.conf</span><br><span class="line">Add config-link /etc/modprobe.d/blacklist-oss.conf</span><br><span class="line">Add config /usr/lib/linux-sound-base/noOSS.modprobe.conf</span><br><span class="line">Add config /etc/modprobe.d/blacklist-rare-network.conf</span><br><span class="line">Add config /etc/modprobe.d/blacklist.conf</span><br><span class="line">Add config /etc/modprobe.d/denylist-nouveau.conf</span><br><span class="line">Add config /etc/modprobe.d/denylist-oot-modules-audio.conf</span><br><span class="line">Add config /etc/modprobe.d/denylist-ramoops.conf</span><br><span class="line">Add config /etc/modprobe.d/denylist-tegra-safety.conf</span><br><span class="line">Add config /etc/modprobe.d/denylist-tpm-ftpm-tee.conf</span><br><span class="line">Add config /etc/modprobe.d/iwlwifi.conf</span><br><span class="line">Add config /etc/modprobe.d/nvgpu.conf</span><br><span class="line">Add config /etc/modprobe.d/nvidia-display.conf</span><br><span class="line">Add config /etc/modprobe.d/tegra-udrm.conf</span><br><span class="line">Add config /lib/modprobe.d/aliases.conf</span><br><span class="line">Add config /lib/modprobe.d/fbdev-blacklist.conf</span><br><span class="line">Add config /lib/modprobe.d/systemd.conf</span><br><span class="line">Cleaning up the temporary directory for updating the initrd..</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra</span><br><span class="line">Removing QEMU binary from rootfs</span><br><span class="line">Removing stashed Debian packages from rootfs</span><br><span class="line">L4T BSP package installation completed!</span><br><span class="line">Disabling NetworkManager-wait-online.service</span><br><span class="line">Disable the ondemand service by changing the runlevels to &#x27;K&#x27;</span><br><span class="line">Success!</span><br><span class="line">➜  Linux_for_Tegra </span><br></pre></td></tr></table></figure>
<h2 id="danger">3.2 DANGER</h2>
<p>Right before I tried to run the following command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo ./tools/kernel_flash/l4t_initrd_flash.sh --external-device nvme0n1p1 \</span><br><span class="line">  -c tools/kernel_flash/flash_l4t_nvme.xml \</span><br><span class="line">  --showlogs --network usb0 jetson-agx-orin-devkit external</span><br></pre></td></tr></table></figure>
<p>I noticed <strong><span style="color:red">nvme0n1p1
!!!</span></strong> I got another SSD connected to my desktop and listed
as <strong><span style="color:red">nvme0n1p1
ALREADY</span></strong>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  Linux_for_Tegra lsblk</span><br><span class="line">NAME        MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS</span><br><span class="line">......</span><br><span class="line">nvme0n1     259:1    0   3.6T  0 disk  </span><br><span class="line">├─nvme0n1p1 259:2    0  59.6G  0 part  </span><br><span class="line">├─nvme0n1p2 259:3    0  59.6G  0 part  </span><br><span class="line">└─nvme0n1p3 259:4    0   3.5T  0 part</span><br></pre></td></tr></table></figure>
<p>A whole bunch of command lines are to be used, in order to
<strong><span style="color:red">let my OS not load
nvme0n1</span></strong>:</p>
<h3 id="umount">3.2.1 Umount</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /dev/nvme0n1p1</span><br><span class="line">sudo umount /dev/nvme0n1p2</span><br><span class="line">sudo umount /dev/nvme0n1p3</span><br></pre></td></tr></table></figure>
<h3 id="check-nvmes">3.2.2 Check <code>nvme</code>s</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  lspci | grep -i nvme</span><br><span class="line"></span><br><span class="line">01:00.0 Non-Volatile memory controller: Phison Electronics Corporation E16 PCIe4 NVMe Controller (rev 01)</span><br><span class="line">02:00.0 Non-Volatile memory controller: Phison Electronics Corporation E16 PCIe4 NVMe Controller (rev 01)</span><br></pre></td></tr></table></figure>
<h3 id="find-the-correct-nvmes-pci">3.2.3 Find the Correct
<code>nvme</code>'s PCI</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  sudo udevadm info --query=all --name=/dev/nvme0n1 | grep ID_PATH</span><br><span class="line"></span><br><span class="line">E: ID_PATH=pci-0000:01:00.0-nvme-1</span><br><span class="line">E: ID_PATH_TAG=pci-0000_01_00_0-nvme-1</span><br></pre></td></tr></table></figure>
<h3 id="unbind-the-corresponding-nvme">3.2.4 Unbind the Corresponding
<code>nvme</code></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  Linux_for_Tegra echo &quot;0000:01:00.0&quot; | sudo tee /sys/bus/pci/drivers/nvme/unbind</span><br><span class="line"></span><br><span class="line">0000:01:00.0</span><br></pre></td></tr></table></figure>
<h2 id="flash">3.3 Flash</h2>
<p>Now, ALL ready. Let's flash.</p>
<h3 id="package-preparations">3.3.1 Package Preparations</h3>
<p>You may still have to install a couple of more packages on your host
<a target="_blank" rel="noopener" href="https://ubuntu.com/download/desktop">Ubuntu 24.04.1
LTS</a>:</p>
<ul>
<li><code>sshpass</code></li>
<li><code>abootimg</code></li>
<li><code>nfs-kernel-server</code></li>
</ul>
<h3 id="run-l4t_initrd_flash.sh">3.3.2 Run
<code>l4t_initrd_flash.sh</code></h3>
<p>However, in the end, in my case, on my host <a
target="_blank" rel="noopener" href="https://ubuntu.com/download/desktop">Ubuntu 24.04.1 LTS</a>, I
got:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br></pre></td><td class="code"><pre><span class="line">➜  Linux_for_Tegra sudo ./tools/kernel_flash/l4t_initrd_flash.sh --external-device nvme0n1p1 \</span><br><span class="line">  -c tools/kernel_flash/flash_l4t_nvme.xml \</span><br><span class="line">  --showlogs --network usb0 jetson-agx-orin-devkit external</span><br><span class="line">Please install the Secureboot package to use initrd flash for fused board</span><br><span class="line"># Entry added by NVIDIA initrd flash tool</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/tools/kernel_flash/tmp 127.0.0.1(rw,nohide,insecure,no_subtree_check,async,no_root_squash)</span><br><span class="line">rpcbind: another rpcbind is already running. Aborting</span><br><span class="line">Export list for localhost:</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/tools/kernel_flash/tmp 127.0.0.1</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/tools/kernel_flash/l4t_initrd_flash_internal.sh --no-flash --external-device nvme0n1p1 -c tools/kernel_flash/flash_l4t_nvme.xml --showlogs --network usb0 jetson-agx-orin-devkit external</span><br><span class="line">************************************</span><br><span class="line">*                                  *</span><br><span class="line">*  Step 1: Generate flash packages *</span><br><span class="line">*                                  *</span><br><span class="line">************************************</span><br><span class="line">Create folder to store images to flash</span><br><span class="line">Generate image for internal storage devices</span><br><span class="line">Generate images to be flashed</span><br><span class="line">ADDITIONAL_DTB_OVERLAY=&quot;&quot;  ~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/flash.sh --no-flash --sign  jetson-agx-orin-devkit external</span><br><span class="line"></span><br><span class="line">###############################################################################</span><br><span class="line"># L4T BSP Information:</span><br><span class="line"># R36 , REVISION: 4.0</span><br><span class="line"># User release: 0.0</span><br><span class="line">###############################################################################</span><br><span class="line">ECID is 0x80012344705DF1C06C000000010281C0</span><br><span class="line">copying device_config(~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/generic/BCT/tegra234-mb1-bct-device-p3701-0000.dts)... done.</span><br><span class="line">copying misc_config(~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/generic/BCT/tegra234-mb1-bct-misc-p3701-0000.dts)... done.</span><br><span class="line">copying emc_fuse_dev_params(~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/generic/BCT/tegra234-br-bct-diag-boot.dts)... done.</span><br><span class="line">Existing emcfuse(~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/fuse_t234.xml) reused.</span><br><span class="line">./tegraflash.py --chip &quot;0x23&quot; --applet &quot;~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/mb1_t234_prod.bin&quot; --skipuid --cfg readinfo_t234_min_prod.xml --dev_params tegra234-br-bct-diag-boot.dts --device_config tegra234-mb1-bct-device-p3701-0000.dts --misc_config tegra234-mb1-bct-misc-p3701-0000.dts --bins &quot;mb2_applet applet_t234.bin&quot; --cmd &quot;readfuses fuse_t234.bin fuse_t234.xml; dump eeprom cvm cvm.bin; dump try_custinfo custinfo_out.bin; reboot recovery&quot; </span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/tegraflash_internal.py:1273: SyntaxWarning: invalid escape sequence &#x27;\.&#x27;</span><br><span class="line">  patt = re.compile(&quot;.*(mbr|gpt).*\.bin&quot;)</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/tegraflash_internal.py:1389: SyntaxWarning: invalid escape sequence &#x27;\.&#x27;</span><br><span class="line">  patt = re.compile(&quot;.*(mbr|gpt).*\.bin&quot;)</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/tegraflash_internal.py:4589: SyntaxWarning: invalid escape sequence &#x27;\s&#x27;</span><br><span class="line">  m = re.search(&#x27;bpmp_fw_dtb[\s]+([\w._-]+)&#x27;, values[&#x27;--bins&#x27;])</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/tegrasign_v3_internal.py:1124: SyntaxWarning: invalid escape sequence &#x27;\d&#x27;</span><br><span class="line">  m = re.search(&#x27;Key size is (\d+)&#x27;, ret_str)</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/tegrasign_v3_internal.py:1169: SyntaxWarning: invalid escape sequence &#x27;\d&#x27;</span><br><span class="line">  m = re.search(&#x27;Key size is (\d+)&#x27;, ret_str)</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/tegrasign_v3_internal.py:1527: SyntaxWarning: invalid escape sequence &#x27;\d&#x27;</span><br><span class="line">  re_string = &#x27;kdf_args_&#x27; + temp_stem + &#x27;(\d).yaml&#x27;</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/tegraflash_impl_t234.py:1533: SyntaxWarning: invalid escape sequence &#x27;\s&#x27;</span><br><span class="line">  m = re.search(&#x27;bpmp_fw_dtb[\s]+([\w._-]+)&#x27;, values[&#x27;--bins&#x27;])</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/tegraflash_impl_t234.py:3025: SyntaxWarning: invalid escape sequence &#x27;\.&#x27;</span><br><span class="line">  patt = re.compile(&quot;.*(mbr|gpt).*\.bin&quot;)</span><br><span class="line">~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/tegraflash_impl_t234.py:3087: SyntaxWarning: invalid escape sequence &#x27;\/&#x27;</span><br><span class="line">  info_print(&quot;Copying enc\/signed file in &quot; + output_dir)</span><br><span class="line">Welcome to Tegra Flash</span><br><span class="line">version 1.0.0</span><br><span class="line">Type ? or help for help and q or quit to exit</span><br><span class="line">Use ! to execute system commands</span><br><span class="line"> </span><br><span class="line">[   0.0420 ] Reading fuses</span><br><span class="line">[   0.0426 ] tegrarcm_v2 --chip 0x23 0 --ismb2applet</span><br><span class="line">[   0.0430 ] File rcm_state open failed</span><br><span class="line">[   0.0434 ] ERROR: failed to read rcm_state</span><br><span class="line">[   0.0435 ] </span><br><span class="line">[   0.0503 ] tegrasign_v3.py --key None --getmode mode.txt</span><br><span class="line">[   0.0505 ] Assuming zero filled SBK key</span><br><span class="line">[   0.0438 ] Pre-processing config: tegra234-mb1-bct-device-p3701-0000.dts</span><br><span class="line">[   0.0543 ] Pre-processing config: tegra234-mb1-bct-misc-p3701-0000.dts</span><br><span class="line">[   0.0659 ] Parsing partition layout</span><br><span class="line">[   0.0663 ] tegraparser_v2 --pt readinfo_t234_min_prod.xml.tmp</span><br><span class="line">[   0.0674 ] Kernel DTB used: None</span><br><span class="line">[   0.0674 ] WARNING: dce base dtb is not provided</span><br><span class="line"></span><br><span class="line">[   0.0674 ] Parsing partition layout</span><br><span class="line">[   0.0677 ] tegraparser_v2 --pt readinfo_t234_min_prod.xml.tmp</span><br><span class="line">[   0.0682 ] Creating list of images to be signed</span><br><span class="line">[   0.0685 ] tegrahost_v2 --chip 0x23 0 --partitionlayout readinfo_t234_min_prod.xml.bin --list images_list.xml zerosbk</span><br><span class="line">[   0.0689 ] MB1: Nvheader already present is mb1_t234_prod_aligned.bin</span><br><span class="line">[   0.0706 ] Header already present for mb1_t234_prod_aligned_sigheader.bin</span><br><span class="line">[   0.0710 ] MB1: Nvheader already present is mb1_t234_prod_aligned.bin</span><br><span class="line">[   0.0761 ] Header already present for mb1_t234_prod_aligned_sigheader.bin</span><br><span class="line">[   0.0766 ] MB1: Nvheader already present is psc_bl1_t234_prod_aligned.bin</span><br><span class="line">[   0.0813 ] Header already present for psc_bl1_t234_prod_aligned_sigheader.bin</span><br><span class="line">[   0.0815 ] adding BCH for mb2_t234_aligned.bin</span><br><span class="line">[   0.0845 ] MB1: Nvheader already present is psc_bl1_t234_prod_aligned.bin</span><br><span class="line">[   0.0971 ] Header already present for psc_bl1_t234_prod_aligned_sigheader.bin</span><br><span class="line">[   0.0973 ] adding BCH for mb2_t234_aligned.bin</span><br><span class="line">[   0.1129 ] Filling MB1 storage info</span><br><span class="line">[   0.1129 ] Parsing dev params for multi chains</span><br><span class="line">[   0.1213 ] Generating br-bct</span><br><span class="line">[   0.1218 ] Updating dev and MSS params in BR BCT</span><br><span class="line">[   0.1218 ] tegrabct_v2 --dev_param tegra234-br-bct-diag-boot_cpp.dtb --brbct br_bct.cfg --chip 0x23 0</span><br><span class="line">[   0.1226 ] Updating bl info</span><br><span class="line">[   0.1230 ] tegrabct_v2 --brbct br_bct_BR.bct --chip 0x23 0 --updateblinfo readinfo_t234_min_prod.xml.bin</span><br><span class="line">[   0.1235 ] WARNING: boot chain is not completed. set to 0</span><br><span class="line">[   0.1252 ] Generating signatures</span><br><span class="line">[   0.1320 ] tegrasign_v3.py --key None --list images_list.xml --pubkeyhash pub_key.key --sha sha512</span><br><span class="line">[   0.1322 ] Assuming zero filled SBK key</span><br><span class="line">[   0.1431 ] Warning: pub_key.key is not found</span><br><span class="line">[   0.1365 ] Parsing dev params for multi chains</span><br><span class="line">[   0.1365 ] Generating br-bct</span><br><span class="line">[   0.1369 ] Updating dev and MSS params in BR BCT</span><br><span class="line">[   0.1369 ] tegrabct_v2 --dev_param tegra234-br-bct-diag-boot_cpp.dtb --brbct br_bct.cfg --chip 0x23 0</span><br><span class="line">[   0.1377 ] Updating bl info</span><br><span class="line">[   0.1382 ] tegrabct_v2 --brbct br_bct_BR.bct --chip 0x23 0 --updateblinfo readinfo_t234_min_prod.xml.bin --updatesig images_list_signed.xml</span><br><span class="line">[   0.1386 ] WARNING: boot chain is not completed. set to 0</span><br><span class="line">[   0.1396 ] Generating SHA2 Hash</span><br><span class="line">[   0.1473 ] Sha saved in br_bct_BR.sha</span><br><span class="line">[   0.1405 ] Get Signed section of bct</span><br><span class="line">[   0.1408 ] tegrabct_v2 --brbct br_bct_BR.bct --chip 0x23 0 --listbct bct_list.xml</span><br><span class="line">[   0.1414 ] Signing BCT</span><br><span class="line">[   0.1483 ] tegrasign_v3.py --key None --list bct_list.xml --pubkeyhash pub_key.key --sha sha512</span><br><span class="line">[   0.1484 ] Assuming zero filled SBK key</span><br><span class="line">[   0.1502 ] Sha saved in br_bct_BR.sha</span><br><span class="line">[   0.1503 ] Warning: pub_key.key is not found</span><br><span class="line">[   0.1435 ] Updating BCT with signature</span><br><span class="line">[   0.1439 ] tegrabct_v2 --brbct br_bct_BR.bct --chip 0x23 0 --updatesig bct_list_signed.xml</span><br><span class="line">[   0.1443 ] Offset :4608 Len :3584</span><br><span class="line">[   0.1451 ] Generating SHA2 Hash</span><br><span class="line">[   0.1520 ] tegrasign_v3.py --key None --list bct_list.xml --sha sha512</span><br><span class="line">[   0.1521 ] Assuming zero filled SBK key</span><br><span class="line">[   0.1521 ] Assuming zero filled SBK key</span><br><span class="line">[   0.1545 ] Sha saved in br_bct_BR.sha</span><br><span class="line">[   0.1480 ] Updating BCT with SHA2 Hash</span><br><span class="line">[   0.1483 ] tegrabct_v2 --brbct br_bct_BR.bct --chip 0x23 0 --updatesha bct_list_signed.xml</span><br><span class="line">[   0.1487 ] Offset :4608 Len :3584</span><br><span class="line">[   0.1491 ] Offset :68 Len :8124</span><br><span class="line">[   0.1493 ] Generating coldboot mb1-bct</span><br><span class="line">[   0.1498 ] tegrabct_v2 --chip 0x23 0 --mb1bct mb1_cold_boot_bct.cfg --misc tegra234-mb1-bct-misc-p3701-0000_cpp.dtb --device tegra234-mb1-bct-device-p3701-0000_cpp.dtb</span><br><span class="line">[   0.1502 ] MB1-BCT version: 0.13</span><br><span class="line"></span><br><span class="line">[   0.1514 ] Parsing config file :tegra234-mb1-bct-device-p3701-0000_cpp.dtb </span><br><span class="line">[   0.1516 ] Added Platform Config 9 data with size :- 100</span><br><span class="line">[   0.1516 ] </span><br><span class="line">[   0.1517 ] Updating mb1-bct with firmware information</span><br><span class="line">[   0.1522 ] tegrabct_v2 --chip 0x23 0 --mb1bct mb1_cold_boot_bct_MB1.bct --updatefwinfo readinfo_t234_min_prod.xml.bin</span><br><span class="line">[   0.1536 ] tegrahost_v2 --chip 0x23 0 --align mb1_cold_boot_bct_MB1_aligned.bct</span><br><span class="line">[   0.1541 ] Generating SHA2 Hash for mb1bct</span><br><span class="line">[   0.1620 ] Sha saved in mb1_cold_boot_bct_MB1_aligned.sha</span><br><span class="line">[   0.1632 ] Sha saved in mb1_cold_boot_bct_MB1.sha</span><br><span class="line">[   0.1569 ] tegrahost_v2 --chip 0x23 0 --magicid MBCT --appendsigheader mb1_cold_boot_bct_MB1_aligned.bct zerosbk</span><br><span class="line">[   0.1573 ] adding BCH for mb1_cold_boot_bct_MB1_aligned.bct</span><br><span class="line">[   0.1651 ] tegrasign_v3.py --key None --list mb1_cold_boot_bct_MB1_aligned_sigheader.bct_list.xml --pubkeyhash pub_key.key --sha sha512</span><br><span class="line">[   0.1652 ] Assuming zero filled SBK key</span><br><span class="line">[   0.1669 ] Warning: pub_key.key is not found</span><br><span class="line">[   0.1607 ] tegrahost_v2 --chip 0x23 0 --updatesigheader mb1_cold_boot_bct_MB1_aligned_sigheader.bct.encrypt mb1_cold_boot_bct_MB1_aligned_sigheader.bct.hash zerosbk</span><br><span class="line">[   0.1617 ] Generating recovery mb1-bct</span><br><span class="line">[   0.1623 ] tegrabct_v2 --chip 0x23 0 --mb1bct mb1_bct.cfg --misc tegra234-mb1-bct-misc-p3701-0000_cpp.dtb --device tegra234-mb1-bct-device-p3701-0000_cpp.dtb</span><br><span class="line">[   0.1627 ] MB1-BCT version: 0.13</span><br><span class="line"></span><br><span class="line">[   0.1639 ] Parsing config file :tegra234-mb1-bct-device-p3701-0000_cpp.dtb </span><br><span class="line">[   0.1641 ] Added Platform Config 9 data with size :- 100</span><br><span class="line">[   0.1641 ] </span><br><span class="line">[   0.1641 ] Updating mb1-bct with firmware information</span><br><span class="line">[   0.1646 ] tegrabct_v2 --chip 0x23 0 --mb1bct mb1_bct_MB1.bct --recov --updatefwinfo readinfo_t234_min_prod.xml.bin</span><br><span class="line">[   0.1660 ] tegrahost_v2 --chip 0x23 0 --align mb1_bct_MB1_aligned.bct</span><br><span class="line">[   0.1665 ] Generating SHA2 Hash for mb1bct</span><br><span class="line">[   0.1745 ] Sha saved in mb1_bct_MB1_aligned.sha</span><br><span class="line">[   0.1756 ] Sha saved in mb1_bct_MB1.sha</span><br><span class="line">[   0.1693 ] tegrahost_v2 --chip 0x23 0 --magicid MBCT --appendsigheader mb1_bct_MB1_aligned.bct zerosbk</span><br><span class="line">[   0.1697 ] adding BCH for mb1_bct_MB1_aligned.bct</span><br><span class="line">[   0.1774 ] tegrasign_v3.py --key None --list mb1_bct_MB1_aligned_sigheader.bct_list.xml --pubkeyhash pub_key.key --sha sha512</span><br><span class="line">[   0.1775 ] Assuming zero filled SBK key</span><br><span class="line">[   0.1791 ] Warning: pub_key.key is not found</span><br><span class="line">[   0.1728 ] tegrahost_v2 --chip 0x23 0 --updatesigheader mb1_bct_MB1_aligned_sigheader.bct.encrypt mb1_bct_MB1_aligned_sigheader.bct.hash zerosbk</span><br><span class="line">[   0.1744 ] Info: Skip generating mem_bct because sdram_config is not defined</span><br><span class="line">[   0.1744 ] Info: Skip generating mem_bct because sdram_config is not defined</span><br><span class="line">[   0.1744 ] Copying signatures</span><br><span class="line">[   0.1748 ] tegrahost_v2 --chip 0x23 0 --partitionlayout readinfo_t234_min_prod.xml.bin --updatesig images_list_signed.xml</span><br><span class="line">[   0.1802 ] mb1_t234_prod_aligned_sigheader.bin.encrypt filename is from images_list</span><br><span class="line">[   0.1804 ] psc_bl1_t234_prod_aligned_sigheader.bin.encrypt filename is from images_list</span><br><span class="line">[   0.1804 ] Boot Rom communication</span><br><span class="line">[   0.1808 ] tegrarcm_v2 --new_session --chip 0x23 0 --uid --download bct_br br_bct_BR.bct --download mb1 mb1_t234_prod_aligned_sigheader.bin.encrypt --download psc_bl1 psc_bl1_t234_prod_aligned_sigheader.bin.encrypt --download bct_mb1 mb1_bct_MB1_sigheader.bct.encrypt</span><br><span class="line">[   0.1813 ] BR_CID: 0x80012344705DF1C06C000000010281C0</span><br><span class="line">[   0.2486 ] Sending bct_br</span><br><span class="line">[   0.3149 ] Sending mb1</span><br><span class="line">[   0.3156 ] Sending psc_bl1</span><br><span class="line">[   0.3257 ] Sending bct_mb1</span><br><span class="line">[   0.3314 ] Boot Rom communication completed</span><br><span class="line">[   0.3327 ] tegrahost_v2 --chip 0x23 0 --align applet_t234_aligned.bin</span><br><span class="line">[   0.3340 ] tegrahost_v2 --chip 0x23 0 --magicid MB2A --appendsigheader applet_t234_aligned.bin zerosbk</span><br><span class="line">[   0.3345 ] adding BCH for applet_t234_aligned.bin</span><br><span class="line">[   0.3511 ] tegrasign_v3.py --key None --list applet_t234_aligned_sigheader.bin_list.xml --pubkeyhash pub_key.key --sha sha512</span><br><span class="line">[   0.3512 ] Assuming zero filled SBK key</span><br><span class="line">[   0.3536 ] Warning: pub_key.key is not found</span><br><span class="line">[   0.3474 ] tegrahost_v2 --chip 0x23 0 --updatesigheader applet_t234_aligned_sigheader.bin.encrypt applet_t234_aligned_sigheader.bin.hash zerosbk</span><br><span class="line">[   0.3503 ] Sending mb2_applet...</span><br><span class="line"></span><br><span class="line">[   0.3507 ] tegrarcm_v2 --chip 0x23 0 --pollbl --download applet applet_t234_sigheader.bin.encrypt</span><br><span class="line">[   0.3511 ] BL: version 1.4.0.4-t234-54845784-e89ea9bc last_boot_error: 0</span><br><span class="line">[   0.5560 ] Sending applet</span><br><span class="line">[   0.6566 ] completed</span><br><span class="line">[   0.6573 ] tegrarcm_v2 --chip 0x23 0 --ismb2applet</span><br><span class="line">[   0.6578 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   0.8424 ] tegrarcm_v2 --chip 0x23 0 --ismb2applet</span><br><span class="line">[   0.8429 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   0.9119 ] Parsing fuse info as per xml file</span><br><span class="line">[   0.9125 ] tegraparser_v2 --chip 0x23 0 --get_fuse_names fuse_t234.xml read_fuse_names.txt</span><br><span class="line">[   0.9132 ] MagicId=0x45535546 version=0x2</span><br><span class="line">[   0.9139 ] trying to read fuse with MB2 Applet</span><br><span class="line">[   0.9146 ] tegraparser_v2 --chip 0x23 0 --read_fusetype PublicKeyHash read_fuse.bin</span><br><span class="line">[   0.9161 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   0.9166 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   1.0509 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   1.0565 ] Fuse read successful</span><br><span class="line">[   1.0582 ] tegraparser_v2 --chip 0x23 0 --read_fusetype PkcPubkeyHash1 read_fuse.bin</span><br><span class="line">[   1.0599 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   1.0604 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   1.1949 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   1.2005 ] Fuse read successful</span><br><span class="line">[   1.2020 ] tegraparser_v2 --chip 0x23 0 --read_fusetype PkcPubkeyHash2 read_fuse.bin</span><br><span class="line">[   1.2034 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   1.2039 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   1.3389 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   1.3446 ] Fuse read successful</span><br><span class="line">[   1.3461 ] tegraparser_v2 --chip 0x23 0 --read_fusetype BootSecurityInfo read_fuse.bin</span><br><span class="line">[   1.3475 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   1.3482 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   1.4829 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   1.4886 ] Fuse read successful</span><br><span class="line">[   1.4901 ] tegraparser_v2 --chip 0x23 0 --read_fusetype ArmJtagDisable read_fuse.bin</span><br><span class="line">[   1.4915 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   1.4920 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   1.9590 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   1.9645 ] Fuse read successful</span><br><span class="line">[   1.9662 ] tegraparser_v2 --chip 0x23 0 --read_fusetype SecurityMode read_fuse.bin</span><br><span class="line">[   1.9678 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   1.9683 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   2.1029 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   2.1085 ] Fuse read successful</span><br><span class="line">[   2.1099 ] tegraparser_v2 --chip 0x23 0 --read_fusetype SwReserved read_fuse.bin</span><br><span class="line">[   2.1114 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   2.1119 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   2.2458 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   2.2515 ] Fuse read successful</span><br><span class="line">[   2.2530 ] tegraparser_v2 --chip 0x23 0 --read_fusetype DebugAuthentication read_fuse.bin</span><br><span class="line">[   2.2546 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   2.2550 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   2.3889 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   2.3945 ] Fuse read successful</span><br><span class="line">[   2.3962 ] tegraparser_v2 --chip 0x23 0 --read_fusetype OdmInfo read_fuse.bin</span><br><span class="line">[   2.3977 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   2.3981 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   2.5329 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   2.5386 ] Fuse read successful</span><br><span class="line">[   2.5399 ] tegraparser_v2 --chip 0x23 0 --read_fusetype OdmId read_fuse.bin</span><br><span class="line">[   2.5414 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   2.5418 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   2.6759 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   2.6815 ] Fuse read successful</span><br><span class="line">[   2.6831 ] tegraparser_v2 --chip 0x23 0 --read_fusetype OdmLock read_fuse.bin</span><br><span class="line">[   2.6845 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   2.6850 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   2.8199 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   2.8254 ] Fuse read successful</span><br><span class="line">[   2.8270 ] tegraparser_v2 --chip 0x23 0 --read_fusetype ReservedOdm0 read_fuse.bin</span><br><span class="line">[   2.8284 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   2.8289 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   2.9628 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   2.9688 ] Fuse read successful</span><br><span class="line">[   2.9696 ] tegraparser_v2 --chip 0x23 0 --read_fusetype ReservedOdm1 read_fuse.bin</span><br><span class="line">[   2.9710 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   2.9715 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   3.1059 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   3.1116 ] Fuse read successful</span><br><span class="line">[   3.1129 ] tegraparser_v2 --chip 0x23 0 --read_fusetype ReservedOdm2 read_fuse.bin</span><br><span class="line">[   3.1144 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   3.1149 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   3.2489 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   3.2545 ] Fuse read successful</span><br><span class="line">[   3.2558 ] tegraparser_v2 --chip 0x23 0 --read_fusetype ReservedOdm3 read_fuse.bin</span><br><span class="line">[   3.2572 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   3.2577 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   3.3920 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   3.3975 ] Fuse read successful</span><br><span class="line">[   3.3990 ] tegraparser_v2 --chip 0x23 0 --read_fusetype ReservedOdm4 read_fuse.bin</span><br><span class="line">[   3.4004 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   3.4012 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   3.5359 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   3.5415 ] Fuse read successful</span><br><span class="line">[   3.5430 ] tegraparser_v2 --chip 0x23 0 --read_fusetype ReservedOdm5 read_fuse.bin</span><br><span class="line">[   3.5444 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   3.5452 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   3.6799 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   3.6855 ] Fuse read successful</span><br><span class="line">[   3.6868 ] tegraparser_v2 --chip 0x23 0 --read_fusetype ReservedOdm6 read_fuse.bin</span><br><span class="line">[   3.6882 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   3.6889 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   3.8229 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   3.8285 ] Fuse read successful</span><br><span class="line">[   3.8301 ] tegraparser_v2 --chip 0x23 0 --read_fusetype ReservedOdm7 read_fuse.bin</span><br><span class="line">[   3.8318 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   3.8323 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   3.9669 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   3.9725 ] Fuse read successful</span><br><span class="line">[   3.9739 ] tegraparser_v2 --chip 0x23 0 --read_fusetype Sku read_fuse.bin</span><br><span class="line">[   3.9753 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   3.9758 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.1101 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   4.1157 ] Fuse read successful</span><br><span class="line">[   4.1171 ] tegraparser_v2 --chip 0x23 0 --read_fusetype Uid read_fuse.bin</span><br><span class="line">[   4.1186 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   4.1190 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.2539 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   4.2595 ] Fuse read successful</span><br><span class="line">[   4.2608 ] tegraparser_v2 --chip 0x23 0 --read_fusetype OptEmcDisable read_fuse.bin</span><br><span class="line">[   4.2623 ] tegrarcm_v2 --oem readfuses __fuse_read_scatter.bin read_fuse.bin</span><br><span class="line">[   4.2628 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.3969 ] Saved read fuses in file __fuse_read_scatter.bin</span><br><span class="line">[   4.4025 ] Fuse read successful</span><br><span class="line">[   4.4040 ] tegrarcm_v2 --chip 0x23 0 --ismb2applet</span><br><span class="line">[   4.4045 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.4738 ] tegrarcm_v2 --chip 0x23 0 --ismb2applet</span><br><span class="line">[   4.4743 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.5435 ] Retrieving board information</span><br><span class="line">[   4.5441 ] tegrarcm_v2 --chip 0x23 0 --oem platformdetails chip chip_info.bin</span><br><span class="line">[   4.5449 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.6138 ] Saved platform info in chip_info.bin</span><br><span class="line">[   4.6191 ] Chip minor revision: 1</span><br><span class="line">[   4.6192 ] Bootrom revision: 0x7</span><br><span class="line">[   4.6193 ] Ram code: 0x2</span><br><span class="line">[   4.6193 ] Chip sku: 0xd5</span><br><span class="line">[   4.6194 ] Chip Sample: prod</span><br><span class="line">[   4.6202 ] Retrieving EEPROM data</span><br><span class="line">[   4.6202 ] tegrarcm_v2 --oem platformdetails eeprom cvm ~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/cvm.bin --chip 0x23 0</span><br><span class="line">[   4.6208 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.6887 ] Saved platform info in ~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/cvm.bin</span><br><span class="line">[   4.7215 ] tegrarcm_v2 --chip 0x23 0 --ismb2applet</span><br><span class="line">[   4.7220 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.7913 ] tegrarcm_v2 --chip 0x23 0 --ismb2applet</span><br><span class="line">[   4.7918 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.8600 ] Dumping customer Info</span><br><span class="line">[   4.8606 ] tegrarcm_v2 --chip 0x23 0 --oem dump bct tmp.bct</span><br><span class="line">[   4.8612 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   4.9297 ] Saved bct in tmp.bct</span><br><span class="line">[   4.9502 ] tegrabct_v2 --brbct tmp.bct --chip 0x23 0 --custinfo ~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/custinfo_out.bin</span><br><span class="line">[   4.9507 ] Cust[   4.9512 ] omer data saved in ~/Desktop/Jetson_Linux_36.4/Linux_for_Tegra/bootloader/custinfo_out.bin successfully</span><br><span class="line">[   4.9513 ] Rebooting to recovery mode</span><br><span class="line">[   4.9519 ] tegrarcm_v2 --chip 0x23 0 --ismb2</span><br><span class="line">[   5.0212 ] tegrarcm_v2 --chip 0x23 0 --ismb2applet</span><br><span class="line">[   5.0218 ] MB2 Applet version 01.00.0000</span><br><span class="line">[   5.0897 ] Booting to recovery mode</span><br><span class="line">[   5.0903 ] tegrarcm_v2 --chip 0x23 0 --reboot recovery</span><br><span class="line">[   5.0908 ] MB2 Applet version 01.00.0000</span><br><span class="line">Board ID(3767) version(300) sku(0003) revision(S.1)</span><br><span class="line">Preset RAMCODE is 2</span><br><span class="line">Chip SKU(00:00:00:D5) ramcode(2) fuselevel(fuselevel_production) board_FAB(300)</span><br><span class="line">Error: Unrecognized module SKU 0003</span><br><span class="line">Error: failed to generate images</span><br><span class="line">Cleaning up...</span><br><span class="line">➜  Linux_for_Tegra </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">Extremely sad
now:</span></strong></p>
<div style="text-align: center; font-size: 3em;">
<pre><code>😭😭😭😭😭😭</code></pre>
</div>
<p><strong><span style="color:red"><a
target="_blank" rel="noopener" href="https://youtu.be/W-LHqZc-UR8">I Believe</a>, there is ALWAYS a way
out. Solution is finally found at <a
target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/jetpack-6-1-release-announcement/308185">JetPack
6.1 Release Announcement</a></span></strong>. It's simply because I used
a wrong command to flash. Try again:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./tools/kernel_flash/l4t_initrd_flash.sh --external-device nvme0n1p1 -c tools/kernel_flash/flash_l4t_t234_nvme.xml -p &#x27;-c bootloader/generic/cfg/flash_t234_qspi.xml&#x27; --showlogs --network usb0 jetson-orin-nano-devkit internal</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">This time,
succeed.</span></strong></p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/l4t_initrd_flash.sh.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/l4t_initrd_flash.sh.png"
alt="l4t_initrd_flash succeed" /></a></p>
<h1 id="demonstration-of-jetson-orin-nano">4. Demonstration of <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson
Orin</a> Nano</h1>
<h2 id="initial-login-without-ssh">4.1 Initial Login Without
<code>ssh</code></h2>
<p><strong><span style="color:red">You need the DP - <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/DisplayPort">DisplayPort</a></span></strong>.
I got to purchase this new calbe <a
target="_blank" rel="noopener" href="https://www.canadacomputers.com/product_info.php?cPath=5_3930_4358&amp;item_id=108114">iCAN
28AWG 1080p DisplayPort to HDMI Cable Male to Male Gold-plated White
Color - 3 ft.</a>, in order to successfully display for <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson
Orin</a> Nano's first-time running.</p>
<h2 id="ssh-into-jetson-orin-nano-after-ssh-is-enabled">4.2
<code>ssh</code> Into <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson
Orin</a> Nano After <code>ssh</code> Is Enabled</h2>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/ssh_neofetch.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/JetPack/ssh_neofetch.png"
alt="ssh into Jetson Orin Nano and neofetch" /></a></p>
<h2 id="jtop">4.3 <code>jtop</code></h2>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/jtop.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/jtop.png"
alt="jtop" /></a></p>
<h2 id="jetson_clocks">4.4 <code>jetson_clocks</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo jetson_clocks --show</span><br><span class="line">SOC family:tegra234  Machine:NVIDIA Jetson Orin NX Engineering Reference Developer Kit</span><br><span class="line">Online CPUs: 0-5</span><br><span class="line">cpu0:  Online=1 Governor=schedutil MinFreq=729600 MaxFreq=1510400 CurrentFreq=729600 IdleStates: WFI=1 c7=1 </span><br><span class="line">cpu1:  Online=1 Governor=schedutil MinFreq=729600 MaxFreq=1510400 CurrentFreq=1036800 IdleStates: WFI=1 c7=1 </span><br><span class="line">cpu2:  Online=1 Governor=schedutil MinFreq=729600 MaxFreq=1510400 CurrentFreq=1036800 IdleStates: WFI=1 c7=1 </span><br><span class="line">cpu3:  Online=1 Governor=schedutil MinFreq=729600 MaxFreq=1510400 CurrentFreq=729600 IdleStates: WFI=1 c7=1 </span><br><span class="line">cpu4:  Online=1 Governor=schedutil MinFreq=729600 MaxFreq=1510400 CurrentFreq=729600 IdleStates: WFI=1 c7=1 </span><br><span class="line">cpu5:  Online=1 Governor=schedutil MinFreq=729600 MaxFreq=1510400 CurrentFreq=729600 IdleStates: WFI=1 c7=1 </span><br><span class="line">GPU MinFreq=306000000 MaxFreq=624750000 CurrentFreq=306000000</span><br><span class="line">Active GPU TPCs: 4</span><br><span class="line">EMC MinFreq=204000000 MaxFreq=2133000000 CurrentFreq=2133000000 FreqOverride=0</span><br><span class="line">FAN Dynamic Speed Control=nvfancontrol hwmon0_pwm1=69</span><br><span class="line">NV Power Mode: 15W</span><br></pre></td></tr></table></figure>
<h1 id="demonstration-of-yolov11-on-jetson-orin-nano">5. Demonstration
of <a target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a> on
<a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson
Orin</a> Nano</h1>
<p>You can find <a
target="_blank" rel="noopener" href="https://developer.download.nvidia.com/compute/redist/jp/v61/pytorch/torch-2.5.0a0+872d972e41.nv24.08.17622132-cp310-cp310-linux_aarch64.whl">PyTorch
for JetPack 6.1</a> in <a
target="_blank" rel="noopener" href="https://developer.nvidia.com/embedded/downloads">Jetson Download
Center</a>. <strong><span
style="color:red">However...</span></strong>.</p>
<h2 id="current-issue">5.1 Current Issue</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/jetpack-6-1-release-announcement/308185">JetPack
6.1 Release Announcement</a></li>
<li><a
target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/pytorch-for-jetson/72048">PyTorch
for Jetson</a> - To the latest, it <strong>ONLY</strong> has the support
for <strong><span style="color:red">PyTorch v2.3.0, JetPack 6.0 (L4T
R36.2 / R36.3) + CUDA 12.2</span></strong>.</li>
<li><a
target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/frameworks/install-pytorch-jetson-platform/index.html">Installing
PyTorch for Jetson Platform</a> - Until today, October 17, 2024, what I
can reach so far is this <strong>.pdf</strong> file: <a
target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/frameworks/pdf/Install-PyTorch-Jetson-Platform.pdf">Guide
Of Installing PyTorch For Jetson Platform</a>.</li>
</ul>
<h2 id="make-yolov11-on-jetson-orin-nano-work-with-gpu">5.2 Make <a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a> On <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-orin/">Jetson
Orin</a> Nano Work With GPU</h2>
<p><strong><span style="color:red">Solution:</span></strong></p>
<ul>
<li><code>pip install ultralytics</code></li>
<li>Overwrite <code>torch</code> installed with <code>ultralytics</code>
by <a
target="_blank" rel="noopener" href="https://developer.download.nvidia.com/compute/redist/jp/v61/pytorch/torch-2.5.0a0+872d972e41.nv24.08.17622132-cp310-cp310-linux_aarch64.whl">PyTorch
for JetPack 6.1</a></li>
<li>Build <a target="_blank" rel="noopener" href="https://github.com/pytorch/vision">torchvision</a>
from source</li>
</ul>
<p>To successfully build <a
target="_blank" rel="noopener" href="https://github.com/pytorch/vision">torchvision</a> from source,
you may need to allocate more <strong>swap</strong> memory:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo fallocate -l 4G /swapfile</span><br><span class="line">sudo chmod 600 /swapfile</span><br><span class="line">sudo mkswap /swapfile</span><br><span class="line">sudo swapon /swapfile</span><br></pre></td></tr></table></figure>
<p>Otherwise, you may meet the following error:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c++: fatal error: Killed signal terminated program cc1plus</span><br><span class="line">compilation terminated.</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://chatgpt.com/">ChatGPT</a> explained it as:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The error you&#x27;re encountering while building torchvision seems to be caused by your system running out of resources, particularly memory. The message c++: fatal error: Killed signal terminated program cc1plus often indicates that the system killed the process due to memory exhaustion.</span><br></pre></td></tr></table></figure>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">ssh &amp; neofetch</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://developer.download.nvidia.com/compute/redist/jp/v61/pytorch/torch-2.5.0a0+872d972e41.nv24.08.17622132-cp310-cp310-linux_aarch64.whl">PyTorch
for JetPack 6.1</a> Cuda Enabled</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/ssh_neofetch.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/ssh_neofetch.png"
alt="SSH &amp; Neofetch" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/pytorch_cuda_enabled.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/pytorch_cuda_enabled.png"
alt="PyTorch Cuda" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a>
Initialization</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a> GPU</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/yolov11_init.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/yolov11_init.png"
alt="YOLO v11 Initialization" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/yolov11_gpu.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/Jetson/Orin/yolov11_gpu.png"
alt="YOLO v11 GPU" /></a></td>
</tr>
</tbody>
</table>
<p>The End.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/14/SBCs/RISC-V/LuckFox-Pico-Ultra-W/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/14/SBCs/RISC-V/LuckFox-Pico-Ultra-W/" class="post-title-link" itemprop="url">LuckFox Pico Ultra W RV1106G3</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-14 00:32:39" itemprop="dateCreated datePublished" datetime="2024-10-14T00:32:39-07:00">2024-10-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-25 04:37:33" itemprop="dateModified" datetime="2024-10-25T04:37:33-07:00">2024-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/Risc-V/" itemprop="url" rel="index"><span itemprop="name">Risc-V</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Haven't tried out my <a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">LuckFox
Pico Ultra W</a> for over 1 month. Tonight, actually, today, is <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Thanksgiving_(Canada)">Canada's
Thanksgiving</a> of year 2024.</p>
<h1 id="preparation">1. Preparation</h1>
<h2 id="lsusb">1.1 <code>lsusb</code></h2>
<ul>
<li>Step 1: hold the <code>BOOT</code> button</li>
<li>Step 2: then connect the USB cable</li>
<li>Step 3: release the <code>BOOT</code> button</li>
</ul>
<p><strong><span style="color:red"><a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">LuckFox
Pico Ultra W</a> is quite picky at USB Type 3
cables.</span></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsusb | grep Fuzhou</span><br><span class="line">Bus 009 Device 014: ID 2207:110c Fuzhou Rockchip Electronics Company </span><br></pre></td></tr></table></figure>
<h2 id="flash-firmware">1.2 Flash firmware</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">➜  ultra-w-buildroot sudo upgrade_tool uf update.img </span><br><span class="line">[sudo] password for lvision: </span><br><span class="line">Loading firmware...</span><br><span class="line">Support Type:1106	FW Ver:0.0.00	FW Time:2024-07-08 21:16:43</span><br><span class="line">Loader ver:1.01	Loader Time:2024-07-08 21:15:08</span><br><span class="line">Start to upgrade firmware...</span><br><span class="line">Download Boot Start</span><br><span class="line">Download Boot Success</span><br><span class="line">Wait For Maskrom Start</span><br><span class="line">Wait For Maskrom Success</span><br><span class="line">Test Device Start</span><br><span class="line">Test Device Success</span><br><span class="line">Check Chip Start</span><br><span class="line">Check Chip Success</span><br><span class="line">Get FlashInfo Start</span><br><span class="line">Get FlashInfo Success</span><br><span class="line">Prepare IDB Start</span><br><span class="line">Prepare IDB Success</span><br><span class="line">Download IDB Start</span><br><span class="line">Download IDB Success</span><br><span class="line">Download Firmware Start</span><br><span class="line">Download Image... (100%)</span><br><span class="line">Download Firmware Success</span><br><span class="line">Upgrade firmware ok.</span><br><span class="line">➜  ultra-w-buildroot </span><br></pre></td></tr></table></figure>
<h2 id="wired-connection-mac-address-keeps-varying.-how">1.3 Wired
Connection MAC Address Keeps Varying. How?</h2>
<p>Please add the following script:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ cat /etc/netplan/01-netcfg.yaml</span><br><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  ethernets:</span><br><span class="line">    eth0:</span><br><span class="line">      dhcp4: false</span><br><span class="line">      addresses:</span><br><span class="line">        - 192.168.1.122/24  # Replace with your desired static IP address and subnet mask</span><br><span class="line">      routes:</span><br><span class="line">        - to: default</span><br><span class="line">          via: 192.168.1.1  # Replace with your gateway IP address</span><br><span class="line">      nameservers:</span><br><span class="line">        addresses:</span><br><span class="line">          - 8.8.8.8   # Replace with your DNS server IP addresses</span><br><span class="line">          - 8.8.4.4</span><br><span class="line">      macaddress: 72:a4:45:da:3a:e6</span><br><span class="line">➜  ~ </span><br></pre></td></tr></table></figure>
<p>and then do <code>sudo netplan apply</code>.</p>
<h2 id="ssh-into-luckfox-pico-ultra-w">1.4 <code>ssh</code> Into <a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">LuckFox
Pico Ultra W</a></h2>
<ul>
<li>username: <code>root</code></li>
<li>password: <code>luckfox</code></li>
</ul>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">Luckfox
Pico Ultra W</a> CPUInfo</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">Luckfox
Pico Ultra W</a> MemInfo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/luckfox_cpuinfo.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/luckfox_cpuinfo.png"
alt="Luckfox Pico Ultra W CPUInfo" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/luckfox_meminfo.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/luckfox_meminfo.png"
alt="Luckfox Pico Ultra W MemInfo" /></a></td>
</tr>
</tbody>
</table>
<h1 id="luckfox-pico-ultra-w-csi-camera">2. <a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">Luckfox
Pico Ultra W</a> <a
target="_blank" rel="noopener" href="https://wiki.luckfox.com/Luckfox-Pico/Luckfox-Pico-RV1106/Luckfox-Pico-Ultra-W/Luckfox-Pico-pinout/CSI-Camera/">CSI
Camera</a></h1>
<h2 id="connection-of-csi-camera">2.1 Connection Of <a
target="_blank" rel="noopener" href="https://wiki.luckfox.com/Luckfox-Pico/Luckfox-Pico-RV1106/Luckfox-Pico-Ultra-W/Luckfox-Pico-pinout/CSI-Camera/">CSI
Camera</a></h2>
<p>For my <a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">LuckFox
Pico Ultra W</a>, I need to follow the following citation:
<code>When connecting the camera to LuckFox Pico Ultra development boards, ensure that the metal side of the camera ribbon cable faces the chip on the development board.</code>
(Refer to <a
target="_blank" rel="noopener" href="https://wiki.luckfox.com/Luckfox-Pico/Luckfox-Pico-RV1106/Luckfox-Pico-Ultra-W/Luckfox-Pico-pinout/CSI-Camera/">CSI
Camera</a>)</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/devices_listed_rkipc.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/devices_listed_rkipc.png"
alt="v4l2-ctl --list-devices and rkipc.ini" /></a></p>
<h2 id="content-of-rkipc.ini">2.2 Content of <code>rkipc.ini</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">[root@luckfox data]# cat rkipc.ini </span><br><span class="line">[audio.0]</span><br><span class="line">enable = 1</span><br><span class="line">card_name = hw:0,0</span><br><span class="line">encode_type = G711A</span><br><span class="line">format = S16</span><br><span class="line">sample_rate = 8000</span><br><span class="line">channels = 2</span><br><span class="line">frame_size = 1152</span><br><span class="line">bit_rate = 16000</span><br><span class="line">input = mic_in</span><br><span class="line">volume = 50</span><br><span class="line">enable_aed = 0</span><br><span class="line">enable_bcd = 0</span><br><span class="line">enable_vqe = 1</span><br><span class="line">vqe_cfg = /oem/usr/share/vqefiles/config_aivqe.json</span><br><span class="line">rt_audio_period_size = 1024</span><br><span class="line"></span><br><span class="line">[video.source]</span><br><span class="line">enable_aiq = 1</span><br><span class="line">enable_vo = 0</span><br><span class="line">vo_dev_id = 3 ; 0 is hdmi, 3 is mipi</span><br><span class="line">enable_ivs = 1</span><br><span class="line">enable_jpeg = 1</span><br><span class="line">enable_venc_0 = 1</span><br><span class="line">enable_venc_1 = 1</span><br><span class="line">enable_venc_2 = 0</span><br><span class="line">enable_npu = 1</span><br><span class="line">npu_fps = 10</span><br><span class="line">buffer_line = 1296</span><br><span class="line">enable_rtsp = 1</span><br><span class="line">enable_rtmp = 0</span><br><span class="line">rotation = 0 ; available value:0 90 180 270</span><br><span class="line"></span><br><span class="line">[video.0]</span><br><span class="line">buffer_size = 1492992 ; w * h / 2</span><br><span class="line">buffer_count = 4</span><br><span class="line">enable_refer_buffer_share = 1</span><br><span class="line">stream_type = mainStream</span><br><span class="line">video_type = compositeStream</span><br><span class="line">max_width = 2304</span><br><span class="line">max_height = 1296</span><br><span class="line">width = 2304</span><br><span class="line">height = 1296</span><br><span class="line">rc_mode = CBR</span><br><span class="line">rc_quality = high</span><br><span class="line">src_frame_rate_den = 1</span><br><span class="line">src_frame_rate_num = 25</span><br><span class="line">dst_frame_rate_den = 1</span><br><span class="line">dst_frame_rate_num = 25</span><br><span class="line">target_rate = 0</span><br><span class="line">mid_rate = 1024</span><br><span class="line">max_rate = 2048</span><br><span class="line">min_rate = 0</span><br><span class="line">output_data_type = H.265</span><br><span class="line">smart = close</span><br><span class="line">h264_profile = high</span><br><span class="line">gop = 50</span><br><span class="line">smartp_viridrlen = 25</span><br><span class="line">gop_mode = normalP</span><br><span class="line">stream_smooth = 50</span><br><span class="line">enable_motion_deblur = 1</span><br><span class="line">enable_motion_static_switch = 0</span><br><span class="line">frame_min_i_qp = 26</span><br><span class="line">frame_min_qp = 28</span><br><span class="line">frame_max_i_qp = 51</span><br><span class="line">frame_max_qp = 51</span><br><span class="line">scalinglist = 0</span><br><span class="line">enable_debreath_effect = 0</span><br><span class="line">debreath_effect_strength = 16</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">[roi.4]</span><br><span class="line">stream_type = thirdStream</span><br><span class="line">id = 1</span><br><span class="line">enabled = 0</span><br><span class="line">name = test</span><br><span class="line">position_x = 0</span><br><span class="line">position_y = 0</span><br><span class="line">width = 0</span><br><span class="line">height = 0</span><br><span class="line">quality_level = 3</span><br><span class="line"></span><br><span class="line">[roi.5]</span><br><span class="line">stream_type = thirdStream</span><br><span class="line">id = 2</span><br><span class="line">enabled = 0</span><br><span class="line">name = test</span><br><span class="line">position_x = 0</span><br><span class="line">position_y = 0</span><br><span class="line">width = 0</span><br><span class="line">height = 0</span><br><span class="line">quality_level = 3</span><br><span class="line"></span><br><span class="line">[region_clip.1]</span><br><span class="line">enabled = 0</span><br><span class="line">position_x = 0</span><br><span class="line">position_y = 0</span><br><span class="line">width = 640</span><br><span class="line">height = 480</span><br><span class="line"></span><br><span class="line">[network.ntp]</span><br><span class="line">enable = 1</span><br><span class="line">refresh_time_s = 60</span><br><span class="line">ntp_server = 119.28.183.184</span><br><span class="line">[root@luckfox data]# </span><br></pre></td></tr></table></figure>
<h2 id="luckfox-config">2.3 <code>luckfox-config</code></h2>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">Luckfox
Pico Ultra W</a> luckfox-config</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">Luckfox
Pico Ultra W</a> About</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/luckfox-config.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/luckfox-config.png"
alt="Luckfox Pico Ultra W luckfox-config" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/about-luckfox.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/about-luckfox.png"
alt="Luckfox Pico Ultra W About" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">Luckfox
Pico Ultra W</a> Enable CSI</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://www.luckfox.com/Luckfox-Pico/EN-Luckfox-Pico-Ultra">Luckfox
Pico Ultra W</a> CSI Enabled</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/enable-csi.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/enable-csi.png"
alt="Luckfox Pico Ultra W Enable CSI" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/csi-enabled.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/csi-enabled.png"
alt="Luckfox Pico Ultra W CSI Enabled" /></a></td>
</tr>
</tbody>
</table>
<h2 id="snapshot-of-streamed-video-over-rtsp">2.4 Snapshot of Streamed
Video Over RTSP</h2>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/vlcsnap-2024-10-25-04h35m23s322.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/RISC-V/Luckfox-Pico/Ultra-W/vlcsnap-2024-10-25-04h35m23s322.png"
alt="Snapshot" /></a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/09/AI/DeepLearning/YOLOv11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/09/AI/DeepLearning/YOLOv11/" class="post-title-link" itemprop="url">YOLOv11</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2024-10-09 01:09:17 / Modified: 21:29:58" itemprop="dateCreated datePublished" datetime="2024-10-09T01:09:17-07:00">2024-10-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/DeepLearning/" itemprop="url" rel="index"><span itemprop="name">DeepLearning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a> was
just out for a couple of days. People keep talking about its terrrific
performance. Today, let me have some fun.</p>
<h1 id="yolov11-server-app">1. <a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a> Server
App</h1>
<p>A <a target="_blank" rel="noopener" href="https://flask.palletsprojects.com/en">Flask</a>
implementation is obtained from <a
target="_blank" rel="noopener" href="https://chatgpt.com/">ChatGPT</a>:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/lvt_yolo11_server_app.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/lvt_yolo11_server_app.png"
alt="LVT YOLOv11 Server App" /></a></p>
<h1 id="demonstration-from-client-requests">2. Demonstration From Client
Requests</h1>
<h2 id="commands">2.1 Commands</h2>
<p>Corresponding to the 5 tasks summarized on <a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a>, the
results of client requests are demonstrated as:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/yolov_5endpoints.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/yolov_5endpoints.png"
alt="LVT YOLOv11 5 EndPoints Requests" /></a></p>
<h2 id="resultant-images-on-server">2.2 Resultant Images On Server</h2>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Original Image</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/detect/">YOLO
Detection</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/bus.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/bus.jpg"
alt="Original Image" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/detect_result_20241009_012854.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/detect_result_20241009_012854.jpg"
alt="Detection Result" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/segment/">YOLO
Segmentation</a></th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/pose/">YOLO Pose</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/segment_result_20241009_012835.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/segment_result_20241009_012835.jpg"
alt="Segmentation Boundaries" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/keypoints_result_20241009_012908.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/keypoints_result_20241009_012908.jpg"
alt="Pose Keypoints" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/obb/">YOLO Oriented
Detection</a></th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/classify/">YOLO
Classification</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/oriented_detect_result_20241009_012916.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/oriented_detect_result_20241009_012916.jpg"
alt="Oriented Detection" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/endpoint_classify.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/endpoint_classify.png"
alt="Classfication Json" /></a></td>
</tr>
</tbody>
</table>
<p><strong><span style="color:red">Let me try to provide such a service
as public asap.</span></strong>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/06/AI/DeepLearning/TorchServe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/06/AI/DeepLearning/TorchServe/" class="post-title-link" itemprop="url">TorchServe</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-06 23:55:34" itemprop="dateCreated datePublished" datetime="2024-10-06T23:55:34-07:00">2024-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-07 01:40:06" itemprop="dateModified" datetime="2024-10-07T01:40:06-07:00">2024-10-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/DeepLearning/" itemprop="url" rel="index"><span itemprop="name">DeepLearning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Peace. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Jesus">Jesus</a>. I'd
recommend you <a target="_blank" rel="noopener" href="https://www.thebible.studio/">The Bible
Studio</a>.</p>
<p>Today, I'd love to have some fun of <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a>.</p>
<h1 id="torchserve-getting-started">1. <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/getting_started.html">TorchServe Getting
Started</a></h1>
<p>Please just follow <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/getting_started.html">TorchServe Getting
Started</a>, with trivial modifications. In my demonstration, I stick to
working under directory <code>/opt/servers/torchserve</code>.</p>
<h2 id="clone-torchserve">1.1 Clone <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  torchserve git clone https://github.com/pytorch/serve.git        </span><br><span class="line">Cloning into &#x27;serve&#x27;...</span><br><span class="line">remote: Enumerating objects: 60508, done.</span><br><span class="line">remote: Counting objects: 100% (25/25), done.</span><br><span class="line">remote: Compressing objects: 100% (25/25), done.</span><br><span class="line">remote: Total 60508 (delta 6), reused 3 (delta 0), pack-reused 60483 (from 1)</span><br><span class="line">Receiving objects: 100% (60508/60508), 99.06 MiB | 23.01 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (37656/37656), done.</span><br></pre></td></tr></table></figure>
<h2 id="store-a-model">1.2 Store a Model</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">➜  torchserve mkdir model_store</span><br><span class="line">➜  torchserve wget https://download.pytorch.org/models/densenet161-8d451a50.pth</span><br><span class="line">--2024-10-07 00:35:54--  https://download.pytorch.org/models/densenet161-8d451a50.pth</span><br><span class="line">Resolving download.pytorch.org (download.pytorch.org)... 2600:9000:26ce:7a00:d:607e:4540:93a1, 2600:9000:26ce:6e00:d:607e:4540:93a1, 2600:9000:26ce:3400:d:607e:4540:93a1, ...</span><br><span class="line">Connecting to download.pytorch.org (download.pytorch.org)|2600:9000:26ce:7a00:d:607e:4540:93a1|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 115730790 (110M) [application/x-www-form-urlencoded]</span><br><span class="line">Saving to: ‘densenet161-8d451a50.pth’</span><br><span class="line"></span><br><span class="line">densenet161-8d451a50.pth                                       100%[==================================================================================================================================================&gt;] 110.37M   109MB/s    in 1.0s    </span><br><span class="line"></span><br><span class="line">2024-10-07 00:35:55 (109 MB/s) - ‘densenet161-8d451a50.pth’ saved [115730790/115730790]</span><br><span class="line">➜  torchserve torch-model-archiver --model-name densenet161 --version 1.0 --model-file ./serve/examples/image_classifier/densenet_161/model.py --serialized-file densenet161-8d451a50.pth --export-path model_store --extra-files ./serve/examples/image_classifier/index_to_name.json --handler image_classifier</span><br><span class="line">➜  torchserve ll model_store</span><br><span class="line">total 106M</span><br><span class="line">4.0K drwxrwxr-x 2 lvision lvision 4.0K Oct  7 00:36 ./</span><br><span class="line">4.0K drwxrwxr-x 5 lvision lvision 4.0K Oct  7 00:35 ../</span><br><span class="line">106M -rw-rw-r-- 1 lvision lvision 106M Oct  7 00:36 densenet161.mar</span><br></pre></td></tr></table></figure>
<h2 id="start-torchserve">1.3 Start <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a></h2>
<h3 id="config.properties">1.3.1 <code>config.properties</code></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  torchserve cat config.properties </span><br><span class="line">inference_address=http://127.0.0.1:8080</span><br><span class="line">management_address=http://127.0.0.1:8081</span><br><span class="line">metrics_address=http://127.0.0.1:8082</span><br><span class="line">enable_token_auth=true</span><br><span class="line">ts.key.file=/opt/servers/torchserve/key_file.json</span><br><span class="line">log_location=/opt/servers/torchserve/logs</span><br><span class="line">metrics_location=/opt/servers/torchserve/logs</span><br><span class="line">access_log_location=/opt/servers/torchserve/logs</span><br></pre></td></tr></table></figure>
<h3 id="start-torchserve-to-serve-the-model">1.3.2 Start <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a> to serve the
model</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">➜  torchserve torchserve --start --ncs --model-store model_store --models densenet161.mar</span><br><span class="line">➜  torchserve WARNING: sun.reflect.Reflection.getCallerClass is not supported. This will impact performance.</span><br><span class="line">2024-10-07T00:38:23,323 [DEBUG] main org.pytorch.serve.util.ConfigManager - xpu-smi not available or failed: Cannot run program &quot;xpu-smi&quot;: error=2, No such file or directory</span><br><span class="line">2024-10-07T00:38:23,326 [WARN ] main org.pytorch.serve.util.ConfigManager - Your torchserve instance can access any URL to load models. When deploying to production, make sure to limit the set of allowed_urls in config.properties</span><br><span class="line">2024-10-07T00:38:23,361 [INFO ] main org.pytorch.serve.util.TokenAuthorization - </span><br><span class="line">######</span><br><span class="line">TorchServe now enforces token authorization by default.</span><br><span class="line">This requires the correct token to be provided when calling an API.</span><br><span class="line">Key file located at /opt/servers/torchserve/key_file.json</span><br><span class="line">Check token authorization documenation for information: https://github.com/pytorch/serve/blob/master/docs/token_authorization_api.md </span><br><span class="line">######</span><br><span class="line"></span><br><span class="line">2024-10-07T00:38:23,361 [INFO ] main org.pytorch.serve.servingsdk.impl.PluginsManager - Initializing plugins manager...</span><br><span class="line">2024-10-07T00:38:23,399 [INFO ] main org.pytorch.serve.metrics.configuration.MetricConfiguration - Successfully loaded metrics configuration from /home/lvision/.local/lib/python3.12/site-packages/ts/configs/metrics.yaml</span><br><span class="line">2024-10-07T00:38:23,484 [INFO ] main org.pytorch.serve.ModelServer - </span><br><span class="line">Torchserve version: 0.12.0</span><br><span class="line">TS Home: /home/lvision/.local/lib/python3.12/site-packages</span><br><span class="line">Current directory: /opt/servers/torchserve</span><br><span class="line">Temp directory: /tmp</span><br><span class="line">Metrics config path: /home/lvision/.local/lib/python3.12/site-packages/ts/configs/metrics.yaml</span><br><span class="line">Number of GPUs: 1</span><br><span class="line">Number of CPUs: 48</span><br><span class="line">Max heap size: 30208 M</span><br><span class="line">Python executable: /usr/bin/python3</span><br><span class="line">Config file: config.properties</span><br><span class="line">Inference address: http://127.0.0.1:8080</span><br><span class="line">Management address: http://127.0.0.1:8081</span><br><span class="line">Metrics address: http://127.0.0.1:8082</span><br><span class="line">Model Store: /opt/servers/torchserve/model_store</span><br><span class="line">Initial Models: densenet161.mar</span><br><span class="line">Log dir: /opt/servers/torchserve/logs</span><br><span class="line">Metrics dir: /opt/servers/torchserve/logs</span><br><span class="line">Netty threads: 0</span><br><span class="line">Netty client threads: 0</span><br><span class="line">Default workers per model: 1</span><br><span class="line">Blacklist Regex: N/A</span><br><span class="line">Maximum Response Size: 6553500</span><br><span class="line">Maximum Request Size: 6553500</span><br><span class="line">Limit Maximum Image Pixels: true</span><br><span class="line">Prefer direct buffer: false</span><br><span class="line">Allowed Urls: [file://.*|http(s)?://.*]</span><br><span class="line">Custom python dependency for model allowed: false</span><br><span class="line">Enable metrics API: true</span><br><span class="line">Metrics mode: LOG</span><br><span class="line">Disable system metrics: false</span><br><span class="line">Workflow Store: /opt/servers/torchserve/model_store</span><br><span class="line">CPP log config: N/A</span><br><span class="line">Model config: N/A</span><br><span class="line">System metrics command: default</span><br><span class="line">Model API enabled: false</span><br><span class="line">2024-10-07T00:38:23,491 [INFO ] main org.pytorch.serve.servingsdk.impl.PluginsManager -  Loading snapshot serializer plugin...</span><br><span class="line">2024-10-07T00:38:23,492 [INFO ] main org.pytorch.serve.ModelServer - Loading initial models: densenet161.mar</span><br><span class="line">2024-10-07T00:38:24,521 [DEBUG] main org.pytorch.serve.wlm.ModelVersionedRefs - Adding new version 1.0 for model densenet161</span><br><span class="line">2024-10-07T00:38:24,521 [DEBUG] main org.pytorch.serve.wlm.ModelVersionedRefs - Setting default version to 1.0 for model densenet161</span><br><span class="line">2024-10-07T00:38:24,521 [INFO ] main org.pytorch.serve.wlm.ModelManager - Model densenet161 loaded.</span><br><span class="line">2024-10-07T00:38:24,521 [DEBUG] main org.pytorch.serve.wlm.ModelManager - updateModel: densenet161, count: 1</span><br><span class="line">2024-10-07T00:38:24,526 [INFO ] main org.pytorch.serve.ModelServer - Initialize Inference server with: EpollServerSocketChannel.</span><br><span class="line">2024-10-07T00:38:24,527 [DEBUG] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerLifeCycle - Worker cmdline: [/usr/bin/python3, /home/lvision/.local/lib/python3.12/site-packages/ts/model_service_worker.py, --sock-type, unix, --sock-name, /tmp/.ts.sock.9000, --metrics-config, /home/lvision/.local/lib/python3.12/site-packages/ts/configs/metrics.yaml]</span><br><span class="line">2024-10-07T00:38:24,568 [INFO ] main org.pytorch.serve.ModelServer - Inference API bind to: http://127.0.0.1:8080</span><br><span class="line">2024-10-07T00:38:24,568 [INFO ] main org.pytorch.serve.ModelServer - Initialize Management server with: EpollServerSocketChannel.</span><br><span class="line">2024-10-07T00:38:24,569 [INFO ] main org.pytorch.serve.ModelServer - Management API bind to: http://127.0.0.1:8081</span><br><span class="line">2024-10-07T00:38:24,570 [INFO ] main org.pytorch.serve.ModelServer - Initialize Metrics server with: EpollServerSocketChannel.</span><br><span class="line">2024-10-07T00:38:24,570 [INFO ] main org.pytorch.serve.ModelServer - Metrics API bind to: http://127.0.0.1:8082</span><br><span class="line">Model server started.</span><br><span class="line">2024-10-07T00:38:24,720 [WARN ] pool-3-thread-1 org.pytorch.serve.metrics.MetricCollector - worker pid is not available yet.</span><br><span class="line">2024-10-07T00:38:25,152 [INFO ] pool-3-thread-1 TS_METRICS - CPUUtilization.Percent:20.0|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - DiskAvailable.Gigabytes:1412.4598426818848|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - DiskUsage.Gigabytes:215.69704055786133|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - DiskUtilization.Percent:13.2|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - GPUMemoryUtilization.Percent:2.5472005208333335|#Level:Host,DeviceId:0|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - GPUMemoryUsed.Megabytes:626.0|#Level:Host,DeviceId:0|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,154 [INFO ] pool-3-thread-1 TS_METRICS - GPUUtilization.Percent:0.0|#Level:Host,DeviceId:0|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,154 [INFO ] pool-3-thread-1 TS_METRICS - MemoryAvailable.Megabytes:248234.90625|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,154 [INFO ] pool-3-thread-1 TS_METRICS - MemoryUsed.Megabytes:6890.875|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,154 [INFO ] pool-3-thread-1 TS_METRICS - MemoryUtilization.Percent:3.6|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,632 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - s_name_part0=/tmp/.ts.sock, s_name_part1=9000, pid=62344</span><br><span class="line">2024-10-07T00:38:25,636 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Listening on port: /tmp/.ts.sock.9000</span><br><span class="line">2024-10-07T00:38:25,637 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Successfully loaded /home/lvision/.local/lib/python3.12/site-packages/ts/configs/metrics.yaml.</span><br><span class="line">2024-10-07T00:38:25,637 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - [PID]62344</span><br><span class="line">2024-10-07T00:38:25,637 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Torch worker started.</span><br><span class="line">2024-10-07T00:38:25,637 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Python runtime: 3.12.3</span><br><span class="line">2024-10-07T00:38:25,638 [DEBUG] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - W-9000-densenet161_1.0 State change null -&gt; WORKER_STARTED</span><br><span class="line">2024-10-07T00:38:25,641 [INFO ] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - Connecting to: /tmp/.ts.sock.9000</span><br><span class="line">2024-10-07T00:38:25,646 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Connection accepted: /tmp/.ts.sock.9000.</span><br><span class="line">2024-10-07T00:38:25,648 [DEBUG] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - Flushing req.cmd LOAD repeats 1 to backend at: 1728286705648</span><br><span class="line">2024-10-07T00:38:25,649 [INFO ] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - Looping backend response at: 1728286705649</span><br><span class="line">2024-10-07T00:38:25,674 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - model_name: densenet161, batchSize: 1</span><br><span class="line">2024-10-07T00:38:26,881 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Enabled tensor cores</span><br><span class="line">2024-10-07T00:38:26,882 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - OpenVINO is not enabled</span><br><span class="line">2024-10-07T00:38:26,882 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - proceeding without onnxruntime</span><br><span class="line">2024-10-07T00:38:26,882 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Torch TensorRT not enabled</span><br><span class="line">2024-10-07T00:38:27,263 [WARN ] W-9000-densenet161_1.0-stderr MODEL_LOG - /home/lvision/.local/lib/python3.12/site-packages/ts/torch_handler/base_handler.py:355: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don&#x27;t have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.</span><br><span class="line">2024-10-07T00:38:27,264 [WARN ] W-9000-densenet161_1.0-stderr MODEL_LOG -   state_dict = torch.load(model_pt_path, map_location=map_location)</span><br><span class="line">2024-10-07T00:38:27,564 [INFO ] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - Backend response time: 1915</span><br><span class="line">2024-10-07T00:38:27,564 [DEBUG] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - W-9000-densenet161_1.0 State change WORKER_STARTED -&gt; WORKER_MODEL_LOADED</span><br><span class="line">2024-10-07T00:38:27,565 [INFO ] W-9000-densenet161_1.0 TS_METRICS - WorkerLoadTime.Milliseconds:3041.0|#WorkerName:W-9000-densenet161_1.0,Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286707</span><br><span class="line">2024-10-07T00:38:27,565 [INFO ] W-9000-densenet161_1.0 TS_METRICS - WorkerThreadTime.Milliseconds:2.0|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286707</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="key_file.json">1.3.3 <code>key_file.json</code></h3>
<p>By running the above command, a <code>key_file.json</code> file is
generated under the current working directory (Please refer to <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/token_authorization_api.html">TorchServe
token authorization API</a>):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">➜  torchserve ll key_file.json</span><br><span class="line">4.0K -rw------- 1 lvision lvision 243 Oct  7 00:38 key_file.json</span><br><span class="line">➜  torchserve cat key_file.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;management&quot;: &#123;</span><br><span class="line">    &quot;key&quot;: &quot;c_7-MgUE&quot;,</span><br><span class="line">    &quot;expiration time&quot;: &quot;2024-10-07T08:38:23.343462778Z&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inference&quot;: &#123;</span><br><span class="line">    &quot;key&quot;: &quot;IMc5oeRf&quot;,</span><br><span class="line">    &quot;expiration time&quot;: &quot;2024-10-07T08:38:23.343456097Z&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;API&quot;: &#123;</span><br><span class="line">    &quot;key&quot;: &quot;_tFv4L56&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;% </span><br></pre></td></tr></table></figure>
<h3 id="is-torchserve-service-running">1.3.4 Is <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a> Service
Running?</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ curl -H &quot;Authorization: Bearer c_7-MgUE&quot; http://127.0.0.1:8081/models</span><br><span class="line">&#123;</span><br><span class="line">  &quot;models&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;modelName&quot;: &quot;densenet161&quot;,</span><br><span class="line">      &quot;modelUrl&quot;: &quot;densenet161.mar&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="get-predictions">1.4 Get Predictions</h2>
<h3 id="using-rest-apis">1.4.1 Using <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/REST">REST</a> APIs</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  torchserve curl -O https://raw.githubusercontent.com/pytorch/serve/master/docs/images/kitten_small.jpg</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  7341  100  7341    0     0  28980      0 --:--:-- --:--:-- --:--:-- 29015</span><br></pre></td></tr></table></figure>
<p>Let's take a look:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/PyTorch/kitten_small.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/PyTorch/kitten_small.jpg"
alt="kitten" /></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  torchserve curl -H &quot;Authorization: Bearer IMc5oeRf&quot; http://127.0.0.1:8080/predictions/densenet161 -T kitten_small.jpg</span><br><span class="line">&#123;</span><br><span class="line">  &quot;tabby&quot;: 0.47793325781822205,</span><br><span class="line">  &quot;lynx&quot;: 0.20019005239009857,</span><br><span class="line">  &quot;tiger_cat&quot;: 0.16827784478664398,</span><br><span class="line">  &quot;tiger&quot;: 0.062009651213884354,</span><br><span class="line">  &quot;Egyptian_cat&quot;: 0.05115227773785591</span><br><span class="line">&#125;%</span><br></pre></td></tr></table></figure>
<h3 id="using-grpc-apis-through-python-client">1.4.2 Using <a
target="_blank" rel="noopener" href="https://grpc.io/">gRPC</a> APIs through Python Client</h3>
<h4 id="install-grpc-python-dependencies">1.4.2.1 Install <a
target="_blank" rel="noopener" href="https://grpc.io/">gRPC</a> Python dependencies</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U grpcio protobuf grpcio-tools googleapis-common-protos</span><br></pre></td></tr></table></figure>
<h4 id="generate-inference-client-using-proto-files">1.4.2.2 Generate
inference client using proto files</h4>
<p><strong><span style="color:red">Must under folder
<code>serve</code></span></strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  torchserve cd serve</span><br></pre></td></tr></table></figure>
<p>Then,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  serve git:(master) python -m grpc_tools.protoc --proto_path=frontend/server/src/main/resources/proto/ --python_out=ts_scripts --grpc_python_out=ts_scripts frontend/server/src/main/resources/proto/inference.proto frontend/server/src/main/resources/proto/management.proto</span><br><span class="line">google/rpc/status.proto: File not found.</span><br><span class="line">inference.proto:6:1: Import &quot;google/rpc/status.proto&quot; was not found or had errors.</span><br><span class="line">inference.proto:32:14: &quot;google.rpc.Status&quot; is not defined.</span><br></pre></td></tr></table></figure>
<strong><span style="color:red">Why????</span></strong>
<div style="text-align: center; font-size: 3em;">
<pre><code>😞😢😭</code></pre>
</div>
<p><strong><span style="color:red">Solution:</span></strong>:</p>
<ul>
<li><strong><span style="color:red">Step 1: Clone <a
target="_blank" rel="noopener" href="https://github.com/googleapis/googleapis">Google
APIs</a></span></strong>:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  serve git:(master) git clone https://github.com/googleapis/googleapis.git</span><br><span class="line"></span><br><span class="line">Cloning into &#x27;googleapis&#x27;...</span><br><span class="line">remote: Enumerating objects: 233669, done.</span><br><span class="line">remote: Counting objects: 100% (13457/13457), done.</span><br><span class="line">remote: Compressing objects: 100% (410/410), done.</span><br><span class="line">remote: Total 233669 (delta 13122), reused 13077 (delta 13042), pack-reused 220212 (from 1)</span><br><span class="line">Receiving objects: 100% (233669/233669), 205.13 MiB | 21.65 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (196982/196982), done.</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><span style="color:red">Step 2: Generate inference client
using <a target="_blank" rel="noopener" href="https://github.com/googleapis/googleapis">Google
APIs</a>'s necessary <code>.proto</code> files</span></strong>:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  serve git:(master) ✗ python -m grpc_tools.protoc \</span><br><span class="line">  --proto_path=frontend/server/src/main/resources/proto/ \</span><br><span class="line">  --proto_path=googleapis/ \</span><br><span class="line">  --python_out=ts_scripts \</span><br><span class="line">  --grpc_python_out=ts_scripts \</span><br><span class="line">  frontend/server/src/main/resources/proto/inference.proto \</span><br><span class="line">  frontend/server/src/main/resources/proto/management.proto</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><span style="color:red">Step 3: Modify
<code>ts_scripts/torchserve_grpc_client.py</code> as
follows</span></strong>:</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> grpc</span><br><span class="line"><span class="keyword">import</span> inference_pb2</span><br><span class="line"><span class="keyword">import</span> inference_pb2_grpc</span><br><span class="line"><span class="keyword">import</span> management_pb2</span><br><span class="line"><span class="keyword">import</span> management_pb2_grpc</span><br><span class="line"></span><br><span class="line"><span class="comment"># Function to get an inference stub for making gRPC calls to the inference service.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_inference_stub</span>():</span><br><span class="line">    channel = grpc.insecure_channel(<span class="string">&quot;localhost:7070&quot;</span>)</span><br><span class="line">    stub = inference_pb2_grpc.InferenceAPIsServiceStub(channel)</span><br><span class="line">    <span class="keyword">return</span> stub</span><br><span class="line"></span><br><span class="line"><span class="comment"># Function to get a management stub for making gRPC calls to the model management service.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_management_stub</span>():</span><br><span class="line">    channel = grpc.insecure_channel(<span class="string">&quot;localhost:7071&quot;</span>)</span><br><span class="line">    stub = management_pb2_grpc.ManagementAPIsServiceStub(channel)</span><br><span class="line">    <span class="keyword">return</span> stub</span><br><span class="line"></span><br><span class="line"><span class="comment"># Perform a single inference call.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">infer</span>(<span class="params">stub, model_name, model_input, metadata</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(model_input, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line"></span><br><span class="line">    input_data = &#123;<span class="string">&quot;data&quot;</span>: data&#125;</span><br><span class="line">    response = stub.Predictions(</span><br><span class="line">        inference_pb2.PredictionsRequest(model_name=model_name, <span class="built_in">input</span>=input_data),</span><br><span class="line">        metadata=metadata,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        prediction = response.prediction.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(prediction)</span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;gRPC error: <span class="subst">&#123;e.details()&#125;</span>&quot;</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Perform streaming inference.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">infer_stream</span>(<span class="params">stub, model_name, model_input, metadata</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(model_input, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line"></span><br><span class="line">    input_data = &#123;<span class="string">&quot;data&quot;</span>: data&#125;</span><br><span class="line">    responses = stub.StreamPredictions(</span><br><span class="line">        inference_pb2.PredictionsRequest(model_name=model_name, <span class="built_in">input</span>=input_data),</span><br><span class="line">        metadata=metadata,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">for</span> resp <span class="keyword">in</span> responses:</span><br><span class="line">            prediction = resp.prediction.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(prediction)</span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;gRPC error: <span class="subst">&#123;e.details()&#125;</span>&quot;</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Perform an advanced streaming inference with multiple input files.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">infer_stream2</span>(<span class="params">model_name, sequence_id, input_files, metadata</span>):</span><br><span class="line">    response_queue = queue.Queue()</span><br><span class="line">    process_response_func = partial(</span><br><span class="line">        InferStream2.default_process_response, response_queue</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    client = InferStream2SimpleClient()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        client.start_stream(</span><br><span class="line">            model_name=model_name,</span><br><span class="line">            sequence_id=sequence_id,</span><br><span class="line">            process_response=process_response_func,</span><br><span class="line">            metadata=metadata,</span><br><span class="line">        )</span><br><span class="line">        sequence = input_files.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> input_file <span class="keyword">in</span> sequence:</span><br><span class="line">            client.async_send_infer(input_file.strip())</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(sequence)):</span><br><span class="line">            response = response_queue.get()</span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">str</span>(response))</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Sequence completed!&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;infer_stream2 received error&quot;</span>, e)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        client.stop_stream()</span><br><span class="line">        client.stop()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Register a new model with TorchServe.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>(<span class="params">stub, model_name, mar_set_str, metadata</span>):</span><br><span class="line">    mar_set = <span class="built_in">set</span>()</span><br><span class="line">    <span class="keyword">if</span> mar_set_str:</span><br><span class="line">        mar_set = <span class="built_in">set</span>(mar_set_str.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    marfile = <span class="string">f&quot;<span class="subst">&#123;model_name&#125;</span>.mar&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;## Check <span class="subst">&#123;marfile&#125;</span> in mar_set :&quot;</span>, mar_set)</span><br><span class="line">    <span class="keyword">if</span> marfile <span class="keyword">not</span> <span class="keyword">in</span> mar_set:</span><br><span class="line">        marfile = <span class="string">&quot;https://torchserve.s3.amazonaws.com/mar_files/&#123;&#125;.mar&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">            model_name</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;## Register marfile: <span class="subst">&#123;marfile&#125;</span>\n&quot;</span>)</span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: marfile,</span><br><span class="line">        <span class="string">&quot;initial_workers&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;synchronous&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;model_name&quot;</span>: model_name,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = stub.RegisterModel(</span><br><span class="line">            management_pb2.RegisterModelRequest(**params), metadata=metadata</span><br><span class="line">        )</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Model <span class="subst">&#123;model_name&#125;</span> registered successfully&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Failed to register model <span class="subst">&#123;model_name&#125;</span>.&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(e.details()))</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Unregister a model from TorchServe.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">unregister</span>(<span class="params">stub, model_name, metadata</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = stub.UnregisterModel(</span><br><span class="line">            management_pb2.UnregisterModelRequest(model_name=model_name),</span><br><span class="line">            metadata=metadata,</span><br><span class="line">        )</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Model <span class="subst">&#123;model_name&#125;</span> unregistered successfully&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Failed to unregister model <span class="subst">&#123;model_name&#125;</span>.&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(e.details()))</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># The rest of the code defines the streaming classes and the command-line interface.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># Argument parsing for the script</span></span><br><span class="line">    parent_parser = argparse.ArgumentParser(add_help=<span class="literal">False</span>)</span><br><span class="line">    parent_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;model_name&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Name of the model used.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    parent_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;--auth-token&quot;</span>,</span><br><span class="line">        dest=<span class="string">&quot;auth_token&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        required=<span class="literal">False</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Authorization token&quot;</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser = argparse.ArgumentParser(</span><br><span class="line">        description=<span class="string">&quot;TorchServe gRPC client&quot;</span>,</span><br><span class="line">        formatter_class=argparse.RawTextHelpFormatter,</span><br><span class="line">    )</span><br><span class="line">    subparsers = parser.add_subparsers(<span class="built_in">help</span>=<span class="string">&quot;Action&quot;</span>, dest=<span class="string">&quot;action&quot;</span>)</span><br><span class="line"></span><br><span class="line">    infer_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;infer&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">    infer_stream_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;infer_stream&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">    infer_stream2_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;infer_stream2&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">    register_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;register&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">    unregister_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;unregister&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Arguments for different actions</span></span><br><span class="line">    infer_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;model_input&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="literal">None</span>, <span class="built_in">help</span>=<span class="string">&quot;Input for model for inference.&quot;</span></span><br><span class="line">    )</span><br><span class="line">    infer_stream_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;model_input&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Input for model for stream inference.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    infer_stream2_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;sequence_id&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Input for sequence id for stream inference.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    infer_stream2_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;input_files&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Comma separated list of input files&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    register_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;mar_set&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        nargs=<span class="string">&quot;?&quot;</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Comma separated list of mar models to be loaded using [model_name=]model_location format.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Parse command line arguments</span></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Create metadata with or without the authorization token</span></span><br><span class="line">    <span class="keyword">if</span> args.auth_token:</span><br><span class="line">        metadata = (</span><br><span class="line">            (<span class="string">&quot;protocol&quot;</span>, <span class="string">&quot;gRPC&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;session_id&quot;</span>, <span class="string">&quot;12345&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;authorization&quot;</span>, <span class="string">f&quot;Bearer <span class="subst">&#123;args.auth_token&#125;</span>&quot;</span>),</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        metadata = ((<span class="string">&quot;protocol&quot;</span>, <span class="string">&quot;gRPC&quot;</span>), (<span class="string">&quot;session_id&quot;</span>, <span class="string">&quot;12345&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Perform the selected action</span></span><br><span class="line">    <span class="keyword">if</span> args.action == <span class="string">&quot;infer&quot;</span>:</span><br><span class="line">        infer(get_inference_stub(), args.model_name, args.model_input, metadata)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&quot;infer_stream&quot;</span>:</span><br><span class="line">        infer_stream(get_inference_stub(), args.model_name, args.model_input, metadata)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&quot;infer_stream2&quot;</span>:</span><br><span class="line">        infer_stream2(args.model_name, args.sequence_id, args.input_files, metadata)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&quot;register&quot;</span>:</span><br><span class="line">        register(get_management_stub(), args.model_name, args.mar_set, metadata)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&quot;unregister&quot;</span>:</span><br><span class="line">        unregister(get_management_stub(), args.model_name, metadata)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><span style="color:red">Step 4: Run inference using a sample
client gRPC python client</span></strong>:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">➜  serve git:(master) ✗ python ts_scripts/torchserve_grpc_client.py infer --auth-token IMc5oeRf densenet161 examples/image_classifier/kitten.jpg</span><br><span class="line"></span><br><span class="line">/home/lvision/.local/lib/python3.12/site-packages/google/protobuf/runtime_version.py:112: UserWarning: Protobuf gencode version 5.27.2 is older than the runtime version 5.28.2 at inference.proto. Please avoid checked-in Protobuf gencode that can be obsolete.</span><br><span class="line">  warnings.warn(</span><br><span class="line">/home/lvision/.local/lib/python3.12/site-packages/google/protobuf/runtime_version.py:112: UserWarning: Protobuf gencode version 5.27.2 is older than the runtime version 5.28.2 at management.proto. Please avoid checked-in Protobuf gencode that can be obsolete.</span><br><span class="line">  warnings.warn(</span><br><span class="line">&#123;</span><br><span class="line">  &quot;tabby&quot;: 0.46603792905807495,</span><br><span class="line">  &quot;tiger_cat&quot;: 0.4651001989841461,</span><br><span class="line">  &quot;Egyptian_cat&quot;: 0.06611046195030212,</span><br><span class="line">  &quot;lynx&quot;: 0.001293532201088965,</span><br><span class="line">  &quot;plastic_bag&quot;: 0.000228719727601856</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/01/OperatingSystems/LFS/linux-from-scratch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/01/OperatingSystems/LFS/linux-from-scratch/" class="post-title-link" itemprop="url">Linux From Scratch</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-01 00:00:00" itemprop="dateCreated datePublished" datetime="2024-10-01T00:00:00-07:00">2024-10-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-02 04:24:52" itemprop="dateModified" datetime="2024-10-02T04:24:52-07:00">2024-10-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Linux-From-Scratch/" itemprop="url" rel="index"><span itemprop="name">Linux From Scratch</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/China/China_75th_Celebration.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/China/China_75th_Celebration.jpg"
alt="China&#39;s 75th National Day" /></a></p>
<p>Today, it's <strong>China's 75th Birthday</strong>. Let me join the
celebration. And, today, I'm going to build up a customized <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Linux">Linux</a> operating system by
following <a target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/">Linux From
Scratch</a>, with <strong><span style="color:red">the MOST up-to-date <a
target="_blank" rel="noopener" href="https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.11.1.tar.xz">kernel
6.11.1</a></span></strong>.</p>
<h1 id="preparation">1. Preparation</h1>
<h2 id="create-a-disk-image-file">1.1 Create a Disk Image File</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  repo dd if=/dev/zero of=./lfs.img bs=1M count=65536 </span><br><span class="line">65536+0 records in</span><br><span class="line">65536+0 records out</span><br><span class="line">68719476736 bytes (69 GB, 64 GiB) copied, 114.926 s, 598 MB/s</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  repo ll lfs.img</span><br><span class="line">65G -rw-rw-r-- 1 lvision lvision 64G Oct  1 00:01 lfs.img</span><br></pre></td></tr></table></figure>
<h2 id="format-the-disk-image">1.2 Format the Disk Image</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">➜  repo mkfs.ext4 lfs.img</span><br><span class="line">mke2fs 1.47.0 (5-Feb-2023)</span><br><span class="line">Discarding device blocks: done                            </span><br><span class="line">Creating filesystem with 16777216 4k blocks and 4194304 inodes</span><br><span class="line">Filesystem UUID: 7cffdaf4-2fa9-4688-8269-5a60e637b887</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">	4096000, 7962624, 11239424</span><br><span class="line"></span><br><span class="line">Allocating group tables: done                            </span><br><span class="line">Writing inode tables: done                            </span><br><span class="line">Creating journal (131072 blocks): done</span><br><span class="line">Writing superblocks and filesystem accounting information: done  </span><br></pre></td></tr></table></figure>
<h2 id="mount-the-disk-image">1.3 Mount the Disk Image</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  repo sudo mount -o loop lfs.img /mnt/lfs</span><br><span class="line">➜  repo </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  lfs df -h /mnt/lfs</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/loop14      63G   27G   34G  45% /mnt/lfs</span><br></pre></td></tr></table></figure>
<h2 id="login-as-root">1.4 Login As Root</h2>
<p>From now on, we need to login as user <strong><span
style="color:red">root</span></strong>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  repo su - root                          </span><br><span class="line">Password: </span><br><span class="line">root@lvision-MS-7C60:~# </span><br></pre></td></tr></table></figure>
<h2 id="exports">1.5 Exports</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:~# export LFS=/mnt/lfs</span><br><span class="line">root@lvision-MS-7C60:~# export LFS_TGT=$(uname -m)-lfs-linux-gnu</span><br></pre></td></tr></table></figure>
<h2 id="download-source">1.6 Download Source</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:~# mkdir -v $LFS/sources</span><br><span class="line">mkdir: created directory &#x27;/sources&#x27;</span><br><span class="line">root@lvision-MS-7C60:~# chmod -v a+wt $LFS/sources</span><br><span class="line">mode of &#x27;/sources&#x27; changed from 0755 (rwxr-xr-x) to 1777 (rwxrwxrwt)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/docker/repo# wget --input-file=wget-list-sysv --continue --directory-prefix=$LFS/sources</span><br><span class="line">--2024-08-27 03:49:06--  https://download.savannah.gnu.org/releases/acl/acl-2.3.2.tar.xz</span><br><span class="line">Resolving download.savannah.gnu.org (download.savannah.gnu.org)... 2001:470:142:5::200, 209.51.188.200</span><br><span class="line">Connecting to download.savannah.gnu.org (download.savannah.gnu.org)|2001:470:142:5::200|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 302 Moved Temporarily</span><br><span class="line">Location: https://mirrors.ocf.berkeley.edu/nongnu/acl/acl-2.3.2.tar.xz [following]</span><br><span class="line">--2024-08-27 03:49:06--  https://mirrors.ocf.berkeley.edu/nongnu/acl/acl-2.3.2.tar.xz</span><br><span class="line">Resolving mirrors.ocf.berkeley.edu (mirrors.ocf.berkeley.edu)... 2607:f140:0:32::70, 169.229.200.70</span><br><span class="line">Connecting to mirrors.ocf.berkeley.edu (mirrors.ocf.berkeley.edu)|2607:f140:0:32::70|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 371680 (363K) [application/octet-stream]</span><br><span class="line">Saving to: ‘/mnt/lfs/sources/acl-2.3.2.tar.xz’</span><br><span class="line"></span><br><span class="line">acl-2.3.2.tar.xz                                          100%[====================================================================================================================================&gt;] 362.97K  --.-KB/s    in 0.1s    </span><br><span class="line"></span><br><span class="line">2024-08-27 03:49:07 (3.07 MB/s) - ‘/mnt/lfs/sources/acl-2.3.2.tar.xz’ saved [371680/371680]</span><br><span class="line"></span><br><span class="line">--2024-08-27 03:49:07--  https://download.savannah.gnu.org/releases/attr/attr-2.5.2.tar.gz</span><br><span class="line">Connecting to download.savannah.gnu.org (download.savannah.gnu.org)|2001:470:142:5::200|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 302 Moved Temporarily</span><br><span class="line">Location: https://nongnu.askapache.com/attr/attr-2.5.2.tar.gz [following]</span><br><span class="line">--2024-08-27 03:49:07--  https://nongnu.askapache.com/attr/attr-2.5.2.tar.gz</span><br><span class="line">Resolving nongnu.askapache.com (nongnu.askapache.com)... 50.87.145.190</span><br><span class="line">Connecting to nongnu.askapache.com (nongnu.askapache.com)|50.87.145.190|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 492539 (481K) [application/x-gzip]</span><br><span class="line">Saving to: ‘/mnt/lfs/sources/attr-2.5.2.tar.gz’</span><br><span class="line"></span><br><span class="line">attr-2.5.2.tar.gz                                         100%[====================================================================================================================================&gt;] 481.00K  2.13MB/s    in 0.2s    </span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">sysvinit-3.10-consolidated-1.patch                        100%[====================================================================================================================================&gt;]   2.41K  --.-KB/s    in 0s      </span><br><span class="line"></span><br><span class="line">2024-08-27 03:51:25 (2.39 GB/s) - ‘/mnt/lfs/sources/sysvinit-3.10-consolidated-1.patch’ saved [2464/2464]</span><br><span class="line"></span><br><span class="line">FINISHED --2024-08-27 03:51:25--</span><br><span class="line">Total wall clock time: 2m 20s</span><br><span class="line">Downloaded: 94 files, 519M in 1m 32s (5.67 MB/s)</span><br><span class="line">You have new mail in /var/mail/root</span><br><span class="line">root@lvision-MS-7C60:/mnt/docker/repo# </span><br></pre></td></tr></table></figure>
<h2 id="creating-a-limited-directory-layout-in-the-lfs-filesystem">1.7
Creating a Limited Directory Layout in the LFS Filesystem</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# mkdir -pv $LFS/&#123;etc,var&#125; $LFS/usr/&#123;bin,lib,sbin&#125;</span><br><span class="line"></span><br><span class="line">for i in bin lib sbin; do</span><br><span class="line">  ln -sv usr/$i $LFS/$i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">case $(uname -m) in</span><br><span class="line">  x86_64) mkdir -pv $LFS/lib64 ;;</span><br><span class="line">esac</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/etc&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/var&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/usr&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/usr/bin&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/usr/lib&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/usr/sbin&#x27;</span><br><span class="line">&#x27;/mnt/lfs/bin&#x27; -&gt; &#x27;usr/bin&#x27;</span><br><span class="line">&#x27;/mnt/lfs/lib&#x27; -&gt; &#x27;usr/lib&#x27;</span><br><span class="line">&#x27;/mnt/lfs/sbin&#x27; -&gt; &#x27;usr/sbin&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/lib64&#x27;</span><br><span class="line">root@lvision-MS-7C60:/mnt/lfs# mkdir -pv $LFS/tools</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/tools&#x27;</span><br><span class="line">root@lvision-MS-7C60:/mnt/lfs#</span><br></pre></td></tr></table></figure>
<h2 id="adding-the-lfs-user">1.8 Adding the LFS User</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# groupadd lfs</span><br><span class="line">useradd -s /bin/bash -g lfs -m -k /dev/null lfs</span><br><span class="line">groupadd: group &#x27;lfs&#x27; already exists</span><br><span class="line">useradd: user &#x27;lfs&#x27; already exists</span><br><span class="line">root@lvision-MS-7C60:/mnt/lfs# chown -v lfs $LFS/&#123;usr&#123;,/*&#125;,lib,var,etc,bin,sbin,tools&#125;</span><br><span class="line">case $(uname -m) in</span><br><span class="line">  x86_64) chown -v lfs $LFS/lib64 ;;</span><br><span class="line">esac</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/usr&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/usr/bin&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/usr/lib&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/usr/sbin&#x27; from root to lfs</span><br><span class="line">ownership of &#x27;/mnt/lfs/lib&#x27; retained as lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/var&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/etc&#x27; from root to lfs</span><br><span class="line">ownership of &#x27;/mnt/lfs/bin&#x27; retained as lfs</span><br><span class="line">ownership of &#x27;/mnt/lfs/sbin&#x27; retained as lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/tools&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/lib64&#x27; from root to lfs</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# su - lfs</span><br><span class="line">lfs@lvision-MS-7C60:~$ </span><br></pre></td></tr></table></figure>
<h1 id="building-the-lfs-cross-toolchain-and-temporary-tools">2.
Building the LFS Cross Toolchain and Temporary Tools</h1>
<p>Please just strictily follow:</p>
<ul>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter05/chapter05.html">LFS
Chapter 5 - Compiling a Cross-Toolchain</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter06/chapter06.html">LFS
Chapter 6 - Cross Compiling Temporary Tools</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter07/chapter07.html">LFS
Chapter 7 - Entering Chroot and Building Additional Temporary
Tools</a></li>
</ul>
<blockquote>
<p><strong><span style="color:red">[!Note:] One key point to be
emphasized: </span></strong> <strong><span style="color:red">Entering
<code>Chroot</code> for Chapter 7</span></strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chown --from lfs -R root:root $LFS/&#123;usr,lib,var,etc,bin,sbin,tools&#125;</span><br><span class="line">case $(uname -m) in</span><br><span class="line">  x86_64) chown --from lfs -R root:root $LFS/lib64 ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# mount -v --bind /dev $LFS/dev</span><br><span class="line">mount -vt devpts devpts -o gid=5,mode=0620 $LFS/dev/pts</span><br><span class="line">mount -vt proc proc $LFS/proc</span><br><span class="line">mount -vt sysfs sysfs $LFS/sys</span><br><span class="line">mount -vt tmpfs tmpfs $LFS/run</span><br><span class="line">mount: /dev bound on /mnt/lfs/dev.</span><br><span class="line">mount: devpts mounted on /mnt/lfs/dev/pts.</span><br><span class="line">mount: proc mounted on /mnt/lfs/proc.</span><br><span class="line">mount: sysfs mounted on /mnt/lfs/sys.</span><br><span class="line">mount: tmpfs mounted on /mnt/lfs/run.</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# if [ -h $LFS/dev/shm ]; then</span><br><span class="line">  install -v -d -m 1777 $LFS$(realpath /dev/shm)</span><br><span class="line">else</span><br><span class="line">  mount -vt tmpfs -o nosuid,nodev tmpfs $LFS/dev/shm</span><br><span class="line">fi</span><br><span class="line">mount: tmpfs mounted on /mnt/lfs/dev/shm.</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# chroot &quot;$LFS&quot; /usr/bin/env -i   \</span><br><span class="line">    HOME=/root                  \</span><br><span class="line">    TERM=&quot;$TERM&quot;                \</span><br><span class="line">    PS1=&#x27;(lfs chroot) \u:\w\$ &#x27; \</span><br><span class="line">    PATH=/usr/bin:/usr/sbin     \</span><br><span class="line">    MAKEFLAGS=&quot;-j$(nproc)&quot;      \</span><br><span class="line">    TESTSUITEFLAGS=&quot;-j$(nproc)&quot; \</span><br><span class="line">    /bin/bash --login</span><br><span class="line">(lfs chroot) root:/# </span><br></pre></td></tr></table></figure>
<h1 id="building-the-lfs-system">3. Building the LFS System</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter08/chapter08.html">LFS
Chapter 8 - Installing Basic System Software</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter09/chapter09.html">LFS
Chapter 9 - System Configuration</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter10/chapter10.html">LFS
Chapter 10 - Making the LFS System Bootable</a></li>
</ul>
<blockquote>
<p><strong><span style="color:red">[!Note:] Two bugs MUST be fixed:
</span></strong></p>
</blockquote>
<h2
id="fatal-error-getopt-cdefs.h-no-such-file-or-directory-in-lfs-chapter-8---8.35.-grep-3.11">3.1
<code>fatal error: getopt-cdefs.h: No such file or directory</code> in
<a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter08/grep.html">LFS
Chapter 8 - 8.35. Grep-3.11</a></h2>
<blockquote>
<p><strong><span style="color:red">The Bug: </span></strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In file included from grep.c:43:</span><br><span class="line">../lib/getopt.h:84:10: fatal error: getopt-cdefs.h: No such file or directory</span><br><span class="line">   84 | <span class="comment">#include &lt;getopt-cdefs.h&gt;</span></span><br><span class="line">      |          ^~~~~~~~~~~~~~~~</span><br><span class="line">compilation terminated.</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><span style="color:red">The Solution: </span></strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/sources/grep-3.11<span class="comment"># cp ../coreutils-9.5/lib/getopt-cdefs.h ./lib/</span></span><br></pre></td></tr></table></figure>
<h2 id="i386-pc-vs.-x86_64-efi-in-lfs-chapter-8---8.64.-grub-2.12">3.2
<code>i386-pc</code> vs. <code>x86_64-efi</code> in <a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter08/grub.html">LFS
Chapter 8 - 8.64. GRUB-2.12</a></h2>
<p>In order to build <a
target="_blank" rel="noopener" href="https://www.gnu.org/software/grub/">GRUB</a>, please strictly
follow: <a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/blfs/view/12.2/postlfs/grub-efi.html">BLFS
Chapter 5 - GRUB-2.12 for EFI</a> instead.</p>
<h3 id="build-x86_64-efi-instead-of-i386-pc">3.2.1. Build
<code>x86_64-efi</code> Instead of <code>i386-pc</code></h3>
<p><strong><span style="color:red">Do NOT use the following for
<code>i386-pc</code>:</span></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr          \</span><br><span class="line">            --sysconfdir=/etc      \</span><br><span class="line">            --disable-efiemu       \</span><br><span class="line">            --disable-werror</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">Instead, use the following for
<code>x86_64-efi</code>:</span></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr        \</span><br><span class="line">            --sysconfdir=/etc    \</span><br><span class="line">            --disable-efiemu     \</span><br><span class="line">            --enable-grub-mkfont \</span><br><span class="line">            --with-platform=efi  \</span><br><span class="line">            --target=x86_64      \</span><br><span class="line">            --disable-werror</span><br></pre></td></tr></table></figure>
<p>After you obtained the following message:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">*******************************************************</span><br><span class="line">GRUB2 will be compiled with following components:</span><br><span class="line">Platform: x86_64-efi</span><br><span class="line">With devmapper support: No (need libdevmapper header)</span><br><span class="line">With memory debugging: No</span><br><span class="line">With disk cache statistics: No</span><br><span class="line">With boot time statistics: No</span><br><span class="line">efiemu runtime: No (not available on efi)</span><br><span class="line">grub-mkfont: No (need freetype2 library)</span><br><span class="line">grub-mount: No (need fuse or fuse3 libraries)</span><br><span class="line">starfield theme: No (No build-time grub-mkfont)</span><br><span class="line">With libzfs support: No (need zfs library)</span><br><span class="line">Build-time grub-mkfont: No (need freetype2 library)</span><br><span class="line">Without unifont (no build-time grub-mkfont)</span><br><span class="line">With liblzma from -llzma (support <span class="keyword">for</span> XZ-compressed mips images)</span><br><span class="line">With stack smashing protector: No</span><br><span class="line">*******************************************************</span><br></pre></td></tr></table></figure>
<p>we do:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> TARGET_CC &amp;&amp;</span><br><span class="line">make</span><br><span class="line">......</span><br><span class="line">TARGET_OBJ2ELF= sh genmod.sh moddep.lst gcry_whirlpool.module build-grub-module-verifier gcry_whirlpool.mod</span><br><span class="line">make[3]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/grub-core&#x27;</span></span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/grub-core&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> po</span><br><span class="line">make[2]: Entering directory <span class="string">&#x27;/sources/grub-2.12/po&#x27;</span></span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> <span class="string">&#x27;all&#x27;</span>.</span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/po&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> docs</span><br><span class="line">make[2]: Entering directory <span class="string">&#x27;/sources/grub-2.12/docs&#x27;</span></span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> <span class="string">&#x27;all&#x27;</span>.</span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/docs&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> util/bash-completion.d</span><br><span class="line">make[2]: Entering directory <span class="string">&#x27;/sources/grub-2.12/util/bash-completion.d&#x27;</span></span><br><span class="line">../../config.status --file=grub:grub-completion.bash.in</span><br><span class="line">config.status: creating grub</span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/util/bash-completion.d&#x27;</span></span><br><span class="line">make[1]: Leaving directory <span class="string">&#x27;/sources/grub-2.12&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="efibootmgr-and-freetype2-preferrably-enabled">3.2.2. <a
target="_blank" rel="noopener" href="https://github.com/rhboot/efibootmgr">efibootmgr</a> and <a
target="_blank" rel="noopener" href="https://freetype.org/">FreeType2</a> Preferrably Enabled</h3>
<h4 id="recommended-for-efibootmgr">3.2.2.1 Recommended for <a
target="_blank" rel="noopener" href="https://github.com/rhboot/efibootmgr">efibootmgr</a></h4>
<p>From <a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/blfs/view/12.2/postlfs/efibootmgr.html">BLFS
Chapter 5 - efibootmgr-18</a>, some required or recommended libraries
are also recommended by me to install.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/rhboot/efivar">efivar</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/dosfstools/dosfstools">dosfstools</a></li>
<li><a target="_blank" rel="noopener" href="http://ftp.rpm.org/popt/releases/popt-1.x/">popt</a></li>
<li><a target="_blank" rel="noopener" href="https://mandoc.bsd.lv/snapshots/">mandoc</a></li>
</ul>
<h4 id="recommended-for-freetype2">3.2.2.2 Recommended for <a
target="_blank" rel="noopener" href="https://freetype.org/">FreeType2</a></h4>
<p>From <a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/blfs/view/12.2/general/freetype2.html">BLFS
Chapter 10 - FreeType-2.13.3</a>, those recommended libraries are also
recommended by me to install.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/harfbuzz/harfbuzz">HarfBuzz</a></li>
<li><a target="_blank" rel="noopener" href="http://www.libpng.org/pub/png/libpng.html">libpng</a></li>
<li><a target="_blank" rel="noopener" href="https://ftp.gnu.org/gnu/which/">which</a></li>
</ul>
<h1 id="grub-and-uefi-configuration">4. <a
target="_blank" rel="noopener" href="https://www.gnu.org/software/grub/">GRUB</a> and <a
target="_blank" rel="noopener" href="https://uefi.org/">UEFI</a> Configuration</h1>
<h2 id="find-uuid-of-file-lfs.img">4.1 Find UUID of File
<code>lfs.img</code></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  lfs sudo blkid ./lfs.img</span><br><span class="line"></span><br><span class="line">[sudo] password <span class="keyword">for</span> lvision: </span><br><span class="line">./lfs.img: UUID=<span class="string">&quot;174bc795-5e06-4c0b-979f-7eccfca1ab10&quot;</span> BLOCK_SIZE=<span class="string">&quot;4096&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="configure-etcfstab">4.2 Configure <code>/etc/fstab</code></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/boot<span class="comment"># cat /etc/fstab</span></span><br><span class="line"><span class="comment"># Begin /etc/fstab</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># file system  mount-point    type     options             dump  fsck</span></span><br><span class="line"><span class="comment">#                                                                order</span></span><br><span class="line"></span><br><span class="line">UUID=174bc795-5e06-4c0b-979f-7eccfca1ab10  /  ext4  defaults  1  1</span><br><span class="line">proc           /proc          proc     nosuid,noexec,nodev 0     0</span><br><span class="line">sysfs          /sys           sysfs    nosuid,noexec,nodev 0     0</span><br><span class="line">devpts         /dev/pts       devpts   gid=5,mode=620      0     0</span><br><span class="line">tmpfs          /run           tmpfs    defaults            0     0</span><br><span class="line">devtmpfs       /dev           devtmpfs mode=0755,nosuid    0     0</span><br><span class="line">tmpfs          /dev/shm       tmpfs    nosuid,nodev        0     0</span><br><span class="line">cgroup2        /sys/fs/cgroup cgroup2  nosuid,noexec,nodev 0     0</span><br><span class="line"></span><br><span class="line"><span class="comment"># End /etc/fstab</span></span><br></pre></td></tr></table></figure>
<h2 id="generate-configuration-file-bootgrubgrub.cfg-for-grub">4.3
Generate Configuration File <code>/boot/grub/grub.cfg</code> for <a
target="_blank" rel="noopener" href="https://www.gnu.org/software/grub/">GRUB</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/boot<span class="comment"># grub-mkconfig -o /boot/grub/grub.cfg</span></span><br><span class="line">Generating grub configuration file ...</span><br><span class="line">Found linux image: /boot/vmlinuz-6.11.1-lfs-12.2</span><br><span class="line">Warning: os-prober will not be executed to detect other bootable partitions.</span><br><span class="line">Systems on them will not be added to the GRUB boot configuration.</span><br><span class="line">Check GRUB_DISABLE_OS_PROBER documentation entry.</span><br><span class="line">Adding boot menu entry <span class="keyword">for</span> UEFI Firmware Settings ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>Let's take a look at the generated
<code>/boot/grub/grub.cfg</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:~<span class="comment"># cat /boot/grub/grub.cfg</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># DO NOT EDIT THIS FILE</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># It is automatically generated by grub-mkconfig using templates</span></span><br><span class="line"><span class="comment"># from /etc/grub.d and settings from /etc/default/grub</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/00_header ###</span></span><br><span class="line"><span class="keyword">if</span> [ -s <span class="variable">$prefix</span>/grubenv ]; <span class="keyword">then</span></span><br><span class="line">  load_env</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;next_entry&#125;</span>&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">set</span> default=<span class="string">&quot;<span class="variable">$&#123;next_entry&#125;</span>&quot;</span></span><br><span class="line">   <span class="built_in">set</span> next_entry=</span><br><span class="line">   save_env next_entry</span><br><span class="line">   <span class="built_in">set</span> boot_once=<span class="literal">true</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">set</span> default=<span class="string">&quot;0&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ x<span class="string">&quot;<span class="variable">$&#123;feature_menuentry_id&#125;</span>&quot;</span> = xy ]; <span class="keyword">then</span></span><br><span class="line">  menuentry_id_option=<span class="string">&quot;--id&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  menuentry_id_option=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> menuentry_id_option</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;prev_saved_entry&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">set</span> saved_entry=<span class="string">&quot;<span class="variable">$&#123;prev_saved_entry&#125;</span>&quot;</span></span><br><span class="line">  save_env saved_entry</span><br><span class="line">  <span class="built_in">set</span> prev_saved_entry=</span><br><span class="line">  save_env prev_saved_entry</span><br><span class="line">  <span class="built_in">set</span> boot_once=<span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> savedefault &#123;</span><br><span class="line">  <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$&#123;boot_once&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    saved_entry=<span class="string">&quot;<span class="variable">$&#123;chosen&#125;</span>&quot;</span></span><br><span class="line">    save_env saved_entry</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> load_video &#123;</span><br><span class="line">  <span class="keyword">if</span> [ x<span class="variable">$feature_all_video_module</span> = xy ]; <span class="keyword">then</span></span><br><span class="line">    insmod all_video</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    insmod efi_gop</span><br><span class="line">    insmod efi_uga</span><br><span class="line">    insmod ieee1275_fb</span><br><span class="line">    insmod vbe</span><br><span class="line">    insmod vga</span><br><span class="line">    insmod video_bochs</span><br><span class="line">    insmod video_cirrus</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ x<span class="variable">$feature_default_font_path</span> = xy ] ; <span class="keyword">then</span></span><br><span class="line">   font=unicode</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">insmod ext2</span><br><span class="line">search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 174bc795-5e06-4c0b-979f-7eccfca1ab10</span><br><span class="line">    font=<span class="string">&quot;/usr/share/grub/unicode.pf2&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> loadfont <span class="variable">$font</span> ; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">set</span> gfxmode=auto</span><br><span class="line">  load_video</span><br><span class="line">  insmod gfxterm</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">terminal_output gfxterm</span><br><span class="line"><span class="keyword">if</span> [ x<span class="variable">$feature_timeout_style</span> = xy ] ; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">set</span> timeout_style=menu</span><br><span class="line">  <span class="built_in">set</span> <span class="built_in">timeout</span>=5</span><br><span class="line"><span class="comment"># Fallback normal timeout code in case the timeout_style feature is</span></span><br><span class="line"><span class="comment"># unavailable.</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">set</span> <span class="built_in">timeout</span>=5</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/00_header ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/10_linux ###</span></span><br><span class="line">menuentry <span class="string">&#x27;GNU/Linux&#x27;</span> --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-simple-174bc795-5e06-4c0b-979f-7eccfca1ab10&#x27;</span> &#123;</span><br><span class="line">	load_video</span><br><span class="line">	insmod gzio</span><br><span class="line">	insmod ext2</span><br><span class="line">	search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 174bc795-5e06-4c0b-979f-7eccfca1ab10</span><br><span class="line">	<span class="built_in">echo</span>	<span class="string">&#x27;Loading Linux 6.11.1-lfs-12.2 ...&#x27;</span></span><br><span class="line">	linux	/boot/vmlinuz-6.11.1-lfs-12.2 root=/dev/loop14 ro  </span><br><span class="line">&#125;</span><br><span class="line">submenu <span class="string">&#x27;Advanced options for GNU/Linux&#x27;</span> <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-advanced-174bc795-5e06-4c0b-979f-7eccfca1ab10&#x27;</span> &#123;</span><br><span class="line">	menuentry <span class="string">&#x27;GNU/Linux, with Linux 6.11.1-lfs-12.2&#x27;</span> --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-6.11.1-lfs-12.2-advanced-174bc795-5e06-4c0b-979f-7eccfca1ab10&#x27;</span> &#123;</span><br><span class="line">		load_video</span><br><span class="line">		insmod gzio</span><br><span class="line">		insmod ext2</span><br><span class="line">		search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 174bc795-5e06-4c0b-979f-7eccfca1ab10</span><br><span class="line">		<span class="built_in">echo</span>	<span class="string">&#x27;Loading Linux 6.11.1-lfs-12.2 ...&#x27;</span></span><br><span class="line">		linux	/boot/vmlinuz-6.11.1-lfs-12.2 root=/dev/loop14 ro  </span><br><span class="line">	&#125;</span><br><span class="line">	menuentry <span class="string">&#x27;GNU/Linux, with Linux 6.11.1-lfs-12.2 (recovery mode)&#x27;</span> --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-6.11.1-lfs-12.2-recovery-174bc795-5e06-4c0b-979f-7eccfca1ab10&#x27;</span> &#123;</span><br><span class="line">		load_video</span><br><span class="line">		insmod gzio</span><br><span class="line">		insmod ext2</span><br><span class="line">		search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 174bc795-5e06-4c0b-979f-7eccfca1ab10</span><br><span class="line">		<span class="built_in">echo</span>	<span class="string">&#x27;Loading Linux 6.11.1-lfs-12.2 ...&#x27;</span></span><br><span class="line">		linux	/boot/vmlinuz-6.11.1-lfs-12.2 root=/dev/loop14 ro single </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">### END /etc/grub.d/10_linux ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/20_linux_xen ###</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/20_linux_xen ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/25_bli ###</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$grub_platform</span>&quot;</span> = <span class="string">&quot;efi&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  insmod bli</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/25_bli ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/30_os-prober ###</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/30_os-prober ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/30_uefi-firmware ###</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$grub_platform</span>&quot;</span> = <span class="string">&quot;efi&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">	fwsetup --is-supported</span><br><span class="line">	<span class="keyword">if</span> [ <span class="string">&quot;$?&quot;</span> = 0 ]; <span class="keyword">then</span></span><br><span class="line">		menuentry <span class="string">&#x27;UEFI Firmware Settings&#x27;</span> <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;uefi-firmware&#x27;</span> &#123;</span><br><span class="line">			fwsetup</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/30_uefi-firmware ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/40_custom ###</span></span><br><span class="line"><span class="comment"># This file provides an easy way to add custom menu entries.  Simply type the</span></span><br><span class="line"><span class="comment"># menu entries you want to add after this comment.  Be careful not to change</span></span><br><span class="line"><span class="comment"># the &#x27;exec tail&#x27; line above.</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/40_custom ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/41_custom ###</span></span><br><span class="line"><span class="keyword">if</span> [ -f  <span class="variable">$&#123;config_directory&#125;</span>/custom.cfg ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$&#123;config_directory&#125;</span>/custom.cfg</span><br><span class="line"><span class="keyword">elif</span> [ -z <span class="string">&quot;<span class="variable">$&#123;config_directory&#125;</span>&quot;</span> -a -f  <span class="variable">$prefix</span>/custom.cfg ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$prefix</span>/custom.cfg</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/41_custom ###</span></span><br><span class="line">(lfs <span class="built_in">chroot</span>) root:~<span class="comment"># </span></span><br></pre></td></tr></table></figure>
<h2 id="generate-uefi">4.4 Generate <a
target="_blank" rel="noopener" href="https://uefi.org/">UEFI</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:~<span class="comment"># # Create a FAT filesystem image</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/boot/efi.img bs=1M count=10</span><br><span class="line">mkfs.fat /boot/efi.img</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the mount point if it doesn&#x27;t already exist</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /boot/efi</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mount the image to simulate an EFI System Partition</span></span><br><span class="line">mount -o loop /boot/efi.img /boot/efi</span><br><span class="line">10+0 records <span class="keyword">in</span></span><br><span class="line">10+0 records out</span><br><span class="line">10485760 bytes (10 MB, 10 MiB) copied, 0.0157083 s, 668 MB/s</span><br><span class="line">mkfs.fat 4.2 (2021-01-31)</span><br><span class="line">(lfs <span class="built_in">chroot</span>) root:~<span class="comment"># </span></span><br></pre></td></tr></table></figure>
<p>and then:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/boot<span class="comment"># grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB --no-nvram --removable</span></span><br><span class="line">Installing <span class="keyword">for</span> x86_64-efi platform.</span><br><span class="line">Installation finished. No error reported.</span><br></pre></td></tr></table></figure>
<p>Now, you can see the following file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/<span class="comment"># ls /boot/efi/EFI/BOOT/BOOTX64.EFI </span></span><br><span class="line">/boot/efi/EFI/BOOT/BOOTX64.EFI```</span><br></pre></td></tr></table></figure>
<h2 id="clear-up">4.5 Clear Up</h2>
<ul>
<li>Exit <code>chroot</code></li>
<li><code>unmount efi.img</code></li>
</ul>
<h1 id="demonstration">5. Demonstration</h1>
<h2 id="qemu">5.1 <a target="_blank" rel="noopener" href="https://www.qemu.org/">QEMU</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  lfs sudo qemu-system-x86_64 -drive file=./lfs.img,format=raw,if=virtio -kernel /mnt/lfs/boot/vmlinuz-6.11.1-lfs-12.2 -append &quot;root=/dev/vda rw rootdelay=5&quot; -m 2048</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/OperatingSystems/lfs/lfs_qemu_loggedin.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/OperatingSystems/lfs/lfs_qemu_loggedin.png"
alt="LFS QEMU Logged In" /></a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/09/28/Coding/HowTo/qt6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/28/Coding/HowTo/qt6/" class="post-title-link" itemprop="url">How to build Qt6.7.3?</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-09-28 00:00:00" itemprop="dateCreated datePublished" datetime="2024-09-28T00:00:00-07:00">2024-09-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 22:14:10" itemprop="dateModified" datetime="2024-09-30T22:14:10-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/HowTo/" itemprop="url" rel="index"><span itemprop="name">HowTo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="download-the-official-release">1. Download the Official
Release</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://download.qt.io/archive/qt/6.7/6.7.3/">Qt 6.7.3
Archive</a></li>
<li>Extract under <code>/opt/qt</code> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:49:18] lvision /opt/qt </span><br><span class="line">$ tar xvf qt-everywhere-src-6.7.3.tar.xz</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="cmake-configuration-with-generator-ninja">2. CMake Configuration
with Generator <a target="_blank" rel="noopener" href="https://ninja-build.org/">Ninja</a></h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:47:52] lvision /opt/qt/qt-everywhere-src-6.7.3/build </span><br><span class="line">$ cmake -G &quot;Ninja&quot; ../</span><br></pre></td></tr></table></figure>
<h1 id="build-with-trivial-modifications">3. Build with Trivial
Modifications</h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:51:43] lvision /opt/qt/qt-everywhere-src-6.7.3/build </span><br><span class="line">$ ccmake ../</span><br></pre></td></tr></table></figure>
<p>The <strong>MOST</strong> important: Include
<code>/usr/include/litehtml</code> in</p>
<h1 id="installation">4. Installation</h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:51:43] lvision /opt/qt/qt-everywhere-src-6.7.3/build </span><br><span class="line">$ ninja</span><br></pre></td></tr></table></figure>
<p>and you'll get:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">In function ‘fxcrt::RetainPtr&lt;T&gt; pdfium::MakeRetain(Args&amp;&amp; ...) [with T = CFX_ReadOnlySpanStream; Args = &#123;span&lt;const unsigned char&gt;&#125;]’,</span><br><span class="line">    inlined from ‘std::vector&lt;UnsupportedFeature&gt; CPDF_Metadata::CheckForSharedForm() const’ at ../../../../../../qtwebengine/src/3rdparty/chromium/third_party/pdfium/core/fpdfdoc/cpdf_metadata.cpp:86:75:</span><br><span class="line">../../../../../../qtwebengine/src/3rdparty/chromium/third_party/pdfium/core/fxcrt/retain_ptr.h:210:23: note: returned from ‘void* operator new(std::size_t)’</span><br><span class="line">  210 |   return RetainPtr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));</span><br><span class="line">      |                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">[1323/1323] STAMP QtPdf.stamp</span><br><span class="line">[10785/10857] Automatic MOC for target Pdf</span><br><span class="line">AutoMoc: /opt/qt/qt-everywhere-src-6.7.3/qtwebengine/src/pdf/qpdflinkmodel_p.h: note: No relevant classes found. No output generated.</span><br><span class="line">[10857/10857] Linking CXX shared module qtbase/qml/QtQuick/Pdf/libpdfquickplugin.so</span><br></pre></td></tr></table></figure>
<p>Good, <strong>ALL</strong> passed.</p>
<p>Finally, do <code>ninja install</code>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ qmake --version</span><br><span class="line">QMake version 3.1</span><br><span class="line">Using Qt version 6.7.3 in /opt/qt/6/lib</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/08/08/OperatingSystems/RaspberryPi/openmediavault-nas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/08/OperatingSystems/RaspberryPi/openmediavault-nas/" class="post-title-link" itemprop="url">Raspberry Pi 5 + OpenMediaVault +NAS</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-08 10:14:18" itemprop="dateCreated datePublished" datetime="2024-08-08T10:14:18-07:00">2024-08-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-30 02:13:32" itemprop="dateModified" datetime="2024-10-30T02:13:32-07:00">2024-10-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Raspberry-Pi/" itemprop="url" rel="index"><span itemprop="name">Raspberry Pi</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="commercial-nas-vs.-diy-nas">1. Commercial NAS vs. DIY NAS?</h1>
<ul>
<li>For me, the <strong>BIGGEST</strong> difference between
<code>Commerial NAS</code> vs. <code>DIY NAS</code> is their prices
😂</li>
<li>Without considering respective capabilities, <code>DIY</code> is
<strong>ALWAYS</strong> of more freedom. And, freedom is so so so
important as well</li>
</ul>
<h1 id="openmediavault-on-raspberry-pi-5">2. <a
target="_blank" rel="noopener" href="https://www.openmediavault.org/">OpenMediaVault</a> on <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi
5</a></h1>
<h2 id="use-lite-instead-of-desktop">2.1 Use Lite Instead Of
Desktop</h2>
<p>On <a target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a>'s official
webpage <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/software/operating-systems/">Raspbian
Operating Systems</a>, find <code>Raspberry Pi OS Lite</code> in
category <code>Raspberry Pi OS (64-bit)</code>. As of today, the most
up-to-date release is <a
target="_blank" rel="noopener" href="https://downloads.raspberrypi.com/raspios_lite_arm64/images/raspios_lite_arm64-2024-07-04/2024-07-04-raspios-bookworm-arm64-lite.img.xz">raspios_lite_arm64-2024-07-04</a>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  RaspberryPi sudo dd if=./2024-07-04-raspios-bookworm-arm64-lite.img of=/dev/sda bs=1M status=progress conv=fsync </span><br><span class="line">2031091712 bytes (2.0 GB, 1.9 GiB) copied, 2 s, 1.0 GB/s2835349504 bytes (2.8 GB, 2.6 GiB) copied, 2.88047 s, 984 MB/s</span><br><span class="line"></span><br><span class="line">2704+0 records in</span><br><span class="line">2704+0 records out</span><br><span class="line">2835349504 bytes (2.8 GB, 2.6 GiB) copied, 312.17 s, 9.1 MB/s</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">Don’t forget to enable
<code>SSH</code> after installation.</span></strong></p>
<h2 id="install-openmediavault-upon-raspberry-pi-os-lite">2.2 Install <a
target="_blank" rel="noopener" href="https://www.openmediavault.org/">OpenMediaVault</a> Upon Raspberry
Pi OS Lite</h2>
<p>Now, ssh into <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi
5</a>:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_neofetch.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_neofetch.png"
alt="OpenMediaVault ssh" /></a></p>
<p>Follow <a target="_blank" rel="noopener" href="https://www.openmediavault.org/">OpenMediaVault</a>'s
official documentation <a
target="_blank" rel="noopener" href="https://docs.openmediavault.org/en/stable/installation/on_debian.html">OpenMediaVault
Installation on Debian</a>, do the following:</p>
<ul>
<li><code>apt-get install --yes gnupg</code></li>
<li><code>wget --quiet --output-document=- https://packages.openmediavault.org/public/archive.key | sudo gpg --dearmor --yes --output "/usr/share/keyrings/openmediavault-archive-keyring.gpg"</code></li>
<li><code>nvim /etc/apt/sources.list.d/openmediavault.list</code> and
add <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://packages.openmediavault.org/public sandworm main</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://downloads.sourceforge.net/project/openmediavault/packages sandworm main</span><br><span class="line">## Uncomment the following line to add software from the proposed repository.</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://packages.openmediavault.org/public sandworm-proposed main</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://downloads.sourceforge.net/project/openmediavault/packages sandworm-proposed main</span><br><span class="line">## This software is not part of OpenMediaVault, but is offered by third-party</span><br><span class="line">## developers as a service to OpenMediaVault users.</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://packages.openmediavault.org/public sandworm partner</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://downloads.sourceforge.net/project/openmediavault/packages sandworm partner</span><br></pre></td></tr></table></figure></li>
</ul>
<p>By the way, please refer to <a
target="_blank" rel="noopener" href="https://sourceforge.net/projects/openmediavault/files/packages/dists/">OpenMediaVault
SourceForge Distributions</a>, <strong>sandworm</strong> is the
<strong>MOST RECENT</strong> distribution.</p>
<ul>
<li>Exports <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export LANG=C.UTF-8</span><br><span class="line">export DEBIAN_FRONTEND=noninteractive</span><br><span class="line">export APT_LISTCHANGES_FRONTEND=none</span><br></pre></td></tr></table></figure></li>
<li><code>sudo apt-get --yes --auto-remove --show-upgraded --allow-downgrades --allow-change-held-packages --no-install-recommends --option DPkg::Options::="--force-confdef" --option DPkg::Options::="--force-confold" install openmediavault</code></li>
<li><code>sudo omv-confdbadm populate</code></li>
</ul>
<p><strong><span style="color:red">Now, ALL done.</span></strong></p>
<h2 id="openmediavault-overview">2.3 <a
target="_blank" rel="noopener" href="https://www.openmediavault.org/">OpenMediaVault</a> Overview</h2>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">OpenMediaVault Login Page</th>
<th style="text-align: center;">OpenMediaVault After Login</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_01.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_01.png"
alt="OpenMediaVault Login Page" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_02.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_02.png"
alt="OpenMediaVault After Login" /></a></td>
</tr>
</tbody>
</table>
<ul>
<li>username: <code>admin</code></li>
<li>password: <code>openmediavault</code>, all lower case</li>
</ul>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_03.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_03.png"
alt="OpenMediaVault Dashboard" /></a></p>
<h1 id="nas-configuration-on-my-raspberry-pi-5">3. <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Network-attached_storage">NAS</a>
Configuration on My <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi
5</a></h1>
<h2 id="abbreviation">3.1 Abbreviation</h2>
<p><a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Network-attached_storage">NAS</a> is
the abbreviation of <code>Network Attached Storage</code>.</p>
<h2 id="geekbord-x1005-with-a-m.2-to-sata3.0-extended-card">3.2 <a
target="_blank" rel="noopener" href="https://www.aliexpress.com/item/1005007204267297.html">Geekbord
X1005</a> with a <a
target="_blank" rel="noopener" href="https://www.aliexpress.com/item/1005006212086373.html">M.2 to
Sata3.0 Extended Card</a></h2>
<h3 id="enable-nfs">3.2.1 Enable <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ sudo omv-salt deploy run nfs   </span><br><span class="line">raspberrypi5b:</span><br><span class="line">----------</span><br><span class="line">          ID: stop_nfs_server_service</span><br><span class="line">    Function: service.dead</span><br><span class="line">        Name: nfs-server</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: The service nfs-server is already dead</span><br><span class="line">     Started: 02:13:22.114977</span><br><span class="line">    Duration: 28.964 ms</span><br><span class="line">     Changes:   </span><br><span class="line"></span><br><span class="line">Summary for raspberrypi5b</span><br><span class="line">------------</span><br><span class="line">Succeeded: 1</span><br><span class="line">Failed:    0</span><br><span class="line">------------</span><br><span class="line">Total states run:     1</span><br><span class="line">Total run time:  28.964 ms</span><br><span class="line">➜  ~ </span><br></pre></td></tr></table></figure>
<h3 id="hailo-ai-accelerators-on-geekbord-x1005">3.2.2 <a
target="_blank" rel="noopener" href="https://hailo.ai/products/ai-accelerators/">Hailo AI
Accelerators</a> On <a
target="_blank" rel="noopener" href="https://www.aliexpress.com/item/1005007204267297.html">Geekbord
X1005</a></h3>
<p>I’ll give it a go with <a
target="_blank" rel="noopener" href="https://hailo.ai/products/ai-accelerators/">Hailo AI
Accelerators</a> some time soon. Please refer to my new blog <a
href="../../../../../../2024/10/28/AI/EdgeComputing/raspberry-pi-5-hailo/">Raspberry
Pi 5 + Hailo AI</a>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Nobody</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
