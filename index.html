<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"longervision.ca","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Longer Vision Technology Github Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Longer Vision Technology">
<meta property="og:url" content="http://longervision.ca/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="Longer Vision Technology Github Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Longer Vision, Computer Vision, AI, Machine Learning">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://longervision.ca/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Longer Vision Technology</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Longer Vision Technology</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Github Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">Longer Vision Technology Github Blog</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">147</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">41</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">137</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/09/AI/DeepLearning/YOLOv11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/09/AI/DeepLearning/YOLOv11/" class="post-title-link" itemprop="url">YOLOv11</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2024-10-09 01:09:17 / Modified: 02:00:09" itemprop="dateCreated datePublished" datetime="2024-10-09T01:09:17-07:00">2024-10-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/DeepLearning/" itemprop="url" rel="index"><span itemprop="name">DeepLearning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a> was
just out for a couple of days. People keep talking about its terrrific
performance. Today, let me have some fun.</p>
<h1 id="yolov11-server-app">1. <a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a> Server
App</h1>
<p>A <a target="_blank" rel="noopener" href="https://flask.palletsprojects.com/en">Flask</a>
implementation is obtained from <a
target="_blank" rel="noopener" href="https://chatgpt.com/">ChatGPT</a>:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/lvt_yolo11_server_app.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/lvt_yolo11_server_app.png"
alt="LVT YOLOv11 Server App" /></a></p>
<h1 id="demonstration-from-client-requests">2. Demonstration From Client
Requests</h1>
<h2 id="commands">2.1 Commands</h2>
<p>Corresponding to the 5 tasks summarized on <a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a>, the
results of client requests is demonstrated as:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/yolov_5endpoints.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/yolov_5endpoints.png"
alt="LVT YOLOv11 5 EndPoints Requests" /></a></p>
<h2 id="resultant-images-on-server">2.2 Resultant Images On Server</h2>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Original Image</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/detect/">YOLO
Detection</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/bus.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/bus.jpg"
alt="Original Image" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/detect_result_20241009_012854.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/detect_result_20241009_012854.jpg"
alt="Detection Result" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/segment/">YOLO
Segmentation</a></th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/pose/">YOLO Pose</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/segment_result_20241009_012835.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/segment_result_20241009_012835.jpg"
alt="Segmentation Boundaries" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/keypoints_result_20241009_012908.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/keypoints_result_20241009_012908.jpg"
alt="Pose Keypoints" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/obb/">YOLO Oriented
Detection</a></th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://docs.ultralytics.com/tasks/classify/">YOLO
Classification</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/oriented_detect_result_20241009_012916.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/oriented_detect_result_20241009_012916.jpg"
alt="Oriented Detection" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/endpoint_classify.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/YOLO/endpoint_classify.png"
alt="Classfication Json" /></a></td>
</tr>
</tbody>
</table>
<p><strong><span style="color:red">Let me try to provide such a service
as public asap.</span></strong>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/06/AI/DeepLearning/TorchServe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/06/AI/DeepLearning/TorchServe/" class="post-title-link" itemprop="url">TorchServe</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-06 23:55:34" itemprop="dateCreated datePublished" datetime="2024-10-06T23:55:34-07:00">2024-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-07 01:40:06" itemprop="dateModified" datetime="2024-10-07T01:40:06-07:00">2024-10-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/DeepLearning/" itemprop="url" rel="index"><span itemprop="name">DeepLearning</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Peace. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Jesus">Jesus</a>. I'd
recommend you <a target="_blank" rel="noopener" href="https://www.thebible.studio/">The Bible
Studio</a>.</p>
<p>Today, I'd love to have some fun of <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a>.</p>
<h1 id="torchserve-getting-started">1. <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/getting_started.html">TorchServe Getting
Started</a></h1>
<p>Please just follow <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/getting_started.html">TorchServe Getting
Started</a>, with trivial modifications. In my demonstration, I stick to
working under directory <code>/opt/servers/torchserve</code>.</p>
<h2 id="clone-torchserve">1.1 Clone <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âžœ  torchserve git clone https://github.com/pytorch/serve.git        </span><br><span class="line">Cloning into &#x27;serve&#x27;...</span><br><span class="line">remote: Enumerating objects: 60508, done.</span><br><span class="line">remote: Counting objects: 100% (25/25), done.</span><br><span class="line">remote: Compressing objects: 100% (25/25), done.</span><br><span class="line">remote: Total 60508 (delta 6), reused 3 (delta 0), pack-reused 60483 (from 1)</span><br><span class="line">Receiving objects: 100% (60508/60508), 99.06 MiB | 23.01 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (37656/37656), done.</span><br></pre></td></tr></table></figure>
<h2 id="store-a-model">1.2 Store a Model</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">âžœ  torchserve mkdir model_store</span><br><span class="line">âžœ  torchserve wget https://download.pytorch.org/models/densenet161-8d451a50.pth</span><br><span class="line">--2024-10-07 00:35:54--  https://download.pytorch.org/models/densenet161-8d451a50.pth</span><br><span class="line">Resolving download.pytorch.org (download.pytorch.org)... 2600:9000:26ce:7a00:d:607e:4540:93a1, 2600:9000:26ce:6e00:d:607e:4540:93a1, 2600:9000:26ce:3400:d:607e:4540:93a1, ...</span><br><span class="line">Connecting to download.pytorch.org (download.pytorch.org)|2600:9000:26ce:7a00:d:607e:4540:93a1|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 115730790 (110M) [application/x-www-form-urlencoded]</span><br><span class="line">Saving to: â€˜densenet161-8d451a50.pthâ€™</span><br><span class="line"></span><br><span class="line">densenet161-8d451a50.pth                                       100%[==================================================================================================================================================&gt;] 110.37M   109MB/s    in 1.0s    </span><br><span class="line"></span><br><span class="line">2024-10-07 00:35:55 (109 MB/s) - â€˜densenet161-8d451a50.pthâ€™ saved [115730790/115730790]</span><br><span class="line">âžœ  torchserve torch-model-archiver --model-name densenet161 --version 1.0 --model-file ./serve/examples/image_classifier/densenet_161/model.py --serialized-file densenet161-8d451a50.pth --export-path model_store --extra-files ./serve/examples/image_classifier/index_to_name.json --handler image_classifier</span><br><span class="line">âžœ  torchserve ll model_store</span><br><span class="line">total 106M</span><br><span class="line">4.0K drwxrwxr-x 2 lvision lvision 4.0K Oct  7 00:36 ./</span><br><span class="line">4.0K drwxrwxr-x 5 lvision lvision 4.0K Oct  7 00:35 ../</span><br><span class="line">106M -rw-rw-r-- 1 lvision lvision 106M Oct  7 00:36 densenet161.mar</span><br></pre></td></tr></table></figure>
<h2 id="start-torchserve">1.3 Start <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a></h2>
<h3 id="config.properties">1.3.1 <code>config.properties</code></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">âžœ  torchserve cat config.properties </span><br><span class="line">inference_address=http://127.0.0.1:8080</span><br><span class="line">management_address=http://127.0.0.1:8081</span><br><span class="line">metrics_address=http://127.0.0.1:8082</span><br><span class="line">enable_token_auth=true</span><br><span class="line">ts.key.file=/opt/servers/torchserve/key_file.json</span><br><span class="line">log_location=/opt/servers/torchserve/logs</span><br><span class="line">metrics_location=/opt/servers/torchserve/logs</span><br><span class="line">access_log_location=/opt/servers/torchserve/logs</span><br></pre></td></tr></table></figure>
<h3 id="start-torchserve-to-serve-the-model">1.3.2 Start <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a> to serve the
model</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">âžœ  torchserve torchserve --start --ncs --model-store model_store --models densenet161.mar</span><br><span class="line">âžœ  torchserve WARNING: sun.reflect.Reflection.getCallerClass is not supported. This will impact performance.</span><br><span class="line">2024-10-07T00:38:23,323 [DEBUG] main org.pytorch.serve.util.ConfigManager - xpu-smi not available or failed: Cannot run program &quot;xpu-smi&quot;: error=2, No such file or directory</span><br><span class="line">2024-10-07T00:38:23,326 [WARN ] main org.pytorch.serve.util.ConfigManager - Your torchserve instance can access any URL to load models. When deploying to production, make sure to limit the set of allowed_urls in config.properties</span><br><span class="line">2024-10-07T00:38:23,361 [INFO ] main org.pytorch.serve.util.TokenAuthorization - </span><br><span class="line">######</span><br><span class="line">TorchServe now enforces token authorization by default.</span><br><span class="line">This requires the correct token to be provided when calling an API.</span><br><span class="line">Key file located at /opt/servers/torchserve/key_file.json</span><br><span class="line">Check token authorization documenation for information: https://github.com/pytorch/serve/blob/master/docs/token_authorization_api.md </span><br><span class="line">######</span><br><span class="line"></span><br><span class="line">2024-10-07T00:38:23,361 [INFO ] main org.pytorch.serve.servingsdk.impl.PluginsManager - Initializing plugins manager...</span><br><span class="line">2024-10-07T00:38:23,399 [INFO ] main org.pytorch.serve.metrics.configuration.MetricConfiguration - Successfully loaded metrics configuration from /home/lvision/.local/lib/python3.12/site-packages/ts/configs/metrics.yaml</span><br><span class="line">2024-10-07T00:38:23,484 [INFO ] main org.pytorch.serve.ModelServer - </span><br><span class="line">Torchserve version: 0.12.0</span><br><span class="line">TS Home: /home/lvision/.local/lib/python3.12/site-packages</span><br><span class="line">Current directory: /opt/servers/torchserve</span><br><span class="line">Temp directory: /tmp</span><br><span class="line">Metrics config path: /home/lvision/.local/lib/python3.12/site-packages/ts/configs/metrics.yaml</span><br><span class="line">Number of GPUs: 1</span><br><span class="line">Number of CPUs: 48</span><br><span class="line">Max heap size: 30208 M</span><br><span class="line">Python executable: /usr/bin/python3</span><br><span class="line">Config file: config.properties</span><br><span class="line">Inference address: http://127.0.0.1:8080</span><br><span class="line">Management address: http://127.0.0.1:8081</span><br><span class="line">Metrics address: http://127.0.0.1:8082</span><br><span class="line">Model Store: /opt/servers/torchserve/model_store</span><br><span class="line">Initial Models: densenet161.mar</span><br><span class="line">Log dir: /opt/servers/torchserve/logs</span><br><span class="line">Metrics dir: /opt/servers/torchserve/logs</span><br><span class="line">Netty threads: 0</span><br><span class="line">Netty client threads: 0</span><br><span class="line">Default workers per model: 1</span><br><span class="line">Blacklist Regex: N/A</span><br><span class="line">Maximum Response Size: 6553500</span><br><span class="line">Maximum Request Size: 6553500</span><br><span class="line">Limit Maximum Image Pixels: true</span><br><span class="line">Prefer direct buffer: false</span><br><span class="line">Allowed Urls: [file://.*|http(s)?://.*]</span><br><span class="line">Custom python dependency for model allowed: false</span><br><span class="line">Enable metrics API: true</span><br><span class="line">Metrics mode: LOG</span><br><span class="line">Disable system metrics: false</span><br><span class="line">Workflow Store: /opt/servers/torchserve/model_store</span><br><span class="line">CPP log config: N/A</span><br><span class="line">Model config: N/A</span><br><span class="line">System metrics command: default</span><br><span class="line">Model API enabled: false</span><br><span class="line">2024-10-07T00:38:23,491 [INFO ] main org.pytorch.serve.servingsdk.impl.PluginsManager -  Loading snapshot serializer plugin...</span><br><span class="line">2024-10-07T00:38:23,492 [INFO ] main org.pytorch.serve.ModelServer - Loading initial models: densenet161.mar</span><br><span class="line">2024-10-07T00:38:24,521 [DEBUG] main org.pytorch.serve.wlm.ModelVersionedRefs - Adding new version 1.0 for model densenet161</span><br><span class="line">2024-10-07T00:38:24,521 [DEBUG] main org.pytorch.serve.wlm.ModelVersionedRefs - Setting default version to 1.0 for model densenet161</span><br><span class="line">2024-10-07T00:38:24,521 [INFO ] main org.pytorch.serve.wlm.ModelManager - Model densenet161 loaded.</span><br><span class="line">2024-10-07T00:38:24,521 [DEBUG] main org.pytorch.serve.wlm.ModelManager - updateModel: densenet161, count: 1</span><br><span class="line">2024-10-07T00:38:24,526 [INFO ] main org.pytorch.serve.ModelServer - Initialize Inference server with: EpollServerSocketChannel.</span><br><span class="line">2024-10-07T00:38:24,527 [DEBUG] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerLifeCycle - Worker cmdline: [/usr/bin/python3, /home/lvision/.local/lib/python3.12/site-packages/ts/model_service_worker.py, --sock-type, unix, --sock-name, /tmp/.ts.sock.9000, --metrics-config, /home/lvision/.local/lib/python3.12/site-packages/ts/configs/metrics.yaml]</span><br><span class="line">2024-10-07T00:38:24,568 [INFO ] main org.pytorch.serve.ModelServer - Inference API bind to: http://127.0.0.1:8080</span><br><span class="line">2024-10-07T00:38:24,568 [INFO ] main org.pytorch.serve.ModelServer - Initialize Management server with: EpollServerSocketChannel.</span><br><span class="line">2024-10-07T00:38:24,569 [INFO ] main org.pytorch.serve.ModelServer - Management API bind to: http://127.0.0.1:8081</span><br><span class="line">2024-10-07T00:38:24,570 [INFO ] main org.pytorch.serve.ModelServer - Initialize Metrics server with: EpollServerSocketChannel.</span><br><span class="line">2024-10-07T00:38:24,570 [INFO ] main org.pytorch.serve.ModelServer - Metrics API bind to: http://127.0.0.1:8082</span><br><span class="line">Model server started.</span><br><span class="line">2024-10-07T00:38:24,720 [WARN ] pool-3-thread-1 org.pytorch.serve.metrics.MetricCollector - worker pid is not available yet.</span><br><span class="line">2024-10-07T00:38:25,152 [INFO ] pool-3-thread-1 TS_METRICS - CPUUtilization.Percent:20.0|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - DiskAvailable.Gigabytes:1412.4598426818848|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - DiskUsage.Gigabytes:215.69704055786133|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - DiskUtilization.Percent:13.2|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - GPUMemoryUtilization.Percent:2.5472005208333335|#Level:Host,DeviceId:0|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,153 [INFO ] pool-3-thread-1 TS_METRICS - GPUMemoryUsed.Megabytes:626.0|#Level:Host,DeviceId:0|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,154 [INFO ] pool-3-thread-1 TS_METRICS - GPUUtilization.Percent:0.0|#Level:Host,DeviceId:0|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,154 [INFO ] pool-3-thread-1 TS_METRICS - MemoryAvailable.Megabytes:248234.90625|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,154 [INFO ] pool-3-thread-1 TS_METRICS - MemoryUsed.Megabytes:6890.875|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,154 [INFO ] pool-3-thread-1 TS_METRICS - MemoryUtilization.Percent:3.6|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286705</span><br><span class="line">2024-10-07T00:38:25,632 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - s_name_part0=/tmp/.ts.sock, s_name_part1=9000, pid=62344</span><br><span class="line">2024-10-07T00:38:25,636 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Listening on port: /tmp/.ts.sock.9000</span><br><span class="line">2024-10-07T00:38:25,637 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Successfully loaded /home/lvision/.local/lib/python3.12/site-packages/ts/configs/metrics.yaml.</span><br><span class="line">2024-10-07T00:38:25,637 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - [PID]62344</span><br><span class="line">2024-10-07T00:38:25,637 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Torch worker started.</span><br><span class="line">2024-10-07T00:38:25,637 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Python runtime: 3.12.3</span><br><span class="line">2024-10-07T00:38:25,638 [DEBUG] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - W-9000-densenet161_1.0 State change null -&gt; WORKER_STARTED</span><br><span class="line">2024-10-07T00:38:25,641 [INFO ] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - Connecting to: /tmp/.ts.sock.9000</span><br><span class="line">2024-10-07T00:38:25,646 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Connection accepted: /tmp/.ts.sock.9000.</span><br><span class="line">2024-10-07T00:38:25,648 [DEBUG] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - Flushing req.cmd LOAD repeats 1 to backend at: 1728286705648</span><br><span class="line">2024-10-07T00:38:25,649 [INFO ] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - Looping backend response at: 1728286705649</span><br><span class="line">2024-10-07T00:38:25,674 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - model_name: densenet161, batchSize: 1</span><br><span class="line">2024-10-07T00:38:26,881 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Enabled tensor cores</span><br><span class="line">2024-10-07T00:38:26,882 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - OpenVINO is not enabled</span><br><span class="line">2024-10-07T00:38:26,882 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - proceeding without onnxruntime</span><br><span class="line">2024-10-07T00:38:26,882 [INFO ] W-9000-densenet161_1.0-stdout MODEL_LOG - Torch TensorRT not enabled</span><br><span class="line">2024-10-07T00:38:27,263 [WARN ] W-9000-densenet161_1.0-stderr MODEL_LOG - /home/lvision/.local/lib/python3.12/site-packages/ts/torch_handler/base_handler.py:355: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don&#x27;t have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.</span><br><span class="line">2024-10-07T00:38:27,264 [WARN ] W-9000-densenet161_1.0-stderr MODEL_LOG -   state_dict = torch.load(model_pt_path, map_location=map_location)</span><br><span class="line">2024-10-07T00:38:27,564 [INFO ] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - Backend response time: 1915</span><br><span class="line">2024-10-07T00:38:27,564 [DEBUG] W-9000-densenet161_1.0 org.pytorch.serve.wlm.WorkerThread - W-9000-densenet161_1.0 State change WORKER_STARTED -&gt; WORKER_MODEL_LOADED</span><br><span class="line">2024-10-07T00:38:27,565 [INFO ] W-9000-densenet161_1.0 TS_METRICS - WorkerLoadTime.Milliseconds:3041.0|#WorkerName:W-9000-densenet161_1.0,Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286707</span><br><span class="line">2024-10-07T00:38:27,565 [INFO ] W-9000-densenet161_1.0 TS_METRICS - WorkerThreadTime.Milliseconds:2.0|#Level:Host|#hostname:lvision-MS-7C60,timestamp:1728286707</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="key_file.json">1.3.3 <code>key_file.json</code></h3>
<p>By running the above command, a <code>key_file.json</code> file is
generated under the current working directory (Please refer to <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/token_authorization_api.html">TorchServe
token authorization API</a>):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">âžœ  torchserve ll key_file.json</span><br><span class="line">4.0K -rw------- 1 lvision lvision 243 Oct  7 00:38 key_file.json</span><br><span class="line">âžœ  torchserve cat key_file.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;management&quot;: &#123;</span><br><span class="line">    &quot;key&quot;: &quot;c_7-MgUE&quot;,</span><br><span class="line">    &quot;expiration time&quot;: &quot;2024-10-07T08:38:23.343462778Z&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inference&quot;: &#123;</span><br><span class="line">    &quot;key&quot;: &quot;IMc5oeRf&quot;,</span><br><span class="line">    &quot;expiration time&quot;: &quot;2024-10-07T08:38:23.343456097Z&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;API&quot;: &#123;</span><br><span class="line">    &quot;key&quot;: &quot;_tFv4L56&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;% </span><br></pre></td></tr></table></figure>
<h3 id="is-torchserve-service-running">1.3.4 Is <a
target="_blank" rel="noopener" href="https://pytorch.org/serve/index.html">TorchServe</a> Service
Running?</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ~ curl -H &quot;Authorization: Bearer c_7-MgUE&quot; http://127.0.0.1:8081/models</span><br><span class="line">&#123;</span><br><span class="line">  &quot;models&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;modelName&quot;: &quot;densenet161&quot;,</span><br><span class="line">      &quot;modelUrl&quot;: &quot;densenet161.mar&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="get-predictions">1.4 Get Predictions</h2>
<h3 id="using-rest-apis">1.4.1 Using <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/REST">REST</a> APIs</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âžœ  torchserve curl -O https://raw.githubusercontent.com/pytorch/serve/master/docs/images/kitten_small.jpg</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  7341  100  7341    0     0  28980      0 --:--:-- --:--:-- --:--:-- 29015</span><br></pre></td></tr></table></figure>
<p>Let's take a look:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/PyTorch/kitten_small.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/AI/PyTorch/kitten_small.jpg"
alt="kitten" /></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âžœ  torchserve curl -H &quot;Authorization: Bearer IMc5oeRf&quot; http://127.0.0.1:8080/predictions/densenet161 -T kitten_small.jpg</span><br><span class="line">&#123;</span><br><span class="line">  &quot;tabby&quot;: 0.47793325781822205,</span><br><span class="line">  &quot;lynx&quot;: 0.20019005239009857,</span><br><span class="line">  &quot;tiger_cat&quot;: 0.16827784478664398,</span><br><span class="line">  &quot;tiger&quot;: 0.062009651213884354,</span><br><span class="line">  &quot;Egyptian_cat&quot;: 0.05115227773785591</span><br><span class="line">&#125;%</span><br></pre></td></tr></table></figure>
<h3 id="using-grpc-apis-through-python-client">1.4.2 Using <a
target="_blank" rel="noopener" href="https://grpc.io/">gRPC</a> APIs through Python Client</h3>
<h4 id="install-grpc-python-dependencies">1.4.2.1 Install <a
target="_blank" rel="noopener" href="https://grpc.io/">gRPC</a> Python dependencies</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U grpcio protobuf grpcio-tools googleapis-common-protos</span><br></pre></td></tr></table></figure>
<h4 id="generate-inference-client-using-proto-files">1.4.2.2 Generate
inference client using proto files</h4>
<p><strong><span style="color:red">Must under folder
<code>serve</code></span></strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âžœ  torchserve cd serve</span><br></pre></td></tr></table></figure>
<p>Then,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âžœ  serve git:(master) python -m grpc_tools.protoc --proto_path=frontend/server/src/main/resources/proto/ --python_out=ts_scripts --grpc_python_out=ts_scripts frontend/server/src/main/resources/proto/inference.proto frontend/server/src/main/resources/proto/management.proto</span><br><span class="line">google/rpc/status.proto: File not found.</span><br><span class="line">inference.proto:6:1: Import &quot;google/rpc/status.proto&quot; was not found or had errors.</span><br><span class="line">inference.proto:32:14: &quot;google.rpc.Status&quot; is not defined.</span><br></pre></td></tr></table></figure>
<strong><span style="color:red">Why????</span></strong>
<div style="text-align: center; font-size: 3em;">
<pre><code>ðŸ˜žðŸ˜¢ðŸ˜­</code></pre>
</div>
<p><strong><span style="color:red">Solution:</span></strong>:</p>
<ul>
<li><strong><span style="color:red">Step 1: Clone <a
target="_blank" rel="noopener" href="https://github.com/googleapis/googleapis">Google
APIs</a></span></strong>:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">âžœ  serve git:(master) git clone https://github.com/googleapis/googleapis.git</span><br><span class="line"></span><br><span class="line">Cloning into &#x27;googleapis&#x27;...</span><br><span class="line">remote: Enumerating objects: 233669, done.</span><br><span class="line">remote: Counting objects: 100% (13457/13457), done.</span><br><span class="line">remote: Compressing objects: 100% (410/410), done.</span><br><span class="line">remote: Total 233669 (delta 13122), reused 13077 (delta 13042), pack-reused 220212 (from 1)</span><br><span class="line">Receiving objects: 100% (233669/233669), 205.13 MiB | 21.65 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (196982/196982), done.</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><span style="color:red">Step 2: Generate inference client
using <a target="_blank" rel="noopener" href="https://github.com/googleapis/googleapis">Google
APIs</a>'s necessary <code>.proto</code> files</span></strong>:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âžœ  serve git:(master) âœ— python -m grpc_tools.protoc \</span><br><span class="line">  --proto_path=frontend/server/src/main/resources/proto/ \</span><br><span class="line">  --proto_path=googleapis/ \</span><br><span class="line">  --python_out=ts_scripts \</span><br><span class="line">  --grpc_python_out=ts_scripts \</span><br><span class="line">  frontend/server/src/main/resources/proto/inference.proto \</span><br><span class="line">  frontend/server/src/main/resources/proto/management.proto</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><span style="color:red">Step 3: Modify
<code>ts_scripts/torchserve_grpc_client.py</code> as
follows</span></strong>:</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> grpc</span><br><span class="line"><span class="keyword">import</span> inference_pb2</span><br><span class="line"><span class="keyword">import</span> inference_pb2_grpc</span><br><span class="line"><span class="keyword">import</span> management_pb2</span><br><span class="line"><span class="keyword">import</span> management_pb2_grpc</span><br><span class="line"></span><br><span class="line"><span class="comment"># Function to get an inference stub for making gRPC calls to the inference service.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_inference_stub</span>():</span><br><span class="line">    channel = grpc.insecure_channel(<span class="string">&quot;localhost:7070&quot;</span>)</span><br><span class="line">    stub = inference_pb2_grpc.InferenceAPIsServiceStub(channel)</span><br><span class="line">    <span class="keyword">return</span> stub</span><br><span class="line"></span><br><span class="line"><span class="comment"># Function to get a management stub for making gRPC calls to the model management service.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_management_stub</span>():</span><br><span class="line">    channel = grpc.insecure_channel(<span class="string">&quot;localhost:7071&quot;</span>)</span><br><span class="line">    stub = management_pb2_grpc.ManagementAPIsServiceStub(channel)</span><br><span class="line">    <span class="keyword">return</span> stub</span><br><span class="line"></span><br><span class="line"><span class="comment"># Perform a single inference call.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">infer</span>(<span class="params">stub, model_name, model_input, metadata</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(model_input, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line"></span><br><span class="line">    input_data = &#123;<span class="string">&quot;data&quot;</span>: data&#125;</span><br><span class="line">    response = stub.Predictions(</span><br><span class="line">        inference_pb2.PredictionsRequest(model_name=model_name, <span class="built_in">input</span>=input_data),</span><br><span class="line">        metadata=metadata,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        prediction = response.prediction.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(prediction)</span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;gRPC error: <span class="subst">&#123;e.details()&#125;</span>&quot;</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Perform streaming inference.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">infer_stream</span>(<span class="params">stub, model_name, model_input, metadata</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(model_input, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line"></span><br><span class="line">    input_data = &#123;<span class="string">&quot;data&quot;</span>: data&#125;</span><br><span class="line">    responses = stub.StreamPredictions(</span><br><span class="line">        inference_pb2.PredictionsRequest(model_name=model_name, <span class="built_in">input</span>=input_data),</span><br><span class="line">        metadata=metadata,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">for</span> resp <span class="keyword">in</span> responses:</span><br><span class="line">            prediction = resp.prediction.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(prediction)</span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;gRPC error: <span class="subst">&#123;e.details()&#125;</span>&quot;</span>)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Perform an advanced streaming inference with multiple input files.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">infer_stream2</span>(<span class="params">model_name, sequence_id, input_files, metadata</span>):</span><br><span class="line">    response_queue = queue.Queue()</span><br><span class="line">    process_response_func = partial(</span><br><span class="line">        InferStream2.default_process_response, response_queue</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    client = InferStream2SimpleClient()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        client.start_stream(</span><br><span class="line">            model_name=model_name,</span><br><span class="line">            sequence_id=sequence_id,</span><br><span class="line">            process_response=process_response_func,</span><br><span class="line">            metadata=metadata,</span><br><span class="line">        )</span><br><span class="line">        sequence = input_files.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> input_file <span class="keyword">in</span> sequence:</span><br><span class="line">            client.async_send_infer(input_file.strip())</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(sequence)):</span><br><span class="line">            response = response_queue.get()</span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">str</span>(response))</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Sequence completed!&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;infer_stream2 received error&quot;</span>, e)</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        client.stop_stream()</span><br><span class="line">        client.stop()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Register a new model with TorchServe.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>(<span class="params">stub, model_name, mar_set_str, metadata</span>):</span><br><span class="line">    mar_set = <span class="built_in">set</span>()</span><br><span class="line">    <span class="keyword">if</span> mar_set_str:</span><br><span class="line">        mar_set = <span class="built_in">set</span>(mar_set_str.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    marfile = <span class="string">f&quot;<span class="subst">&#123;model_name&#125;</span>.mar&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;## Check <span class="subst">&#123;marfile&#125;</span> in mar_set :&quot;</span>, mar_set)</span><br><span class="line">    <span class="keyword">if</span> marfile <span class="keyword">not</span> <span class="keyword">in</span> mar_set:</span><br><span class="line">        marfile = <span class="string">&quot;https://torchserve.s3.amazonaws.com/mar_files/&#123;&#125;.mar&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">            model_name</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;## Register marfile: <span class="subst">&#123;marfile&#125;</span>\n&quot;</span>)</span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: marfile,</span><br><span class="line">        <span class="string">&quot;initial_workers&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;synchronous&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&quot;model_name&quot;</span>: model_name,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = stub.RegisterModel(</span><br><span class="line">            management_pb2.RegisterModelRequest(**params), metadata=metadata</span><br><span class="line">        )</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Model <span class="subst">&#123;model_name&#125;</span> registered successfully&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Failed to register model <span class="subst">&#123;model_name&#125;</span>.&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(e.details()))</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Unregister a model from TorchServe.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">unregister</span>(<span class="params">stub, model_name, metadata</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = stub.UnregisterModel(</span><br><span class="line">            management_pb2.UnregisterModelRequest(model_name=model_name),</span><br><span class="line">            metadata=metadata,</span><br><span class="line">        )</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Model <span class="subst">&#123;model_name&#125;</span> unregistered successfully&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> grpc.RpcError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Failed to unregister model <span class="subst">&#123;model_name&#125;</span>.&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">str</span>(e.details()))</span><br><span class="line">        exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># The rest of the code defines the streaming classes and the command-line interface.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># Argument parsing for the script</span></span><br><span class="line">    parent_parser = argparse.ArgumentParser(add_help=<span class="literal">False</span>)</span><br><span class="line">    parent_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;model_name&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Name of the model used.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    parent_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;--auth-token&quot;</span>,</span><br><span class="line">        dest=<span class="string">&quot;auth_token&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        required=<span class="literal">False</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Authorization token&quot;</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    parser = argparse.ArgumentParser(</span><br><span class="line">        description=<span class="string">&quot;TorchServe gRPC client&quot;</span>,</span><br><span class="line">        formatter_class=argparse.RawTextHelpFormatter,</span><br><span class="line">    )</span><br><span class="line">    subparsers = parser.add_subparsers(<span class="built_in">help</span>=<span class="string">&quot;Action&quot;</span>, dest=<span class="string">&quot;action&quot;</span>)</span><br><span class="line"></span><br><span class="line">    infer_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;infer&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">    infer_stream_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;infer_stream&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">    infer_stream2_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;infer_stream2&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">    register_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;register&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">    unregister_action_parser = subparsers.add_parser(</span><br><span class="line">        <span class="string">&quot;unregister&quot;</span>, parents=[parent_parser], add_help=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Arguments for different actions</span></span><br><span class="line">    infer_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;model_input&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=<span class="literal">None</span>, <span class="built_in">help</span>=<span class="string">&quot;Input for model for inference.&quot;</span></span><br><span class="line">    )</span><br><span class="line">    infer_stream_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;model_input&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Input for model for stream inference.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    infer_stream2_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;sequence_id&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Input for sequence id for stream inference.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    infer_stream2_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;input_files&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Comma separated list of input files&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    register_action_parser.add_argument(</span><br><span class="line">        <span class="string">&quot;mar_set&quot;</span>,</span><br><span class="line">        <span class="built_in">type</span>=<span class="built_in">str</span>,</span><br><span class="line">        default=<span class="literal">None</span>,</span><br><span class="line">        nargs=<span class="string">&quot;?&quot;</span>,</span><br><span class="line">        <span class="built_in">help</span>=<span class="string">&quot;Comma separated list of mar models to be loaded using [model_name=]model_location format.&quot;</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Parse command line arguments</span></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Create metadata with or without the authorization token</span></span><br><span class="line">    <span class="keyword">if</span> args.auth_token:</span><br><span class="line">        metadata = (</span><br><span class="line">            (<span class="string">&quot;protocol&quot;</span>, <span class="string">&quot;gRPC&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;session_id&quot;</span>, <span class="string">&quot;12345&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;authorization&quot;</span>, <span class="string">f&quot;Bearer <span class="subst">&#123;args.auth_token&#125;</span>&quot;</span>),</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        metadata = ((<span class="string">&quot;protocol&quot;</span>, <span class="string">&quot;gRPC&quot;</span>), (<span class="string">&quot;session_id&quot;</span>, <span class="string">&quot;12345&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Perform the selected action</span></span><br><span class="line">    <span class="keyword">if</span> args.action == <span class="string">&quot;infer&quot;</span>:</span><br><span class="line">        infer(get_inference_stub(), args.model_name, args.model_input, metadata)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&quot;infer_stream&quot;</span>:</span><br><span class="line">        infer_stream(get_inference_stub(), args.model_name, args.model_input, metadata)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&quot;infer_stream2&quot;</span>:</span><br><span class="line">        infer_stream2(args.model_name, args.sequence_id, args.input_files, metadata)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&quot;register&quot;</span>:</span><br><span class="line">        register(get_management_stub(), args.model_name, args.mar_set, metadata)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&quot;unregister&quot;</span>:</span><br><span class="line">        unregister(get_management_stub(), args.model_name, metadata)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><span style="color:red">Step 4: Run inference using a sample
client gRPC python client</span></strong>:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">âžœ  serve git:(master) âœ— python ts_scripts/torchserve_grpc_client.py infer --auth-token IMc5oeRf densenet161 examples/image_classifier/kitten.jpg</span><br><span class="line"></span><br><span class="line">/home/lvision/.local/lib/python3.12/site-packages/google/protobuf/runtime_version.py:112: UserWarning: Protobuf gencode version 5.27.2 is older than the runtime version 5.28.2 at inference.proto. Please avoid checked-in Protobuf gencode that can be obsolete.</span><br><span class="line">  warnings.warn(</span><br><span class="line">/home/lvision/.local/lib/python3.12/site-packages/google/protobuf/runtime_version.py:112: UserWarning: Protobuf gencode version 5.27.2 is older than the runtime version 5.28.2 at management.proto. Please avoid checked-in Protobuf gencode that can be obsolete.</span><br><span class="line">  warnings.warn(</span><br><span class="line">&#123;</span><br><span class="line">  &quot;tabby&quot;: 0.46603792905807495,</span><br><span class="line">  &quot;tiger_cat&quot;: 0.4651001989841461,</span><br><span class="line">  &quot;Egyptian_cat&quot;: 0.06611046195030212,</span><br><span class="line">  &quot;lynx&quot;: 0.001293532201088965,</span><br><span class="line">  &quot;plastic_bag&quot;: 0.000228719727601856</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/10/01/OperatingSystems/LFS/linux-from-scratch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/01/OperatingSystems/LFS/linux-from-scratch/" class="post-title-link" itemprop="url">Linux From Scratch</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-01 00:00:00" itemprop="dateCreated datePublished" datetime="2024-10-01T00:00:00-07:00">2024-10-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-02 04:24:52" itemprop="dateModified" datetime="2024-10-02T04:24:52-07:00">2024-10-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Linux-From-Scratch/" itemprop="url" rel="index"><span itemprop="name">Linux From Scratch</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/China/China_75th_Celebration.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/China/China_75th_Celebration.jpg"
alt="China&#39;s 75th National Day" /></a></p>
<p>Today, it's <strong>China's 75th Birthday</strong>. Let me join the
celebration. And, today, I'm going to build up a customized <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Linux">Linux</a> operating system by
following <a target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/">Linux From
Scratch</a>, with <strong><span style="color:red">the MOST up-to-date <a
target="_blank" rel="noopener" href="https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.11.1.tar.xz">kernel
6.11.1</a></span></strong>.</p>
<h1 id="preparation">1. Preparation</h1>
<h2 id="create-a-disk-image-file">1.1 Create a Disk Image File</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âžœ  repo dd if=/dev/zero of=./lfs.img bs=1M count=65536 </span><br><span class="line">65536+0 records in</span><br><span class="line">65536+0 records out</span><br><span class="line">68719476736 bytes (69 GB, 64 GiB) copied, 114.926 s, 598 MB/s</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âžœ  repo ll lfs.img</span><br><span class="line">65G -rw-rw-r-- 1 lvision lvision 64G Oct  1 00:01 lfs.img</span><br></pre></td></tr></table></figure>
<h2 id="format-the-disk-image">1.2 Format the Disk Image</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">âžœ  repo mkfs.ext4 lfs.img</span><br><span class="line">mke2fs 1.47.0 (5-Feb-2023)</span><br><span class="line">Discarding device blocks: done                            </span><br><span class="line">Creating filesystem with 16777216 4k blocks and 4194304 inodes</span><br><span class="line">Filesystem UUID: 7cffdaf4-2fa9-4688-8269-5a60e637b887</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">	32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">	4096000, 7962624, 11239424</span><br><span class="line"></span><br><span class="line">Allocating group tables: done                            </span><br><span class="line">Writing inode tables: done                            </span><br><span class="line">Creating journal (131072 blocks): done</span><br><span class="line">Writing superblocks and filesystem accounting information: done  </span><br></pre></td></tr></table></figure>
<h2 id="mount-the-disk-image">1.3 Mount the Disk Image</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âžœ  repo sudo mount -o loop lfs.img /mnt/lfs</span><br><span class="line">âžœ  repo </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âžœ  lfs df -h /mnt/lfs</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/loop14      63G   27G   34G  45% /mnt/lfs</span><br></pre></td></tr></table></figure>
<h2 id="login-as-root">1.4 Login As Root</h2>
<p>From now on, we need to login as user <strong><span
style="color:red">root</span></strong>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âžœ  repo su - root                          </span><br><span class="line">Password: </span><br><span class="line">root@lvision-MS-7C60:~# </span><br></pre></td></tr></table></figure>
<h2 id="exports">1.5 Exports</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:~# export LFS=/mnt/lfs</span><br><span class="line">root@lvision-MS-7C60:~# export LFS_TGT=$(uname -m)-lfs-linux-gnu</span><br></pre></td></tr></table></figure>
<h2 id="download-source">1.6 Download Source</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:~# mkdir -v $LFS/sources</span><br><span class="line">mkdir: created directory &#x27;/sources&#x27;</span><br><span class="line">root@lvision-MS-7C60:~# chmod -v a+wt $LFS/sources</span><br><span class="line">mode of &#x27;/sources&#x27; changed from 0755 (rwxr-xr-x) to 1777 (rwxrwxrwt)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/docker/repo# wget --input-file=wget-list-sysv --continue --directory-prefix=$LFS/sources</span><br><span class="line">--2024-08-27 03:49:06--  https://download.savannah.gnu.org/releases/acl/acl-2.3.2.tar.xz</span><br><span class="line">Resolving download.savannah.gnu.org (download.savannah.gnu.org)... 2001:470:142:5::200, 209.51.188.200</span><br><span class="line">Connecting to download.savannah.gnu.org (download.savannah.gnu.org)|2001:470:142:5::200|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 302 Moved Temporarily</span><br><span class="line">Location: https://mirrors.ocf.berkeley.edu/nongnu/acl/acl-2.3.2.tar.xz [following]</span><br><span class="line">--2024-08-27 03:49:06--  https://mirrors.ocf.berkeley.edu/nongnu/acl/acl-2.3.2.tar.xz</span><br><span class="line">Resolving mirrors.ocf.berkeley.edu (mirrors.ocf.berkeley.edu)... 2607:f140:0:32::70, 169.229.200.70</span><br><span class="line">Connecting to mirrors.ocf.berkeley.edu (mirrors.ocf.berkeley.edu)|2607:f140:0:32::70|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 371680 (363K) [application/octet-stream]</span><br><span class="line">Saving to: â€˜/mnt/lfs/sources/acl-2.3.2.tar.xzâ€™</span><br><span class="line"></span><br><span class="line">acl-2.3.2.tar.xz                                          100%[====================================================================================================================================&gt;] 362.97K  --.-KB/s    in 0.1s    </span><br><span class="line"></span><br><span class="line">2024-08-27 03:49:07 (3.07 MB/s) - â€˜/mnt/lfs/sources/acl-2.3.2.tar.xzâ€™ saved [371680/371680]</span><br><span class="line"></span><br><span class="line">--2024-08-27 03:49:07--  https://download.savannah.gnu.org/releases/attr/attr-2.5.2.tar.gz</span><br><span class="line">Connecting to download.savannah.gnu.org (download.savannah.gnu.org)|2001:470:142:5::200|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 302 Moved Temporarily</span><br><span class="line">Location: https://nongnu.askapache.com/attr/attr-2.5.2.tar.gz [following]</span><br><span class="line">--2024-08-27 03:49:07--  https://nongnu.askapache.com/attr/attr-2.5.2.tar.gz</span><br><span class="line">Resolving nongnu.askapache.com (nongnu.askapache.com)... 50.87.145.190</span><br><span class="line">Connecting to nongnu.askapache.com (nongnu.askapache.com)|50.87.145.190|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 492539 (481K) [application/x-gzip]</span><br><span class="line">Saving to: â€˜/mnt/lfs/sources/attr-2.5.2.tar.gzâ€™</span><br><span class="line"></span><br><span class="line">attr-2.5.2.tar.gz                                         100%[====================================================================================================================================&gt;] 481.00K  2.13MB/s    in 0.2s    </span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">sysvinit-3.10-consolidated-1.patch                        100%[====================================================================================================================================&gt;]   2.41K  --.-KB/s    in 0s      </span><br><span class="line"></span><br><span class="line">2024-08-27 03:51:25 (2.39 GB/s) - â€˜/mnt/lfs/sources/sysvinit-3.10-consolidated-1.patchâ€™ saved [2464/2464]</span><br><span class="line"></span><br><span class="line">FINISHED --2024-08-27 03:51:25--</span><br><span class="line">Total wall clock time: 2m 20s</span><br><span class="line">Downloaded: 94 files, 519M in 1m 32s (5.67 MB/s)</span><br><span class="line">You have new mail in /var/mail/root</span><br><span class="line">root@lvision-MS-7C60:/mnt/docker/repo# </span><br></pre></td></tr></table></figure>
<h2 id="creating-a-limited-directory-layout-in-the-lfs-filesystem">1.7
Creating a Limited Directory Layout in the LFS Filesystem</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# mkdir -pv $LFS/&#123;etc,var&#125; $LFS/usr/&#123;bin,lib,sbin&#125;</span><br><span class="line"></span><br><span class="line">for i in bin lib sbin; do</span><br><span class="line">  ln -sv usr/$i $LFS/$i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">case $(uname -m) in</span><br><span class="line">  x86_64) mkdir -pv $LFS/lib64 ;;</span><br><span class="line">esac</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/etc&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/var&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/usr&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/usr/bin&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/usr/lib&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/usr/sbin&#x27;</span><br><span class="line">&#x27;/mnt/lfs/bin&#x27; -&gt; &#x27;usr/bin&#x27;</span><br><span class="line">&#x27;/mnt/lfs/lib&#x27; -&gt; &#x27;usr/lib&#x27;</span><br><span class="line">&#x27;/mnt/lfs/sbin&#x27; -&gt; &#x27;usr/sbin&#x27;</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/lib64&#x27;</span><br><span class="line">root@lvision-MS-7C60:/mnt/lfs# mkdir -pv $LFS/tools</span><br><span class="line">mkdir: created directory &#x27;/mnt/lfs/tools&#x27;</span><br><span class="line">root@lvision-MS-7C60:/mnt/lfs#</span><br></pre></td></tr></table></figure>
<h2 id="adding-the-lfs-user">1.8 Adding the LFS User</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# groupadd lfs</span><br><span class="line">useradd -s /bin/bash -g lfs -m -k /dev/null lfs</span><br><span class="line">groupadd: group &#x27;lfs&#x27; already exists</span><br><span class="line">useradd: user &#x27;lfs&#x27; already exists</span><br><span class="line">root@lvision-MS-7C60:/mnt/lfs# chown -v lfs $LFS/&#123;usr&#123;,/*&#125;,lib,var,etc,bin,sbin,tools&#125;</span><br><span class="line">case $(uname -m) in</span><br><span class="line">  x86_64) chown -v lfs $LFS/lib64 ;;</span><br><span class="line">esac</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/usr&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/usr/bin&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/usr/lib&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/usr/sbin&#x27; from root to lfs</span><br><span class="line">ownership of &#x27;/mnt/lfs/lib&#x27; retained as lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/var&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/etc&#x27; from root to lfs</span><br><span class="line">ownership of &#x27;/mnt/lfs/bin&#x27; retained as lfs</span><br><span class="line">ownership of &#x27;/mnt/lfs/sbin&#x27; retained as lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/tools&#x27; from root to lfs</span><br><span class="line">changed ownership of &#x27;/mnt/lfs/lib64&#x27; from root to lfs</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# su - lfs</span><br><span class="line">lfs@lvision-MS-7C60:~$ </span><br></pre></td></tr></table></figure>
<h1 id="building-the-lfs-cross-toolchain-and-temporary-tools">2.
Building the LFS Cross Toolchain and Temporary Tools</h1>
<p>Please just strictily follow:</p>
<ul>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter05/chapter05.html">LFS
Chapter 5 - Compiling a Cross-Toolchain</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter06/chapter06.html">LFS
Chapter 6 - Cross Compiling Temporary Tools</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter07/chapter07.html">LFS
Chapter 7 - Entering Chroot and Building Additional Temporary
Tools</a></li>
</ul>
<blockquote>
<p><strong><span style="color:red">[!Note:] One key point to be
emphasized: </span></strong> <strong><span style="color:red">Entering
<code>Chroot</code> for Chapter 7</span></strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chown --from lfs -R root:root $LFS/&#123;usr,lib,var,etc,bin,sbin,tools&#125;</span><br><span class="line">case $(uname -m) in</span><br><span class="line">  x86_64) chown --from lfs -R root:root $LFS/lib64 ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# mount -v --bind /dev $LFS/dev</span><br><span class="line">mount -vt devpts devpts -o gid=5,mode=0620 $LFS/dev/pts</span><br><span class="line">mount -vt proc proc $LFS/proc</span><br><span class="line">mount -vt sysfs sysfs $LFS/sys</span><br><span class="line">mount -vt tmpfs tmpfs $LFS/run</span><br><span class="line">mount: /dev bound on /mnt/lfs/dev.</span><br><span class="line">mount: devpts mounted on /mnt/lfs/dev/pts.</span><br><span class="line">mount: proc mounted on /mnt/lfs/proc.</span><br><span class="line">mount: sysfs mounted on /mnt/lfs/sys.</span><br><span class="line">mount: tmpfs mounted on /mnt/lfs/run.</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# if [ -h $LFS/dev/shm ]; then</span><br><span class="line">  install -v -d -m 1777 $LFS$(realpath /dev/shm)</span><br><span class="line">else</span><br><span class="line">  mount -vt tmpfs -o nosuid,nodev tmpfs $LFS/dev/shm</span><br><span class="line">fi</span><br><span class="line">mount: tmpfs mounted on /mnt/lfs/dev/shm.</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@lvision-MS-7C60:/mnt/lfs# chroot &quot;$LFS&quot; /usr/bin/env -i   \</span><br><span class="line">    HOME=/root                  \</span><br><span class="line">    TERM=&quot;$TERM&quot;                \</span><br><span class="line">    PS1=&#x27;(lfs chroot) \u:\w\$ &#x27; \</span><br><span class="line">    PATH=/usr/bin:/usr/sbin     \</span><br><span class="line">    MAKEFLAGS=&quot;-j$(nproc)&quot;      \</span><br><span class="line">    TESTSUITEFLAGS=&quot;-j$(nproc)&quot; \</span><br><span class="line">    /bin/bash --login</span><br><span class="line">(lfs chroot) root:/# </span><br></pre></td></tr></table></figure>
<h1 id="building-the-lfs-system">3. Building the LFS System</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter08/chapter08.html">LFS
Chapter 8 - Installing Basic System Software</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter09/chapter09.html">LFS
Chapter 9 - System Configuration</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter10/chapter10.html">LFS
Chapter 10 - Making the LFS System Bootable</a></li>
</ul>
<blockquote>
<p><strong><span style="color:red">[!Note:] Two bugs MUST be fixed:
</span></strong></p>
</blockquote>
<h2
id="fatal-error-getopt-cdefs.h-no-such-file-or-directory-in-lfs-chapter-8---8.35.-grep-3.11">3.1
<code>fatal error: getopt-cdefs.h: No such file or directory</code> in
<a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter08/grep.html">LFS
Chapter 8 - 8.35. Grep-3.11</a></h2>
<blockquote>
<p><strong><span style="color:red">The Bug: </span></strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In file included from grep.c:43:</span><br><span class="line">../lib/getopt.h:84:10: fatal error: getopt-cdefs.h: No such file or directory</span><br><span class="line">   84 | <span class="comment">#include &lt;getopt-cdefs.h&gt;</span></span><br><span class="line">      |          ^~~~~~~~~~~~~~~~</span><br><span class="line">compilation terminated.</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><span style="color:red">The Solution: </span></strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/sources/grep-3.11<span class="comment"># cp ../coreutils-9.5/lib/getopt-cdefs.h ./lib/</span></span><br></pre></td></tr></table></figure>
<h2 id="i386-pc-vs.-x86_64-efi-in-lfs-chapter-8---8.64.-grub-2.12">3.2
<code>i386-pc</code> vs. <code>x86_64-efi</code> in <a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/lfs/view/stable/chapter08/grub.html">LFS
Chapter 8 - 8.64. GRUB-2.12</a></h2>
<p>In order to build <a
target="_blank" rel="noopener" href="https://www.gnu.org/software/grub/">GRUB</a>, please strictly
follow: <a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/blfs/view/12.2/postlfs/grub-efi.html">BLFS
Chapter 5 - GRUB-2.12 for EFI</a> instead.</p>
<h3 id="build-x86_64-efi-instead-of-i386-pc">3.2.1. Build
<code>x86_64-efi</code> Instead of <code>i386-pc</code></h3>
<p><strong><span style="color:red">Do NOT use the following for
<code>i386-pc</code>:</span></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr          \</span><br><span class="line">            --sysconfdir=/etc      \</span><br><span class="line">            --disable-efiemu       \</span><br><span class="line">            --disable-werror</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">Instead, use the following for
<code>x86_64-efi</code>:</span></strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr        \</span><br><span class="line">            --sysconfdir=/etc    \</span><br><span class="line">            --disable-efiemu     \</span><br><span class="line">            --enable-grub-mkfont \</span><br><span class="line">            --with-platform=efi  \</span><br><span class="line">            --target=x86_64      \</span><br><span class="line">            --disable-werror</span><br></pre></td></tr></table></figure>
<p>After you obtained the following message:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">*******************************************************</span><br><span class="line">GRUB2 will be compiled with following components:</span><br><span class="line">Platform: x86_64-efi</span><br><span class="line">With devmapper support: No (need libdevmapper header)</span><br><span class="line">With memory debugging: No</span><br><span class="line">With disk cache statistics: No</span><br><span class="line">With boot time statistics: No</span><br><span class="line">efiemu runtime: No (not available on efi)</span><br><span class="line">grub-mkfont: No (need freetype2 library)</span><br><span class="line">grub-mount: No (need fuse or fuse3 libraries)</span><br><span class="line">starfield theme: No (No build-time grub-mkfont)</span><br><span class="line">With libzfs support: No (need zfs library)</span><br><span class="line">Build-time grub-mkfont: No (need freetype2 library)</span><br><span class="line">Without unifont (no build-time grub-mkfont)</span><br><span class="line">With liblzma from -llzma (support <span class="keyword">for</span> XZ-compressed mips images)</span><br><span class="line">With stack smashing protector: No</span><br><span class="line">*******************************************************</span><br></pre></td></tr></table></figure>
<p>we do:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> TARGET_CC &amp;&amp;</span><br><span class="line">make</span><br><span class="line">......</span><br><span class="line">TARGET_OBJ2ELF= sh genmod.sh moddep.lst gcry_whirlpool.module build-grub-module-verifier gcry_whirlpool.mod</span><br><span class="line">make[3]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/grub-core&#x27;</span></span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/grub-core&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> po</span><br><span class="line">make[2]: Entering directory <span class="string">&#x27;/sources/grub-2.12/po&#x27;</span></span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> <span class="string">&#x27;all&#x27;</span>.</span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/po&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> docs</span><br><span class="line">make[2]: Entering directory <span class="string">&#x27;/sources/grub-2.12/docs&#x27;</span></span><br><span class="line">make[2]: Nothing to be <span class="keyword">done</span> <span class="keyword">for</span> <span class="string">&#x27;all&#x27;</span>.</span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/docs&#x27;</span></span><br><span class="line">Making all <span class="keyword">in</span> util/bash-completion.d</span><br><span class="line">make[2]: Entering directory <span class="string">&#x27;/sources/grub-2.12/util/bash-completion.d&#x27;</span></span><br><span class="line">../../config.status --file=grub:grub-completion.bash.in</span><br><span class="line">config.status: creating grub</span><br><span class="line">make[2]: Leaving directory <span class="string">&#x27;/sources/grub-2.12/util/bash-completion.d&#x27;</span></span><br><span class="line">make[1]: Leaving directory <span class="string">&#x27;/sources/grub-2.12&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="efibootmgr-and-freetype2-preferrably-enabled">3.2.2. <a
target="_blank" rel="noopener" href="https://github.com/rhboot/efibootmgr">efibootmgr</a> and <a
target="_blank" rel="noopener" href="https://freetype.org/">FreeType2</a> Preferrably Enabled</h3>
<h4 id="recommended-for-efibootmgr">3.2.2.1 Recommended for <a
target="_blank" rel="noopener" href="https://github.com/rhboot/efibootmgr">efibootmgr</a></h4>
<p>From <a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/blfs/view/12.2/postlfs/efibootmgr.html">BLFS
Chapter 5 - efibootmgr-18</a>, some required or recommended libraries
are also recommended by me to install.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/rhboot/efivar">efivar</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/dosfstools/dosfstools">dosfstools</a></li>
<li><a target="_blank" rel="noopener" href="http://ftp.rpm.org/popt/releases/popt-1.x/">popt</a></li>
<li><a target="_blank" rel="noopener" href="https://mandoc.bsd.lv/snapshots/">mandoc</a></li>
</ul>
<h4 id="recommended-for-freetype2">3.2.2.2 Recommended for <a
target="_blank" rel="noopener" href="https://freetype.org/">FreeType2</a></h4>
<p>From <a
target="_blank" rel="noopener" href="https://www.linuxfromscratch.org/blfs/view/12.2/general/freetype2.html">BLFS
Chapter 10 - FreeType-2.13.3</a>, those recommended libraries are also
recommended by me to install.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/harfbuzz/harfbuzz">HarfBuzz</a></li>
<li><a target="_blank" rel="noopener" href="http://www.libpng.org/pub/png/libpng.html">libpng</a></li>
<li><a target="_blank" rel="noopener" href="https://ftp.gnu.org/gnu/which/">which</a></li>
</ul>
<h1 id="grub-and-uefi-configuration">4. <a
target="_blank" rel="noopener" href="https://www.gnu.org/software/grub/">GRUB</a> and <a
target="_blank" rel="noopener" href="https://uefi.org/">UEFI</a> Configuration</h1>
<h2 id="find-uuid-of-file-lfs.img">4.1 Find UUID of File
<code>lfs.img</code></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âžœ  lfs sudo blkid ./lfs.img</span><br><span class="line"></span><br><span class="line">[sudo] password <span class="keyword">for</span> lvision: </span><br><span class="line">./lfs.img: UUID=<span class="string">&quot;174bc795-5e06-4c0b-979f-7eccfca1ab10&quot;</span> BLOCK_SIZE=<span class="string">&quot;4096&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="configure-etcfstab">4.2 Configure <code>/etc/fstab</code></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/boot<span class="comment"># cat /etc/fstab</span></span><br><span class="line"><span class="comment"># Begin /etc/fstab</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># file system  mount-point    type     options             dump  fsck</span></span><br><span class="line"><span class="comment">#                                                                order</span></span><br><span class="line"></span><br><span class="line">UUID=174bc795-5e06-4c0b-979f-7eccfca1ab10  /  ext4  defaults  1  1</span><br><span class="line">proc           /proc          proc     nosuid,noexec,nodev 0     0</span><br><span class="line">sysfs          /sys           sysfs    nosuid,noexec,nodev 0     0</span><br><span class="line">devpts         /dev/pts       devpts   gid=5,mode=620      0     0</span><br><span class="line">tmpfs          /run           tmpfs    defaults            0     0</span><br><span class="line">devtmpfs       /dev           devtmpfs mode=0755,nosuid    0     0</span><br><span class="line">tmpfs          /dev/shm       tmpfs    nosuid,nodev        0     0</span><br><span class="line">cgroup2        /sys/fs/cgroup cgroup2  nosuid,noexec,nodev 0     0</span><br><span class="line"></span><br><span class="line"><span class="comment"># End /etc/fstab</span></span><br></pre></td></tr></table></figure>
<h2 id="generate-configuration-file-bootgrubgrub.cfg-for-grub">4.3
Generate Configuration File <code>/boot/grub/grub.cfg</code> for <a
target="_blank" rel="noopener" href="https://www.gnu.org/software/grub/">GRUB</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/boot<span class="comment"># grub-mkconfig -o /boot/grub/grub.cfg</span></span><br><span class="line">Generating grub configuration file ...</span><br><span class="line">Found linux image: /boot/vmlinuz-6.11.1-lfs-12.2</span><br><span class="line">Warning: os-prober will not be executed to detect other bootable partitions.</span><br><span class="line">Systems on them will not be added to the GRUB boot configuration.</span><br><span class="line">Check GRUB_DISABLE_OS_PROBER documentation entry.</span><br><span class="line">Adding boot menu entry <span class="keyword">for</span> UEFI Firmware Settings ...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>Let's take a look at the generated
<code>/boot/grub/grub.cfg</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:~<span class="comment"># cat /boot/grub/grub.cfg</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># DO NOT EDIT THIS FILE</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># It is automatically generated by grub-mkconfig using templates</span></span><br><span class="line"><span class="comment"># from /etc/grub.d and settings from /etc/default/grub</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/00_header ###</span></span><br><span class="line"><span class="keyword">if</span> [ -s <span class="variable">$prefix</span>/grubenv ]; <span class="keyword">then</span></span><br><span class="line">  load_env</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;next_entry&#125;</span>&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">set</span> default=<span class="string">&quot;<span class="variable">$&#123;next_entry&#125;</span>&quot;</span></span><br><span class="line">   <span class="built_in">set</span> next_entry=</span><br><span class="line">   save_env next_entry</span><br><span class="line">   <span class="built_in">set</span> boot_once=<span class="literal">true</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">set</span> default=<span class="string">&quot;0&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ x<span class="string">&quot;<span class="variable">$&#123;feature_menuentry_id&#125;</span>&quot;</span> = xy ]; <span class="keyword">then</span></span><br><span class="line">  menuentry_id_option=<span class="string">&quot;--id&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  menuentry_id_option=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> menuentry_id_option</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;prev_saved_entry&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">set</span> saved_entry=<span class="string">&quot;<span class="variable">$&#123;prev_saved_entry&#125;</span>&quot;</span></span><br><span class="line">  save_env saved_entry</span><br><span class="line">  <span class="built_in">set</span> prev_saved_entry=</span><br><span class="line">  save_env prev_saved_entry</span><br><span class="line">  <span class="built_in">set</span> boot_once=<span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> savedefault &#123;</span><br><span class="line">  <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$&#123;boot_once&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    saved_entry=<span class="string">&quot;<span class="variable">$&#123;chosen&#125;</span>&quot;</span></span><br><span class="line">    save_env saved_entry</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> load_video &#123;</span><br><span class="line">  <span class="keyword">if</span> [ x<span class="variable">$feature_all_video_module</span> = xy ]; <span class="keyword">then</span></span><br><span class="line">    insmod all_video</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    insmod efi_gop</span><br><span class="line">    insmod efi_uga</span><br><span class="line">    insmod ieee1275_fb</span><br><span class="line">    insmod vbe</span><br><span class="line">    insmod vga</span><br><span class="line">    insmod video_bochs</span><br><span class="line">    insmod video_cirrus</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ x<span class="variable">$feature_default_font_path</span> = xy ] ; <span class="keyword">then</span></span><br><span class="line">   font=unicode</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">insmod ext2</span><br><span class="line">search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 174bc795-5e06-4c0b-979f-7eccfca1ab10</span><br><span class="line">    font=<span class="string">&quot;/usr/share/grub/unicode.pf2&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> loadfont <span class="variable">$font</span> ; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">set</span> gfxmode=auto</span><br><span class="line">  load_video</span><br><span class="line">  insmod gfxterm</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">terminal_output gfxterm</span><br><span class="line"><span class="keyword">if</span> [ x<span class="variable">$feature_timeout_style</span> = xy ] ; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">set</span> timeout_style=menu</span><br><span class="line">  <span class="built_in">set</span> <span class="built_in">timeout</span>=5</span><br><span class="line"><span class="comment"># Fallback normal timeout code in case the timeout_style feature is</span></span><br><span class="line"><span class="comment"># unavailable.</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">set</span> <span class="built_in">timeout</span>=5</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/00_header ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/10_linux ###</span></span><br><span class="line">menuentry <span class="string">&#x27;GNU/Linux&#x27;</span> --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-simple-174bc795-5e06-4c0b-979f-7eccfca1ab10&#x27;</span> &#123;</span><br><span class="line">	load_video</span><br><span class="line">	insmod gzio</span><br><span class="line">	insmod ext2</span><br><span class="line">	search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 174bc795-5e06-4c0b-979f-7eccfca1ab10</span><br><span class="line">	<span class="built_in">echo</span>	<span class="string">&#x27;Loading Linux 6.11.1-lfs-12.2 ...&#x27;</span></span><br><span class="line">	linux	/boot/vmlinuz-6.11.1-lfs-12.2 root=/dev/loop14 ro  </span><br><span class="line">&#125;</span><br><span class="line">submenu <span class="string">&#x27;Advanced options for GNU/Linux&#x27;</span> <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-advanced-174bc795-5e06-4c0b-979f-7eccfca1ab10&#x27;</span> &#123;</span><br><span class="line">	menuentry <span class="string">&#x27;GNU/Linux, with Linux 6.11.1-lfs-12.2&#x27;</span> --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-6.11.1-lfs-12.2-advanced-174bc795-5e06-4c0b-979f-7eccfca1ab10&#x27;</span> &#123;</span><br><span class="line">		load_video</span><br><span class="line">		insmod gzio</span><br><span class="line">		insmod ext2</span><br><span class="line">		search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 174bc795-5e06-4c0b-979f-7eccfca1ab10</span><br><span class="line">		<span class="built_in">echo</span>	<span class="string">&#x27;Loading Linux 6.11.1-lfs-12.2 ...&#x27;</span></span><br><span class="line">		linux	/boot/vmlinuz-6.11.1-lfs-12.2 root=/dev/loop14 ro  </span><br><span class="line">	&#125;</span><br><span class="line">	menuentry <span class="string">&#x27;GNU/Linux, with Linux 6.11.1-lfs-12.2 (recovery mode)&#x27;</span> --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-6.11.1-lfs-12.2-recovery-174bc795-5e06-4c0b-979f-7eccfca1ab10&#x27;</span> &#123;</span><br><span class="line">		load_video</span><br><span class="line">		insmod gzio</span><br><span class="line">		insmod ext2</span><br><span class="line">		search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 174bc795-5e06-4c0b-979f-7eccfca1ab10</span><br><span class="line">		<span class="built_in">echo</span>	<span class="string">&#x27;Loading Linux 6.11.1-lfs-12.2 ...&#x27;</span></span><br><span class="line">		linux	/boot/vmlinuz-6.11.1-lfs-12.2 root=/dev/loop14 ro single </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">### END /etc/grub.d/10_linux ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/20_linux_xen ###</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/20_linux_xen ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/25_bli ###</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$grub_platform</span>&quot;</span> = <span class="string">&quot;efi&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  insmod bli</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/25_bli ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/30_os-prober ###</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/30_os-prober ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/30_uefi-firmware ###</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$grub_platform</span>&quot;</span> = <span class="string">&quot;efi&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">	fwsetup --is-supported</span><br><span class="line">	<span class="keyword">if</span> [ <span class="string">&quot;$?&quot;</span> = 0 ]; <span class="keyword">then</span></span><br><span class="line">		menuentry <span class="string">&#x27;UEFI Firmware Settings&#x27;</span> <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;uefi-firmware&#x27;</span> &#123;</span><br><span class="line">			fwsetup</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/30_uefi-firmware ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/40_custom ###</span></span><br><span class="line"><span class="comment"># This file provides an easy way to add custom menu entries.  Simply type the</span></span><br><span class="line"><span class="comment"># menu entries you want to add after this comment.  Be careful not to change</span></span><br><span class="line"><span class="comment"># the &#x27;exec tail&#x27; line above.</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/40_custom ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/41_custom ###</span></span><br><span class="line"><span class="keyword">if</span> [ -f  <span class="variable">$&#123;config_directory&#125;</span>/custom.cfg ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$&#123;config_directory&#125;</span>/custom.cfg</span><br><span class="line"><span class="keyword">elif</span> [ -z <span class="string">&quot;<span class="variable">$&#123;config_directory&#125;</span>&quot;</span> -a -f  <span class="variable">$prefix</span>/custom.cfg ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$prefix</span>/custom.cfg</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/41_custom ###</span></span><br><span class="line">(lfs <span class="built_in">chroot</span>) root:~<span class="comment"># </span></span><br></pre></td></tr></table></figure>
<h2 id="generate-uefi">4.4 Generate <a
target="_blank" rel="noopener" href="https://uefi.org/">UEFI</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:~<span class="comment"># # Create a FAT filesystem image</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/boot/efi.img bs=1M count=10</span><br><span class="line">mkfs.fat /boot/efi.img</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the mount point if it doesn&#x27;t already exist</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /boot/efi</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mount the image to simulate an EFI System Partition</span></span><br><span class="line">mount -o loop /boot/efi.img /boot/efi</span><br><span class="line">10+0 records <span class="keyword">in</span></span><br><span class="line">10+0 records out</span><br><span class="line">10485760 bytes (10 MB, 10 MiB) copied, 0.0157083 s, 668 MB/s</span><br><span class="line">mkfs.fat 4.2 (2021-01-31)</span><br><span class="line">(lfs <span class="built_in">chroot</span>) root:~<span class="comment"># </span></span><br></pre></td></tr></table></figure>
<p>and then:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/boot<span class="comment"># grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB --no-nvram --removable</span></span><br><span class="line">Installing <span class="keyword">for</span> x86_64-efi platform.</span><br><span class="line">Installation finished. No error reported.</span><br></pre></td></tr></table></figure>
<p>Now, you can see the following file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(lfs <span class="built_in">chroot</span>) root:/<span class="comment"># ls /boot/efi/EFI/BOOT/BOOTX64.EFI </span></span><br><span class="line">/boot/efi/EFI/BOOT/BOOTX64.EFI```</span><br></pre></td></tr></table></figure>
<h2 id="clear-up">4.5 Clear Up</h2>
<ul>
<li>Exit <code>chroot</code></li>
<li><code>unmount efi.img</code></li>
</ul>
<h1 id="demonstration">5. Demonstration</h1>
<h2 id="qemu">5.1 <a target="_blank" rel="noopener" href="https://www.qemu.org/">QEMU</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âžœ  lfs sudo qemu-system-x86_64 -drive file=./lfs.img,format=raw,if=virtio -kernel /mnt/lfs/boot/vmlinuz-6.11.1-lfs-12.2 -append &quot;root=/dev/vda rw rootdelay=5&quot; -m 2048</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/OperatingSystems/lfs/lfs_qemu_loggedin.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/OperatingSystems/lfs/lfs_qemu_loggedin.png"
alt="LFS QEMU Logged In" /></a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/09/28/Coding/HowTo/qt6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/09/28/Coding/HowTo/qt6/" class="post-title-link" itemprop="url">How to build Qt6.7.3?</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-09-28 00:00:00" itemprop="dateCreated datePublished" datetime="2024-09-28T00:00:00-07:00">2024-09-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 22:14:10" itemprop="dateModified" datetime="2024-09-30T22:14:10-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/HowTo/" itemprop="url" rel="index"><span itemprop="name">HowTo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="download-the-official-release">1. Download the Official
Release</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://download.qt.io/archive/qt/6.7/6.7.3/">Qt 6.7.3
Archive</a></li>
<li>Extract under <code>/opt/qt</code> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:49:18] lvision /opt/qt </span><br><span class="line">$ tar xvf qt-everywhere-src-6.7.3.tar.xz</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="cmake-configuration-with-generator-ninja">2. CMake Configuration
with Generator <a target="_blank" rel="noopener" href="https://ninja-build.org/">Ninja</a></h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:47:52] lvision /opt/qt/qt-everywhere-src-6.7.3/build </span><br><span class="line">$ cmake -G &quot;Ninja&quot; ../</span><br></pre></td></tr></table></figure>
<h1 id="build-with-trivial-modifications">3. Build with Trivial
Modifications</h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:51:43] lvision /opt/qt/qt-everywhere-src-6.7.3/build </span><br><span class="line">$ ccmake ../</span><br></pre></td></tr></table></figure>
<p>The <strong>MOST</strong> important: Include
<code>/usr/include/litehtml</code> in</p>
<h1 id="installation">4. Installation</h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:51:43] lvision /opt/qt/qt-everywhere-src-6.7.3/build </span><br><span class="line">$ ninja</span><br></pre></td></tr></table></figure>
<p>and you'll get:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">In function â€˜fxcrt::RetainPtr&lt;T&gt; pdfium::MakeRetain(Args&amp;&amp; ...) [with T = CFX_ReadOnlySpanStream; Args = &#123;span&lt;const unsigned char&gt;&#125;]â€™,</span><br><span class="line">    inlined from â€˜std::vector&lt;UnsupportedFeature&gt; CPDF_Metadata::CheckForSharedForm() constâ€™ at ../../../../../../qtwebengine/src/3rdparty/chromium/third_party/pdfium/core/fpdfdoc/cpdf_metadata.cpp:86:75:</span><br><span class="line">../../../../../../qtwebengine/src/3rdparty/chromium/third_party/pdfium/core/fxcrt/retain_ptr.h:210:23: note: returned from â€˜void* operator new(std::size_t)â€™</span><br><span class="line">  210 |   return RetainPtr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));</span><br><span class="line">      |                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">[1323/1323] STAMP QtPdf.stamp</span><br><span class="line">[10785/10857] Automatic MOC for target Pdf</span><br><span class="line">AutoMoc: /opt/qt/qt-everywhere-src-6.7.3/qtwebengine/src/pdf/qpdflinkmodel_p.h: note: No relevant classes found. No output generated.</span><br><span class="line">[10857/10857] Linking CXX shared module qtbase/qml/QtQuick/Pdf/libpdfquickplugin.so</span><br></pre></td></tr></table></figure>
<p>Good, <strong>ALL</strong> passed.</p>
<p>Finally, do <code>ninja install</code>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ~ qmake --version</span><br><span class="line">QMake version 3.1</span><br><span class="line">Using Qt version 6.7.3 in /opt/qt/6/lib</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/08/08/OperatingSystems/RaspberryPi/openmediavault-nas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/08/OperatingSystems/RaspberryPi/openmediavault-nas/" class="post-title-link" itemprop="url">Raspberry Pi 5 + OpenMediaVault +NAS</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-08 10:14:18" itemprop="dateCreated datePublished" datetime="2024-08-08T10:14:18-07:00">2024-08-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 20:47:17" itemprop="dateModified" datetime="2024-09-30T20:47:17-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Raspberry-Pi/" itemprop="url" rel="index"><span itemprop="name">Raspberry Pi</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="commercial-nas-vs.-diy-nas">1. Commercial NAS vs. DIY NAS?</h1>
<ul>
<li>For me, the <strong>BIGGEST</strong> difference between
<code>Commerial NAS</code> vs. <code>DIY NAS</code> is their prices
ðŸ˜‚</li>
<li>Without considering respective capabilities, <code>DIY</code> is
<strong>ALWAYS</strong> of more freedom. And, freedom is so so so
important as well</li>
</ul>
<h1 id="openmediavault-on-raspberry-pi-5">2. <a
target="_blank" rel="noopener" href="https://www.openmediavault.org/">OpenMediaVault</a> on <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi
5</a></h1>
<h2 id="use-lite-instead-of-desktop">2.1 Use Lite Instead Of
Desktop</h2>
<p>On [Raspberry Pi]'s official webpage <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/software/operating-systems/">Raspbian
Operating Systems</a>, find <code>Raspberry Pi OS Lite</code> in
category <code>Raspberry Pi OS (64-bit)</code>. As of today, the most
up-to-date release is <a
target="_blank" rel="noopener" href="https://downloads.raspberrypi.com/raspios_lite_arm64/images/raspios_lite_arm64-2024-07-04/2024-07-04-raspios-bookworm-arm64-lite.img.xz">raspios_lite_arm64-2024-07-04</a>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âžœ  RaspberryPi sudo dd if=./2024-07-04-raspios-bookworm-arm64-lite.img of=/dev/sda bs=1M status=progress conv=fsync </span><br><span class="line">2031091712 bytes (2.0 GB, 1.9 GiB) copied, 2 s, 1.0 GB/s2835349504 bytes (2.8 GB, 2.6 GiB) copied, 2.88047 s, 984 MB/s</span><br><span class="line"></span><br><span class="line">2704+0 records in</span><br><span class="line">2704+0 records out</span><br><span class="line">2835349504 bytes (2.8 GB, 2.6 GiB) copied, 312.17 s, 9.1 MB/s</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">Donâ€™t forget to enable
<code>SSH</code> after installation.</span></strong></p>
<h2 id="install-openmediavault-upon-raspberry-pi-os-lite">2.2 Install <a
target="_blank" rel="noopener" href="https://www.openmediavault.org/">OpenMediaVault</a> Upon Raspberry
Pi OS Lite</h2>
<p>Now, ssh into <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi
5</a>:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_neofetch.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/refs/heads/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_neofetch.png"
alt="OpenMediaVault ssh" /></a></p>
<p>Follow <a target="_blank" rel="noopener" href="https://www.openmediavault.org/">OpenMediaVault</a>'s
official documentation <a
target="_blank" rel="noopener" href="https://docs.openmediavault.org/en/stable/installation/on_debian.html">OpenMediaVault
Installation on Debian</a>, do the following:</p>
<ul>
<li><code>apt-get install --yes gnupg</code></li>
<li><code>wget --quiet --output-document=- https://packages.openmediavault.org/public/archive.key | sudo gpg --dearmor --yes --output "/usr/share/keyrings/openmediavault-archive-keyring.gpg"</code></li>
<li><code>nvim /etc/apt/sources.list.d/openmediavault.list</code> and
add <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://packages.openmediavault.org/public sandworm main</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://downloads.sourceforge.net/project/openmediavault/packages sandworm main</span><br><span class="line">## Uncomment the following line to add software from the proposed repository.</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://packages.openmediavault.org/public sandworm-proposed main</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://downloads.sourceforge.net/project/openmediavault/packages sandworm-proposed main</span><br><span class="line">## This software is not part of OpenMediaVault, but is offered by third-party</span><br><span class="line">## developers as a service to OpenMediaVault users.</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://packages.openmediavault.org/public sandworm partner</span><br><span class="line"># deb [signed-by=/usr/share/keyrings/openmediavault-archive-keyring.gpg] https://downloads.sourceforge.net/project/openmediavault/packages sandworm partner</span><br></pre></td></tr></table></figure></li>
</ul>
<p>By the way, please refer to <a
target="_blank" rel="noopener" href="https://sourceforge.net/projects/openmediavault/files/packages/dists/">OpenMediaVault
SourceForge Distributions</a>, <strong>sandworm</strong> is the
<strong>MOST RECENT</strong> distribution.</p>
<ul>
<li>Exports <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export LANG=C.UTF-8</span><br><span class="line">export DEBIAN_FRONTEND=noninteractive</span><br><span class="line">export APT_LISTCHANGES_FRONTEND=none</span><br></pre></td></tr></table></figure></li>
<li><code>sudo apt-get --yes --auto-remove --show-upgraded \ --allow-downgrades --allow-change-held-packages \ --no-install-recommends \ --option DPkg::Options::="--force-confdef" \ --option DPkg::Options::="--force-confold" \ install openmediavault</code></li>
<li><code>omv-confdbadm populate</code></li>
</ul>
<p><strong><span style="color:red">Now, ALL done.</span></strong></p>
<h2 id="openmediavault-overview">2.3 <a
target="_blank" rel="noopener" href="https://www.openmediavault.org/">OpenMediaVault</a> Overview</h2>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">OpenMediaVault Login Page</th>
<th style="text-align: center;">OpenMediaVault After Login</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_01.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_01.png"
alt="OpenMediaVault Login Page" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_02.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_02.png"
alt="OpenMediaVault After Login" /></a></td>
</tr>
</tbody>
</table>
<ul>
<li>username: <code>admin</code></li>
<li>password: <code>openmediavault</code>, all lower case</li>
</ul>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_03.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OpenMediaVault/openmediavault_03.png"
alt="OpenMediaVault Dashboard" /></a></p>
<h1 id="nas-configuration-on-my-raspberry-pi-5">3. <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Network-attached_storage">NAS</a>
Configuration on My <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi
5</a></h1>
<h2 id="abbreviation">3.1 Abbreviation</h2>
<p><a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Network-attached_storage">NAS</a> is
the abbreviation of <code>Network Attached Storage</code>.</p>
<h2 id="geekbord-x1005-with-a-m.2-to-sata3.0-extended-card">3.2 <a
target="_blank" rel="noopener" href="https://www.aliexpress.com/item/1005007204267297.html">Geekbord
X1005</a> with a <a
target="_blank" rel="noopener" href="https://www.aliexpress.com/item/1005006212086373.html">M.2 to
Sata3.0 Extended Card</a></h2>
<h3 id="enable-nfs">3.2.1 Enable <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Network_File_System">NFS</a></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ~ sudo omv-salt deploy run nfs</span><br><span class="line">raspberrypi4b8g:</span><br><span class="line">----------</span><br><span class="line">          ID: remove_upgrade_debian12_conf</span><br><span class="line">    Function: file.absent</span><br><span class="line">        Name: /etc/nfs.conf.d/local.conf</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: File /etc/nfs.conf.d/local.conf is not present</span><br><span class="line">     Started: 15:51:54.017518</span><br><span class="line">    Duration: 1.632 ms</span><br><span class="line">     Changes:   </span><br><span class="line">----------</span><br><span class="line">          ID: configure_nfs_conf</span><br><span class="line">    Function: file.managed</span><br><span class="line">        Name: /etc/nfs.conf.d/99-openmediavault.conf</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: File /etc/nfs.conf.d/99-openmediavault.conf is in the correct state</span><br><span class="line">     Started: 15:51:54.019412</span><br><span class="line">    Duration: 407.334 ms</span><br><span class="line">     Changes:   </span><br><span class="line">----------</span><br><span class="line">          ID: configure_idmapd_conf</span><br><span class="line">    Function: file.managed</span><br><span class="line">        Name: /etc/idmapd.conf</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: File /etc/idmapd.conf is in the correct state</span><br><span class="line">     Started: 15:51:54.427075</span><br><span class="line">    Duration: 345.438 ms</span><br><span class="line">     Changes:   </span><br><span class="line">----------</span><br><span class="line">          ID: divert_idmapd_conf</span><br><span class="line">    Function: omv_dpkg.divert_add</span><br><span class="line">        Name: /etc/idmapd.conf</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: Leaving &#x27;local diversion of /etc/idmapd.conf to /etc/idmapd.conf.distrib&#x27;</span><br><span class="line">     Started: 15:51:54.773922</span><br><span class="line">    Duration: 46.812 ms</span><br><span class="line">     Changes:   </span><br><span class="line">----------</span><br><span class="line">          ID: configure_nfs_exports</span><br><span class="line">    Function: file.managed</span><br><span class="line">        Name: /etc/exports</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: File /etc/exports is in the correct state</span><br><span class="line">     Started: 15:51:54.821087</span><br><span class="line">    Duration: 411.736 ms</span><br><span class="line">     Changes:   </span><br><span class="line">----------</span><br><span class="line">          ID: divert_nfs_exports</span><br><span class="line">    Function: omv_dpkg.divert_add</span><br><span class="line">        Name: /etc/exports</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: Leaving &#x27;local diversion of /etc/exports to /etc/exports.distrib&#x27;</span><br><span class="line">     Started: 15:51:55.233143</span><br><span class="line">    Duration: 47.43 ms</span><br><span class="line">     Changes:   </span><br><span class="line">----------</span><br><span class="line">          ID: stop_nfs_blkmap_service</span><br><span class="line">    Function: service.dead</span><br><span class="line">        Name: nfs-blkmap</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: The service nfs-blkmap is already dead</span><br><span class="line">     Started: 15:51:58.720879</span><br><span class="line">    Duration: 62.323 ms</span><br><span class="line">     Changes:   </span><br><span class="line">----------</span><br><span class="line">          ID: mask_nfs_blkmap_service</span><br><span class="line">    Function: service.masked</span><br><span class="line">        Name: nfs-blkmap</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: Service nfs-blkmap is already masked</span><br><span class="line">     Started: 15:51:58.783606</span><br><span class="line">    Duration: 1.536 ms</span><br><span class="line">     Changes:   </span><br><span class="line">----------</span><br><span class="line">          ID: start_nfs_server_service</span><br><span class="line">    Function: service.running</span><br><span class="line">        Name: nfs-server</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: The service nfs-server is already running</span><br><span class="line">     Started: 15:51:58.786135</span><br><span class="line">    Duration: 49.284 ms</span><br><span class="line">     Changes:   </span><br><span class="line">----------</span><br><span class="line">          ID: restart_nfs_utils_service</span><br><span class="line">    Function: service.running</span><br><span class="line">        Name: nfs-utils</span><br><span class="line">      Result: True</span><br><span class="line">     Comment: The service nfs-utils is already running</span><br><span class="line">     Started: 15:51:58.836046</span><br><span class="line">    Duration: 55.353 ms</span><br><span class="line">     Changes:   </span><br><span class="line"></span><br><span class="line">Summary for raspberrypi4b8g</span><br><span class="line">-------------</span><br><span class="line">Succeeded: 10</span><br><span class="line">Failed:     0</span><br><span class="line">-------------</span><br><span class="line">Total states run:     10</span><br><span class="line">Total run time:    1.429 s</span><br></pre></td></tr></table></figure>
<p>and</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ~ sudo cat /proc/fs/nfsd/versions</span><br><span class="line">+2 +3 +4 +4.1 +4.2</span><br></pre></td></tr></table></figure>
<h3 id="hailo-ai-accelerators-on-geekbord-x1005">3.2.2 <a
target="_blank" rel="noopener" href="https://hailo.ai/products/ai-accelerators/">Hailo AI
Accelerators</a> On <a
target="_blank" rel="noopener" href="https://www.aliexpress.com/item/1005007204267297.html">Geekbord
X1005</a></h3>
<p>Iâ€™ll give it a go with <a
target="_blank" rel="noopener" href="https://hailo.ai/products/ai-accelerators/">Hailo AI
Accelerators</a> some time soon.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/08/02/AI/EdgeComputing/raspberry-pi-5-ncs2-openvino-2024/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/08/02/AI/EdgeComputing/raspberry-pi-5-ncs2-openvino-2024/" class="post-title-link" itemprop="url">Raspberry Pi 5 + Intel NCS2 + OpenVINO In 2024</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-08-02 00:00:00" itemprop="dateCreated datePublished" datetime="2024-08-02T00:00:00-07:00">2024-08-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 04:13:50" itemprop="dateModified" datetime="2024-09-30T04:13:50-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/Edge-Computing/" itemprop="url" rel="index"><span itemprop="name">Edge Computing</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>As of year 2024, it is a good time to review <a
target="_blank" rel="noopener" href="https://openvino.ai/">OpenVINO</a> on my new <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi
5</a> with an Intel <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk">NCS2</a>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/07/28/AI/EdgeComputing/Intel-Movidius-NCS1-NCS2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/07/28/AI/EdgeComputing/Intel-Movidius-NCS1-NCS2/" class="post-title-link" itemprop="url">Intel NCS2 vs. Intel NCS1</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-07-28 00:00:00" itemprop="dateCreated datePublished" datetime="2024-07-28T00:00:00-07:00">2024-07-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 04:10:36" itemprop="dateModified" datetime="2024-09-30T04:10:36-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/AI/Edge-Computing/" itemprop="url" rel="index"><span itemprop="name">Edge Computing</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>As of year 2024, it looks <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk">NCSDK</a> is
<strong>NOT</strong> maintained. To clarify the relationships among <a
target="_blank" rel="noopener" href="https://openvino.ai/">OpenVINO</a>, <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/master">NCSDK master</a>
and <a target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCSDK
ncsdk2</a> is a kind of complicated.</p>
<h1 id="openvino-runtime-no-longer-supports-movidius-vpu">1. <a
target="_blank" rel="noopener" href="https://openvino.ai/">OpenVINO</a> Runtime NO Longer Supports <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/products/details/processors/movidius-vpu.html">Movidius
VPU</a></h1>
<h2 id="openvino-toolkit-release-notes-2023.0">1.1 <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino/2023-0.html">OpenVINO
Toolkit Release Notes 2023.0</a></h2>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/IntelMovidius/OpenVINO_NOT_Support_NCS2.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/IntelMovidius/OpenVINO_NOT_Support_NCS2.png"
alt="OpenVINO NOT Support NCS2" /></a></p>
<p>And it looks Long Term Support (LTS) version of <a
target="_blank" rel="noopener" href="https://openvino.ai/">OpenVINO</a> ending in December 2024 now
still supports for the devices listed above.</p>
<p>Therefore, in order to get my old devices: 1 <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCS2</a> and 1 <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk">NCS1</a> working in the year of
2024, Iâ€™ll have to resort to <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino-lts/2023-3.html">IntelÂ®
Distribution of OpenVINOâ„¢ Toolkit Long-Term Support (LTS)</a>.</p>
<h2
id="intel-distribution-of-openvino-toolkit-long-term-support-lts-2022.3">1.2
<a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino-lts/2022-3.html">IntelÂ®
Distribution of OpenVINOâ„¢ Toolkit Long-Term Support (LTS)
2022.3</a></h2>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/IntelMovidius/OpenVINO_LTS_Supports_Movidius.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/IntelMovidius/OpenVINO_LTS_Supports_Movidius.png"
alt="OpenVINO LTS Supports Movidius" /></a></p>
<h2
id="intel-distribution-of-openvino-toolkit-long-term-support-lts-2023.3">1.3
<a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino-lts/2023-3.html">IntelÂ®
Distribution of OpenVINOâ„¢ Toolkit Long-Term Support (LTS)
2023.3</a></h2>
<p>Ever since <strong>LTS 2023.3</strong>, <a
target="_blank" rel="noopener" href="https://openvino.ai/">OpenVINO</a> started emphasize <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/topic-technology/artificial-intelligence/training/generative-ai.html">GenAI</a>.
On its release notes, nowhere is talking about <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCS2</a> or <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk">NCS1</a> or anything related to
<a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/products/details/processors/movidius-vpu.html">Movidius
VPU</a>. According to <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino/2023-0.html">OpenVINO
Toolkit Release Notes 2023.0</a> in the above, I think ever since 2023,
<a target="_blank" rel="noopener" href="https://openvino.ai/">OpenVINO</a> turns its direction to <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/topic-technology/artificial-intelligence/training/generative-ai.html">GenAI</a>,
and <strong>NEVER</strong> support for <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/products/details/processors/movidius-vpu.html">Movidius
VPU</a> any more. Therefore, most probably, including this Long-Term
Support version, <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino-lts/2023-3.html">IntelÂ®
Distribution of OpenVINOâ„¢ Toolkit Long-Term Support (LTS) 2023.3</a>
does <strong>NOT</strong> have any support to <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/products/details/processors/movidius-vpu.html">Movidius
VPU</a> devices.</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/IntelMovidius/OpenVINO_GenAI_Since_2023.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/IntelMovidius/OpenVINO_GenAI_Since_2023.png"
alt="OpenVINO GenAI Since 2023" /></a></p>
<h2
id="openvino-2024.2-intel-distribution-of-openvino-toolkit-release-notes-2024.2">1.4
OpenVINO 2024.2 @ <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino/2024-2.html">IntelÂ®
Distribution of OpenVINOâ„¢ Toolkit Release Notes 2024.2</a></h2>
<p>Not to mention the <strong>MOST UP-TO-DATE</strong> version
<strong>2024.2</strong>, which seems to be <strong>NOT</strong> a
<strong>LTS</strong>. Of course, it does <strong>NOT</strong> support <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/products/details/processors/movidius-vpu.html">Movidius
VPU</a> devices.</p>
<h2 id="conclusion">1.5 Conclusion</h2>
<p>Go for:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCS2</a>: <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCSDK ncsdk2</a> or
<a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino-lts/2022-3.html">IntelÂ®
Distribution of OpenVINOâ„¢ Toolkit Long-Term Support (LTS)
2022.3</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk">NCS1</a>: <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/master">NCSDK
master</a></li>
</ul>
<h1 id="ncsdk-does-not-support-aarch64">2. <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk">NCSDK</a> Does NOT Support <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/AArch64">AArch64</a></h1>
<h2 id="get_mvcmd.sh-is-the-key.">2.1 <code>get_mvcmd.sh</code> is the
<strong>key</strong>.</h2>
<ul>
<li><code>ncsdk_download_link</code> for <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCSDK ncsdk2</a>:
Please refer to <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCSDK ncsdk2</a>'s
<a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/blob/ncsdk2/install-utilities.sh">install-utilities.sh</a>,
it is
https://downloadmirror.intel.com/28532/eng/NCSDK-2.10.01.01.tar.gz.</li>
<li><code>ncsdk_link</code> for <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/master">NCSDK master</a>:
Please refer to <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/master">NCSDK master</a>'s
<a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/blob/master/api/src/get_mvcmd.sh">api/src/get_mvcmd.sh</a>,
it is
https://downloadmirror.intel.com/28192/eng/NCSDK-1.12.01.01.tar.gz.</li>
</ul>
<h2 id="firmware-is-actually-downloaded-but-without-aarch64-support">2.2
Firmware Is Actually Downloaded But Without <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/AArch64">AArch64</a> Support</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ncsdk ls NCSDK-2.10.01.01</span><br><span class="line">ncsdk-armv7l  ncsdk-x86_64  version.txt</span><br><span class="line">âžœ  ncsdk ll NCSDK-2.10.01.01/ncsdk-x86_64/fw                   </span><br><span class="line">Permissions Size User Date Modified Name</span><br><span class="line">.rwxrwxrwx  1.1M root 26 Jan  2019  MvNCAPI-ma2450.mvcmd</span><br><span class="line">âžœ  ncsdk ll NCSDK-2.10.01.01/ncsdk-armv7l/fw </span><br><span class="line">Permissions Size User Date Modified Name</span><br><span class="line">.rwxrwxrwx  1.1M root 26 Jan  2019  MvNCAPI-ma2450.mvcmd</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ncsdk ls NCSDK-1.12.01.01</span><br><span class="line">install-ncsdk.sh  ncsdk-armv7l  ncsdk-x86_64  ncsdk.conf  requirements.txt  requirements_apt.txt  tests  uninstall-ncsdk.sh  version.txt</span><br><span class="line">âžœ  ncsdk ll NCSDK-1.12.01.01/ncsdk-x86_64/fw </span><br><span class="line">Permissions Size User Date Modified Name</span><br><span class="line">.rwxrwxrwx  866k root  5 Jan  2018  MvNCAPI.mvcmd</span><br><span class="line">âžœ  ncsdk ll NCSDK-1.12.01.01/ncsdk-armv7l/fw </span><br><span class="line">Permissions Size User Date Modified Name</span><br><span class="line">.rwxrwxrwx  866k root  5 Jan  2018  MvNCAPI.mvcmd</span><br></pre></td></tr></table></figure>
<h2 id="ncsdk-aarch64-for-ncs1">2.3 <a
target="_blank" rel="noopener" href="https://github.com/markjay4k/ncsdk-aarch64">ncsdk-aarch64</a> for
<a target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk">NCS1</a></h2>
<p>Fortunately, I found <a
target="_blank" rel="noopener" href="https://github.com/markjay4k/ncsdk-aarch64">ncsdk-aarch64</a>.
However, it only provides <a
target="_blank" rel="noopener" href="https://github.com/markjay4k/ncsdk-aarch64/tree/master/NCSDK-1.12.00.01/ncsdk-aarch64">ncsdk-aarch64â€™s
firmware from NCSDK-1.12.00.01</a>, which seems to be also okay for
<strong>NCSDK-1.12.01.01</strong>.</p>
<p>Letâ€™s try it out.</p>
<h3 id="find-the-right-version">2.3.1 Find the Right Version</h3>
<ul>
<li>Either checkout official <a
target="_blank" rel="noopener" href="https://github.com/markjay4k/ncsdk-aarch64">ncsdk-aarch64</a> with
<a target="_blank" rel="noopener" href="https://github.com/markjay4k/ncsdk-aarch64/pull/4">LongerVision
pull request for ncsdk-aarch64</a></li>
<li>Or directly clone <a
target="_blank" rel="noopener" href="https://github.com/LongerVisionRobot/ncsdk-aarch64">LongerVision
ncsdk-aarch64</a></li>
</ul>
<p>You will see a folder named <strong>NCSDK-1.12.01.01</strong> (or
<strong>NCSDK-1.12.00.01</strong>), under which there is the key folder
<a target="_blank" rel="noopener" href="https://github.com/markjay4k/ncsdk-aarch64">ncsdk-aarch64</a>,
which actually contains the <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/AArch64">Aarch64</a> firmware for <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk">NCS1</a>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ncsdk-aarch64 git:(master) âœ— ls</span><br><span class="line">api  docs  examples  install-opencv.sh  install.sh  LICENSE  Makefile  NCSDK-1.12.01.01  ncsdk.conf  README.md  uninstall-opencv.sh  uninstall.sh</span><br><span class="line">âžœ  ncsdk-aarch64 git:(master) âœ— cd NCSDK-1.12.01.01 </span><br><span class="line">âžœ  NCSDK-1.12.01.01 git:(master) âœ— ls</span><br><span class="line">install-ncsdk.sh  ncsdk-aarch64  ncsdk-armv7l  ncsdk-x86_64  ncsdk.conf  requirements.txt  requirements_apt.txt  tests  uninstall-ncsdk.sh  version.txt</span><br></pre></td></tr></table></figure>
<h3 id="installation">2.3.2 Installation</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ncsdk-aarch64 git:(master) âœ— cd api/src</span><br><span class="line">âžœ  src git:(master) âœ— sudo make basicinstall </span><br><span class="line">mkdir -p /usr/local/include/</span><br><span class="line">mkdir -p /usr/local/lib/</span><br><span class="line">cp obj-aarch64/libmvnc.so.0 /usr/local/lib/</span><br><span class="line">ln -fs libmvnc.so.0 /usr/local/lib/libmvnc.so</span><br><span class="line">cp ../include/*.h /usr/local/include/</span><br><span class="line">mkdir -p /usr/local/lib/mvnc</span><br><span class="line">cp mvnc/MvNCAPI.mvcmd /usr/local/lib/mvnc/</span><br><span class="line">mkdir -p /etc/udev/rules.d/</span><br><span class="line">cp 97-usbboot.rules /etc/udev/rules.d/</span><br><span class="line">âžœ  src git:(master) âœ— sudo make pythoninstall</span><br><span class="line">mkdir -p /usr/local/lib/python3.11/dist-packages</span><br><span class="line">cp -r ../python/mvnc /usr/local/lib/python3.11/dist-packages/</span><br><span class="line">âžœ  src git:(master) âœ— sudo make postinstall</span><br><span class="line">udevadm control --reload-rules</span><br><span class="line">udevadm trigger</span><br><span class="line">ldconfig</span><br></pre></td></tr></table></figure>
<h3 id="demonstrate-examples-on-my-raspberry-pi-5">2.3.3 Demonstrate
Examples on My <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi
5</a></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br></pre></td><td class="code"><pre><span class="line">âžœ  examples git:(master) âœ— make</span><br><span class="line">make -C apps/. </span><br><span class="line">make[1]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/apps&#x27;</span><br><span class="line">make -C hello_ncs_cpp/. </span><br><span class="line">make[2]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/apps/hello_ncs_cpp&#x27;</span><br><span class="line"></span><br><span class="line">making hello_ncs_cpp</span><br><span class="line">g++ cpp/hello_ncs.cpp -o cpp/hello_ncs_cpp -lmvnc</span><br><span class="line">Created cpp/hello_ncs_cpp executable</span><br><span class="line">make[2]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/apps/hello_ncs_cpp&#x27;</span><br><span class="line">make -C hello_ncs_py/. </span><br><span class="line">make[2]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/apps/hello_ncs_py&#x27;</span><br><span class="line">nothing to make, use &#x27;make run&#x27; to run.</span><br><span class="line">make[2]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/apps/hello_ncs_py&#x27;</span><br><span class="line">make -C multistick_cpp/. </span><br><span class="line">make[2]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/apps/multistick_cpp&#x27;</span><br><span class="line"></span><br><span class="line">making googlenet</span><br><span class="line">(cd ../../caffe/GoogLeNet; make compile; cd ../../apps/multistick_cpp; cp ../../caffe/GoogLeNet/graph ./googlenet.graph;)</span><br><span class="line">make[3]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/GoogLeNet&#x27;</span><br><span class="line"></span><br><span class="line">making prereqs</span><br><span class="line">(cd ../../data/ilsvrc12; make)</span><br><span class="line">make[4]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line">make[4]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line"></span><br><span class="line">making prototxt</span><br><span class="line">Prototxt file already exists</span><br><span class="line"></span><br><span class="line">making caffemodel</span><br><span class="line">caffemodel file already exists</span><br><span class="line"></span><br><span class="line">making compile</span><br><span class="line">mvNCCompile -w bvlc_googlenet.caffemodel -s 12 deploy.prototxt</span><br><span class="line">mvNCCompile v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">Layer  inception_3b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_3b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4a/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4a/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4c/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4c/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4d/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4d/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4e/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4e/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5a/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5a/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line">make[3]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/GoogLeNet&#x27;</span><br><span class="line"></span><br><span class="line">making squeezenet</span><br><span class="line">(cd ../../caffe/SqueezeNet; make compile; cd ../../apps/multistick_cpp; cp ../../caffe/SqueezeNet/graph ./squeezenet.graph;)</span><br><span class="line">make[3]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/SqueezeNet&#x27;</span><br><span class="line"></span><br><span class="line">making prereqs</span><br><span class="line">(cd ../../data/ilsvrc12; make)</span><br><span class="line">make[4]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line">make[4]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line">LICENSE file already exists</span><br><span class="line"></span><br><span class="line">making prototxt</span><br><span class="line">Prototxt file already exists</span><br><span class="line"></span><br><span class="line">making caffemodel</span><br><span class="line">caffemodel file already exists</span><br><span class="line"></span><br><span class="line">making compile</span><br><span class="line">mvNCCompile -w squeezenet_v1.0.caffemodel -s 12 deploy.prototxt</span><br><span class="line">mvNCCompile v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line">make[3]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/SqueezeNet&#x27;</span><br><span class="line"></span><br><span class="line">making multistick_cpp</span><br><span class="line">cp googlenet.graph cpp/googlenet.graph;</span><br><span class="line">cp squeezenet.graph cpp/squeezenet.graph;</span><br><span class="line">g++ cpp/multistick.cpp cpp/fp16.c -o cpp/multistick_cpp -lmvnc</span><br><span class="line">cpp/multistick.cpp: In function â€˜bool DoInferenceOnImageFile(void*, const char*, int, float*)â€™:</span><br><span class="line">cpp/multistick.cpp:307:1: warning: control reaches end of non-void function [-Wreturn-type]</span><br><span class="line">  307 | &#125;</span><br><span class="line">      | ^</span><br><span class="line">Created cpp/multistick_cpp executable</span><br><span class="line">make[2]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/apps/multistick_cpp&#x27;</span><br><span class="line">make[1]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/apps&#x27;</span><br><span class="line">make -C caffe/. </span><br><span class="line">make[1]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe&#x27;</span><br><span class="line">make -C AlexNet/. </span><br><span class="line">make[2]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/AlexNet&#x27;</span><br><span class="line"></span><br><span class="line">making prereqs</span><br><span class="line">(cd ../../data/ilsvrc12; make)</span><br><span class="line">make[3]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line">make[3]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line">chmod +x run.py</span><br><span class="line"></span><br><span class="line">making prototxt</span><br><span class="line">Prototxt file already exists</span><br><span class="line"></span><br><span class="line">making profile</span><br><span class="line">mvNCProfile deploy.prototxt -s 12</span><br><span class="line">mvNCProfile v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">****** WARNING: using empty weights ******</span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line">USB: Transferring Data...</span><br><span class="line">/usr/local/lib/python3.11/dist-packages/mvnc/mvncapi.py:244: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.</span><br><span class="line">  tensor = tensor.tostring()</span><br><span class="line">Time to Execute :  107.91  ms</span><br><span class="line">USB: Myriad Execution Finished</span><br><span class="line">Time to Execute :  103.26  ms</span><br><span class="line">USB: Myriad Execution Finished</span><br><span class="line">USB: Myriad Connection Closing.</span><br><span class="line">USB: Myriad Connection Closed.</span><br><span class="line">Network Summary</span><br><span class="line"></span><br><span class="line">Detailed Per Layer Profile</span><br><span class="line">                                                                                                                                                                                                                      Bandwidth   time</span><br><span class="line">#    Name                                                                                                                                                                                                       MFLOPs  (MB/s)    (ms)</span><br><span class="line">======================================================================================================================================================================================================================================</span><br><span class="line">0    data                                                                                                                                                                                                          0.0126457.6   0.002</span><br><span class="line">1    conv1                                                                                                                                                                                                       210.8  7434.1   4.811</span><br><span class="line">2    norm1                                                                                                                                                                                                         0.0   721.2   0.768</span><br><span class="line">3    pool1                                                                                                                                                                                                         0.6  1253.9   0.442</span><br><span class="line">4    pool1_s0                                                                                                                                                                                                      0.0  1372.8   0.049</span><br><span class="line">5    conv2_p0                                                                                                                                                                                                    223.9   596.2   6.099</span><br><span class="line">6    pool1_s1                                                                                                                                                                                                      0.0  1455.7   0.046</span><br><span class="line">7    conv2_p1                                                                                                                                                                                                    223.9   585.2   6.213</span><br><span class="line">8    norm2                                                                                                                                                                                                         0.0   697.8   0.510</span><br><span class="line">9    pool2                                                                                                                                                                                                         0.4  1308.0   0.272</span><br><span class="line">10   conv3                                                                                                                                                                                                       299.0   302.0   8.048</span><br><span class="line">11   conv3_s0                                                                                                                                                                                                      0.0  1582.4   0.039</span><br><span class="line">12   conv4_p0                                                                                                                                                                                                    112.1   543.7   3.219</span><br><span class="line">13   conv3_s1                                                                                                                                                                                                      0.0  1492.2   0.041</span><br><span class="line">14   conv4_p1                                                                                                                                                                                                    112.1   560.1   3.125</span><br><span class="line">15   conv4_p0_s0                                                                                                                                                                                                   0.0  1314.0   0.047</span><br><span class="line">16   conv5_p0                                                                                                                                                                                                     74.8   578.5   2.659</span><br><span class="line">17   conv4_p0_s1                                                                                                                                                                                                   0.0  1317.5   0.047</span><br><span class="line">18   conv5_p1                                                                                                                                                                                                     74.8   580.0   2.652</span><br><span class="line">19   pool5                                                                                                                                                                                                         0.1   918.4   0.090</span><br><span class="line">20   fc6                                                                                                                                                                                                          75.5  2144.1  33.589</span><br><span class="line">21   fc7                                                                                                                                                                                                          33.6  2132.6  15.008</span><br><span class="line">22   fc8                                                                                                                                                                                                           8.2  2651.8   2.949</span><br><span class="line">23   prob                                                                                                                                                                                                          0.0     7.6   0.253</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">                                                                                                                                                                                          Total inference time                   90.98</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">Generating Profile Report &#x27;output_report.html&#x27;...</span><br><span class="line"></span><br><span class="line">making caffemodel</span><br><span class="line">caffemodel file already exists</span><br><span class="line"></span><br><span class="line">making check</span><br><span class="line">mvNCCheck -w bvlc_alexnet.caffemodel -i ../../data/images/cat.jpg -s 12 -id 281 deploy.prototxt -M 110 -S 255 -metric top1</span><br><span class="line">mvNCCheck v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line">USB: Transferring Data...</span><br><span class="line">/usr/local/lib/python3.11/dist-packages/mvnc/mvncapi.py:244: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.</span><br><span class="line">  tensor = tensor.tostring()</span><br><span class="line">USB: Myriad Execution Finished</span><br><span class="line">USB: Myriad Connection Closing.</span><br><span class="line">USB: Myriad Connection Closed.</span><br><span class="line"></span><br><span class="line">Result: Validation Pass</span><br><span class="line"></span><br><span class="line">Result:  (1000,)</span><br><span class="line">1) 281 0.512</span><br><span class="line">Expected:  (1000,)</span><br><span class="line">1) 281 0.522</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"> Obtained values </span><br><span class="line">------------------------------------------------------------</span><br><span class="line"> Obtained Min Pixel Accuracy: 2.385406941175461% (max allowed=2%), Fail</span><br><span class="line"> Obtained Average Pixel Accuracy: 0.0052463514293776825% (max allowed=1%), Pass</span><br><span class="line"> Obtained Percentage of wrong values: 0.1% (max allowed=0%), Fail</span><br><span class="line"> Obtained Pixel-wise L2 error: 0.09619102055778048% (max allowed=1%), Pass</span><br><span class="line"> Obtained Global Sum Difference: 0.027384519577026367</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">making compile</span><br><span class="line">mvNCCompile -w bvlc_alexnet.caffemodel -s 12 deploy.prototxt</span><br><span class="line">mvNCCompile v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line"></span><br><span class="line">making cpp</span><br><span class="line">g++ cpp/run.cpp cpp/fp16.c -o cpp/run_cpp -lmvnc</span><br><span class="line">make[2]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/AlexNet&#x27;</span><br><span class="line">make -C GoogLeNet/. </span><br><span class="line">make[2]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/GoogLeNet&#x27;</span><br><span class="line"></span><br><span class="line">making prereqs</span><br><span class="line">(cd ../../data/ilsvrc12; make)</span><br><span class="line">make[3]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line">make[3]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line"></span><br><span class="line">making prototxt</span><br><span class="line">Prototxt file already exists</span><br><span class="line"></span><br><span class="line">making profile</span><br><span class="line">mvNCProfile deploy.prototxt -s 12</span><br><span class="line">mvNCProfile v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">****** WARNING: using empty weights ******</span><br><span class="line">Layer  inception_3b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_3b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4a/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4a/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4c/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4c/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4d/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4d/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4e/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4e/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5a/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5a/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line">USB: Transferring Data...</span><br><span class="line">/usr/local/lib/python3.11/dist-packages/mvnc/mvncapi.py:244: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.</span><br><span class="line">  tensor = tensor.tostring()</span><br><span class="line">Time to Execute :  130.42  ms</span><br><span class="line">USB: Myriad Execution Finished</span><br><span class="line">Time to Execute :  108.35  ms</span><br><span class="line">USB: Myriad Execution Finished</span><br><span class="line">USB: Myriad Connection Closing.</span><br><span class="line">USB: Myriad Connection Closed.</span><br><span class="line">Network Summary</span><br><span class="line"></span><br><span class="line">Detailed Per Layer Profile</span><br><span class="line">                                                                                                                                                                                                                      Bandwidth   time</span><br><span class="line">#    Name                                                                                                                                                                                                       MFLOPs  (MB/s)    (ms)</span><br><span class="line">======================================================================================================================================================================================================================================</span><br><span class="line">0    data                                                                                                                                                                                                          0.0 46160.0   0.006</span><br><span class="line">1    conv1/7x7_s2                                                                                                                                                                                                236.0  2466.8   5.713</span><br><span class="line">2    pool1/3x3_s2                                                                                                                                                                                                  1.8  1340.9   1.142</span><br><span class="line">3    pool1/norm1                                                                                                                                                                                                   0.0   701.9   0.546</span><br><span class="line">4    conv2/3x3_reduce                                                                                                                                                                                             25.7   478.8   0.816</span><br><span class="line">5    conv2/3x3                                                                                                                                                                                                   693.6   307.6  11.891</span><br><span class="line">6    conv2/norm2                                                                                                                                                                                                   0.0   787.5   1.458</span><br><span class="line">7    pool2/3x3_s2                                                                                                                                                                                                  1.4  1390.2   0.826</span><br><span class="line">8    inception_3a/1x1                                                                                                                                                                                             19.3   535.1   0.581</span><br><span class="line">9    inception_3a/3x3_reduce                                                                                                                                                                                      28.9   459.3   0.702</span><br><span class="line">10   inception_3a/3x3                                                                                                                                                                                            173.4   314.3   4.788</span><br><span class="line">11   inception_3a/5x5_reduce                                                                                                                                                                                       4.8  1025.6   0.286</span><br><span class="line">12   inception_3a/5x5                                                                                                                                                                                             20.1   678.0   0.921</span><br><span class="line">13   inception_3a/pool                                                                                                                                                                                             1.4   578.0   0.497</span><br><span class="line">14   inception_3a/pool_proj                                                                                                                                                                                        9.6   640.6   0.467</span><br><span class="line">15   inception_3b/1x1                                                                                                                                                                                             51.4   444.3   1.003</span><br><span class="line">16   inception_3b/3x3_reduce                                                                                                                                                                                      51.4   446.2   0.998</span><br><span class="line">17   inception_3b/3x3                                                                                                                                                                                            346.8   257.6   8.339</span><br><span class="line">18   inception_3b/5x5_reduce                                                                                                                                                                                      12.8   877.2   0.454</span><br><span class="line">19   inception_3b/5x5                                                                                                                                                                                            120.4   522.8   2.577</span><br><span class="line">20   inception_3b/pool                                                                                                                                                                                             1.8   660.6   0.580</span><br><span class="line">21   inception_3b/pool_proj                                                                                                                                                                                       25.7   618.7   0.669</span><br><span class="line">22   pool3/3x3_s2                                                                                                                                                                                                  0.8  1215.8   0.590</span><br><span class="line">23   inception_4a/1x1                                                                                                                                                                                             36.1   358.6   0.991</span><br><span class="line">24   inception_4a/3x3_reduce                                                                                                                                                                                      18.1   498.7   0.536</span><br><span class="line">25   inception_4a/3x3                                                                                                                                                                                             70.4   296.2   2.259</span><br><span class="line">26   inception_4a/5x5_reduce                                                                                                                                                                                       3.0   756.2   0.257</span><br><span class="line">27   inception_4a/5x5                                                                                                                                                                                              7.5   412.6   0.457</span><br><span class="line">28   inception_4a/pool                                                                                                                                                                                             0.8   505.0   0.355</span><br><span class="line">29   inception_4a/pool_proj                                                                                                                                                                                       12.0   547.8   0.435</span><br><span class="line">30   inception_4b/1x1                                                                                                                                                                                             32.1   330.5   1.053</span><br><span class="line">31   inception_4b/3x3_reduce                                                                                                                                                                                      22.5   375.9   0.800</span><br><span class="line">32   inception_4b/3x3                                                                                                                                                                                             88.5   285.9   2.838</span><br><span class="line">33   inception_4b/5x5_reduce                                                                                                                                                                                       4.8   573.7   0.375</span><br><span class="line">34   inception_4b/5x5                                                                                                                                                                                             15.1   309.1   0.973</span><br><span class="line">35   inception_4b/pool                                                                                                                                                                                             0.9   532.7   0.359</span><br><span class="line">36   inception_4b/pool_proj                                                                                                                                                                                       12.8   537.0   0.473</span><br><span class="line">37   inception_4c/1x1                                                                                                                                                                                             25.7   402.8   0.786</span><br><span class="line">38   inception_4c/3x3_reduce                                                                                                                                                                                      25.7   389.8   0.812</span><br><span class="line">39   inception_4c/3x3                                                                                                                                                                                            115.6   260.4   3.831</span><br><span class="line">40   inception_4c/5x5_reduce                                                                                                                                                                                       4.8   584.9   0.367</span><br><span class="line">41   inception_4c/5x5                                                                                                                                                                                             15.1   308.1   0.976</span><br><span class="line">42   inception_4c/pool                                                                                                                                                                                             0.9   627.2   0.305</span><br><span class="line">43   inception_4c/pool_proj                                                                                                                                                                                       12.8   551.2   0.461</span><br><span class="line">44   inception_4d/1x1                                                                                                                                                                                             22.5   413.7   0.728</span><br><span class="line">45   inception_4d/3x3_reduce                                                                                                                                                                                      28.9   472.7   0.702</span><br><span class="line">46   inception_4d/3x3                                                                                                                                                                                            146.3   399.4   3.008</span><br><span class="line">47   inception_4d/5x5_reduce                                                                                                                                                                                       6.4   637.4   0.349</span><br><span class="line">48   inception_4d/5x5                                                                                                                                                                                             20.1   388.8   1.028</span><br><span class="line">49   inception_4d/pool                                                                                                                                                                                             0.9   610.5   0.314</span><br><span class="line">50   inception_4d/pool_proj                                                                                                                                                                                       12.8   566.9   0.448</span><br><span class="line">51   inception_4e/1x1                                                                                                                                                                                             53.0   297.6   1.531</span><br><span class="line">52   inception_4e/3x3_reduce                                                                                                                                                                                      33.1   258.2   1.389</span><br><span class="line">53   inception_4e/3x3                                                                                                                                                                                            180.6   280.8   5.067</span><br><span class="line">54   inception_4e/5x5_reduce                                                                                                                                                                                       6.6   493.5   0.465</span><br><span class="line">55   inception_4e/5x5                                                                                                                                                                                             40.1   356.2   1.405</span><br><span class="line">56   inception_4e/pool                                                                                                                                                                                             0.9   600.5   0.329</span><br><span class="line">57   inception_4e/pool_proj                                                                                                                                                                                       26.5   430.8   0.758</span><br><span class="line">58   pool4/3x3_s2                                                                                                                                                                                                  0.4  1221.7   0.255</span><br><span class="line">59   inception_5a/1x1                                                                                                                                                                                             20.9   614.2   0.789</span><br><span class="line">60   inception_5a/3x3_reduce                                                                                                                                                                                      13.0   553.5   0.599</span><br><span class="line">61   inception_5a/3x3                                                                                                                                                                                             45.2   550.4   1.851</span><br><span class="line">62   inception_5a/5x5_reduce                                                                                                                                                                                       2.6   336.2   0.382</span><br><span class="line">63   inception_5a/5x5                                                                                                                                                                                             10.0   427.3   0.646</span><br><span class="line">64   inception_5a/pool                                                                                                                                                                                             0.4   405.1   0.192</span><br><span class="line">65   inception_5a/pool_proj                                                                                                                                                                                       10.4   484.7   0.580</span><br><span class="line">66   inception_5b/1x1                                                                                                                                                                                             31.3   611.9   1.124</span><br><span class="line">67   inception_5b/3x3_reduce                                                                                                                                                                                      15.7   608.1   0.629</span><br><span class="line">68   inception_5b/3x3                                                                                                                                                                                             65.0   569.9   2.516</span><br><span class="line">69   inception_5b/5x5_reduce                                                                                                                                                                                       3.9   362.9   0.424</span><br><span class="line">70   inception_5b/5x5                                                                                                                                                                                             15.1   438.7   0.937</span><br><span class="line">71   inception_5b/pool                                                                                                                                                                                             0.4   483.8   0.161</span><br><span class="line">72   inception_5b/pool_proj                                                                                                                                                                                       10.4   502.0   0.560</span><br><span class="line">73   pool5/7x7_s1                                                                                                                                                                                                  0.1   460.8   0.208</span><br><span class="line">74   loss3/classifier                                                                                                                                                                                              2.0  2497.0   0.783</span><br><span class="line">75   prob                                                                                                                                                                                                          0.0     9.5   0.200</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">                                                                                                                                                                                          Total inference time                   95.91</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">Generating Profile Report &#x27;output_report.html&#x27;...</span><br><span class="line"></span><br><span class="line">making caffemodel</span><br><span class="line">caffemodel file already exists</span><br><span class="line"></span><br><span class="line">making check</span><br><span class="line">mvNCCheck -w bvlc_googlenet.caffemodel -i ../../data/images/nps_electric_guitar.png -s 12 -id 546  deploy.prototxt -S 255 -M 110 -metric top1</span><br><span class="line">mvNCCheck v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">Layer  inception_3b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_3b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4a/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4a/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4c/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4c/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4d/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4d/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4e/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4e/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5a/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5a/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line">USB: Transferring Data...</span><br><span class="line">/usr/local/lib/python3.11/dist-packages/mvnc/mvncapi.py:244: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.</span><br><span class="line">  tensor = tensor.tostring()</span><br><span class="line">USB: Myriad Execution Finished</span><br><span class="line">USB: Myriad Connection Closing.</span><br><span class="line">USB: Myriad Connection Closed.</span><br><span class="line"></span><br><span class="line">Result: Validation Pass</span><br><span class="line"></span><br><span class="line">Result:  (1000,)</span><br><span class="line">1) 546 0.995</span><br><span class="line">Expected:  (1000,)</span><br><span class="line">1) 546 0.9946</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"> Obtained values </span><br><span class="line">------------------------------------------------------------</span><br><span class="line"> Obtained Min Pixel Accuracy: 0.049091799883171916% (max allowed=2%), Pass</span><br><span class="line"> Obtained Average Pixel Accuracy: 7.989402774910559e-05% (max allowed=1%), Pass</span><br><span class="line"> Obtained Percentage of wrong values: 0.0% (max allowed=0%), Pass</span><br><span class="line"> Obtained Pixel-wise L2 error: 0.0017114860971367098% (max allowed=1%), Pass</span><br><span class="line"> Obtained Global Sum Difference: 0.0007946491241455078</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">making compile</span><br><span class="line">mvNCCompile -w bvlc_googlenet.caffemodel -s 12 deploy.prototxt</span><br><span class="line">mvNCCompile v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">Layer  inception_3b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_3b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4a/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4a/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4c/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4c/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4d/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4d/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4e/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_4e/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5a/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5a/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5b/1x1  forced to im2col_v2, because its output is used in concat</span><br><span class="line">Layer  inception_5b/pool_proj  forced to im2col_v2, because its output is used in concat</span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line"></span><br><span class="line">making cpp</span><br><span class="line">g++ cpp/run.cpp cpp/fp16.c -o cpp/run_cpp -lmvnc</span><br><span class="line">make[2]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/GoogLeNet&#x27;</span><br><span class="line">make -C SqueezeNet/. </span><br><span class="line">make[2]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/SqueezeNet&#x27;</span><br><span class="line"></span><br><span class="line">making prereqs</span><br><span class="line">(cd ../../data/ilsvrc12; make)</span><br><span class="line">make[3]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line">make[3]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/data/ilsvrc12&#x27;</span><br><span class="line">LICENSE file already exists</span><br><span class="line"></span><br><span class="line">making prototxt</span><br><span class="line">Prototxt file already exists</span><br><span class="line"></span><br><span class="line">making profile</span><br><span class="line">mvNCProfile deploy.prototxt -s 12</span><br><span class="line">mvNCProfile v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">****** WARNING: using empty weights ******</span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line">USB: Transferring Data...</span><br><span class="line">/usr/local/lib/python3.11/dist-packages/mvnc/mvncapi.py:244: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.</span><br><span class="line">  tensor = tensor.tostring()</span><br><span class="line">Time to Execute :  78.37  ms</span><br><span class="line">USB: Myriad Execution Finished</span><br><span class="line">Time to Execute :  60.05  ms</span><br><span class="line">USB: Myriad Execution Finished</span><br><span class="line">USB: Myriad Connection Closing.</span><br><span class="line">USB: Myriad Connection Closed.</span><br><span class="line">Network Summary</span><br><span class="line"></span><br><span class="line">Detailed Per Layer Profile</span><br><span class="line">                                                                                                                                                                                                                      Bandwidth   time</span><br><span class="line">#    Name                                                                                                                                                                                                       MFLOPs  (MB/s)    (ms)</span><br><span class="line">======================================================================================================================================================================================================================================</span><br><span class="line">0    data                                                                                                                                                                                                          0.0 96516.2   0.003</span><br><span class="line">1    conv1                                                                                                                                                                                                       347.7  1634.5   8.861</span><br><span class="line">2    pool1                                                                                                                                                                                                         2.6  1445.0   1.561</span><br><span class="line">3    fire2/squeeze1x1                                                                                                                                                                                              9.3  1222.9   0.455</span><br><span class="line">4    fire2/expand1x1                                                                                                                                                                                               6.2   152.1   0.620</span><br><span class="line">5    fire2/expand3x3                                                                                                                                                                                              55.8   475.0   1.789</span><br><span class="line">6    fire3/squeeze1x1                                                                                                                                                                                             12.4  1466.3   0.506</span><br><span class="line">7    fire3/expand1x1                                                                                                                                                                                               6.2   158.4   0.596</span><br><span class="line">8    fire3/expand3x3                                                                                                                                                                                              55.8   475.9   1.785</span><br><span class="line">9    fire4/squeeze1x1                                                                                                                                                                                             24.8   976.6   0.764</span><br><span class="line">10   fire4/expand1x1                                                                                                                                                                                              24.8   174.3   1.106</span><br><span class="line">11   fire4/expand3x3                                                                                                                                                                                             223.0   391.4   4.430</span><br><span class="line">12   pool4                                                                                                                                                                                                         1.7  1268.5   1.164</span><br><span class="line">13   fire5/squeeze1x1                                                                                                                                                                                             11.9   788.7   0.471</span><br><span class="line">14   fire5/expand1x1                                                                                                                                                                                               6.0   151.4   0.347</span><br><span class="line">15   fire5/expand3x3                                                                                                                                                                                              53.7   376.4   1.257</span><br><span class="line">16   fire6/squeeze1x1                                                                                                                                                                                             17.9   699.1   0.543</span><br><span class="line">17   fire6/expand1x1                                                                                                                                                                                              13.4   159.6   0.531</span><br><span class="line">18   fire6/expand3x3                                                                                                                                                                                             120.9   256.4   2.973</span><br><span class="line">19   fire7/squeeze1x1                                                                                                                                                                                             26.9   827.4   0.688</span><br><span class="line">20   fire7/expand1x1                                                                                                                                                                                              13.4   159.9   0.530</span><br><span class="line">21   fire7/expand3x3                                                                                                                                                                                             120.9   259.7   2.935</span><br><span class="line">22   fire8/squeeze1x1                                                                                                                                                                                             35.8   735.0   0.790</span><br><span class="line">23   fire8/expand1x1                                                                                                                                                                                              23.9   155.7   0.775</span><br><span class="line">24   fire8/expand3x3                                                                                                                                                                                             215.0   201.3   5.396</span><br><span class="line">25   pool8                                                                                                                                                                                                         0.8  1265.2   0.563</span><br><span class="line">26   fire9/squeeze1x1                                                                                                                                                                                             11.1   587.7   0.387</span><br><span class="line">27   fire9/expand1x1                                                                                                                                                                                               5.5   153.4   0.341</span><br><span class="line">28   fire9/expand3x3                                                                                                                                                                                              49.8   288.2   1.636</span><br><span class="line">29   conv10                                                                                                                                                                                                      173.1   331.1   3.448</span><br><span class="line">30   pool10                                                                                                                                                                                                        0.3   671.0   0.480</span><br><span class="line">31   prob                                                                                                                                                                                                          0.0     9.5   0.202</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">                                                                                                                                                                                          Total inference time                   47.94</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">Generating Profile Report &#x27;output_report.html&#x27;...</span><br><span class="line"></span><br><span class="line">making caffemodel</span><br><span class="line">caffemodel file already exists</span><br><span class="line"></span><br><span class="line">making check</span><br><span class="line">mvNCCheck -w squeezenet_v1.0.caffemodel -i ../../data/images/cat.jpg -s 12 -id 281  deploy.prototxt -S 255 -M 120 -metric top1</span><br><span class="line">mvNCCheck v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line">USB: Transferring Data...</span><br><span class="line">/usr/local/lib/python3.11/dist-packages/mvnc/mvncapi.py:244: DeprecationWarning: tostring() is deprecated. Use tobytes() instead.</span><br><span class="line">  tensor = tensor.tostring()</span><br><span class="line">USB: Myriad Execution Finished</span><br><span class="line">USB: Myriad Connection Closing.</span><br><span class="line">USB: Myriad Connection Closed.</span><br><span class="line"></span><br><span class="line">Result: Validation Pass</span><br><span class="line"></span><br><span class="line">Result:  (1000, 1, 1)</span><br><span class="line">1) 281 0.6177</span><br><span class="line">Expected:  (1000, 1, 1)</span><br><span class="line">1) 281 0.616</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"> Obtained values </span><br><span class="line">------------------------------------------------------------</span><br><span class="line"> Obtained Min Pixel Accuracy: 0.6933439057320356% (max allowed=2%), Pass</span><br><span class="line"> Obtained Average Pixel Accuracy: 0.0016120149666676298% (max allowed=1%), Pass</span><br><span class="line"> Obtained Percentage of wrong values: 0.0% (max allowed=0%), Pass</span><br><span class="line"> Obtained Pixel-wise L2 error: 0.029018872980330863% (max allowed=1%), Pass</span><br><span class="line"> Obtained Global Sum Difference: 0.009933412075042725</span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">making compile</span><br><span class="line">mvNCCompile -w squeezenet_v1.0.caffemodel -s 12 deploy.prototxt</span><br><span class="line">mvNCCompile v02.00, Copyright @ Movidius Ltd 2016</span><br><span class="line"></span><br><span class="line">/usr/local/bin/ncsdk/Controllers/FileIO.py:50: UserWarning: You are using a large type. Consider reducing your data sizes for best performance</span><br><span class="line">  warnings.warn(</span><br><span class="line"></span><br><span class="line">making cpp</span><br><span class="line">g++ cpp/run.cpp cpp/fp16.c -o cpp/run_cpp -lmvnc</span><br><span class="line">make[2]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe/SqueezeNet&#x27;</span><br><span class="line">make[1]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/caffe&#x27;</span><br><span class="line">make -C data/. </span><br><span class="line">make[1]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/data&#x27;</span><br><span class="line">Possible Make targets</span><br><span class="line">  make help - shows this message</span><br><span class="line">  make clean - Removes all temp files from all directories</span><br><span class="line">make[1]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/data&#x27;</span><br><span class="line">make -C tensorflow/. </span><br><span class="line">make[1]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/tensorflow&#x27;</span><br><span class="line">make -C inception_v1/. </span><br><span class="line">make[2]: Entering directory &#x27;/opt/intel/ncsdk-aarch64/examples/tensorflow/inception_v1&#x27;</span><br><span class="line">test -f output/inception-v1.meta || ((wget http://download.tensorflow.org/models/inception_v1_2016_08_28.tar.gz &amp;&amp; tar zxf inception_v1_2016_08_28.tar.gz &amp;&amp; rm inception_v1_2016_08_28.tar.gz) &amp;&amp; ./inception-v1.py)</span><br><span class="line">--2024-07-29 13:06:28--  http://download.tensorflow.org/models/inception_v1_2016_08_28.tar.gz</span><br><span class="line">Resolving download.tensorflow.org (download.tensorflow.org)... 2607:f8b0:400a:803::201b, 2607:f8b0:400a:805::201b, 2607:f8b0:400a:807::201b, ...</span><br><span class="line">Connecting to download.tensorflow.org (download.tensorflow.org)|2607:f8b0:400a:803::201b|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 24642554 (24M) [application/x-tar]</span><br><span class="line">Saving to: â€˜inception_v1_2016_08_28.tar.gzâ€™</span><br><span class="line"></span><br><span class="line">inception_v1_2016_08_28.tar.gz                            100%[====================================================================================================================================&gt;]  23.50M  98.9MB/s    in 0.2s    </span><br><span class="line"></span><br><span class="line">2024-07-29 13:06:28 (98.9 MB/s) - â€˜inception_v1_2016_08_28.tar.gzâ€™ saved [24642554/24642554]</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;/opt/intel/ncsdk-aarch64/examples/tensorflow/inception_v1/./inception-v1.py&quot;, line 6, in &lt;module&gt;</span><br><span class="line">    from tensorflow.contrib.slim.nets import inception</span><br><span class="line">ModuleNotFoundError: No module named &#x27;tensorflow.contrib&#x27;</span><br><span class="line">make[2]: *** [Makefile:47: weights] Error 1</span><br><span class="line">make[2]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/tensorflow/inception_v1&#x27;</span><br><span class="line">make[1]: *** [Makefile:12: inception_v1/.] Error 2</span><br><span class="line">make[1]: Leaving directory &#x27;/opt/intel/ncsdk-aarch64/examples/tensorflow&#x27;</span><br><span class="line">make: *** [Makefile:12: tensorflow/.] Error 2</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">I'm gonna giving up the issue of
Tensorflow version incompatibility, for Tensorflow 1.x has NOT been
maintained for years. I mean example <code>inception_v1</code> and
<code>inception_v3</code> are compatible with Tensorflow 1.x, rather
than 2.x.</span></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âžœ  examples git:(master) âœ— ls tensorflow </span><br><span class="line">inception_v1  inception_v3  Makefile  readme.md</span><br></pre></td></tr></table></figure>
<h2 id="ncsdk2-aarch64-for-ncs2">2.4 <a
target="_blank" rel="noopener" href="https://github.com/LE0xUL/ncsdk2_aarch64">ncsdk2-aarch64</a> for
<a target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCS2</a></h2>
<h3 id="download-the-right-ncsdk-2.10.01.01.tar.gz">2.4.1 Download the
Right <a
target="_blank" rel="noopener" href="https://github.com/LE0xUL/ncsdk2_aarch64/raw/aarch64/NCSDK-2.10.01.01.tar.gz">NCSDK-2.10.01.01.tar.gz</a></h3>
<ul>
<li><code>git clone https://github.com/LE0xUL/ncsdk2_aarch64.git</code>
wonâ€™t provide the correct <strong>NCSDK-2.10.01.01.tar.gz</strong>.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ncsdk2_aarch64 git:(aarch64) âœ— ll</span><br><span class="line">Permissions Size User    Date Modified Name</span><br><span class="line">drwxr-xr-x     - lvision 29 Jul 15:34  .git</span><br><span class="line">.rw-r--r--   564 lvision 29 Jul 12:16  .gitattributes</span><br><span class="line">.rw-r--r--   212 lvision 29 Jul 12:16  .gitignore</span><br><span class="line">......</span><br><span class="line">.rw-r--r--   132 lvision 29 Jul 12:16  NCSDK-2.10.01.01.tar.gz</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>As you can see, the git cloned
<strong>NCSDK-2.10.01.01.tar.gz</strong> is of size <strong>132</strong>
bytes <strong>ONLY</strong>.</p>
<ul>
<li>You have to download <a
target="_blank" rel="noopener" href="https://github.com/LE0xUL/ncsdk2_aarch64/raw/aarch64/NCSDK-2.10.01.01.tar.gz">NCSDK-2.10.01.01.tar.gz</a>
by open up View raw at <a
target="_blank" rel="noopener" href="https://github.com/LE0xUL/ncsdk2_aarch64/blob/aarch64/NCSDK-2.10.01.01.tar.gz">this
page</a>, which is actually of size <strong>2.4M</strong>:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ncsdk2_aarch64 git:(aarch64) âœ— ll NCSDK-2.10.01.01.tar.gz </span><br><span class="line">Permissions Size User    Date Modified Name</span><br><span class="line">.rw-r--r--  2.4M lvision 29 Jul 16:12  NCSDK-2.10.01.01.tar.gz</span><br></pre></td></tr></table></figure>
<p>After extraction, youâ€™ll also see the most important folder named
<strong>ncsdk-aarch64</strong>, which actually contains the <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/AArch64">Aarch64</a> firmware for <a
target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCS2</a>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ncsdk2_aarch64 git:(aarch64) âœ— ls</span><br><span class="line">api           docs      extras             install-utilities.sh  LICENSE   NCSDK-2.10.01.01         ncsdk.conf  requirements.txt      requirements_apt_raspbian.txt                  uninstall-opencv.sh  version.txt</span><br><span class="line">ATTRIBUTIONS  examples  install-opencv.sh  install.sh            Makefile  NCSDK-2.10.01.01.tar.gz  README.md   requirements_apt.txt  tensorflow-1.11.0-cp35-none-linux_aarch64.whl  uninstall.sh         </span><br><span class="line">âžœ  ncsdk2_aarch64 git:(aarch64) âœ— cd NCSDK-2.10.01.01 </span><br><span class="line">âžœ  NCSDK-2.10.01.01 git:(aarch64) âœ— ls</span><br><span class="line">ncsdk-aarch64  ncsdk-armv7l  ncsdk-x86_64  version.txt</span><br></pre></td></tr></table></figure>
<h3 id="installation-1">2.4.2 Installation</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ncsdk2_aarch64 git:(aarch64) âœ— cd api/src </span><br><span class="line">âžœ  src git:(aarch64) âœ— sudo make basicinstall</span><br><span class="line">NCSDK FW successfully installed</span><br><span class="line">mkdir -p /usr/local/include/</span><br><span class="line">mkdir -p /usr/local/include/mvnc2</span><br><span class="line">mkdir -p /usr/local/lib/</span><br><span class="line">cp obj-aarch64/libmvnc.so.0 /usr/local/lib/</span><br><span class="line">ln -fs libmvnc.so.0 /usr/local/lib/libmvnc.so</span><br><span class="line">cp ../include/mvnc.h /usr/local/include/mvnc2</span><br><span class="line">ln -fs /usr/local/include/mvnc2/mvnc.h /usr/local/include/mvnc.h </span><br><span class="line">mkdir -p /usr/local/lib/mvnc</span><br><span class="line">cp mvnc/MvNCAPI-*.mvcmd /usr/local/lib/mvnc/</span><br><span class="line">mkdir -p /etc/udev/rules.d/</span><br><span class="line">cp 97-ncs2.rules /etc/udev/rules.d/</span><br><span class="line">âžœ  src git:(aarch64) âœ— sudo make pythoninstall</span><br><span class="line">mkdir -p /usr/local/lib/python3.11/dist-packages</span><br><span class="line">cp -r ../python/mvnc /usr/local/lib/python3.11/dist-packages/</span><br><span class="line">âžœ  src git:(aarch64) âœ— sudo make postinstall</span><br><span class="line">udevadm control --reload-rules</span><br><span class="line">udevadm trigger</span><br><span class="line">ldconfig</span><br></pre></td></tr></table></figure>
<h3 id="demonstrate-examples-on-my-raspberry-pi-5-1">2.4.3 Demonstrate
Examples on My <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-5/">Raspberry Pi
5</a></h3>
<p>Letâ€™s just try <a
target="_blank" rel="noopener" href="https://github.com/LE0xUL/ncsdk2_aarch64/blob/aarch64/examples/apps/hello_ncs_py/hello_ncs.py">hello_ncs.py</a>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">âžœ  hello_ncs_py git:(aarch64) âœ— python hello_ncs.py </span><br><span class="line">D: [         0] ncDeviceCreate:307	ncDeviceCreate index 0</span><br><span class="line"></span><br><span class="line">D: [         0] ncDeviceCreate:307	ncDeviceCreate index 1</span><br><span class="line"></span><br><span class="line">D: [         0] ncDeviceOpen:523	File path /usr/local/lib/mvnc/MvNCAPI-ma2480.mvcmd</span><br><span class="line"></span><br><span class="line">W: [         0] ncDeviceOpen:527	ncDeviceOpen() XLinkBootRemote returned error 3</span><br><span class="line"></span><br><span class="line">Error - Could not open NCS device.</span><br></pre></td></tr></table></figure>
<p>It looks I dealt with this issue in my old blog <a
href="../../../../../../2020/04/12/AI/EdgeComputing/raspberry-pi-4-movidius-nerual-compute-stick-2-openvino/">OpenVINO
on Raspberry Pi 4 with Movidius Neural Compute Stick II</a>, where Iâ€™d
already provided the solution:</p>
<p><strong><span style="color:red"><a
target="_blank" rel="noopener" href="https://openvino.ai/">OpenVINO</a> should be utilized instead of
<a target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCSDK
ncsdk2</a>.</span></strong></p>
<h1
id="intel-distribution-of-openvino-toolkit-long-term-support-lts-2022.3-for-ncs2">3.
<a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino-lts/2022-3.html">IntelÂ®
Distribution of OpenVINOâ„¢ Toolkit Long-Term Support (LTS) 2022.3</a> for
<a target="_blank" rel="noopener" href="https://github.com/movidius/ncsdk/tree/ncsdk2">NCS2</a></h1>
<ul>
<li>To use: <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/release-notes/openvino-lts/2022-3.html">IntelÂ®
Distribution of OpenVINOâ„¢ Toolkit Long-Term Support (LTS)
2022.3</a></li>
<li>Refer to: <a
target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/articles/news/intel-neural-compute-stick-2-and-open-source-openvino-toolkit.html">IntelÂ®
Neural Compute Stick 2 and Open Source OpenVINOâ„¢ Toolkit</a></li>
</ul>
<h2 id="fix-an-error">3.1 Fix an Error</h2>
<p>File
<code>/opt/intel/OpenVINO/openvino/thirdparty/ocv/opencv_hal_neon.hpp</code>
function <code>v_deinterleave_expand</code> is clearly buggy, for
<code>-1</code> should <strong>NEVER</strong> appear in an
<code>uchar</code> array. Anyway, just change <code>-1</code> to
<code>255</code> as a temporary solution, namely:</p>
<p>Change</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> nlanes = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(v_uint8x16::nlanes);</span><br><span class="line">     uchar mask_e[nlanes] = &#123; <span class="number">0</span>, <span class="number">-1</span>, <span class="number">2</span>, <span class="number">-1</span>, <span class="number">4</span>, <span class="number">-1</span>, <span class="number">6</span>, <span class="number">-1</span>,                                                                                                                                                                      </span><br><span class="line">                             <span class="number">8</span>, <span class="number">-1</span>, <span class="number">10</span>, <span class="number">-1</span>, <span class="number">12</span>, <span class="number">-1</span>, <span class="number">14</span>, <span class="number">-1</span> &#125;;</span><br><span class="line"> </span><br><span class="line">     uchar mask_o[nlanes] = &#123; <span class="number">1</span>, <span class="number">-1</span>, <span class="number">3</span>, <span class="number">-1</span>, <span class="number">5</span>, <span class="number">-1</span>, <span class="number">7</span>, <span class="number">-1</span>,</span><br><span class="line">                             <span class="number">9</span>, <span class="number">-1</span>, <span class="number">11</span>, <span class="number">-1</span>, <span class="number">13</span>, <span class="number">-1</span>, <span class="number">15</span>, <span class="number">-1</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>to:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> nlanes = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(v_uint8x16::nlanes);</span><br><span class="line">     uchar mask_e[nlanes] = &#123; <span class="number">0</span>, <span class="number">255</span>, <span class="number">2</span>, <span class="number">255</span>, <span class="number">4</span>, <span class="number">255</span>, <span class="number">6</span>, <span class="number">255</span>,                                                                                                                                                                      </span><br><span class="line">                             <span class="number">8</span>, <span class="number">255</span>, <span class="number">10</span>, <span class="number">255</span>, <span class="number">12</span>, <span class="number">255</span>, <span class="number">14</span>, <span class="number">255</span> &#125;;</span><br><span class="line"> </span><br><span class="line">     uchar mask_o[nlanes] = &#123; <span class="number">1</span>, <span class="number">255</span>, <span class="number">3</span>, <span class="number">255</span>, <span class="number">5</span>, <span class="number">255</span>, <span class="number">7</span>, <span class="number">255</span>,</span><br><span class="line">                             <span class="number">9</span>, <span class="number">255</span>, <span class="number">11</span>, <span class="number">255</span>, <span class="number">13</span>, <span class="number">255</span>, <span class="number">15</span>, <span class="number">255</span> &#125;;</span><br></pre></td></tr></table></figure>
<h2 id="two-more-things-after-installation">3.2 Two More Things After
Installation</h2>
<h3 id="openvino-python-wrapper-installation">3.2.1 <a
target="_blank" rel="noopener" href="https://openvino.ai/">OpenVINO</a> Python Wrapper
Installation</h3>
<p>Under folder <code>/opt/intel/OpenVINO/openvino/build/wheels</code>,
there are the following 2 filesï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âžœ  wheels git:(2022.3.2) âœ— ll</span><br><span class="line">Permissions Size User    Date Modified Name</span><br><span class="line">.rw-r--r--   13M lvision 30 Jul 14:09  openvino-2022.3.2-9279-cp311-cp311-manylinux_2_36_aarch64.whl</span><br><span class="line">.rw-r--r--   24k lvision 30 Jul 13:08  openvino_dev-2022.3.2-9279-py3-none-any.whl</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">Use key parameter
<code>--break-system-packages</code></span></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install --break-system-packages openvino-2022.3.2-9279-cp311-cp311-manylinux_2_36_aarch64.whl</span><br></pre></td></tr></table></figure>
<p>and</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install --break-system-packages openvino_dev-2022.3.2-9279-py3-none-any.whl</span><br></pre></td></tr></table></figure>
<h3 id="copy-plugins.xml">3.2.2 Copy <code>plugins.xml</code></h3>
<p>A kind of weird that:</p>
<ul>
<li>Under <code>build/lib</code>, there is <strong>ONLY</strong> 1 file
<code>libade.a</code>:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âžœ  lib git:(2022.3.2) âœ— pwd</span><br><span class="line">/opt/intel/OpenVINO/openvino/build/lib</span><br><span class="line">âžœ  lib git:(2022.3.2) âœ— ls</span><br><span class="line">libade.a</span><br></pre></td></tr></table></figure>
<ul>
<li>Everything is built under <code>bin/aarch64/Release</code>:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">âžœ  Release git:(2022.3.2) âœ— pwd                      </span><br><span class="line">/opt/intel/OpenVINO/openvino/bin/aarch64/Release</span><br><span class="line">âžœ  Release git:(2022.3.2) âœ— ll</span><br><span class="line">Permissions Size User    Date Modified Name</span><br><span class="line">.rwxr-xr-x  723k lvision 30 Jul 14:08  benchmark_app</span><br><span class="line">.rwxr-xr-x  461k lvision 30 Jul 14:08  benchmark_app_legacy</span><br><span class="line">.rwxr-xr-x  264k lvision 30 Jul 14:08  classification_sample_async</span><br><span class="line">.rwxr-xr-x  264k lvision 30 Jul 14:08  compile_tool</span><br><span class="line">.rwxr-xr-x  199k lvision 30 Jul 14:08  hello_classification</span><br><span class="line">.rwxr-xr-x   67k lvision 30 Jul 14:08  hello_classification_c</span><br><span class="line">.rwxr-xr-x  199k lvision 30 Jul 14:08  hello_nv12_input_classification</span><br><span class="line">.rwxr-xr-x   67k lvision 30 Jul 14:08  hello_nv12_input_classification_c</span><br><span class="line">.rwxr-xr-x   68k lvision 30 Jul 14:08  hello_query_device</span><br><span class="line">.rwxr-xr-x  199k lvision 30 Jul 14:08  hello_reshape_ssd</span><br><span class="line">.rw-r--r--  367k lvision 30 Jul 12:04  libcnpy.a</span><br><span class="line">.rw-r--r--  7.5M lvision 30 Jul 14:08  libfluid.a</span><br><span class="line">.rwxr-xr-x   67k lvision 30 Jul 14:08  libformat_reader.so</span><br><span class="line">.rw-r--r--  3.4M lvision 30 Jul 12:08  libie_docs_snippets.a</span><br><span class="line">.rw-r--r--  166k lvision 30 Jul 12:34  libie_samples_utils.a</span><br><span class="line">.rw-r--r--   16M lvision 30 Jul 12:31  libinference_engine_legacy.a</span><br><span class="line">.rw-r--r--  2.9M lvision 30 Jul 12:36  libinference_engine_snippets.a</span><br><span class="line">.rw-r--r--   16M lvision 30 Jul 12:56  libinterpreter_backend.a</span><br><span class="line">.rw-r--r--  3.0k lvision 30 Jul 12:04  libitt.a</span><br><span class="line">.rw-r--r--  296k lvision 30 Jul 12:05  libmvnc.a</span><br><span class="line">.rw-r--r--  1.6M lvision 30 Jul 12:04  libngraph_builders.a</span><br><span class="line">.rw-r--r--  1.6M lvision 30 Jul 14:07  libngraph_reference.a</span><br><span class="line">.rw-r--r--  2.3M lvision 30 Jul 12:33  liboffline_transformations.a</span><br><span class="line">.rw-r--r--   11M lvision 30 Jul 12:17  libonnx.a</span><br><span class="line">.rw-r--r--   54k lvision 30 Jul 12:31  libonnx_common.a</span><br><span class="line">.rw-r--r--  676k lvision 30 Jul 12:06  libonnx_proto.a</span><br><span class="line">.rwxr-xr-x   67k lvision 30 Jul 12:04  libopencv_c_wrapper.so</span><br><span class="line">lrwxrwxrwx    19 lvision 30 Jul 14:08  libopenvino.so -&gt; libopenvino.so.2232</span><br><span class="line">.rwxr-xr-x   17M lvision 30 Jul 14:08  libopenvino.so.2022.3.2</span><br><span class="line">lrwxrwxrwx    23 lvision 30 Jul 14:08  libopenvino.so.2232 -&gt; libopenvino.so.2022.3.2</span><br><span class="line">.rwxr-xr-x  330k lvision 30 Jul 14:08  libopenvino_auto_batch_plugin.so</span><br><span class="line">.rwxr-xr-x  592k lvision 30 Jul 14:08  libopenvino_auto_plugin.so</span><br><span class="line">lrwxrwxrwx    21 lvision 30 Jul 14:08  libopenvino_c.so -&gt; libopenvino_c.so.2232</span><br><span class="line">.rwxr-xr-x  461k lvision 30 Jul 14:08  libopenvino_c.so.2022.3.2</span><br><span class="line">lrwxrwxrwx    25 lvision 30 Jul 14:08  libopenvino_c.so.2232 -&gt; libopenvino_c.so.2022.3.2</span><br><span class="line">.rwxr-xr-x  1.2M lvision 30 Jul 14:08  libopenvino_gapi_preproc.so</span><br><span class="line">.rwxr-xr-x  395k lvision 30 Jul 14:08  libopenvino_hetero_plugin.so</span><br><span class="line">.rwxr-xr-x  9.3M lvision 30 Jul 14:08  libopenvino_intel_myriad_plugin.so</span><br><span class="line">lrwxrwxrwx    31 lvision 30 Jul 14:08  libopenvino_ir_frontend.so -&gt; libopenvino_ir_frontend.so.2232</span><br><span class="line">.rwxr-xr-x  528k lvision 30 Jul 14:08  libopenvino_ir_frontend.so.2022.3.2</span><br><span class="line">lrwxrwxrwx    35 lvision 30 Jul 14:08  libopenvino_ir_frontend.so.2232 -&gt; libopenvino_ir_frontend.so.2022.3.2</span><br><span class="line">lrwxrwxrwx    33 lvision 30 Jul 14:08  libopenvino_onnx_frontend.so -&gt; libopenvino_onnx_frontend.so.2232</span><br><span class="line">.rwxr-xr-x  4.7M lvision 30 Jul 14:08  libopenvino_onnx_frontend.so.2022.3.2</span><br><span class="line">lrwxrwxrwx    37 lvision 30 Jul 14:08  libopenvino_onnx_frontend.so.2232 -&gt; libopenvino_onnx_frontend.so.2022.3.2</span><br><span class="line">lrwxrwxrwx    35 lvision 30 Jul 14:08  libopenvino_paddle_frontend.so -&gt; libopenvino_paddle_frontend.so.2232</span><br><span class="line">.rwxr-xr-x  1.9M lvision 30 Jul 14:08  libopenvino_paddle_frontend.so.2022.3.2</span><br><span class="line">lrwxrwxrwx    39 lvision 30 Jul 14:08  libopenvino_paddle_frontend.so.2232 -&gt; libopenvino_paddle_frontend.so.2022.3.2</span><br><span class="line">.rwxr-xr-x   68k lvision 30 Jul 14:08  libopenvino_template_extension.so</span><br><span class="line">.rwxr-xr-x  8.0M lvision 30 Jul 14:08  libopenvino_template_plugin.so</span><br><span class="line">lrwxrwxrwx    39 lvision 30 Jul 14:08  libopenvino_tensorflow_frontend.so -&gt; libopenvino_tensorflow_frontend.so.2232</span><br><span class="line">.rwxr-xr-x  3.5M lvision 30 Jul 14:08  libopenvino_tensorflow_frontend.so.2022.3.2</span><br><span class="line">lrwxrwxrwx    43 lvision 30 Jul 14:08  libopenvino_tensorflow_frontend.so.2232 -&gt; libopenvino_tensorflow_frontend.so.2022.3.2</span><br><span class="line">.rw-r--r--  3.2k lvision 30 Jul 12:04  libov_protobuf_shutdown.a</span><br><span class="line">.rw-r--r--  1.2k lvision 30 Jul 12:02  libov_shape_inference.a</span><br><span class="line">.rw-r--r--  1.8M lvision 29 Jul 20:03  libprotobuf-lite.a</span><br><span class="line">.rw-r--r--  7.8M lvision 29 Jul 20:04  libprotobuf.a</span><br><span class="line">.rw-r--r--  8.3M lvision 29 Jul 21:07  libprotoc.a</span><br><span class="line">.rw-r--r--  419k lvision 29 Jul 20:01  libpugixml.a</span><br><span class="line">.rwxr-xr-x  133k lvision 30 Jul 14:08  libtemplate_extension.so</span><br><span class="line">.rw-r--r--  165k lvision 30 Jul 12:03  libutil.a</span><br><span class="line">.rw-r--r--  9.9M lvision 30 Jul 12:52  libvpu_common_lib.a</span><br><span class="line">.rw-r--r--   30M lvision 30 Jul 13:07  libvpu_graph_transformer.a</span><br><span class="line">.rw-r--r--  296k lvision 30 Jul 12:04  libXLink.a</span><br><span class="line">.rwxr-xr-x  265k lvision 30 Jul 14:08  model_creation_sample</span><br><span class="line">.rwxr-xr-x   68k lvision 30 Jul 14:08  ov_integration_snippet</span><br><span class="line">.rwxr-xr-x   67k lvision 30 Jul 14:08  ov_integration_snippet_c</span><br><span class="line">.rw-r--r--  2.1M lvision 29 Jul 20:02  pcie-ma2x8x.mvcmd</span><br><span class="line">.rw-r--r--   486 lvision 30 Jul 14:08  plugins.xml</span><br><span class="line">lrwxrwxrwx    15 lvision 30 Jul 13:56  protoc -&gt; /usr/bin/protoc</span><br><span class="line">.rwxr-xr-x  3.7M lvision 29 Jul 21:07  protoc-3.20.3.0.bak</span><br><span class="line">drwxr-xr-x     - lvision 30 Jul 14:08  python_api</span><br><span class="line">.rwxr-xr-x  462k lvision 30 Jul 14:08  speech_sample</span><br><span class="line">.rwxr-xr-x   68k lvision 30 Jul 14:08  sync_benchmark</span><br><span class="line">.rwxr-xr-x   68k lvision 30 Jul 14:08  throughput_benchmark</span><br><span class="line">.rw-r--r--  2.4M lvision 29 Jul 20:02  usb-ma2x8x.mvcmd</span><br></pre></td></tr></table></figure>
<p>Under which, there is a file <code>plugins.xml</code>. <strong><span
style="color:red">VERY IMPORTANT: put <code>plugins.xml</code> under
<code>/usr/local/lib</code></span></strong>.</p>
<h2 id="demonstration">3.3 Demonstration</h2>
<h3 id="hello_query_device.py">3.3.1 <a
target="_blank" rel="noopener" href="https://github.com/openvinotoolkit/openvino/blob/releases/2022/3/samples/python/hello_query_device/hello_query_device.py">hello_query_device.py</a></h3>
<p>Go to
<code>/opt/intel/OpenVINO/openvino/samples/python/hello_query_device</code>,
and run Python script <a
target="_blank" rel="noopener" href="https://github.com/openvinotoolkit/openvino/blob/releases/2022/3/samples/python/hello_query_device/hello_query_device.py">hello_query_device.py</a>:</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/IntelMovidius/OpenVINO_Sample_hello_query_device.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/AI/EdgeComputing/IntelMovidius/OpenVINO_Sample_hello_query_device.png"
alt="OpenVINO Sample hello_query_device.py" /></a></p>
<h3 id="ai-samples">3.3.2 AI Samples</h3>
<p>Please refer to my <strong>NEXT</strong> blog <a
href="../../../../../../2024/08/02/AI/EdgeComputing/raspberry-pi-5-ncs2-openvino-2024/">Raspberry
Pi 5 + Intel NCS2 + OpenVINO In 2024</a>:</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/07/27/OperatingSystems/RaspberryPi/libreELEC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/07/27/OperatingSystems/RaspberryPi/libreELEC/" class="post-title-link" itemprop="url">libreELEC on A Raspberry Pi</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-07-27 10:14:18" itemprop="dateCreated datePublished" datetime="2024-07-27T10:14:18-07:00">2024-07-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 03:07:35" itemprop="dateModified" datetime="2024-09-30T03:07:35-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Raspberry-Pi/" itemprop="url" rel="index"><span itemprop="name">Raspberry Pi</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Try a media center on a <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a>.</p>
<h1 id="overview">1. Overview</h1>
<h2 id="what-is-libreelec-what-is-kodi">1.1 What is <a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a>? What is <a
target="_blank" rel="noopener" href="https://kodi.tv/">Kodi</a>?</h2>
<ul>
<li>What is <a target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a>? Directly
cited from <a target="_blank" rel="noopener" href="https://wiki.libreelec.tv/">LibreELEC Wiki</a>:
<code>LibreELEC is a minimalist 'Just enough OS' Linux distribution for running Kodi</code>.</li>
<li>What is <a target="_blank" rel="noopener" href="https://kodi.tv/">Kodi</a>? Directly cited from <a
target="_blank" rel="noopener" href="https://kodi.tv/about/">About Kodi</a>:
<code>Kodi is an award-winning free and open source (GPL) software media player and entertainment hub that can be installed on Linux, OSX, Windows, iOS, tvOS and Android. It is designed around a "10-foot user interface" for use with televisions and remote controls</code>.</li>
</ul>
<h2 id="flash-libreelec-onto-raspberry-pi">1.2 Flash <a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> Onto <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd if=./LibreELEC-RPi4.aarch64-12.0.0.img of=/dev/sdb bs=1M status=progress conv=fsync</span><br><span class="line">[sudo] password for lvision: </span><br><span class="line">549+0 records in</span><br><span class="line">549+0 records out</span><br><span class="line">575668224 bytes (576 MB, 549 MiB) copied, 68.3918 s, 8.4 MB/s</span><br></pre></td></tr></table></figure>
<h1 id="ssh-into-libreelec">2. <code>ssh</code> Into <a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a></h1>
<h2 id="overview-1">2.1 Overview</h2>
<p>Youâ€™ll be automatically led to the following two pages after direct
reboot. The <strong>ONLY</strong> thing you need to do is to connect
your <a target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a> (already
installed with <a target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a>) with HDMI
cable and connect to your <strong>Smart TV</strong>.</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> Welcome</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> <a
target="_blank" rel="noopener" href="https://kodi.tv/">Kodi</a></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/01_Welcome.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/01_Welcome.jpg"
alt="LibreELEC Welcome" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/02_Kodi.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/02_Kodi.jpg"
alt="LibreELEC Kodi" /></a></td>
</tr>
</tbody>
</table>
<h2 id="enable-ssh-and-allow-http">2.2 Enable SSH and Allow HTTP</h2>
<p>Same as <a
target="_blank" rel="noopener" href="https://github.com/OctoPrint/OctoPi-UpToDate">OctoPi</a> discussed
in my previous blog <a
href="../../../../../../2024/07/25/OperatingSystems/RaspberryPi/OctoPrint/">OctoPrint
on A Raspberry Pi</a>, <a target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a>'s
Wi-Fi is <strong>NOT</strong> started by default. Therefore, weâ€™ll have
to access <a target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> via Wired
connection for the <strong>FIRST</strong> time.</p>
<p>In fact, youâ€™ll even have to enable <strong>SSH</strong> from within
<a target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> smart TV configuration
before youâ€™re able to <strong>SSH</strong> into <a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> on the <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a>. Better allow
<strong>HTTP</strong> at the same time. As follows:</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> Enable SSH</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> Allow HTTP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/03_EnableSSH.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/03_EnableSSH.jpg"
alt="LibreELEC Enable SSH" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/04_AllowHTTP.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/04_AllowHTTP.jpg"
alt="LibreELEC Allow HTTP" /></a></td>
</tr>
</tbody>
</table>
<h2 id="ssh-into-libreelec-via-wired-connection">2.3 <code>ssh</code>
Into <a target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> via Wired
Connection</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ssh root@192.168.1.75</span><br><span class="line">root@192.168.1.75&#x27;s password: </span><br><span class="line">##############################################</span><br><span class="line">#                 LibreELEC                  #</span><br><span class="line">#            https://libreelec.tv            #</span><br><span class="line">##############################################</span><br><span class="line"></span><br><span class="line">LibreELEC (official): 12.0.0 (RPi4.aarch64)</span><br></pre></td></tr></table></figure>
<p>Now, youâ€™re able to <strong>SSH</strong> into <a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> through <strong>Wired
Connection</strong>.</p>
<h2 id="view-libreelec-over-http">2.4 View <a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> Over HTTP</h2>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/09_Web.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/09_Web.png"
alt="LibreELEC Web" /></a></p>
<p>And, youâ€™re able to browse content of <a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> via <strong>HTTP</strong>
remotely.</p>
<h2 id="configure-wi-fi">2.5 Configure Wi-Fi</h2>
<p>Youâ€™ll have to use the command <a
target="_blank" rel="noopener" href="https://manpages.debian.org/testing/connman/connmanctl.1.en.html">connmanctl</a>.</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://manpages.debian.org/testing/connman/connmanctl.1.en.html">connmanctl</a>
How?</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://manpages.debian.org/testing/connman/connmanctl.1.en.html">connmanctl</a>
Outcome</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/07_connmanctl.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/07_connmanctl.png"
alt="connmanctl How?" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/08_connmanctl_services_outcome.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/08_connmanctl_services_outcome.png"
alt="connmanctl Outcome" /></a></td>
</tr>
</tbody>
</table>
<h3 id="passphrase-is-just-your-wifi-password">2.5.1 Passphrase is Just
Your Wifi Password!!</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">connmanctl&gt; connect wifi_&lt;my_network_service_id&gt;</span><br><span class="line">Agent RequestInput wifi_&lt;my_network_service_id&gt;</span><br><span class="line">  Passphrase = [ Type=psk, Requirement=mandatory ]</span><br><span class="line">Passphrase? </span><br></pre></td></tr></table></figure>
<p>When you meet the above question (<strong>Passphrase</strong>?),
please input your Wifi password.</p>
<h3 id="important-commands">2.5.2 Important Commands</h3>
<p>You may use the following commands from time to time during Wifi
configuration.</p>
<ul>
<li><code>systemctl status connman</code></li>
<li><code>systemctl restart connman</code></li>
<li><code>journalctl -u connman</code></li>
<li><code>connmanctl state</code></li>
<li><code>connmanctl services</code></li>
<li>etc.</li>
</ul>
<h3 id="libreelec-configuration">2.5.3 <a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> Configuration</h3>
<p>And, you should be able to doublecheck your Wifi configuration via <a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> Configuration as:</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> Configuration</th>
<th style="text-align: center;">Connections Wifi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/05_LibreELEC_Configuration.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/05_LibreELEC_Configuration.jpg"
alt="LibreELEC Configuration" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/06_Connections_WiFi.jpg"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/libreELEC/06_Connections_WiFi.jpg"
alt="Connections Wifi" /></a></td>
</tr>
</tbody>
</table>
<p>Now, youâ€™re good to go. You can put your videos, pictures, etc. under
respective folder of <a target="_blank" rel="noopener" href="https://libreelec.tv/">LibreELEC</a> as a
real media center.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/07/25/OperatingSystems/RaspberryPi/OctoPrint/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/07/25/OperatingSystems/RaspberryPi/OctoPrint/" class="post-title-link" itemprop="url">OctoPrint on A Raspberry Pi</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-07-25 10:14:18" itemprop="dateCreated datePublished" datetime="2024-07-25T10:14:18-07:00">2024-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 02:31:23" itemprop="dateModified" datetime="2024-09-30T02:31:23-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Raspberry-Pi/" itemprop="url" rel="index"><span itemprop="name">Raspberry Pi</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Finally, I got some time for <a
target="_blank" rel="noopener" href="https://octoprint.org/">OctoPrint</a>, another specific operating
system for <a target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a>, as
<a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a> talked in my
previous blog <a
target="_blank" rel="noopener" href="https://longervision.github.io/2024/2024/05/30/OperatingSystems/OSForRaspberryPi/home-assistant/">Home
Assistant on A Raspberry Pi</a>.</p>
<h1 id="overview">1. Overview</h1>
<h2 id="what-is-octoprint">1.1 What is <a
target="_blank" rel="noopener" href="https://octoprint.org/">OctoPrint</a>?</h2>
<p>From its official website, clearly, <a
target="_blank" rel="noopener" href="https://octoprint.org/">OctoPrint</a> is an operating system for
<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/3D_printing">3D Printing</a>. Its
capabilities can be extended to other manufacturing fields.
Specifically, <a
target="_blank" rel="noopener" href="https://github.com/OctoPrint/OctoPi-UpToDate">OctoPi</a> will work
on a <a target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a>.</p>
<h2 id="flash-octopi-onto-raspberry-pi">1.2 Flash <a
target="_blank" rel="noopener" href="https://github.com/OctoPrint/OctoPi-UpToDate">OctoPi</a> Onto <a
target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd if=./octopi-1.0.0-1.10.2-20240618101629.img of=/dev/sdb bs=1M status=progress conv=fsync </span><br><span class="line">[sudo] password for lvision: </span><br><span class="line">2357198848 bytes (2.4 GB, 2.2 GiB) copied, 2 s, 1.2 GB/s2906653696 bytes (2.9 GB, 2.7 GiB) copied, 2.4707 s, 1.2 GB/s</span><br><span class="line"></span><br><span class="line">2772+1 records in</span><br><span class="line">2772+1 records out</span><br><span class="line">2906653696 bytes (2.9 GB, 2.7 GiB) copied, 248.633 s, 11.7 MB/s</span><br></pre></td></tr></table></figure>
<h1 id="ssh-into-octopi">2. <code>ssh</code> Into <a
target="_blank" rel="noopener" href="https://github.com/OctoPrint/OctoPi-UpToDate">OctoPi</a></h1>
<h2 id="first-login">2.1 FIRST Login</h2>
<p>You got to login <a
target="_blank" rel="noopener" href="https://github.com/OctoPrint/OctoPi-UpToDate">OctoPi</a> locally
for the <strong>FIRST</strong> time, instead of remotely, for the <a
target="_blank" rel="noopener" href="https://networkmanager.dev/">NetworkManager</a> service is
<strong>NOT</strong> started by default. Namely, there is
<strong>NO</strong> Wi-Fi by default. Well, you can
<strong>ALWAYS</strong> use the wired connection of course.</p>
<h3 id="start-networkmanager-whenever-reboot">2.1.1 Start <a
target="_blank" rel="noopener" href="https://networkmanager.dev/">NetworkManager</a> Whenever
Reboot</h3>
<p>Use the following commands:</p>
<ul>
<li><code>sudo systemctl status NetworkManager</code></li>
<li><code>sudo systemctl enable NetworkManager</code></li>
<li><code>sudo systemctl start NetworkManager</code></li>
<li><code>sudo systemctl status NetworkManager</code> for double
check</li>
<li><code>sudo reboot reboot to ensure NetworkManager</code> is started
by default</li>
<li><code>sudo systemctl status NetworkManager</code> check again</li>
</ul>
<h3 id="nmcli-to-set-up-wi-fi">2.1.2 <a
target="_blank" rel="noopener" href="https://networkmanager.dev/docs/api/latest/nmcli.html">nmcli</a>
to Set Up Wi-Fi</h3>
<p>Use the following commands:</p>
<ul>
<li><code>nmcli dev wifi list</code></li>
<li><code>nmcli dev wifi connect NetworkName password WiFiPassword</code>
(You don't need to quote or double-quote <strong>NetworkName</strong> or
<strong>WiFiPassword</strong>)</li>
</ul>
<p>Now, youâ€™re good to go.</p>
<h2 id="ssh-into-octopi-via-wi-fi-connection">2.2 <code>ssh</code> Into
<a target="_blank" rel="noopener" href="https://github.com/OctoPrint/OctoPi-UpToDate">OctoPi</a> Via
Wi-Fi Connection</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">$ ssh lvision@192.168.1.76</span><br><span class="line">lvision@192.168.1.76&#x27;s password: </span><br><span class="line">Linux octopi 6.1.21-v7+ #1642 SMP Mon Apr  3 17:20:52 BST 2023 armv7l</span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms for each program are described in the</span><br><span class="line">individual files in /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Thu Jul 25 20:23:51 2024 from 192.168.1.1</span><br><span class="line">âžœ  ~ neofetch</span><br><span class="line">  `.::///+:/-.        --///+//-:``    lvision@octopi </span><br><span class="line"> `+oooooooooooo:   `+oooooooooooo:    -------------- </span><br><span class="line">  /oooo++//ooooo:  ooooo+//+ooooo.    OS: Raspbian GNU/Linux 11 (bullseye) armv7l </span><br><span class="line">  `+ooooooo:-:oo-  +o+::/ooooooo:     Host: Raspberry Pi 3 Model B Rev 1.2 </span><br><span class="line">   `:oooooooo+``    `.oooooooo+-      Kernel: 6.1.21-v7+ </span><br><span class="line">     `:++ooo/.        :+ooo+/.`       Uptime: 5 mins </span><br><span class="line">        ...`  `.----.` ``..           Packages: 816 (dpkg) </span><br><span class="line">     .::::-``:::::::::.`-:::-`        Shell: zsh 5.8 </span><br><span class="line">    -:::-`   .:::::::-`  `-:::-       Terminal: /dev/pts/0 </span><br><span class="line">   `::.  `.--.`  `` `.---.``.::`      CPU: BCM2835 (4) @ 1.200GHz </span><br><span class="line">       .::::::::`  -::::::::` `       Memory: 111MiB / 870MiB </span><br><span class="line"> .::` .:::::::::- `::::::::::``::.</span><br><span class="line">-:::` ::::::::::.  ::::::::::.`:::-                           </span><br><span class="line">::::  -::::::::.   `-::::::::  ::::                           </span><br><span class="line">-::-   .-:::-.``....``.-::-.   -::-</span><br><span class="line"> .. ``       .::::::::.     `..`..</span><br><span class="line">   -:::-`   -::::::::::`  .:::::`</span><br><span class="line">   :::::::` -::::::::::` :::::::.</span><br><span class="line">   .:::::::  -::::::::. ::::::::</span><br><span class="line">    `-:::::`   ..--.`   ::::::.</span><br><span class="line">      `...`  `...--..`  `...`</span><br><span class="line">            .::::::::::</span><br><span class="line">             `.-::::-`</span><br></pre></td></tr></table></figure>
<h1 id="octoprint-on-octopi">3. <a
target="_blank" rel="noopener" href="https://octoprint.org/">OctoPrint</a> on <a
target="_blank" rel="noopener" href="https://github.com/OctoPrint/OctoPi-UpToDate">OctoPi</a></h1>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">octopi.local Setup Wizard</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://octoprint.org/">OctoPrint</a> 3D Printer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OctoPi/OctoPrint_octopi.local.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OctoPi/OctoPrint_octopi.local.png"
alt="OctoPrint" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OctoPi/OctoPrint_3DPrinter.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OctoPi/OctoPrint_3DPrinter.png"
alt="OctoPi" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://octoprint.org/">OctoPrint</a> Server Reload</th>
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://octoprint.org/">OctoPrint</a> Webcam</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OctoPi/OctoPrint_ServerReload.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OctoPi/OctoPrint_ServerReload.png"
alt="OctoPrint Server Reload" /></a></td>
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OctoPi/OctoPrint_Webcam.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/ti/raspberrypi/OctoPi/OctoPrint_Webcam.png"
alt="OctoPrint Webcam" /></a></td>
</tr>
</tbody>
</table>
<h1 id="lasergrbl-and-lightburn">4. <a
target="_blank" rel="noopener" href="https://lasergrbl.com/">LaserGRBL</a> and <a
target="_blank" rel="noopener" href="https://lightburnsoftware.com/">LightBurn</a></h1>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.ca/2024/07/08/MachineVision/RGBD/Kinect-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/07/08/MachineVision/RGBD/Kinect-2/" class="post-title-link" itemprop="url">Kinect 2 on Jetson AGX Xavier</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-07-08 00:00:00" itemprop="dateCreated datePublished" datetime="2024-07-08T00:00:00-07:00">2024-07-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-09-30 02:12:52" itemprop="dateModified" datetime="2024-09-30T02:12:52-07:00">2024-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Vision/" itemprop="url" rel="index"><span itemprop="name">Machine Vision</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Machine-Vision/RGBD/" itemprop="url" rel="index"><span itemprop="name">RGBD</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Today, I wanna try out the old <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a> 2 on my old <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-xavier-series/">Jetson
AGX Xavier</a>.</p>
<h1 id="my-working-environment">0. My Working Environment</h1>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/jetson_agx_xavier_32g.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/jetson_agx_xavier_32g.png"
alt="Jetson AGX Xavier 32G" /></a></p>
<p>For how I set up my old <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-xavier-series/">Jetson
AGX Xavier</a>, please refer to my previous blog <a
target="_blank" rel="noopener" href="https://longervision.github.io/2024/07/06/SBCs/ARM/NVidia-Jetson-Xavier-AGX/">NVidia
Jetson Xavier AGX</a>.</p>
<h1 id="kinect-2">1. Kinect 2</h1>
<h2 id="overview">1.1 Overview</h2>
<p><a
target="_blank" rel="noopener" href="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Xbox-One-Kinect.jpg/2560px-Xbox-One-Kinect.jpg"><img
src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Xbox-One-Kinect.jpg/2560px-Xbox-One-Kinect.jpg"
alt="Kinect 2 Overview" /></a></p>
<h2 id="hardware-specification">1.2 Hardware Specification</h2>
<p>You can find specs of <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a> v2 in <a
target="_blank" rel="noopener" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9002889/">Evaluating
the Accuracy of the Azure Kinect and Kinect v2</a>.</p>
<h1 id="lsusb-and-add-udev-rules">2. <code>lsusb</code> and
<code>add udev rules</code></h1>
<h2 id="lsusb">2.1 <code>lsusb</code></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ lsusb | grep Microsoft</span><br><span class="line">Bus 009 Device 015: ID 045e:02d9 Microsoft Corp. NuiSensor Adaptor      </span><br><span class="line">Bus 010 Device 005: ID 045e:02d9 Microsoft Corp. NuiSensor Adaptor      </span><br><span class="line">Bus 010 Device 006: ID 045e:02c4 Microsoft Corp. Xbox NUI Sensor</span><br></pre></td></tr></table></figure>
<h2 id="lsusb-more-details">2.2 <code>lsusb</code> More Details</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ~ lsusb -v -d 045e:02c4</span><br><span class="line"></span><br><span class="line">Bus 002 Device 015: ID 045e:02c4 Microsoft Corp. </span><br><span class="line">Device Descriptor:</span><br><span class="line">  bLength                18</span><br><span class="line">  bDescriptorType         1</span><br><span class="line">  bcdUSB               3.00</span><br><span class="line">  bDeviceClass          239 Miscellaneous Device</span><br><span class="line">  bDeviceSubClass         2 </span><br><span class="line">  bDeviceProtocol         1 Interface Association</span><br><span class="line">  bMaxPacketSize0         9</span><br><span class="line">  idVendor           0x045e Microsoft Corp.</span><br><span class="line">  idProduct          0x02c4 </span><br><span class="line">  bcdDevice            1.00</span><br><span class="line">  iManufacturer           1 Microsoft</span><br><span class="line">  iProduct                2 Xbox NUI Sensor</span><br><span class="line">  iSerial                 4 178602434347</span><br><span class="line">  bNumConfigurations      1</span><br><span class="line">  Configuration Descriptor:</span><br><span class="line">    bLength                 9</span><br><span class="line">    bDescriptorType         2</span><br><span class="line">    wTotalLength       0x00d6</span><br><span class="line">    bNumInterfaces          4</span><br><span class="line">    bConfigurationValue     1</span><br><span class="line">    iConfiguration          0 </span><br><span class="line">    bmAttributes         0xe0</span><br><span class="line">      Self Powered</span><br><span class="line">      Remote Wakeup</span><br><span class="line">    MaxPower              144mA</span><br><span class="line">    Interface Association:</span><br><span class="line">      bLength                 8</span><br><span class="line">      bDescriptorType        11</span><br><span class="line">      bFirstInterface         0</span><br><span class="line">      bInterfaceCount         2</span><br><span class="line">      bFunctionClass        255 Vendor Specific Class</span><br><span class="line">      bFunctionSubClass     255 Vendor Specific Subclass</span><br><span class="line">      bFunctionProtocol       0 </span><br><span class="line">      iFunction               0 </span><br><span class="line">    Interface Descriptor:</span><br><span class="line">      bLength                 9</span><br><span class="line">      bDescriptorType         4</span><br><span class="line">      bInterfaceNumber        0</span><br><span class="line">      bAlternateSetting       0</span><br><span class="line">      bNumEndpoints           4</span><br><span class="line">      bInterfaceClass       255 Vendor Specific Class</span><br><span class="line">      bInterfaceSubClass      0 </span><br><span class="line">      bInterfaceProtocol      0 </span><br><span class="line">      iInterface              0 </span><br><span class="line">      Endpoint Descriptor:</span><br><span class="line">        bLength                 7</span><br><span class="line">        bDescriptorType         5</span><br><span class="line">        bEndpointAddress     0x81  EP 1 IN</span><br><span class="line">        bmAttributes            2</span><br><span class="line">          Transfer Type            Bulk</span><br><span class="line">          Synch Type               None</span><br><span class="line">          Usage Type               Data</span><br><span class="line">        wMaxPacketSize     0x0400  1x 1024 bytes</span><br><span class="line">        bInterval               0</span><br><span class="line">        bMaxBurst               7</span><br><span class="line">      Endpoint Descriptor:</span><br><span class="line">        bLength                 7</span><br><span class="line">        bDescriptorType         5</span><br><span class="line">        bEndpointAddress     0x02  EP 2 OUT</span><br><span class="line">        bmAttributes            2</span><br><span class="line">          Transfer Type            Bulk</span><br><span class="line">          Synch Type               None</span><br><span class="line">          Usage Type               Data</span><br><span class="line">        wMaxPacketSize     0x0400  1x 1024 bytes</span><br><span class="line">        bInterval               0</span><br><span class="line">        bMaxBurst               7</span><br><span class="line">      Endpoint Descriptor:</span><br><span class="line">        bLength                 7</span><br><span class="line">        bDescriptorType         5</span><br><span class="line">        bEndpointAddress     0x83  EP 3 IN</span><br><span class="line">        bmAttributes            2</span><br><span class="line">          Transfer Type            Bulk</span><br><span class="line">          Synch Type               None</span><br><span class="line">          Usage Type               Data</span><br><span class="line">        wMaxPacketSize     0x0400  1x 1024 bytes</span><br><span class="line">        bInterval               0</span><br><span class="line">        bMaxBurst               7</span><br><span class="line">      Endpoint Descriptor:</span><br><span class="line">        bLength                 7</span><br><span class="line">        bDescriptorType         5</span><br><span class="line">        bEndpointAddress     0x82  EP 2 IN</span><br><span class="line">        bmAttributes           19</span><br><span class="line">          Transfer Type            Interrupt</span><br><span class="line">          Synch Type               None</span><br><span class="line">          Usage Type               Feedback</span><br><span class="line">        wMaxPacketSize     0x0040  1x 64 bytes</span><br><span class="line">        bInterval              14</span><br><span class="line">        bMaxBurst               0</span><br><span class="line">    Interface Descriptor:</span><br><span class="line">      bLength                 9</span><br><span class="line">      bDescriptorType         4</span><br><span class="line">      bInterfaceNumber        1</span><br><span class="line">      bAlternateSetting       0</span><br><span class="line">      bNumEndpoints           0</span><br><span class="line">      bInterfaceClass       255 Vendor Specific Class</span><br><span class="line">      bInterfaceSubClass      0 </span><br><span class="line">      bInterfaceProtocol      0 </span><br><span class="line">      iInterface              0 </span><br><span class="line">    Interface Descriptor:</span><br><span class="line">      bLength                 9</span><br><span class="line">      bDescriptorType         4</span><br><span class="line">      bInterfaceNumber        1</span><br><span class="line">      bAlternateSetting       1</span><br><span class="line">      bNumEndpoints           1</span><br><span class="line">      bInterfaceClass       255 Vendor Specific Class</span><br><span class="line">      bInterfaceSubClass      0 </span><br><span class="line">      bInterfaceProtocol      0 </span><br><span class="line">      iInterface              0 </span><br><span class="line">      Endpoint Descriptor:</span><br><span class="line">        bLength                 7</span><br><span class="line">        bDescriptorType         5</span><br><span class="line">        bEndpointAddress     0x84  EP 4 IN</span><br><span class="line">        bmAttributes            1</span><br><span class="line">          Transfer Type            Isochronous</span><br><span class="line">          Synch Type               None</span><br><span class="line">          Usage Type               Data</span><br><span class="line">        wMaxPacketSize     0x0400  1x 1024 bytes</span><br><span class="line">        bInterval               1</span><br><span class="line">        bMaxBurst              10</span><br><span class="line">        Mult                    2</span><br><span class="line">    Interface Association:</span><br><span class="line">      bLength                 8</span><br><span class="line">      bDescriptorType        11</span><br><span class="line">      bFirstInterface         2</span><br><span class="line">      bInterfaceCount         2</span><br><span class="line">      bFunctionClass          1 Audio</span><br><span class="line">      bFunctionSubClass       2 Streaming</span><br><span class="line">      bFunctionProtocol       0 </span><br><span class="line">      iFunction               0 </span><br><span class="line">    Interface Descriptor:</span><br><span class="line">      bLength                 9</span><br><span class="line">      bDescriptorType         4</span><br><span class="line">      bInterfaceNumber        2</span><br><span class="line">      bAlternateSetting       0</span><br><span class="line">      bNumEndpoints           0</span><br><span class="line">      bInterfaceClass         1 Audio</span><br><span class="line">      bInterfaceSubClass      1 Control Device</span><br><span class="line">      bInterfaceProtocol      0 </span><br><span class="line">      iInterface              0 </span><br><span class="line">      AudioControl Interface Descriptor:</span><br><span class="line">        bLength                 9</span><br><span class="line">        bDescriptorType        36</span><br><span class="line">        bDescriptorSubtype      1 (HEADER)</span><br><span class="line">        bcdADC               1.00</span><br><span class="line">        wTotalLength       0x001e</span><br><span class="line">        bInCollection           1</span><br><span class="line">        baInterfaceNr(0)        3</span><br><span class="line">      AudioControl Interface Descriptor:</span><br><span class="line">        bLength                12</span><br><span class="line">        bDescriptorType        36</span><br><span class="line">        bDescriptorSubtype      2 (INPUT_TERMINAL)</span><br><span class="line">        bTerminalID             1</span><br><span class="line">        wTerminalType      0x0205 Microphone Array</span><br><span class="line">        bAssocTerminal          0</span><br><span class="line">        bNrChannels             4</span><br><span class="line">        wChannelConfig     0x0000</span><br><span class="line">        iChannelNames           0 </span><br><span class="line">        iTerminal               0 </span><br><span class="line">      AudioControl Interface Descriptor:</span><br><span class="line">        bLength                 9</span><br><span class="line">        bDescriptorType        36</span><br><span class="line">        bDescriptorSubtype      3 (OUTPUT_TERMINAL)</span><br><span class="line">        bTerminalID             3</span><br><span class="line">        wTerminalType      0x0101 USB Streaming</span><br><span class="line">        bAssocTerminal          0</span><br><span class="line">        bSourceID               1</span><br><span class="line">        iTerminal               0 </span><br><span class="line">    Interface Descriptor:</span><br><span class="line">      bLength                 9</span><br><span class="line">      bDescriptorType         4</span><br><span class="line">      bInterfaceNumber        3</span><br><span class="line">      bAlternateSetting       0</span><br><span class="line">      bNumEndpoints           0</span><br><span class="line">      bInterfaceClass         1 Audio</span><br><span class="line">      bInterfaceSubClass      2 Streaming</span><br><span class="line">      bInterfaceProtocol      0 </span><br><span class="line">      iInterface              0 </span><br><span class="line">    Interface Descriptor:</span><br><span class="line">      bLength                 9</span><br><span class="line">      bDescriptorType         4</span><br><span class="line">      bInterfaceNumber        3</span><br><span class="line">      bAlternateSetting       1</span><br><span class="line">      bNumEndpoints           1</span><br><span class="line">      bInterfaceClass         1 Audio</span><br><span class="line">      bInterfaceSubClass      2 Streaming</span><br><span class="line">      bInterfaceProtocol      0 </span><br><span class="line">      iInterface              0 </span><br><span class="line">      AudioStreaming Interface Descriptor:</span><br><span class="line">        bLength                 7</span><br><span class="line">        bDescriptorType        36</span><br><span class="line">        bDescriptorSubtype      1 (AS_GENERAL)</span><br><span class="line">        bTerminalLink           3</span><br><span class="line">        bDelay                  1 frames</span><br><span class="line">        wFormatTag         0x0001 PCM</span><br><span class="line">      AudioStreaming Interface Descriptor:</span><br><span class="line">        bLength                11</span><br><span class="line">        bDescriptorType        36</span><br><span class="line">        bDescriptorSubtype      2 (FORMAT_TYPE)</span><br><span class="line">        bFormatType             1 (FORMAT_TYPE_I)</span><br><span class="line">        bNrChannels             4</span><br><span class="line">        bSubframeSize           4</span><br><span class="line">        bBitResolution         32</span><br><span class="line">        bSamFreqType            1 Discrete</span><br><span class="line">        tSamFreq[ 0]        16000</span><br><span class="line">      Endpoint Descriptor:</span><br><span class="line">        bLength                 9</span><br><span class="line">        bDescriptorType         5</span><br><span class="line">        bEndpointAddress     0x85  EP 5 IN</span><br><span class="line">        bmAttributes            1</span><br><span class="line">          Transfer Type            Isochronous</span><br><span class="line">          Synch Type               None</span><br><span class="line">          Usage Type               Data</span><br><span class="line">        wMaxPacketSize     0x0100  1x 256 bytes</span><br><span class="line">        bInterval               4</span><br><span class="line">        bRefresh                0</span><br><span class="line">        bSynchAddress           0</span><br><span class="line">        bMaxBurst               0</span><br><span class="line">        AudioStreaming Endpoint Descriptor:</span><br><span class="line">          bLength                 7</span><br><span class="line">          bDescriptorType        37</span><br><span class="line">          bDescriptorSubtype      1 (EP_GENERAL)</span><br><span class="line">          bmAttributes         0x00</span><br><span class="line">          bLockDelayUnits         0 Undefined</span><br><span class="line">          wLockDelay         0x0000</span><br><span class="line">Binary Object Store Descriptor:</span><br><span class="line">  bLength                 5</span><br><span class="line">  bDescriptorType        15</span><br><span class="line">  wTotalLength       0x0016</span><br><span class="line">  bNumDeviceCaps          2</span><br><span class="line">  SuperSpeed USB Device Capability:</span><br><span class="line">    bLength                10</span><br><span class="line">    bDescriptorType        16</span><br><span class="line">    bDevCapabilityType      3</span><br><span class="line">    bmAttributes         0x00</span><br><span class="line">    wSpeedsSupported   0x000c</span><br><span class="line">      Device can operate at High Speed (480Mbps)</span><br><span class="line">      Device can operate at SuperSpeed (5Gbps)</span><br><span class="line">    bFunctionalitySupport   2</span><br><span class="line">      Lowest fully-functional device speed is High Speed (480Mbps)</span><br><span class="line">    bU1DevExitLat          10 micro seconds</span><br><span class="line">    bU2DevExitLat        2047 micro seconds</span><br><span class="line">  USB 2.0 Extension Device Capability:</span><br><span class="line">    bLength                 7</span><br><span class="line">    bDescriptorType        16</span><br><span class="line">    bDevCapabilityType      2</span><br><span class="line">    bmAttributes   0x00000002</span><br><span class="line">      HIRD Link Power Management (LPM) Supported</span><br><span class="line">can&#x27;t get debug descriptor: Resource temporarily unavailable</span><br><span class="line">Device Status:     0x0001</span><br><span class="line">  Self Powered</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ~ lsusb -v -d 045e:02d9 </span><br><span class="line"></span><br><span class="line">Bus 002 Device 014: ID 045e:02d9 Microsoft Corp. NuiSensor Adaptor      </span><br><span class="line">Device Descriptor:</span><br><span class="line">  bLength                18</span><br><span class="line">  bDescriptorType         1</span><br><span class="line">  bcdUSB               3.00</span><br><span class="line">  bDeviceClass            9 Hub</span><br><span class="line">  bDeviceSubClass         0 </span><br><span class="line">  bDeviceProtocol         3 </span><br><span class="line">  bMaxPacketSize0         9</span><br><span class="line">  idVendor           0x045e Microsoft Corp.</span><br><span class="line">  idProduct          0x02d9 </span><br><span class="line">  bcdDevice            0.73</span><br><span class="line">  iManufacturer           1 Microsoft Corporation  </span><br><span class="line">  iProduct                2 NuiSensor Adaptor      </span><br><span class="line">  iSerial                 0 </span><br><span class="line">  bNumConfigurations      1</span><br><span class="line">  Configuration Descriptor:</span><br><span class="line">    bLength                 9</span><br><span class="line">    bDescriptorType         2</span><br><span class="line">    wTotalLength       0x001f</span><br><span class="line">    bNumInterfaces          1</span><br><span class="line">    bConfigurationValue     1</span><br><span class="line">    iConfiguration          0 </span><br><span class="line">    bmAttributes         0xe0</span><br><span class="line">      Self Powered</span><br><span class="line">      Remote Wakeup</span><br><span class="line">    MaxPower                0mA</span><br><span class="line">    Interface Descriptor:</span><br><span class="line">      bLength                 9</span><br><span class="line">      bDescriptorType         4</span><br><span class="line">      bInterfaceNumber        0</span><br><span class="line">      bAlternateSetting       0</span><br><span class="line">      bNumEndpoints           1</span><br><span class="line">      bInterfaceClass         9 Hub</span><br><span class="line">      bInterfaceSubClass      0 </span><br><span class="line">      bInterfaceProtocol      0 Full speed (or root) hub</span><br><span class="line">      iInterface              0 </span><br><span class="line">      Endpoint Descriptor:</span><br><span class="line">        bLength                 7</span><br><span class="line">        bDescriptorType         5</span><br><span class="line">        bEndpointAddress     0x81  EP 1 IN</span><br><span class="line">        bmAttributes           19</span><br><span class="line">          Transfer Type            Interrupt</span><br><span class="line">          Synch Type               None</span><br><span class="line">          Usage Type               Feedback</span><br><span class="line">        wMaxPacketSize     0x0002  1x 2 bytes</span><br><span class="line">        bInterval               8</span><br><span class="line">        bMaxBurst               0</span><br><span class="line">Hub Descriptor:</span><br><span class="line">  bLength              12</span><br><span class="line">  bDescriptorType      42</span><br><span class="line">  nNbrPorts             1</span><br><span class="line">  wHubCharacteristic 0x000d</span><br><span class="line">    Per-port power switching</span><br><span class="line">    Compound device</span><br><span class="line">    Per-port overcurrent protection</span><br><span class="line">  bPwrOn2PwrGood      100 * 2 milli seconds</span><br><span class="line">  bHubContrCurrent      0 milli Ampere</span><br><span class="line">  bHubDecLat          0.4 micro seconds</span><br><span class="line">  wHubDelay          4004 nano seconds</span><br><span class="line">  DeviceRemovable    0x00</span><br><span class="line"> Hub Port Status:</span><br><span class="line">   Port 1: 0000.0203 5Gbps power U0 enable connect</span><br><span class="line">Binary Object Store Descriptor:</span><br><span class="line">  bLength                 5</span><br><span class="line">  bDescriptorType        15</span><br><span class="line">  wTotalLength       0x002a</span><br><span class="line">  bNumDeviceCaps          3</span><br><span class="line">  USB 2.0 Extension Device Capability:</span><br><span class="line">    bLength                 7</span><br><span class="line">    bDescriptorType        16</span><br><span class="line">    bDevCapabilityType      2</span><br><span class="line">    bmAttributes   0x00000002</span><br><span class="line">      HIRD Link Power Management (LPM) Supported</span><br><span class="line">  SuperSpeed USB Device Capability:</span><br><span class="line">    bLength                10</span><br><span class="line">    bDescriptorType        16</span><br><span class="line">    bDevCapabilityType      3</span><br><span class="line">    bmAttributes         0x00</span><br><span class="line">    wSpeedsSupported   0x000e</span><br><span class="line">      Device can operate at Full Speed (12Mbps)</span><br><span class="line">      Device can operate at High Speed (480Mbps)</span><br><span class="line">      Device can operate at SuperSpeed (5Gbps)</span><br><span class="line">    bFunctionalitySupport   1</span><br><span class="line">      Lowest fully-functional device speed is Full Speed (12Mbps)</span><br><span class="line">    bU1DevExitLat           4 micro seconds</span><br><span class="line">    bU2DevExitLat         231 micro seconds</span><br><span class="line">  Container ID Device Capability:</span><br><span class="line">    bLength                20</span><br><span class="line">    bDescriptorType        16</span><br><span class="line">    bDevCapabilityType      4</span><br><span class="line">    bReserved               0</span><br><span class="line">    ContainerID             &#123;30eef35c-07d5-2549-b001-802d79434c30&#125;</span><br><span class="line">can&#x27;t get debug descriptor: Resource temporarily unavailable</span><br><span class="line">Device Status:     0x000d</span><br><span class="line">  Self Powered</span><br><span class="line">  U1 Enabled</span><br><span class="line">  U2 Enabled</span><br><span class="line"></span><br><span class="line">Bus 001 Device 008: ID 045e:02d9 Microsoft Corp. NuiSensor Adaptor      </span><br><span class="line">Device Descriptor:</span><br><span class="line">  bLength                18</span><br><span class="line">  bDescriptorType         1</span><br><span class="line">  bcdUSB               2.10</span><br><span class="line">  bDeviceClass            9 Hub</span><br><span class="line">  bDeviceSubClass         0 </span><br><span class="line">  bDeviceProtocol         1 Single TT</span><br><span class="line">  bMaxPacketSize0        64</span><br><span class="line">  idVendor           0x045e Microsoft Corp.</span><br><span class="line">  idProduct          0x02d9 </span><br><span class="line">  bcdDevice            0.70</span><br><span class="line">  iManufacturer           1 Microsoft Corporation  </span><br><span class="line">  iProduct                2 NuiSensor Adaptor      </span><br><span class="line">  iSerial                 0 </span><br><span class="line">  bNumConfigurations      1</span><br><span class="line">  Configuration Descriptor:</span><br><span class="line">    bLength                 9</span><br><span class="line">    bDescriptorType         2</span><br><span class="line">    wTotalLength       0x0019</span><br><span class="line">    bNumInterfaces          1</span><br><span class="line">    bConfigurationValue     1</span><br><span class="line">    iConfiguration          0 </span><br><span class="line">    bmAttributes         0xe0</span><br><span class="line">      Self Powered</span><br><span class="line">      Remote Wakeup</span><br><span class="line">    MaxPower                0mA</span><br><span class="line">    Interface Descriptor:</span><br><span class="line">      bLength                 9</span><br><span class="line">      bDescriptorType         4</span><br><span class="line">      bInterfaceNumber        0</span><br><span class="line">      bAlternateSetting       0</span><br><span class="line">      bNumEndpoints           1</span><br><span class="line">      bInterfaceClass         9 Hub</span><br><span class="line">      bInterfaceSubClass      0 </span><br><span class="line">      bInterfaceProtocol      0 Full speed (or root) hub</span><br><span class="line">      iInterface              0 </span><br><span class="line">      Endpoint Descriptor:</span><br><span class="line">        bLength                 7</span><br><span class="line">        bDescriptorType         5</span><br><span class="line">        bEndpointAddress     0x81  EP 1 IN</span><br><span class="line">        bmAttributes            3</span><br><span class="line">          Transfer Type            Interrupt</span><br><span class="line">          Synch Type               None</span><br><span class="line">          Usage Type               Data</span><br><span class="line">        wMaxPacketSize     0x0001  1x 1 bytes</span><br><span class="line">        bInterval              12</span><br><span class="line">Hub Descriptor:</span><br><span class="line">  bLength               9</span><br><span class="line">  bDescriptorType      41</span><br><span class="line">  nNbrPorts             1</span><br><span class="line">  wHubCharacteristic 0x00ed</span><br><span class="line">    Per-port power switching</span><br><span class="line">    Compound device</span><br><span class="line">    Per-port overcurrent protection</span><br><span class="line">    TT think time 32 FS bits</span><br><span class="line">    Port indicators</span><br><span class="line">  bPwrOn2PwrGood       50 * 2 milli seconds</span><br><span class="line">  bHubContrCurrent    100 milli Ampere</span><br><span class="line">  DeviceRemovable    0x00</span><br><span class="line">  PortPwrCtrlMask    0xff</span><br><span class="line"> Hub Port Status:</span><br><span class="line">   Port 1: 0000.0100 power</span><br><span class="line">Binary Object Store Descriptor:</span><br><span class="line">  bLength                 5</span><br><span class="line">  bDescriptorType        15</span><br><span class="line">  wTotalLength       0x002a</span><br><span class="line">  bNumDeviceCaps          3</span><br><span class="line">  USB 2.0 Extension Device Capability:</span><br><span class="line">    bLength                 7</span><br><span class="line">    bDescriptorType        16</span><br><span class="line">    bDevCapabilityType      2</span><br><span class="line">    bmAttributes   0x00000002</span><br><span class="line">      HIRD Link Power Management (LPM) Supported</span><br><span class="line">  SuperSpeed USB Device Capability:</span><br><span class="line">    bLength                10</span><br><span class="line">    bDescriptorType        16</span><br><span class="line">    bDevCapabilityType      3</span><br><span class="line">    bmAttributes         0x00</span><br><span class="line">    wSpeedsSupported   0x000e</span><br><span class="line">      Device can operate at Full Speed (12Mbps)</span><br><span class="line">      Device can operate at High Speed (480Mbps)</span><br><span class="line">      Device can operate at SuperSpeed (5Gbps)</span><br><span class="line">    bFunctionalitySupport   1</span><br><span class="line">      Lowest fully-functional device speed is Full Speed (12Mbps)</span><br><span class="line">    bU1DevExitLat           4 micro seconds</span><br><span class="line">    bU2DevExitLat         231 micro seconds</span><br><span class="line">  Container ID Device Capability:</span><br><span class="line">    bLength                20</span><br><span class="line">    bDescriptorType        16</span><br><span class="line">    bDevCapabilityType      4</span><br><span class="line">    bReserved               0</span><br><span class="line">    ContainerID             &#123;30eef35c-07d5-2549-b001-802d79434c30&#125;</span><br><span class="line">can&#x27;t get debug descriptor: Resource temporarily unavailable</span><br><span class="line">Device Status:     0x0001</span><br><span class="line">  Self Powered</span><br></pre></td></tr></table></figure>
<h2 id="add-udev-rules-under-etcudevrules.d">2.3 Add
<code>udev rules</code> Under <code>/etc/udev/rules.d</code></h2>
<p>Take a look at <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2/blob/master/platform/linux/udev/90-kinect2.rules">OpenKinect
libfreenect2 90-kinect2.rules</a>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ cat platform/linux/udev/90-kinect2.rules            </span><br><span class="line">â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="line">       â”‚ File: platform/linux/udev/90-kinect2.rules</span><br><span class="line">â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="line">   1   â”‚ # this file belongs in /etc/udev/rules.d/</span><br><span class="line">   2   â”‚ # ATTR&#123;product&#125;==&quot;Kinect2&quot;</span><br><span class="line">   3   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idVendor&#125;==&quot;045e&quot;, ATTR&#123;idProduct&#125;==&quot;02c4&quot;, MODE=&quot;0666&quot;</span><br><span class="line">   4   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idVendor&#125;==&quot;045e&quot;, ATTR&#123;idProduct&#125;==&quot;02d8&quot;, MODE=&quot;0666&quot;</span><br><span class="line">   5   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idVendor&#125;==&quot;045e&quot;, ATTR&#123;idProduct&#125;==&quot;02d9&quot;, MODE=&quot;0666&quot;</span><br><span class="line">â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br></pre></td></tr></table></figure>
<p><strong><span style="color:red">Weâ€™ll do the following 2
steps:</span></strong></p>
<ul>
<li>step 1: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo cp platform/linux/udev/90-kinect2.rules /etc/udev/rules.d</span><br></pre></td></tr></table></figure></li>
<li>step 2: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo udevadm control --reload-rules</span><br><span class="line">$ sudo udevadm trigger</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="dont-use-default-openni2-from-default-repository">2.4 Donâ€™t Use
Default <a target="_blank" rel="noopener" href="https://structure.io/openni/">OpenNI2</a> from Default
Repository</h2>
<h3 id="incorrect-rules">2.4.1 Incorrect Rules</h3>
<p>Take a look at <a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/blob/kinect2/Packaging/Linux/primesense-usb.rules">OpenNI2
Kinect2 primesense-usb.rules</a>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ cat Packaging/Linux/primesense-usb.rules               </span><br><span class="line">â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="line">       â”‚ File: Packaging/Linux/primesense-usb.rules</span><br><span class="line">â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span><br><span class="line">   1   â”‚ # Make primesense device mount with writing permissions (default is read only for unknown devices)</span><br><span class="line">   2   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;0200&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">   3   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;0300&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">   4   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;0401&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">   5   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;0500&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">   6   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;0600&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">   7   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;0601&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">   8   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;0609&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">   9   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;1250&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">  10   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;1260&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">  11   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;1270&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">  12   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;1280&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">  13   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;1290&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br><span class="line">  14   â”‚ SUBSYSTEM==&quot;usb&quot;, ATTR&#123;idProduct&#125;==&quot;f9db&quot;, ATTR&#123;idVendor&#125;==&quot;1d27&quot;, MODE:=&quot;0666&quot;, OWNER:=&quot;root&quot;, GROUP:=&quot;video&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><span style="color:red">!Note:</span></strong> <strong><span
style="color:red">by installing <code>libopenni2-dev</code> and
<code>openni2-utils</code> from default repo, youâ€™re going to have the
above rule <code>primesense-usb.rules</code> installed under
<code>/usr/lib/udev/rules.d</code>, instead of
<code>/etc/udev/rules.d</code>.</span></strong></p>
</blockquote>
<h3 id="incorrect-niviewer">2.4.2 Incorrect <a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2/Source/Tools/NiViewer">NiViewer</a></h3>
<p>Even if package <strong>openni2-utils</strong> installed an
executable <strong>NiViewer2</strong> under <code>/usr/bin</code>, it
fails to even detect the device <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a>
<strong>v2</strong>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ NiViewer2</span><br><span class="line">openDevice failed:</span><br><span class="line">	DeviceOpen using default: no devices found</span><br><span class="line"></span><br><span class="line">Press any key to continue . . .</span><br></pre></td></tr></table></figure>
<p>Due to the above <strong>Incorrect Rules</strong>, this
<strong>NiViewer2</strong>, of course, should <strong>NOT</strong>
detect the device.</p>
<p><strong><span style="color:red">Feel so disappointed
â€¦</span></strong></p>
<div style="text-align: center; font-size: 3em;">
<pre><code>ðŸ˜ž</code></pre>
</div>
<p><strong><span style="color:red">What made me feel worse, even
desperate???</span></strong></p>
<p>The above failure happens on both of my <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-xavier-series/">Jetson
AGX Xavier</a> running <strong>Ubuntu 20.04.6 LTS aarch64</strong>, and
my desktop running <a target="_blank" rel="noopener" href="https://releases.ubuntu.com/noble/">Ubuntu
24.04</a>.</p>
<h1 id="for-windows">3. For Windows</h1>
<p>Please strictly follow <a
target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/apps/design/devices/kinect-for-windows">Kinect
for Windows SDK 2.0</a>. For my <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a> 2, I got the
following outputs on my laptop running <a
target="_blank" rel="noopener" href="https://www.microsoft.com/en-ca/software-download/windows11">Windows
11</a>.</p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/KinectStudio.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/KinectStudio.png" /></a></p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/KinectStudio_2D.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/KinectStudio_2D.png" /></a></p>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/KinectStudio_3D.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/KinectStudio_3D.png" /></a></p>
<h1 id="for-linux">4. For Linux</h1>
<h2 id="demonstration-first">4.1 Demonstration FIRST</h2>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">OpenNI2 NiViewer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/OpenNI2_NiViewer.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/OpenNI2_NiViewer.png"
alt="OpenNI2 NiViewer" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">libfreenect2 Protonect CPU</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/libfreenect2_Protonect_CPU.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/libfreenect2_Protonect_CPU.png"
alt="libfreenect2 Protonect CPU" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">libfreenect2 Protonect -GPU=0</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/libfreenect2_Protonect_CPU_Depth_Packet_Lost.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/MachineVision/Microsoft/KinectV2/libfreenect2_Protonect_CPU_Depth_Packet_Lost.png"
alt="libfreenect2 Protonect -GPU=0" /></a></td>
</tr>
</tbody>
</table>
<h2 id="build-openni2-github-from-source">4.2 Build OpenNI2 Github from
Source</h2>
<h3 id="key-components">4.2.1 Key Components</h3>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Components</th>
<th style="text-align: center;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2/ThirdParty/PSCommon">PSCommon</a></td>
<td style="text-align: center;">The third-party library directly from <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/PrimeSense">PrimeSense</a></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2/Source/Drivers/OniFile">OniFile</a></td>
<td style="text-align: center;">Must be dealing with OpenNI's
<code>.oni</code> files</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2/Source/Drivers/PS1080">PS1080</a></td>
<td style="text-align: center;">Clearly related to <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/PrimeSense">PrimeSense</a></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2/Source/Drivers/PSLink">PSLink</a></td>
<td style="text-align: center;">Clearly related to <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/PrimeSense">PrimeSense</a></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a></td>
<td style="text-align: center;">I believe this is the driver for
original <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a> v1,
namely, <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a> for
Xbox 360.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a></td>
<td style="text-align: center;">I believe this is the driver for <a
target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a>, based on <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a> for Windows SDK
2.0</td>
</tr>
</tbody>
</table>
<p>To build <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a> or
<a target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a>, I think a
Windows environment is a <strong>MUST</strong>, which is
<strong>NOT</strong> for me.</p>
<h3 id="tool-niviewer">4.2.2 Tool <a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2/Source/Tools/NiViewer">NiViewer</a></h3>
<p>Driver <a target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a> in
the above is a <strong>MUST</strong> for <a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2">OpenNI2
Github</a>'s application <a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2/Source/Tools/NiViewer">NiViewer</a>.</p>
<h3
id="any-driver-to-drive-kinect2-and-can-work-with-openni2-github">4.2.3
Any Driver to Drive <a
target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a> and Can Work
With <a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2">OpenNI2
Github</a>?</h3>
<p><strong><span style="color:red">Now, stucked. Under Linux, how to
build a driver working for my <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Kinect">Kinect</a>
v2?</span></strong></p>
<p><strong>Solution: Build <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a> from
source, with <span style="color:red">BUILD_OPENNI2_DRIVER</span>
ON.</strong></p>
<h2 id="build-libfreenect2-from-source">4.3 Build <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a> from
Source</h2>
<p>Download <a target="_blank" rel="noopener" href="https://structure.io/openni/">OpenNI2</a> and save
it, and built <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a> with
<code>BUILD_OPENNI2_DRIVER</code> set <code>ON</code>.</p>
<p>By doing so, you will have the following 2 variables set by default
as:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OpenNI2_INCLUDE_DIRS             /opt/OpenNI/Include</span><br><span class="line">OpenNI2_LIBRARY                  /opt/OpenNI/Redist/libOpenNI2.so</span><br></pre></td></tr></table></figure>
<p>and you will have the following two libraries built out:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lib/libfreenect2-openni2.so</span><br><span class="line">lib/libfreenect2.so</span><br></pre></td></tr></table></figure>
<p>And, if needed, after the installation of <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a>,
manually copy <code>libfreenect2-openni2.so</code> under folder
<code>/usr/local/lib/OpenNI2/Drivers</code>. Now, <strong>ALL</strong>
set. Youâ€™re good to go <a
target="_blank" rel="noopener" href="https://github.com/structureio/OpenNI2/tree/kinect2/Source/Tools/NiViewer">NiViewer</a>.</p>
<h2 id="protonect-or-protonectsr-from-libfreenect2">4.4 Protonect or
ProtonectSR from <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a></h2>
<h3 id="binprotonect-cuda">4.4.1 <code>./bin/Protonect cuda</code></h3>
<p>I got <strong>NO</strong> idea why <code>./bin/Protonect cuda</code>
failed to run <strong>ALL the time</strong>. Then, I created a simple
Python script <code>verify_cuda.py</code> and <strong>ALWAYS</strong>
meet the following error:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ python verify_cuda.py   </span><br><span class="line">[Info] [CudaDepthPacketProcessorImpl] device 0: NVIDIA GeForce RTX 3090 @ 1725MHz Memory 24219MB</span><br><span class="line">[Info] [CudaDepthPacketProcessorImpl] selected device 0</span><br><span class="line">[Error] [CudaDepthPacketProcessorImpl] cudaGetLastError(): the provided PTX was compiled with an unsupported toolchain.</span><br><span class="line">CudaPacketPipeline is available.</span><br></pre></td></tr></table></figure>
<p>Finally, I found the reason: <strong><span style="color:red">Cuda
version is NOT synced with NVidia driver version.</span></strong> More
specifically, in my case:</p>
<ul>
<li>NVida Driver Version: <a
target="_blank" rel="noopener" href="https://www.nvidia.com/download/driverResults.aspx/228542/en-us/">NVidia
Official Driver 550.100</a>, which is built and compatible with Cuda
12.4</li>
<li>Cuda Version: <a
target="_blank" rel="noopener" href="https://developer.download.nvidia.com/compute/cuda/12.5.1/local_installers/cuda_12.5.1_555.42.06_linux.run">cuda_12.5.1_555.42.06_linux.run</a>.
Clearly: Cuda 12.5.1 comes with a newer NVidia driver version
555.42</li>
</ul>
<p>To solve this problem, install NVidia driver during the installation
of Cuda. Namely: when run <a
target="_blank" rel="noopener" href="https://developer.download.nvidia.com/compute/cuda/12.5.1/local_installers/cuda_12.5.1_555.42.06_linux.run">cuda_12.5.1_555.42.06_linux.run</a>,
tick</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- [X] Driver                                                                 â”‚</span><br><span class="line">â”‚      [X] 555.42.06 </span><br></pre></td></tr></table></figure>
<ul>
<li>You may have to reboot into text mode and have all
previously-installed NVidia driver unloaded. For this issue, please
refer to <a
target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/440840/how-to-unload-kernel-module-nvidia-drm">How
to unload kernel module â€˜nvidia-drmâ€™?</a></li>
<li>The key: <code>sudo systemctl isolate multi-user.target</code></li>
</ul>
<p><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Protonect_cuda.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Protonect_cuda.png"
alt="Protonect cuda" /></a></p>
<h3 id="binprotonect--gpu0">4.4.2
<code>./bin/Protonect -gpu=0</code></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">$ ./bin/Protonect -gpu=0</span><br><span class="line">Version: 0.2.0</span><br><span class="line">Environment variables: LOGFILE=&lt;protonect.log&gt;</span><br><span class="line">Usage: ./bin/Protonect [-gpu=&lt;id&gt;] [gl | cl | clkde | cuda | cudakde | cpu] [&lt;device serial&gt;]</span><br><span class="line">        [-noviewer] [-norgb | -nodepth] [-help] [-version]</span><br><span class="line">        [-frames &lt;number of frames to process&gt;]</span><br><span class="line">To pause and unpause: pkill -USR1 Protonect</span><br><span class="line">[Info] [Freenect2Impl] enumerating devices...</span><br><span class="line">[Info] [Freenect2Impl] 23 usb devices connected</span><br><span class="line">[Info] [Freenect2Impl] found valid Kinect v2 @10:5 with serial 178602434347</span><br><span class="line">[Info] [Freenect2Impl] found 1 devices</span><br><span class="line">libva info: VA-API version 1.20.0</span><br><span class="line">libva info: Trying to open /usr/lib/x86_64-linux-gnu/dri/nvidia_drv_video.so</span><br><span class="line">libva info: va_openDriver() returns -1</span><br><span class="line">[Error] [VaapiRgbPacketProcessorImpl] vaInitialize(display, &amp;major_ver, &amp;minor_ver): unknown libva error</span><br><span class="line">[Info] [Freenect2DeviceImpl] opening...</span><br><span class="line">[Info] [Freenect2DeviceImpl] transfer pool sizes rgb: 20*16384 ir: 60*8*33792</span><br><span class="line">[Info] [Freenect2DeviceImpl] opened</span><br><span class="line">[Info] [Freenect2DeviceImpl] starting...</span><br><span class="line">[Debug] [Freenect2DeviceImpl] status 0x090000: 9855</span><br><span class="line">[Debug] [Freenect2DeviceImpl] status 0x090000: 9855</span><br><span class="line">[Info] [Freenect2DeviceImpl] submitting rgb transfers...</span><br><span class="line">[Info] [Freenect2DeviceImpl] submitting depth transfers...</span><br><span class="line">[Info] [Freenect2DeviceImpl] started</span><br><span class="line">device serial: 178602434347</span><br><span class="line">device firmware: 4.0.3916.0</span><br><span class="line">[Debug] [DepthPacketStreamParser] not all subsequences received 0</span><br><span class="line">[Debug] [DepthPacketStreamParser] not all subsequences received 1021</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Info] [DepthPacketStreamParser] 2 packets were lost</span><br><span class="line">[Info] [DepthPacketStreamParser] 7 packets were lost</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 5.12134ms -&gt; ~195.261Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 4.06057ms -&gt; ~246.271Hz</span><br><span class="line">[Info] [TurboJpegRgbPacketProcessor] avg. time: 19.003ms -&gt; ~52.6232Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 4.01312ms -&gt; ~249.182Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 4.20707ms -&gt; ~237.695Hz</span><br><span class="line">[Info] [TurboJpegRgbPacketProcessor] avg. time: 17.376ms -&gt; ~57.5507Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 3.95256ms -&gt; ~253.001Hz</span><br><span class="line">[2]  - 2620271 killed     ./bin/ProtonectSR cuda</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 4.40171ms -&gt; ~227.184Hz</span><br><span class="line">[Info] [TurboJpegRgbPacketProcessor] avg. time: 17.8467ms -&gt; ~56.0326Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 6.23296ms -&gt; ~160.437Hz</span><br><span class="line">[3]  + 2628690 killed     ./bin/Protonect</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 9.88223ms -&gt; ~101.192Hz</span><br><span class="line">[Info] [DepthPacketStreamParser] 2 packets were lost</span><br><span class="line">[Info] [TurboJpegRgbPacketProcessor] avg. time: 19.2099ms -&gt; ~52.0565Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 5.8084ms -&gt; ~172.164Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 8.7243ms -&gt; ~114.622Hz</span><br><span class="line">[Info] [TurboJpegRgbPacketProcessor] avg. time: 18.2581ms -&gt; ~54.7703Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 9.24396ms -&gt; ~108.179Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 10.1021ms -&gt; ~98.9893Hz</span><br><span class="line">[Info] [TurboJpegRgbPacketProcessor] avg. time: 18.3488ms -&gt; ~54.4995Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 8.35109ms -&gt; ~119.745Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 5.61051ms -&gt; ~178.237Hz</span><br><span class="line">[Info] [TurboJpegRgbPacketProcessor] avg. time: 17.9773ms -&gt; ~55.6256Hz</span><br><span class="line">[Info] [OpenGLDepthPacketProcessor] avg. time: 6.80606ms -&gt; ~146.928Hz</span><br><span class="line">[Info] [Freenect2DeviceImpl] stopping...</span><br><span class="line">[Info] [Freenect2DeviceImpl] canceling rgb transfers...</span><br><span class="line">[Info] [Freenect2DeviceImpl] canceling depth transfers...</span><br><span class="line">[Info] [Freenect2DeviceImpl] stopped</span><br><span class="line">[Info] [Freenect2DeviceImpl] closing...</span><br><span class="line">[Info] [Freenect2DeviceImpl] releasing usb interfaces...</span><br><span class="line">[Info] [Freenect2DeviceImpl] deallocating usb transfer pools...</span><br><span class="line">[Info] [Freenect2DeviceImpl] closing usb device...</span><br><span class="line">[Info] [Freenect2DeviceImpl] closed</span><br><span class="line">[Info] [Freenect2DeviceImpl] closing...</span><br><span class="line">[Info] [Freenect2DeviceImpl] already closed, doing nothing</span><br><span class="line">[TurboJpegRgbPacketProcessor] 9.8382 10.0887 18.9733 20.2907 26.1092 mean=18.2873 std=2.86968 n=749</span><br><span class="line">[OpenGLDepthPacketProcessor] 2.90518 3.87679 5.69045 12.5144 95.8873 mean=6.46404 std=4.29096 n=1528</span><br></pre></td></tr></table></figure>
<h3 id="binprotonect-cpu">4.4.3 <code>./bin/Protonect cpu</code></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">$ ./bin/Protonect cpu</span><br><span class="line">Version: 0.2.0</span><br><span class="line">Environment variables: LOGFILE=&lt;protonect.log&gt;</span><br><span class="line">Usage: ./bin/Protonect [-gpu=&lt;id&gt;] [gl | cl | clkde | cuda | cudakde | cpu] [&lt;device serial&gt;]</span><br><span class="line">        [-noviewer] [-norgb | -nodepth] [-help] [-version]</span><br><span class="line">        [-frames &lt;number of frames to process&gt;]</span><br><span class="line">To pause and unpause: pkill -USR1 Protonect</span><br><span class="line">libva info: VA-API version 1.20.0</span><br><span class="line">libva info: Trying to open /usr/lib/x86_64-linux-gnu/dri/nvidia_drv_video.so</span><br><span class="line">libva info: va_openDriver() returns -1</span><br><span class="line">[Error] [VaapiRgbPacketProcessorImpl] vaInitialize(display, &amp;major_ver, &amp;minor_ver): unknown libva error</span><br><span class="line">[Info] [Freenect2Impl] enumerating devices...</span><br><span class="line">[Info] [Freenect2Impl] 23 usb devices connected</span><br><span class="line">[Info] [Freenect2Impl] found valid Kinect v2 @10:5 with serial 178602434347</span><br><span class="line">[Info] [Freenect2Impl] found 1 devices</span><br><span class="line">[Info] [Freenect2DeviceImpl] opening...</span><br><span class="line">[Info] [Freenect2DeviceImpl] transfer pool sizes rgb: 20*16384 ir: 60*8*33792</span><br><span class="line">[Info] [Freenect2DeviceImpl] opened</span><br><span class="line">[Info] [Freenect2DeviceImpl] starting...</span><br><span class="line">[Debug] [Freenect2DeviceImpl] status 0x090000: 9729</span><br><span class="line">[Debug] [Freenect2DeviceImpl] status 0x090000: 9731</span><br><span class="line">[Info] [Freenect2DeviceImpl] submitting rgb transfers...</span><br><span class="line">[Info] [Freenect2DeviceImpl] submitting depth transfers...</span><br><span class="line">[Info] [Freenect2DeviceImpl] started</span><br><span class="line">device serial: 178602434347</span><br><span class="line">device firmware: 4.0.3916.0</span><br><span class="line">[Debug] [DepthPacketStreamParser] not all subsequences received 0</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Info] [DepthPacketStreamParser] 30 packets were lost</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Info] [DepthPacketStreamParser] 30 packets were lost</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Info] [Freenect2DeviceImpl] stopping...</span><br><span class="line">[Info] [Freenect2DeviceImpl] canceling rgb transfers...</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Debug] [DepthPacketStreamParser] skipping depth packet</span><br><span class="line">[Info] [Freenect2DeviceImpl] canceling depth transfers...</span><br><span class="line">[Info] [Freenect2DeviceImpl] stopped</span><br><span class="line">[Info] [Freenect2DeviceImpl] closing...</span><br><span class="line">[Info] [Freenect2DeviceImpl] releasing usb interfaces...</span><br><span class="line">[Info] [Freenect2DeviceImpl] deallocating usb transfer pools...</span><br><span class="line">[Info] [Freenect2DeviceImpl] closing usb device...</span><br><span class="line">[Info] [Freenect2DeviceImpl] closed</span><br><span class="line">[Info] [Freenect2DeviceImpl] closing...</span><br><span class="line">[Info] [Freenect2DeviceImpl] already closed, doing nothing</span><br><span class="line">[TurboJpegRgbPacketProcessor] 10.0384 10.1629 18.9524 20.9346 27.5923 mean=18.5922 std=3.23163 n=44</span><br><span class="line">[CpuDepthPacketProcessor] 101.371 101.485 102.303 109.367 111.332 mean=102.829 std=2.25233 n=27</span><br></pre></td></tr></table></figure>
<h3 id="conclusive-comparisons">4.4.4 Conclusive Comparisons</h3>
<p>Letâ€™s do a simple comparison of the speed using 3 different
parameters: <code>cuda</code>, <code>-cpu=0</code>,
<code>cpu</code>.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Commands</th>
<th style="text-align: center;">RGB Mean Time (ms)</th>
<th style="text-align: center;">Depth Mean Time (ms)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>./bin/Protonect cuda</code></td>
<td style="text-align: center;">18.8951</td>
<td style="text-align: center;">0.521472</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>./bin/Protonect -gpu=0</code></td>
<td style="text-align: center;">18.2873</td>
<td style="text-align: center;">6.46404</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>./bin/Protonect cpu</code></td>
<td style="text-align: center;">18.5922</td>
<td style="text-align: center;">102.829</td>
</tr>
</tbody>
</table>
<p>The conclusion is quite obvious:</p>
<ul>
<li>for <strong>depth</strong>:
<code>CudaDepthPacketProcessor &gt; OpenGLDepthPacketProcessor &gt; CpuDepthPacketProcessor</code>.</li>
<li>for <strong>RGB</strong>: <strong>Always</strong>
<code>TurboJpegRgbPacketProcessor</code></li>
</ul>
<h2 id="pylibfreenect2---libfreenect2s-python-wrapper">4.5 <a
target="_blank" rel="noopener" href="https://github.com/r9y9/pylibfreenect2">pylibfreenect2</a> - <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a>'s
Python Wrapper</h2>
<p>So far, in my personal point of view, <a
target="_blank" rel="noopener" href="https://github.com/r9y9/pylibfreenect2">pylibfreenect2</a> is the
<strong>BEST</strong> Python wrapper of <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a>. But,
according to the <a
target="_blank" rel="noopener" href="https://openkinect.github.io/libfreenect2/">official documentation
of libfreenect2</a>, itâ€™s clearly written:</p>
<p><strong><span style="color:red">Audio. Raw audio is accessible via
Linux USB audio. There is no support for the calibrated directional
audio.</span></strong></p>
<h2 id="kinect2s-audio-pyalsaaudio">4.6 <a
target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a>'s Audio <a
target="_blank" rel="noopener" href="https://pypi.org/project/pyalsaaudio/">pyalsaaudio</a></h2>
<h3 id="lsusb-again">4.6.1 <code>lsusb</code> Again</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ~ lsusb | grep Microsoft </span><br><span class="line">Bus 002 Device 003: ID 045e:02c4 Microsoft Corp. </span><br><span class="line">Bus 002 Device 002: ID 045e:02d9 Microsoft Corp. NuiSensor Adaptor      </span><br><span class="line">Bus 001 Device 002: ID 045e:02d9 Microsoft Corp. NuiSensor Adaptor  </span><br></pre></td></tr></table></figure>
<h3 id="arecord--l">4.6.2 <code>arecord -l</code></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âžœ  ~ arecord -l | grep NUI             </span><br><span class="line">card 1: Sensor [Xbox NUI Sensor], device 0: USB Audio [USB Audio]</span><br></pre></td></tr></table></figure>
<ul>
<li>Card number: 1</li>
<li>Device number: 0</li>
</ul>
<h3 id="list-details-of-hw10">4.6.3 List Details of
<code>hw:1,0</code></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">âžœ  arecord -D hw:1,0 --dump-hw-params</span><br><span class="line">Recording WAVE &#x27;stdin&#x27; : Unsigned 8 bit, Rate 8000 Hz, Mono</span><br><span class="line">HW Params of device &quot;hw:1,0&quot;:</span><br><span class="line">--------------------</span><br><span class="line">ACCESS:  MMAP_INTERLEAVED RW_INTERLEAVED</span><br><span class="line">FORMAT:  S32_LE</span><br><span class="line">SUBFORMAT:  STD</span><br><span class="line">SAMPLE_BITS: 32</span><br><span class="line">FRAME_BITS: 128</span><br><span class="line">CHANNELS: 4</span><br><span class="line">RATE: 16000</span><br><span class="line">PERIOD_TIME: [1000 2048000]</span><br><span class="line">PERIOD_SIZE: [16 32768]</span><br><span class="line">PERIOD_BYTES: [256 524288]</span><br><span class="line">PERIODS: [2 1024]</span><br><span class="line">BUFFER_TIME: [2000 4096000]</span><br><span class="line">BUFFER_SIZE: [32 65536]</span><br><span class="line">BUFFER_BYTES: [512 1048576]</span><br><span class="line">TICK_TIME: ALL</span><br><span class="line">--------------------</span><br><span class="line">arecord: set_params:1368: Sample format non available</span><br><span class="line">Available formats:</span><br><span class="line">- S32_LE</span><br></pre></td></tr></table></figure>
<p>A couple of concerns:</p>
<ul>
<li>I personally think <strong><span
style="color:green">FRAME_BITS</span></strong> is a typo. It should be
<strong><span style="color:green">FRAME_SIZE</span></strong>.</li>
<li>What the sample rate is 16000, but <strong>NOT</strong> 44100?
ðŸ˜€</li>
</ul>
<h3 id="demonstration">4.6.4 Demonstration</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> alsaaudio</span><br><span class="line"><span class="keyword">import</span> wave</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># Open the audio device</span></span><br><span class="line">inp = alsaaudio.PCM(alsaaudio.PCM_CAPTURE, alsaaudio.PCM_NORMAL, <span class="string">&quot;plughw:Sensor&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set audio parameters</span></span><br><span class="line">inp.setformat(alsaaudio.PCM_FORMAT_S32_LE)</span><br><span class="line">inp.setchannels(<span class="number">4</span>)</span><br><span class="line">inp.setrate(<span class="number">16000</span>)</span><br><span class="line">inp.setperiodsize(<span class="number">128</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Prepare a file to write the audio data</span></span><br><span class="line"><span class="keyword">with</span> wave.<span class="built_in">open</span>(<span class="string">&quot;test.wav&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.setnchannels(<span class="number">4</span>)</span><br><span class="line">    f.setsampwidth(<span class="number">4</span>)</span><br><span class="line">    f.setframerate(<span class="number">16000</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Record audio for 10 seconds</span></span><br><span class="line">    timeout = <span class="number">10</span>  <span class="comment"># seconds</span></span><br><span class="line">    start_time = time.time()</span><br><span class="line">    <span class="keyword">while</span> time.time() - start_time &lt; timeout:</span><br><span class="line">        num_bytes, buffer = inp.read()</span><br><span class="line">        f.writeframes(buffer)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Close the audio device</span></span><br><span class="line">inp.close()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Recording finished&quot;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="for-jetson-agx-xavier">5. For <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-xavier-series/">Jetson
AGX Xavier</a></h1>
<p>Now, weâ€™re done on my desktop. Letâ€™s try <a
target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a> on <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-xavier-series/">Jetson
AGX Xavier</a>.</p>
<h2 id="libfreenect2---do-not-enable-enable_tegrajpeg">5.1 <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a> - Do
NOT Enable <code>ENABLE_TEGRAJPEG</code></h2>
<p>By default, <a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a> has
<code>ENABLE_TEGRAJPEG</code> set <code>ON</code>, which builds fine.
However, the followig issue has been reported for over 8 years.</p>
<ul>
<li><a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2/issues/1194">Error
TegraJpegRgbPacketProcessorImpl Incomplete decoding result</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2/issues/581">Libfreenect2
not working on Jetson TX1</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2/issues/480">Cannot get
Protonect Viewer running on the Tegra X1</a></li>
<li><a
target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/usb-3-transfer-failures/41593">USB
3 transfer failures</a></li>
</ul>
<p><strong><span style="color:red">Solution for <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-xavier-series/">Jetson
AGX Xavier</a>:</span></strong></p>
<ul>
<li><strong>NEVER</strong> turn on <code>ENABLE_TEGRAJPEG</code> on <a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-xavier-series/">Jetson
AGX Xavier</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.nvidia.com/en-us/autonomous-machines/embedded-systems/jetson-xavier-series/">Jetson
AGX Xavier</a> is working fine with <code>TurboJPEG</code></li>
</ul>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a>
Protonect Cuda</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/JetsonAGXXavier_Kinect2_No_TegraJPEG.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/JetsonAGXXavier_Kinect2_No_TegraJPEG.png"
alt="libfreenect2 Protonect Cuda" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://github.com/OpenKinect/libfreenect2">libfreenect2</a>
Protonect Cuda Speed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/JetsonAGXXavier_Kinect2_No_TegraJPEG_Speed.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/JetsonAGXXavier_Kinect2_No_TegraJPEG_Speed.png"
alt="libfreenect2 Protonect Cuda" /></a></td>
</tr>
</tbody>
</table>
<p>From the above output, we can easily come up with the following
table:</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Attribute</th>
<th style="text-align: left;">RGB</th>
<th style="text-align: left;">Depth</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Resolution</td>
<td style="text-align: left;">1920x1080</td>
<td style="text-align: left;">512x424</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of Channels</td>
<td style="text-align: left;">3 (Red, Green, Blue)</td>
<td style="text-align: left;">1 (Depth)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bytes per Pixel</td>
<td style="text-align: left;">3 bytes</td>
<td style="text-align: left;">2 bytes</td>
</tr>
<tr class="even">
<td style="text-align: left;">Average Processing Time</td>
<td style="text-align: left;">~22.4048 ms</td>
<td style="text-align: left;">~7.18678 ms</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FPS</td>
<td style="text-align: left;">~44.6163 FPS</td>
<td style="text-align: left;">~110.134 FPS</td>
</tr>
<tr class="even">
<td style="text-align: left;">Data per Frame (Bytes)</td>
<td style="text-align: left;">1920 * 1080 * 3 = 6,220,800 bytes</td>
<td style="text-align: left;">512 * 424 * 2 = 434,176 bytes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Data per Frame (MB)</td>
<td style="text-align: left;">~6.22 MB</td>
<td style="text-align: left;">~0.414 MB</td>
</tr>
<tr class="even">
<td style="text-align: left;">Data per Second (MB/s)</td>
<td style="text-align: left;">6.22 MB * 44.6163 â‰ˆ 277.57 MB/s</td>
<td style="text-align: left;">0.414 MB * 110.134 â‰ˆ 45.60 MB/s</td>
</tr>
</tbody>
</table>
<p><strong>Total Data per Second</strong>: 277.57 MB + 45.60 MB â‰ˆ 323.17
MB</p>
<h2
id="integrate-pylibfreenect2-and-pyalsaaudio-with-gstreamer-for-3-streams-from-kinect2-depth-rgb-and-audio">5.2
Integrate <a
target="_blank" rel="noopener" href="https://github.com/r9y9/pylibfreenect2">pylibfreenect2</a> and <a
target="_blank" rel="noopener" href="https://pypi.org/project/pyalsaaudio/">pyalsaaudio</a> with <a
target="_blank" rel="noopener" href="https://gstreamer.freedesktop.org/bindings/python.html">GStreamer</a>
for 3 Streams from <a
target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a>:
<code>depth</code>, <code>rgb</code>, and <code>audio</code></h2>
<p>Sorry my friends. Iâ€™m <strong>NOT</strong> going to disclose my code,
in Python.</p>
<h3 id="server-side">5.2.1 Server Side</h3>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a> RTSP Server</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Server.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Server.png"
alt="Kinect2 RTSP Server" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><a
target="_blank" rel="noopener" href="https://openkinect.org/wiki/Kinect_2">Kinect2</a> RTSP Server
Stream Responses</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Server_Stream_Responses.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Server_Stream_Responses.png"
alt="Kinect2 RTSP Server Stream Responses" /></a></td>
</tr>
</tbody>
</table>
<h3 id="client-side">5.2.2 Client Side</h3>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">RGB Stream</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Client_RGB.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Client_RGB.png"
alt="RGB Stream" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Depth Stream</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Client_depth.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Client_depth.png"
alt="Depth Stream" /></a></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Audio Stream</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a
target="_blank" rel="noopener" href="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Client_audio.png"><img
src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/Jetson/Kinect2_RTSP_Client_audio.png"
alt="Audio Stream" /></a></td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Nobody</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
