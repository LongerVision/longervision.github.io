<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"longervision.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Longer Vision Technology Github Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Longer Vision Technology">
<meta property="og:url" content="http://longervision.github.io/index.html">
<meta property="og:site_name" content="Longer Vision Technology">
<meta property="og:description" content="Longer Vision Technology Github Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Nobody">
<meta property="article:tag" content="Longer Vision, Computer Vision, AI, Machine Learning">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://longervision.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Longer Vision Technology</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Longer Vision Technology</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Github Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Nobody</p>
  <div class="site-description" itemprop="description">Longer Vision Technology Github Blog</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">131</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">125</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2024/06/19/Coding/HowTo/qt-6.7.2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/06/19/Coding/HowTo/qt-6.7.2/" class="post-title-link" itemprop="url">How to build Qt 6.7.2?</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2024-06-19 15:00:00 / Modified: 23:59:55" itemprop="dateCreated datePublished" datetime="2024-06-19T15:00:00-07:00">2024-06-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/HowTo/" itemprop="url" rel="index"><span itemprop="name">HowTo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="1-Download-the-Official-Release"><a href="#1-Download-the-Official-Release" class="headerlink" title="1. Download the Official Release"></a>1. Download the Official Release</h2><ul>
<li><a target="_blank" rel="noopener" href="https://download.qt.io/archive/qt/6.7/6.7.2/">Qt 6.7.2 Archive</a></li>
<li>Extract under <code>/opt/qt/</code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:49:18] lvision /opt/qt </span><br><span class="line">$ tar xvf qt-everywhere-src-6.7.2.tar.xz</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-CMake-Configuration-with-Generator-Ninja"><a href="#2-CMake-Configuration-with-Generator-Ninja" class="headerlink" title="2. CMake Configuration with Generator Ninja"></a>2. CMake Configuration with Generator <a target="_blank" rel="noopener" href="https://ninja-build.org/">Ninja</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:47:52] lvision /opt/qt/qt-everywhere-src-6.7.2/build </span><br><span class="line">$ cmake -G &quot;Ninja&quot; ../</span><br></pre></td></tr></table></figure>


<h2 id="3-Build-with-Modifications"><a href="#3-Build-with-Modifications" class="headerlink" title="3. Build with Modifications"></a>3. Build with Modifications</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:51:43] lvision /opt/qt/qt-everywhere-src-6.7.2/build </span><br><span class="line">$ ccmake ../</span><br></pre></td></tr></table></figure>


<h2 id="4-Installation"><a href="#4-Installation" class="headerlink" title="4. Installation"></a>4. Installation</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[14:51:43] lvision /opt/qt/qt-everywhere-src-6.7.2/build </span><br><span class="line">$ ninja install</span><br></pre></td></tr></table></figure>


<h2 id="5-Modify-CMakeLists-txt"><a href="#5-Modify-CMakeLists-txt" class="headerlink" title="5. Modify CMakeLists.txt"></a>5. Modify <code>CMakeLists.txt</code></h2><h3 id="5-1-qttools-src-linguist-lupdate-CMakeLists-txt"><a href="#5-1-qttools-src-linguist-lupdate-CMakeLists-txt" class="headerlink" title="5.1 ./qttools/src/linguist/lupdate/CMakeLists.txt"></a>5.1 <code>./qttools/src/linguist/lupdate/CMakeLists.txt</code></h3><p>Change to:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"># Ensure required CMake version</span><br><span class="line">cmake_minimum_required(VERSION 3.19)</span><br><span class="line"></span><br><span class="line"># Project definition</span><br><span class="line">project(lupdate)</span><br><span class="line"></span><br><span class="line"># Set C++ standard</span><br><span class="line">set(CMAKE_CXX_STANDARD 17)</span><br><span class="line">set(CMAKE_CXX_STANDARD_REQUIRED ON)</span><br><span class="line"></span><br><span class="line"># Set include directories</span><br><span class="line">set(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_CXX_FLAGS&#125; -fno-rtti&quot;)</span><br><span class="line"></span><br><span class="line"># Set include directories</span><br><span class="line">include_directories($&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/../shared)</span><br><span class="line">include_directories($&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/../../qtdeclarative/include)</span><br><span class="line">include_directories($&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/../../qtdeclarative/include/QtQml)</span><br><span class="line">include_directories($&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/../../qtdeclarative/include/QtQml/6.7.2)</span><br><span class="line">include_directories($&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/../../qtdeclarative/include/QtQml/6.7.2/QtQml)</span><br><span class="line">include_directories($&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/../../qtdeclarative/include/QtQml/6.7.2/QtQml/private)</span><br><span class="line"></span><br><span class="line"># Add source files</span><br><span class="line">set(SOURCES</span><br><span class="line">    ../shared/numerus.cpp</span><br><span class="line">    ../shared/po.cpp</span><br><span class="line">    ../shared/projectdescriptionreader.cpp ../shared/projectdescriptionreader.h</span><br><span class="line">    ../shared/qm.cpp</span><br><span class="line">    ../shared/qph.cpp</span><br><span class="line">    ../shared/qrcreader.cpp ../shared/qrcreader.h</span><br><span class="line">    ../shared/runqttool.cpp ../shared/runqttool.h</span><br><span class="line">    ../shared/simtexth.cpp ../shared/simtexth.h</span><br><span class="line">    ../shared/translator.cpp ../shared/translator.h</span><br><span class="line">    ../shared/translatormessage.cpp ../shared/translatormessage.h</span><br><span class="line">    ../shared/ts.cpp</span><br><span class="line">    ../shared/xliff.cpp</span><br><span class="line">    ../shared/xmlparser.cpp ../shared/xmlparser.h</span><br><span class="line">    cpp.cpp cpp.h</span><br><span class="line">    java.cpp</span><br><span class="line">    python.cpp</span><br><span class="line">    lupdate.h</span><br><span class="line">    main.cpp</span><br><span class="line">    merge.cpp</span><br><span class="line">    ui.cpp</span><br><span class="line">    qdeclarative.cpp</span><br><span class="line">    clangtoolastreader.cpp clangtoolastreader.h</span><br><span class="line">    cpp_clang.cpp cpp_clang.h</span><br><span class="line">    filesignificancecheck.cpp filesignificancecheck.h</span><br><span class="line">    lupdatepreprocessoraction.cpp lupdatepreprocessoraction.h</span><br><span class="line">    synchronized.h</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">add_executable(lupdate $&#123;SOURCES&#125;)</span><br><span class="line"></span><br><span class="line"># Define necessary preprocessor definitions</span><br><span class="line">target_compile_definitions(lupdate PRIVATE</span><br><span class="line">    QT_NO_CAST_FROM_ASCII</span><br><span class="line">    QT_NO_CAST_TO_ASCII</span><br><span class="line">    LUPDATE_CLANG_VERSION_STR=&quot;$&#123;QT_LIB_CLANG_VERSION&#125;&quot;</span><br><span class="line">    LUPDATE_CLANG_VERSION_MAJOR=$&#123;QT_LIB_CLANG_VERSION_MAJOR&#125;</span><br><span class="line">    LUPDATE_CLANG_VERSION_MINOR=$&#123;QT_LIB_CLANG_VERSION_MINOR&#125;</span><br><span class="line">    LUPDATE_CLANG_VERSION_PATCH=$&#123;QT_LIB_CLANG_VERSION_PATCH&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># Specify libraries to link</span><br><span class="line">target_link_libraries(lupdate PRIVATE</span><br><span class="line">    Qt::CorePrivate</span><br><span class="line">    Qt::Tools</span><br><span class="line">    clangTooling</span><br><span class="line">    clangToolingCore</span><br><span class="line">    clangToolingInclusions</span><br><span class="line">    clangToolingASTDiff</span><br><span class="line">    clangToolingRefactoring</span><br><span class="line">    clangToolingSyntax</span><br><span class="line">    clangDynamicASTMatchers</span><br><span class="line">    clangFrontendTool</span><br><span class="line">    clangFrontend</span><br><span class="line">    clangDriver</span><br><span class="line">    clangSerialization</span><br><span class="line">    clangCodeGen</span><br><span class="line">    clangCrossTU</span><br><span class="line">    clangIndex</span><br><span class="line">    clangSema</span><br><span class="line">    clangParse</span><br><span class="line">    clangAST</span><br><span class="line">    clangASTMatchers</span><br><span class="line">    clangLex</span><br><span class="line">    clangBasic</span><br><span class="line">    clangAnalysis</span><br><span class="line">    clangEdit</span><br><span class="line">    clangRewrite</span><br><span class="line">    clangRewriteFrontend</span><br><span class="line">    LLVMAnalysis</span><br><span class="line">    LLVMTransformUtils</span><br><span class="line">    LLVMInstCombine</span><br><span class="line">    LLVMInstrumentation</span><br><span class="line">    LLVMipo</span><br><span class="line">    LLVMVectorize</span><br><span class="line">    LLVMTarget</span><br><span class="line">    LLVMTargetParser</span><br><span class="line">    LLVMBitReader</span><br><span class="line">    LLVMBitstreamReader</span><br><span class="line">    LLVMCore</span><br><span class="line">    LLVMMC</span><br><span class="line">    LLVMMCParser</span><br><span class="line">    LLVMMCDisassembler</span><br><span class="line">    LLVMObject</span><br><span class="line">    LLVMObjectYAML</span><br><span class="line">    LLVMOption</span><br><span class="line">    LLVMSupport</span><br><span class="line">    LLVMProfileData</span><br><span class="line">    LLVMLinker</span><br><span class="line">    LLVMIRReader</span><br><span class="line">    LLVMRuntimeDyld</span><br><span class="line">    LLVMExecutionEngine</span><br><span class="line">    LLVMDebugInfoDWARF</span><br><span class="line">    LLVMDebugInfoPDB</span><br><span class="line">    LLVMDebugInfoCodeView</span><br><span class="line">    LLVMDebugInfoMSF</span><br><span class="line">    LLVMDebugInfoGSYM</span><br><span class="line">    LLVMDebugInfoLogicalView</span><br><span class="line">    LLVMDebugInfoBTF</span><br><span class="line">    LLVMTableGen</span><br><span class="line">    LLVMRemarks</span><br><span class="line">    LLVMTextAPI</span><br><span class="line">    LLVMExtensions</span><br><span class="line">    LLVMJITLink</span><br><span class="line">    LLVMFuzzMutate</span><br><span class="line">    LLVMFuzzerCLI</span><br><span class="line">    LLVMGlobalISel</span><br><span class="line">    LLVMExegesis</span><br><span class="line">    LLVMInterfaceStub</span><br><span class="line">    LLVMLineEditor</span><br><span class="line">    LLVMSelectionDAG</span><br><span class="line">    LLVMLTO</span><br><span class="line">    LLVMCoroutines</span><br><span class="line">    LLVMDemangle</span><br><span class="line">    LLVMFileCheck</span><br><span class="line">    LLVMMCJIT</span><br><span class="line">    LLVMOrcJIT</span><br><span class="line">    LLVMSupport</span><br><span class="line">    LLVMPasses</span><br><span class="line">    LLVMXRay</span><br><span class="line">    Polly</span><br><span class="line">    PollyISL # Ensure Polly and PollyISL are included in libraries</span><br><span class="line">    Qt::QmlPrivate # Ensure Qt::QmlPrivate is included in libraries</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># Conditionally add qdeclarative.cpp if Qt::QmlPrivate is available</span><br><span class="line">if(TARGET Qt::QmlPrivate)</span><br><span class="line">    target_sources(lupdate PRIVATE qdeclarative.cpp)</span><br><span class="line">    target_include_directories(lupdate PRIVATE $&#123;QT_BUILD_DIR&#125;/qtbase/include/QtQml/6.7.2/QtQml/private)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line"># Special properties for MSVC</span><br><span class="line">if(MSVC)</span><br><span class="line">    target_compile_definitions(lupdate PRIVATE _SILENCE_CXX17_ITERATOR_BASE_CLASS_DEPRECATION_WARNING)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line"># Ensure clangtoolastreader.cpp skips automoc</span><br><span class="line">set_property(SOURCE clangtoolastreader.cpp PROPERTY SKIP_AUTOMOC ON)</span><br><span class="line"></span><br><span class="line"># Set position independent code property</span><br><span class="line">set_target_properties(lupdate PROPERTIES POSITION_INDEPENDENT_CODE FALSE)</span><br></pre></td></tr></table></figure>


<blockquote>
<p><strong>Note</strong><br>Please refer to <a target="_blank" rel="noopener" href="https://bugreports.qt.io/browse/QTBUG-101446">QT&#x2F;LLVM RTTI settings - Undefined reference to &#96;typeinfo’ when compiling Qt Everywhere from source</a>. In one word: </p>
</blockquote>
<p>In file <code>./qttools/src/linguist/lupdate/CMakeLists.txt</code>, add: <code>set(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_CXX_FLAGS&#125; -fno-rtti&quot;)</code>.</p>
<h3 id="5-2-qttools-src-qdoc-qdoc-CMakeLists-txt"><a href="#5-2-qttools-src-qdoc-qdoc-CMakeLists-txt" class="headerlink" title="5.2 ./qttools/src/qdoc/qdoc/CMakeLists.txt"></a>5.2 <code>./qttools/src/qdoc/qdoc/CMakeLists.txt</code></h3><p>Change to:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"># Copyright (C) 2022 The Qt Company Ltd.</span><br><span class="line"># SPDX-License-Identifier: BSD-3-Clause</span><br><span class="line"></span><br><span class="line">if(CMAKE_VERSION VERSION_LESS &quot;3.19&quot; AND MSVC AND CMAKE_GENERATOR STREQUAL &quot;Ninja Multi-Config&quot;)</span><br><span class="line">    message(WARNING &quot;qdoc will not be built in this configuration.&quot;)</span><br><span class="line">    return()</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line">if (MINGW)</span><br><span class="line">    set_property(DIRECTORY &quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;&quot; PROPERTY _qt_skip_separate_debug_info ON)</span><br><span class="line">endif()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#####################################################################</span><br><span class="line">## qdoc Tool:</span><br><span class="line">#####################################################################</span><br><span class="line"></span><br><span class="line">qt_get_tool_target_name(target_name qdoc)</span><br><span class="line">qt_internal_add_tool($&#123;target_name&#125;</span><br><span class="line">    TARGET_DESCRIPTION &quot;Qt Documentation Compiler&quot;</span><br><span class="line">    TOOLS_TARGET Tools</span><br><span class="line">    USER_FACING</span><br><span class="line">    SOURCES</span><br><span class="line">        src/qdoc/aggregate.cpp</span><br><span class="line">        src/qdoc/atom.cpp</span><br><span class="line">        src/qdoc/boundaries/filesystem/directorypath.cpp</span><br><span class="line">        src/qdoc/boundaries/filesystem/filepath.cpp</span><br><span class="line">        src/qdoc/boundaries/filesystem/resolvedfile.cpp</span><br><span class="line">        src/qdoc/clangcodeparser.cpp</span><br><span class="line">        src/qdoc/classnode.cpp</span><br><span class="line">        src/qdoc/codechunk.cpp</span><br><span class="line">        src/qdoc/codemarker.cpp</span><br><span class="line">        src/qdoc/codeparser.cpp</span><br><span class="line">        src/qdoc/collectionnode.cpp</span><br><span class="line">        src/qdoc/comparisoncategory.h</span><br><span class="line">        src/qdoc/config.cpp</span><br><span class="line">        src/qdoc/cppcodemarker.cpp</span><br><span class="line">        src/qdoc/cppcodeparser.cpp</span><br><span class="line">        src/qdoc/doc.cpp</span><br><span class="line">        src/qdoc/docbookgenerator.cpp</span><br><span class="line">        src/qdoc/docparser.cpp</span><br><span class="line">        src/qdoc/docprivate.cpp</span><br><span class="line">        src/qdoc/editdistance.cpp</span><br><span class="line">        src/qdoc/enumnode.cpp</span><br><span class="line">        src/qdoc/externalpagenode.cpp</span><br><span class="line">        src/qdoc/filesystem/fileresolver.cpp</span><br><span class="line">        src/qdoc/functionnode.cpp</span><br><span class="line">        src/qdoc/generator.cpp</span><br><span class="line">        src/qdoc/headernode.cpp</span><br><span class="line">        src/qdoc/helpprojectwriter.cpp</span><br><span class="line">        src/qdoc/htmlgenerator.cpp</span><br><span class="line">        src/qdoc/location.cpp</span><br><span class="line">        src/qdoc/main.cpp</span><br><span class="line">        src/qdoc/manifestwriter.cpp</span><br><span class="line">        src/qdoc/namespacenode.cpp</span><br><span class="line">        src/qdoc/node.cpp</span><br><span class="line">        src/qdoc/openedlist.cpp</span><br><span class="line">        src/qdoc/pagenode.cpp</span><br><span class="line">        src/qdoc/parameters.cpp</span><br><span class="line">        src/qdoc/propertynode.cpp</span><br><span class="line">        src/qdoc/proxynode.cpp</span><br><span class="line">        src/qdoc/puredocparser.cpp</span><br><span class="line">        src/qdoc/qdoccommandlineparser.cpp</span><br><span class="line">        src/qdoc/qdocdatabase.cpp</span><br><span class="line">        src/qdoc/qdocindexfiles.cpp</span><br><span class="line">        src/qdoc/qmlcodemarker.cpp</span><br><span class="line">        src/qdoc/qmlcodeparser.cpp</span><br><span class="line">        src/qdoc/qmlmarkupvisitor.cpp</span><br><span class="line">        src/qdoc/qmlpropertynode.cpp</span><br><span class="line">        src/qdoc/qmltypenode.cpp</span><br><span class="line">        src/qdoc/qmlvisitor.cpp</span><br><span class="line">        src/qdoc/quoter.cpp</span><br><span class="line">        src/qdoc/relatedclass.cpp</span><br><span class="line">        src/qdoc/sections.cpp</span><br><span class="line">        src/qdoc/sharedcommentnode.cpp</span><br><span class="line">        src/qdoc/tagfilewriter.cpp</span><br><span class="line">        src/qdoc/text.cpp</span><br><span class="line">        src/qdoc/tokenizer.cpp</span><br><span class="line">        src/qdoc/tree.cpp</span><br><span class="line">        src/qdoc/typedefnode.cpp</span><br><span class="line">        src/qdoc/utilities.cpp</span><br><span class="line">        src/qdoc/variablenode.cpp</span><br><span class="line">        src/qdoc/webxmlgenerator.cpp</span><br><span class="line">        src/qdoc/xmlgenerator.cpp</span><br><span class="line">    NO_UNITY_BUILD_SOURCES</span><br><span class="line">        src/qdoc/qmlmarkupvisitor.cpp # redefinition of &#x27;samp&#x27;/&#x27;slt&#x27; (from codemarker.cpp)</span><br><span class="line">    INCLUDE_DIRECTORIES</span><br><span class="line">        $&#123;CMAKE_CURRENT_LIST_DIR&#125;/src</span><br><span class="line">    LIBRARIES</span><br><span class="line">        Qt::QmlPrivate</span><br><span class="line">        WrapLibClang::WrapLibClang</span><br><span class="line">        clangAST</span><br><span class="line">        clangASTMatchers</span><br><span class="line">        clangBasic</span><br><span class="line">        clangFrontend</span><br><span class="line">        clangLex</span><br><span class="line">        clangSerialization</span><br><span class="line">        clangTooling</span><br><span class="line">        clangToolingCore</span><br><span class="line">        clangHandleCXX</span><br><span class="line">        clangFrontendTool</span><br><span class="line">        LLVMSupport</span><br><span class="line">        LLVMCore</span><br><span class="line">        LLVMOption</span><br><span class="line">        LLVMDemangle</span><br><span class="line">        LLVMBitReader</span><br><span class="line">        LLVMBitWriter</span><br><span class="line">        LLVMIRReader</span><br><span class="line">        LLVMProfileData</span><br><span class="line">        LLVMObject</span><br><span class="line">        LLVMTransformUtils</span><br><span class="line">        LLVMAnalysis</span><br><span class="line">        LLVMMC</span><br><span class="line">        LLVMMCParser</span><br><span class="line">        LLVMCodeGen</span><br><span class="line">        LLVMTarget</span><br><span class="line">        LLVMAsmPrinter</span><br><span class="line">        LLVMLinker</span><br><span class="line">        LLVMInstrumentation</span><br><span class="line">        LLVMScalarOpts</span><br><span class="line">        LLVMInstCombine</span><br><span class="line">        LLVMAggressiveInstCombine</span><br><span class="line">        LLVMVectorize</span><br><span class="line">        LLVMTransformUtils</span><br><span class="line">        LLVMBitstreamReader</span><br><span class="line">        LLVMBitWriter</span><br><span class="line">        LLVMTableGen</span><br><span class="line">        LLVMObjectYAML</span><br><span class="line">        LLVMExecutionEngine</span><br><span class="line">        LLVMOrcJIT</span><br><span class="line">        LLVMCoverage</span><br><span class="line">        LLVMDebugInfoCodeView</span><br><span class="line">        LLVMDebugInfoDWARF</span><br><span class="line">        LLVMDebugInfoGSYM</span><br><span class="line">        LLVMDebugInfoMSF</span><br><span class="line">        LLVMDebugInfoPDB</span><br><span class="line">        LLVMDebugInfoLogicalView</span><br><span class="line">    DEFINES</span><br><span class="line">        #(CLANG_RESOURCE_DIR=\&quot;/clang//include\&quot;) # special case remove</span><br><span class="line">        CLANG_RESOURCE_DIR=$&#123;QT_LIBCLANG_RESOURCE_DIR&#125;</span><br><span class="line">        # To provide the ability to workaround version-specific Clang issues.</span><br><span class="line">        # A re-export of (LLVM|CLANG)_VERSION_MAJOR done in WrapLibClang.cmake</span><br><span class="line">        LIBCLANG_VERSION_MAJOR=$&#123;QT_LIB_CLANG_VERSION_MAJOR&#125;</span><br><span class="line">        QDOC2_COMPAT</span><br><span class="line">)</span><br><span class="line">qt_internal_return_unless_building_tools()</span><br><span class="line"></span><br><span class="line"># If libclangTooling.a is not built with -fPIE enabled we cannot link it to qdoc.</span><br><span class="line"># TODO: Re-enable PIE once clang is built with PIE in provisioning.</span><br><span class="line">set_target_properties($&#123;target_name&#125; PROPERTIES POSITION_INDEPENDENT_CODE FALSE)</span><br><span class="line"></span><br><span class="line">qt_internal_extend_target($&#123;target_name&#125; CONDITION (WIN32 AND ICC) OR MSVC</span><br><span class="line">    LINK_OPTIONS</span><br><span class="line">        &quot;/STACK:4194304&quot;</span><br><span class="line">)</span><br><span class="line">qt_internal_add_docs($&#123;target_name&#125;</span><br><span class="line">    doc/config/qdoc.qdocconf</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">if(QT_BUILD_TESTS)</span><br><span class="line">    add_subdirectory(tests)</span><br><span class="line">endif()</span><br></pre></td></tr></table></figure>


<h2 id="6-Some-Code-Bugs"><a href="#6-Some-Code-Bugs" class="headerlink" title="6. Some Code Bugs"></a>6. Some Code Bugs</h2><h3 id="6-1-qttools-src-linguist-lupdate-clangtoolastreader-cpp"><a href="#6-1-qttools-src-linguist-lupdate-clangtoolastreader-cpp" class="headerlink" title="6.1 ./qttools/src/linguist/lupdate/clangtoolastreader.cpp"></a>6.1 <code>./qttools/src/linguist/lupdate/clangtoolastreader.cpp</code></h3><p>Modify <code>if (!LupdatePrivate::isFileSignificant(fullLocation.getFileEntry()-&gt;getName().str()))</code> to <code>if (!LupdatePrivate::isFileSignificant(fullLocation.getFileEntry()-&gt;tryGetRealPathName().str()))</code>.</p>
<h3 id="6-2-qttools-src-qdoc-qdoc-src-qdoc-clangcodeparser-cpp"><a href="#6-2-qttools-src-qdoc-qdoc-src-qdoc-clangcodeparser-cpp" class="headerlink" title="6.2 ./qttools/src/qdoc/qdoc/src/qdoc/clangcodeparser.cpp:"></a>6.2 <code>./qttools/src/qdoc/qdoc/src/qdoc/clangcodeparser.cpp</code>:</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Retrieves the default value of the passed in type template parameter as a string.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The default value of a type template parameter is always a type,</span></span><br><span class="line"><span class="comment"> * and its stringified representation will be return as the fully</span></span><br><span class="line"><span class="comment"> * qualified version of the type.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * If the parameter has no default value the empty string will be returned.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*static std::string get_default_value_initializer_as_string(const clang::TemplateTypeParmDecl* parameter) &#123;</span></span><br><span class="line"><span class="comment">    return (parameter &amp;&amp; parameter-&gt;hasDefaultArgument()) ?</span></span><br><span class="line"><span class="comment">                get_fully_qualified_type_name(parameter-&gt;getDefaultArgument(), parameter-&gt;getASTContext()) :</span></span><br><span class="line"><span class="comment">                &quot;&quot;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="function"><span class="type">static</span> std::string <span class="title">get_default_value_initializer_as_string</span><span class="params">(<span class="type">const</span> clang::TemplateTypeParmDecl* parameter)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (parameter &amp;&amp; parameter-&gt;<span class="built_in">hasDefaultArgument</span>()) &#123;</span><br><span class="line">        <span class="type">const</span> clang::TemplateArgumentLoc &amp;argLoc = parameter-&gt;<span class="built_in">getDefaultArgument</span>();</span><br><span class="line">        <span class="keyword">if</span> (argLoc.<span class="built_in">getArgument</span>().<span class="built_in">getKind</span>() == clang::TemplateArgument::Type) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">get_fully_qualified_type_name</span>(argLoc.<span class="built_in">getArgument</span>().<span class="built_in">getAsType</span>(), parameter-&gt;<span class="built_in">getASTContext</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Retrieves the default value of the passed in non-type template parameter as a string.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The default value of a non-type template parameter is an expression</span></span><br><span class="line"><span class="comment"> * and its stringified representation will be return as it was written</span></span><br><span class="line"><span class="comment"> * in the original code.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * If the parameter as no default value the empty string will be returned.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*static std::string get_default_value_initializer_as_string(const clang::NonTypeTemplateParmDecl* parameter) &#123;</span></span><br><span class="line"><span class="comment">    return (parameter &amp;&amp; parameter-&gt;hasDefaultArgument()) ?</span></span><br><span class="line"><span class="comment">        get_expression_as_string(parameter-&gt;getDefaultArgument(), parameter-&gt;getASTContext()) : &quot;&quot;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="function"><span class="type">static</span> std::string <span class="title">get_default_value_initializer_as_string</span><span class="params">(<span class="type">const</span> clang::NonTypeTemplateParmDecl* parameter)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (parameter &amp;&amp; parameter-&gt;<span class="built_in">hasDefaultArgument</span>()) &#123;</span><br><span class="line">        <span class="type">const</span> clang::TemplateArgumentLoc &amp;argLoc = parameter-&gt;<span class="built_in">getDefaultArgument</span>();</span><br><span class="line">        <span class="keyword">if</span> (argLoc.<span class="built_in">getArgument</span>().<span class="built_in">getKind</span>() == clang::TemplateArgument::Expression) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">get_expression_as_string</span>(argLoc.<span class="built_in">getArgument</span>().<span class="built_in">getAsExpr</span>(), parameter-&gt;<span class="built_in">getASTContext</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>And modify <code>template_name.print(ss, parameter-&gt;getASTContext().getPrintingPolicy(), clang::TemplateName::Qualified::Fully);</code> to <code>template_name.print(ss, parameter-&gt;getASTContext().getPrintingPolicy(), clang::TemplateName::Qualified::AsWritten);</code>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2024/06/19/Coding/HowTo/llvm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/06/19/Coding/HowTo/llvm/" class="post-title-link" itemprop="url">Build LLVM From Source</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2024-06-19 14:00:00 / Modified: 15:03:40" itemprop="dateCreated datePublished" datetime="2024-06-19T14:00:00-07:00">2024-06-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/HowTo/" itemprop="url" rel="index"><span itemprop="name">HowTo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <!-- # date: 2023-10-20 -->
<p>Quickly had <a target="_blank" rel="noopener" href="https://github.com/llvm/llvm-project/">Github LLVM</a> built from source again. Just follow the <a target="_blank" rel="noopener" href="https://llvm.org/docs/GettingStarted.html#getting-the-source-code-and-building-llvm">LLVM official website</a>:</p>
<h2 id="1-Git-clone"><a href="#1-Git-clone" class="headerlink" title="1. Git clone"></a>1. Git clone</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ➜ git clone https://github.com/llvm/llvm-project.git</span><br><span class="line">$ ➜ cd llvm-project</span><br></pre></td></tr></table></figure>


<h2 id="2-CMake-Configuration"><a href="#2-CMake-Configuration" class="headerlink" title="2. CMake Configuration"></a>2. CMake Configuration</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ➜ llvm-project git:(main) cmake -S llvm -B build -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo -DLLVM_ENABLE_PROJECTS=all -DBUILD_SHARED_LIBS=ON</span><br></pre></td></tr></table></figure>

<h2 id="3-Build"><a href="#3-Build" class="headerlink" title="3. Build"></a>3. Build</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ➜ llvm-project git:(main) cmake --build build -j32</span><br></pre></td></tr></table></figure>


<h2 id="4-Installation"><a href="#4-Installation" class="headerlink" title="4. Installation"></a>4. Installation</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ➜ llvm-project git:(main) sudo cmake --install build --prefix /usr/local</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2024/05/30/OperatingSystems/OSForRaspberryPi/home-assistant/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/30/OperatingSystems/OSForRaspberryPi/home-assistant/" class="post-title-link" itemprop="url">Home Assistant</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-05-30 00:38:10" itemprop="dateCreated datePublished" datetime="2024-05-30T00:38:10-07:00">2024-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-06-06 06:48:25" itemprop="dateModified" datetime="2024-06-06T06:48:25-07:00">2024-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Raspberry-Pi/" itemprop="url" rel="index"><span itemprop="name">Raspberry Pi</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Again, amazing China. This time, <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Nanjing">Nanjing</a>. What a city!!!!!</p>
<table>
<thead>
<tr>
<th align="center">Ancient Qinhuai @ Qinhuai River, Nanjing</th>
<th align="center">Ancient Qinhuai @ Qinhuai River, Nanjing</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/GuQinHuai_01.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/GuQinHuai_02.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/WanQingLou.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/LiXiangJun.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/Lights_01.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/Lights_02.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/Lights_BaiLuZhou.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/QinHuaiRenJia_01.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/QinHuaiRenJia_02.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/QinHuaiRenJia_03.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/NanjingSouth_HighSpeedTrain_RailwayStation_Outside.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/NanjingSouth_HighSpeedTrain_RailwayStation_Inside.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/NanjingOldStation_Renovated.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Nanjing/ChangYuNoodle.jpg" width="480"></td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a> has already well-established a comprehensive community support world wide. Among <strong>ALL</strong> the operating systems supporting <a target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a>, <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a> stands out, shining brightly as an open-source home automation operating system in the field of <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Internet_of_things">IoT</a>.</p>
<h1 id="1-Overview"><a href="#1-Overview" class="headerlink" title="1. Overview"></a>1. Overview</h1><h2 id="1-1-What-is-Home-Assistant"><a href="#1-1-What-is-Home-Assistant" class="headerlink" title="1.1 What is Home Assistant?"></a>1.1 What is <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a>?</h2><p><a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a> is the <code>open source home automation that puts local control and privacy first. Powered by a worldwide community of tinkerers and DIY enthusiasts. Perfect to run on a Raspberry Pi or a local server.</code> (cited from first page of the official website of <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a>.)</p>
<p><a target="_blank" rel="noopener" href="https://github.com/home-assistant/operating-system">Home Assistant OS</a> is a minimal operating system optimized for running <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a>, and it does not use traditional package management systems like <strong>apt</strong>. Instead, it relies on <a target="_blank" rel="noopener" href="https://www.docker.com/resources/what-container/">Docker</a> containers to manage and run services, including <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a> and its add-ons.</p>
<h2 id="1-2-Web-UI"><a href="#1-2-Web-UI" class="headerlink" title="1.2 Web UI"></a>1.2 Web UI</h2><p>After simply flashed <a target="_blank" rel="noopener" href="https://github.com/home-assistant/operating-system/releases/tag/12.3">Home Assistant OS 12.3</a> onto a 16GB TF card and insert it into my old <a target="_blank" rel="noopener" href="https://www.raspberrypi.com/products/raspberry-pi-3-model-b/">Raspberry Pi 3B V1.2</a>, we can now take a brief look at <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a> web UI at <a target="_blank" rel="noopener" href="http://homeassistant.local:8123/">http://homeassistant.local:8123/</a>.</p>
<table>
<thead>
<tr>
<th align="center">Home Assistant Overview</th>
<th align="center">Home Assistant Dashboard</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/OperatingSystems/ha/ha_overview.png" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/OperatingSystems/ha/ha_dashboard.png" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/OperatingSystems/ha/ha_terminalssh.png" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/OperatingSystems/ha/ha_runterminalssh.png" width="480"></td>
</tr>
</tbody></table>
<h1 id="2-SSH-Into-Home-Assistant-OS"><a href="#2-SSH-Into-Home-Assistant-OS" class="headerlink" title="2. SSH Into Home Assistant OS"></a>2. SSH Into <a target="_blank" rel="noopener" href="https://github.com/home-assistant/operating-system">Home Assistant OS</a></h1><h2 id="2-1-Configuration"><a href="#2-1-Configuration" class="headerlink" title="2.1 Configuration"></a>2.1 Configuration</h2><h3 id="2-1-1-Installation-of-Home-Assistant-Add-on-Terminal-SSH"><a href="#2-1-1-Installation-of-Home-Assistant-Add-on-Terminal-SSH" class="headerlink" title="2.1.1 Installation of Home Assistant Add-on Terminal &amp; SSH"></a>2.1.1 Installation of <a target="_blank" rel="noopener" href="https://github.com/home-assistant/addons/tree/master/ssh">Home Assistant Add-on Terminal &amp; SSH</a></h3><p>Please have the <strong>add-on</strong> <a target="_blank" rel="noopener" href="https://github.com/home-assistant/addons/tree/master/ssh">Home Assistant Add-on Terminal &amp; SSH</a> installed from <code>Home Assistant -&gt; Settings -&gt; Add-ons</code>.</p>
<h3 id="2-1-2-Edit-in-YAML"><a href="#2-1-2-Edit-in-YAML" class="headerlink" title="2.1.2. Edit in YAML"></a>2.1.2. Edit in YAML</h3><p>Please do remember to add these 2 lines:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ssh:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">22</span></span><br></pre></td></tr></table></figure>

<p>at the end of the <strong>YAML</strong> configuration:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">authorized_keys:</span> []</span><br><span class="line"><span class="attr">password:</span> []</span><br><span class="line"><span class="attr">apks:</span> []</span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">tcp_forwarding:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">ssh:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">22</span></span><br></pre></td></tr></table></figure>


<h2 id="2-2-SSH-Into-Home-Assistant-OS-From-Remote-Desktop"><a href="#2-2-SSH-Into-Home-Assistant-OS-From-Remote-Desktop" class="headerlink" title="2.2 SSH Into Home Assistant OS From Remote Desktop"></a>2.2 SSH Into <a target="_blank" rel="noopener" href="https://github.com/home-assistant/operating-system">Home Assistant OS</a> From Remote Desktop</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ssh root@192.168.1.83</span><br><span class="line">The authenticity of host &#x27;192.168.1.83 (192.168.1.83)&#x27; can&#x27;t be established.</span><br><span class="line">ED25519 key fingerprint is SHA256:MZDkXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXJmxE.</span><br><span class="line">This key is not known by any other names.</span><br><span class="line">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br><span class="line">Warning: Permanently added &#x27;192.168.1.83&#x27; (ED25519) to the list of known hosts.</span><br><span class="line"></span><br><span class="line">       ▄██▄           _   _                                    </span><br><span class="line">     ▄██████▄        | | | | ___  _ __ ___   ___               </span><br><span class="line">   ▄████▀▀████▄      | |_| |/ _ \| &#x27;_ ` _ \ / _ \              </span><br><span class="line"> ▄█████    █████▄    |  _  | (_) | | | | | |  __/              </span><br><span class="line">▄██████▄  ▄██████▄   |_| |_|\___/|_| |_| |_|\___|          _   </span><br><span class="line">████████  ██▀  ▀██      / \   ___ ___(_)___| |_ __ _ _ __ | |_ </span><br><span class="line">███▀▀███  ██   ▄██     / _ \ / __/ __| / __| __/ _` | &#x27;_ \| __|</span><br><span class="line">██    ██  ▀ ▄█████    / ___ \\__ \__ \ \__ \ || (_| | | | | |_ </span><br><span class="line">███▄▄ ▀█  ▄███████   /_/   \_\___/___/_|___/\__\__,_|_| |_|\__|</span><br><span class="line">▀█████▄   ███████▀</span><br><span class="line"></span><br><span class="line">Welcome to the Home Assistant command line.</span><br><span class="line"></span><br><span class="line">System information</span><br><span class="line">  IPv4 addresses for enu1u1: 192.168.1.83/24</span><br><span class="line">  IPv6 addresses for enu1u1: 2001:569:5993:5900:1b4a:e1e6:140c:aac0/64, fe80::ab1f:8f98:b81:a479/64</span><br><span class="line">  IPv4 addresses for wlan0: </span><br><span class="line">  IPv4 addresses for wlu1u4: </span><br><span class="line"></span><br><span class="line">  OS Version:               Home Assistant OS 12.3</span><br><span class="line">  Home Assistant Core:      2024.5.5</span><br><span class="line"></span><br><span class="line">  Home Assistant URL:       http://homeassistant.local:8123</span><br><span class="line">  Observer URL:             http://homeassistant.local:4357</span><br><span class="line">[core-ssh ~]$</span><br></pre></td></tr></table></figure>



<h1 id="3-ESPHome-with-Home-Assistant"><a href="#3-ESPHome-with-Home-Assistant" class="headerlink" title="3. ESPHome with Home Assistant"></a>3. <a target="_blank" rel="noopener" href="https://esphome.io/">ESPHome</a> with <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a></h1><p>One of my very old blogs <a href="../../../../../../2019/08/22/MachineVision/MCU/exp32cam/">LVT ESP32-Cam</a> has talked about <a target="_blank" rel="noopener" href="https://github.com/espressif/esp32-camera">ESP32 Camera</a>. Today, I found that blog posted 4 years ago before <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/COVID-19">COVID-19</a>, and I’m trying to integrate some of my <a target="_blank" rel="noopener" href="https://github.com/espressif/esp32-camera">ESP32 Camera</a>s into <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a>. Namely, use <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a> running on the <a target="_blank" rel="noopener" href="https://www.raspberrypi.com/">Raspberry Pi</a> to manage a couple of my <a target="_blank" rel="noopener" href="https://github.com/espressif/esp32-camera">ESP32 Camera</a>s.</p>
<h2 id="3-1-ESP32-Boards-Management"><a href="#3-1-ESP32-Boards-Management" class="headerlink" title="3.1 ESP32 Boards Management"></a>3.1 ESP32 Boards Management</h2><p>Please ensure the following 2 boards support have been installed successfully.</p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/Arduino-IDE-ESP32.png" alt="ESP32 Boards Support in Arduino IDE"></p>
<h2 id="3-2-CameraWebServer"><a href="#3-2-CameraWebServer" class="headerlink" title="3.2 CameraWebServer"></a>3.2 CameraWebServer</h2><p>Current <a target="_blank" rel="noopener" href="https://github.com/espressif/arduino-esp32/tree/master/libraries/ESP32/examples">ESP32 Examples</a> provide an webcam server example: <a target="_blank" rel="noopener" href="https://github.com/espressif/arduino-esp32/blob/master/libraries/ESP32/examples/Camera/CameraWebServer/CameraWebServer.ino">ESP32 Example CameraWebServer</a>. Or, we can simply open up the example from within Arduino IDE: <code>File-&gt;Examples-&gt;ESP32-&gt;Camera-&gt;CameraWebServer</code>.</p>
<h3 id="3-2-1-Four-ESP32-Cameras"><a href="#3-2-1-Four-ESP32-Cameras" class="headerlink" title="3.2.1 Four ESP32 Cameras"></a>3.2.1 Four <a target="_blank" rel="noopener" href="https://github.com/espressif/esp32-camera">ESP32 Camera</a>s</h3><ul>
<li>2 <a target="_blank" rel="noopener" href="https://docs.ai-thinker.com/en/esp32-cam">Ai Thinker ESP32 Camera</a>s</li>
<li>2 <a target="_blank" rel="noopener" href="https://www.diymore.cc/collections/esp32/products/esp32-cam-wifi-wireless-module-esp32-serial-to-wifi-esp32-cam-spi-flash-bluetooth-development-board-with-ov2640-camera-module">DIY More ESP32 Camera</a>s</li>
</ul>
<p>Both are compatible with the configuration <code>CAMERA_MODEL_AI_THINKER</code> in <a target="_blank" rel="noopener" href="https://github.com/espressif/arduino-esp32/blob/master/libraries/ESP32/examples/Camera/CameraWebServer/CameraWebServer.ino">ESP32 Example CameraWebServer</a>. Therefore, three places are to be correctly setup:</p>
<ul>
<li><code>#define CAMERA_MODEL_AI_THINKER // Has PSRAM</code></li>
<li><code>const char *ssid = &quot;XXXXXXXXX&quot;;</code></li>
<li><code>const char *password = &quot;YYYYYYYYY&quot;;</code></li>
</ul>
<h3 id="3-2-2-Verify-and-Upload"><a href="#3-2-2-Verify-and-Upload" class="headerlink" title="3.2.2 Verify and Upload"></a>3.2.2 Verify and Upload</h3><p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/Arduino-IDE-ESP32-Verify.png" alt="Verify/Compile"> </p>
<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/Arduino-IDE-ESP32-Upload.png" alt="Upload"></p>
<h3 id="3-2-3-Demonstration"><a href="#3-2-3-Demonstration" class="headerlink" title="3.2.3 Demonstration"></a>3.2.3 Demonstration</h3><p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/CameraWebServer.png" alt="Demonstration"></p>
<p>However, as you can see, the captured image is not quite stable. And, I did find the WiFi connection is easy to get disconnected. <strong><span style="color: red;">What to do???</span></strong></p>
<blockquote>
<p>[!NOTE] <strong><span style="color: red;">What to do???</span></strong></p>
</blockquote>
<blockquote>
<p><strong><span style="color: red;">Please continue reading.</span></strong></p>
</blockquote>
<h2 id="3-3-RTSP-with-MJPEG"><a href="#3-3-RTSP-with-MJPEG" class="headerlink" title="3.3 RTSP with MJPEG"></a>3.3 RTSP with MJPEG</h2><p>As of today, June 4, 2024, there is <strong>NO</strong> <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Advanced_Video_Coding">H.264</a> or <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/High_Efficiency_Video_Coding">H.265</a> streaming server support. Therefore, I’m going to follow the following 2 blogs and build up <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Real-Time_Streaming_Protocol">RTSP</a> server with <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Motion_JPEG">MJPEG</a> video streams. </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://learn.circuit.rocks/esp32-cam-with-rtsp-video-streaming">ESP32-CAM with RTSP video streaming</a></li>
<li><a target="_blank" rel="noopener" href="https://randomnerdtutorials.com/esp32-cam-video-streaming-web-server-camera-home-assistant/">ESP32-CAM Video Streaming Web Server (works with Home Assistant)</a></li>
</ul>
<h2 id="3-4-Integrate-ESPHome-Into-Home-Assistant"><a href="#3-4-Integrate-ESPHome-Into-Home-Assistant" class="headerlink" title="3.4 Integrate ESPHome Into Home Assistant"></a>3.4 Integrate <a target="_blank" rel="noopener" href="https://esphome.io/">ESPHome</a> Into <a target="_blank" rel="noopener" href="https://www.home-assistant.io/">Home Assistant</a></h2><p><a target="_blank" rel="noopener" href="https://esphome.io/guides/getting_started_hassio.html">Getting Started with ESPHome and Home Assistant</a></p>
<h2 id="3-5-Demonstration"><a href="#3-5-Demonstration" class="headerlink" title="3.5 Demonstration"></a>3.5 Demonstration</h2><table>
<thead>
<tr>
<th align="center">ESPHome</th>
<th align="center">ESPHome</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_Build_Failed.png" alt="01"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/esphome_compile.png" alt="02"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_Device_Discovered.png" alt="03"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_DeviceInfo.png" alt="04"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_Devices.png" alt="05"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/esphome_flash.png" alt="06"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_Installation.png" alt="07"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_Install_Connecting_Hang.png" alt="08"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_Installed_3232_ConnectionRefused.png" alt="09"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_Visit.png" alt="10"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/esptool_upload_failed.png" alt="11"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/esptool_upload_firmware.png" alt="12"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/HomeAssistant_Overview.png" alt="13"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/HomeAssistant_Media_Live.png" alt="14"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_4_ESP32Cam_Configured.png" alt="15"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/MCU/Arduino/ESPHome/ESPHome_4_ESP32Cam_Integrated.png" alt="16"></td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2024/05/16/SBCs/RISC-V/Luckfox-Pico-Max/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/16/SBCs/RISC-V/Luckfox-Pico-Max/" class="post-title-link" itemprop="url">Luckfox Pico Max RV1106</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-05-16 22:14:01" itemprop="dateCreated datePublished" datetime="2024-05-16T22:14:01-07:00">2024-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-05-30 02:29:24" itemprop="dateModified" datetime="2024-05-30T02:29:24-07:00">2024-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/Risc-V/" itemprop="url" rel="index"><span itemprop="name">Risc-V</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>China indeed is becoming better and better. Let me show you some pictures in <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Suzhou">SuZhou</a> before my flight back to <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Vancouver">Vancouver</a>.</p>
<table>
<thead>
<tr>
<th align="center">Temple @ Lingyanshan, Mudu, Suzhou</th>
<th align="center">Stone Turtle @ Lingyanshan, Mudu, Suzhou</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/LingYanShanTemple.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/LingYanShanTurtle.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/ShanTangRoad.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/XiangXi_Bridge.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/XiangXi.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/XiangXi_UnknownBridge.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/DownTown_XuanGuanTemple.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/DownTown_PingJiangRoad_Starbucks.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/DownTown_PingJiangRoad.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Suzhou/DownTown_PingJiangRoad_SideRoad.jpg" width="480"></td>
</tr>
</tbody></table>
<h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h1><h2 id="1-1-First-Look"><a href="#1-1-First-Look" class="headerlink" title="1.1 First Look"></a>1.1 First Look</h2><table>
<thead>
<tr>
<th align="center">Luckfox Pico Max Top View</th>
<th align="center">Luckfox Pico Max Bottom View</th>
<th align="center">Luckfox Pico Max Top View with Camera</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/RISC-V/Luckfox-Pico-Max/LuckfoxPicoMax_Top.jpg" alt="Luckfox Pico Max Top View"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/RISC-V/Luckfox-Pico-Max/LuckfoxPicoMax_Bottom.jpg" alt="Luckfox Pico Max Bottom View"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/RISC-V/Luckfox-Pico-Max/LuckfoxPicoMax_Top_Camera.jpg" alt="Luckfox Pico Max Top View with Camera"></td>
</tr>
</tbody></table>
<h2 id="1-2-Official-Documentation"><a href="#1-2-Official-Documentation" class="headerlink" title="1.2 Official Documentation"></a>1.2 Official Documentation</h2><p>Actually, <strong>ALL</strong> you need can be found at:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://wiki.luckfox.com/Luckfox-Pico/Luckfox-Pico-quick-start">Luckfox Pico Getting Started Tutorial</a></li>
</ul>
<h2 id="1-3-Luckfox-Pico-Max"><a href="#1-3-Luckfox-Pico-Max" class="headerlink" title="1.3 Luckfox Pico Max"></a>1.3 Luckfox Pico Max</h2><p>According to the <a target="_blank" rel="noopener" href="https://wiki.luckfox.com/Luckfox-Pico/Luckfox-Pico-quick-start#product-parameters">Luckfox Pico Product Parameters</a>, two streams of the products can be categorized into 2 classes by their chips:</p>
<ul>
<li>RV1103: <ul>
<li>Luckfox Pico</li>
<li>Luckfox Pico Mini A</li>
<li>Luckfox Pico Mini B</li>
<li>Luckfox Pico Plus</li>
</ul>
</li>
<li>RV1106: <ul>
<li>Luckfox Pico Pro</li>
<li>Luckfox Pico Max</li>
</ul>
</li>
</ul>
<blockquote>
<p>[!NOTE]<br>Clearly, the one I purchased is a <strong>Luckfox Pico Max</strong>.</p>
</blockquote>
<h1 id="2-lsusb"><a href="#2-lsusb" class="headerlink" title="2. lsusb"></a>2. lsusb</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsusb</span><br><span class="line">......</span><br><span class="line">Bus 009 Device 007: ID 2207:0019 Fuzhou Rockchip Electronics Company rk3xxx</span><br><span class="line">......</span><br></pre></td></tr></table></figure>





      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2024/05/09/Coding/HowTo/open3d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/09/Coding/HowTo/open3d/" class="post-title-link" itemprop="url">Build Open3D From Source</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2024-05-09 00:00:00 / Modified: 16:01:10" itemprop="dateCreated datePublished" datetime="2024-05-09T00:00:00-07:00">2024-05-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/HowTo/" itemprop="url" rel="index"><span itemprop="name">HowTo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>I tried to build Intel <a target="_blank" rel="noopener" href="https://github.com/isl-org/Open3D">Open3D</a> from source, using <a target="_blank" rel="noopener" href="https://gcc.gnu.org/">GCC&#x2F;G++</a> <strong>ONLY</strong>. Of course, I used <strong>ALL</strong> 3rdparty libraries either from default Ubuntu repository, or manually installed the newest version, rather than using the <a target="_blank" rel="noopener" href="https://github.com/isl-org/Open3D/tree/master/3rdparty">3rdparty libraries coming with Open3D itself</a>.</p>
<p>Today, May 9, 2024, I had this annoying <a target="_blank" rel="noopener" href="https://github.com/isl-org/Open3D">Open3D</a> successfully built again, with my <a target="_blank" rel="noopener" href="https://github.com/isl-org/Open3D/pull/6788">PR 6788</a>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2024/05/09/Coding/HowTo/qemu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/09/Coding/HowTo/qemu/" class="post-title-link" itemprop="url">How to build a Linux Distro for your QEMU?</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2024-05-09 00:00:00 / Modified: 16:04:51" itemprop="dateCreated datePublished" datetime="2024-05-09T00:00:00-07:00">2024-05-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/" itemprop="url" rel="index"><span itemprop="name">Coding</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Coding/HowTo/" itemprop="url" rel="index"><span itemprop="name">HowTo</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2024/05/02/SBCs/RISC-V/LicheeRV-Nano/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/02/SBCs/RISC-V/LicheeRV-Nano/" class="post-title-link" itemprop="url">LicheeRV Nano</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-05-02 07:09:40" itemprop="dateCreated datePublished" datetime="2024-05-02T07:09:40-07:00">2024-05-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-05-16 23:30:39" itemprop="dateModified" datetime="2024-05-16T23:30:39-07:00">2024-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/Risc-V/" itemprop="url" rel="index"><span itemprop="name">Risc-V</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>I got a <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Lichee-Nano-Development-Board-Multi-System_1600176273210.html">LicheeRV Nano</a> before I left China for Canada a couple of weeks ago. Nowadays China is amazing. Let’s take a look at my hometown Wuhan of year 2024.</p>
<table>
<thead>
<tr>
<th align="center">Sunset @ Yangtze River 2nd Bridge</th>
<th align="center">Sunset @ Yangtze River TianXingZhou Bridge</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YangtzeRiver_2ndBridge_Sunset.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YangtzeRiver_TianXingZhouBridge_Sunset.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YangtzeRiver_Grove_Sunset.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YangtzeRiver_Embankment_Grassland_Constructions.jpg" width="480"></td>
</tr>
<tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YuChiYuZui_01.jpg" width="480"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YuChiYuZui_02.jpg" width="480"></td>
</tr>
</tbody></table>
<!-- | ![YangtzeRiver_2ndBridge_Sunset](https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YangtzeRiver_2ndBridge_Sunset.jpg) | ![YangtzeRiver_TianXingZhouBridge_Sunset](https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YangtzeRiver_TianXingZhouBridge_Sunset.jpg) | -->
<!-- | ![YangtzeRiver_Grove_Sunset](https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YangtzeRiver_Grove_Sunset.jpg) | ![YangtzeRiver_Embankment_Grassland_Constructions](https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YangtzeRiver_Embankment_Grassland_Constructions.jpg) |
| ![YuChiYuZui_01](https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YuChiYuZui_01.jpg) | ![YuChiYuZui_02](https://raw.githubusercontent.com/LongerVision/Resource/master/sceneries/2024/China/Wuhan/YuChiYuZui_01.jpg) | -->




<p>Now, let’s start our today’s topic: <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Lichee-Nano-Development-Board-Multi-System_1600176273210.html">LicheeRV Nano</a>.</p>
<h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h1><h2 id="1-1-First-Look"><a href="#1-1-First-Look" class="headerlink" title="1.1 First Look"></a>1.1 First Look</h2><table>
<thead>
<tr>
<th align="center">LicheeRV Nano</th>
<th align="center">LicheeRV Nano with N2425D</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/RISC-V/LicheeRV_Nano/LicheeRV_Nano_01.jpg" alt="LicheeRV_Nano_01"></td>
<td align="center"><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/RISC-V/LicheeRV_Nano/LicheeRV_Nano_02.jpg" alt="LicheeRV_Nano_02"></td>
</tr>
</tbody></table>
<h2 id="1-2-Official-Documentation"><a href="#1-2-Official-Documentation" class="headerlink" title="1.2 Official Documentation"></a>1.2 Official Documentation</h2><p>Actually, <strong>ALL</strong> you need can be found at:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://wiki.sipeed.com/hardware/en/lichee/RV_Nano/1_intro.html">LicheeRV Nano Official Documentation</a></li>
</ul>
<h2 id="1-3-LicheeRV-Nano-WE"><a href="#1-3-LicheeRV-Nano-WE" class="headerlink" title="1.3 LicheeRV-Nano-WE"></a>1.3 LicheeRV-Nano-WE</h2><p>According to the <a target="_blank" rel="noopener" href="https://wiki.sipeed.com/hardware/en/lichee/RV_Nano/1_intro.html#Version-Comparison">LicheeRV Nano Version Comparison</a>, there are 4 versions totally.</p>
<ul>
<li>LicheeRV-Nano-B</li>
<li>LicheeRV-Nano-E</li>
<li>LicheeRV-Nano-W</li>
<li>LicheeRV-Nano-WE</li>
</ul>
<p>Clearly, the one I purchased is a <strong>LicheeRV-Nano-WE</strong>.</p>
<h1 id="2-lsusb"><a href="#2-lsusb" class="headerlink" title="2. lsusb"></a>2. lsusb</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsusb</span><br><span class="line">......</span><br><span class="line">Bus 009 Device 010: ID 3346:1009 sipeed licheervnano</span><br><span class="line">......</span><br></pre></td></tr></table></figure>


<h1 id="3-WiFi-Setup"><a href="#3-WiFi-Setup" class="headerlink" title="3. WiFi Setup"></a>3. WiFi Setup</h1><p>After <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Lichee-Nano-Development-Board-Multi-System_1600176273210.html">LicheeRV Nano</a> is connected to your host computer via USB Type-C, enter the mounted <strong>rootfs</strong> and add the following new file:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  rootfs sudo vim ./etc/network/wpa_supplicant.conf</span><br><span class="line">network=&#123;</span><br><span class="line">        ssid=&quot;XXXXX&quot;</span><br><span class="line">        psk=&quot;YYYYY&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Then, <strong>reboot</strong>. Now, you should be able to find out your <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Lichee-Nano-Development-Board-Multi-System_1600176273210.html">LicheeRV Nano</a> by <code>sudo nmap -sn 192.168.1.254/24</code>.</p>
<h1 id="4-LicheeRV-Nano-Overview"><a href="#4-LicheeRV-Nano-Overview" class="headerlink" title="4. LicheeRV Nano Overview"></a>4. <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Lichee-Nano-Development-Board-Multi-System_1600176273210.html">LicheeRV Nano</a> Overview</h1><h2 id="4-1-SSH-Into-LicheeRV-Nano"><a href="#4-1-SSH-Into-LicheeRV-Nano" class="headerlink" title="4.1 SSH Into LicheeRV Nano"></a>4.1 SSH Into <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Lichee-Nano-Development-Board-Multi-System_1600176273210.html">LicheeRV Nano</a></h2><p>Both the default username and password of <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Lichee-Nano-Development-Board-Multi-System_1600176273210.html">LicheeRV Nano</a> are <strong>root</strong>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ssh root@192.168.1.78</span><br><span class="line">root@192.168.1.78&#x27;s password:</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">uname</span> -a</span></span><br><span class="line">Linux licheervnano-8c93 5.10.4-tag- #1 PREEMPT Mon Apr 22 11:13:44 HKT 2024 riscv64 GNU/Linux</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hostname</span></span><br><span class="line">licheervnano-8c93</span><br></pre></td></tr></table></figure>


<h2 id="4-2-CPU-and-Memory"><a href="#4-2-CPU-and-Memory" class="headerlink" title="4.2 CPU and Memory"></a>4.2 CPU and Memory</h2><p>Clearly, <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Lichee-Nano-Development-Board-Multi-System_1600176273210.html">LicheeRV Nano</a> is armed with <strong>only 1 single Risc-V 64bit CPU</strong>, and about <strong>160M</strong> flash memory.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">hart		: 0</span><br><span class="line">isa		: rv64imafdvcsu</span><br><span class="line">mmu		: sv39</span><br><span class="line"></span><br><span class="line"># cat /proc/meminfo</span><br><span class="line">MemTotal:         162672 kB</span><br><span class="line">MemFree:           98276 kB</span><br><span class="line">MemAvailable:     128976 kB</span><br><span class="line">Buffers:            3416 kB</span><br><span class="line">Cached:            28776 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:            11792 kB</span><br><span class="line">Inactive:          26892 kB</span><br><span class="line">Active(anon):        144 kB</span><br><span class="line">Inactive(anon):     6592 kB</span><br><span class="line">Active(file):      11648 kB</span><br><span class="line">Inactive(file):    20300 kB</span><br><span class="line">Unevictable:           0 kB</span><br><span class="line">Mlocked:               0 kB</span><br><span class="line">SwapTotal:             0 kB</span><br><span class="line">SwapFree:              0 kB</span><br><span class="line">Dirty:                 4 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:          6508 kB</span><br><span class="line">Mapped:            10092 kB</span><br><span class="line">Shmem:               248 kB</span><br><span class="line">KReclaimable:       5164 kB</span><br><span class="line">Slab:              13988 kB</span><br><span class="line">SReclaimable:       5164 kB</span><br><span class="line">SUnreclaim:         8824 kB</span><br><span class="line">KernelStack:        1248 kB</span><br><span class="line">PageTables:          524 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:       81336 kB</span><br><span class="line">Committed_AS:       9868 kB</span><br><span class="line">VmallocTotal:   67108863 kB</span><br><span class="line">VmallocUsed:        5468 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:               64 kB</span><br><span class="line">CmaTotal:              0 kB</span><br><span class="line">CmaFree:               0 kB</span><br></pre></td></tr></table></figure>


<h2 id="4-3-Python"><a href="#4-3-Python" class="headerlink" title="4.3 Python"></a>4.3 Python</h2><p>By default, <strong>Python 3.11.6</strong> has been installed on <a target="_blank" rel="noopener" href="https://www.alibaba.com/product-detail/Lichee-Nano-Development-Board-Multi-System_1600176273210.html">LicheeRV Nano</a> </p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">python --version</span></span><br><span class="line">Python 3.11.6</span><br></pre></td></tr></table></figure>


<h1 id="5-LicheeRV-Nano-Build"><a href="#5-LicheeRV-Nano-Build" class="headerlink" title="5. LicheeRV-Nano-Build"></a>5. <a target="_blank" rel="noopener" href="https://github.com/sipeed/LicheeRV-Nano-Build">LicheeRV-Nano-Build</a></h1><p>The default <a target="_blank" rel="noopener" href="https://github.com/sipeed/LicheeRV-Nano-Build/blob/main/README.md">LicheeRV-Nano-Build README.md</a> seems to be problematic. I did it in my way:</p>
<h2 id="5-1-Clone-LicheeRV-Nano-Build"><a href="#5-1-Clone-LicheeRV-Nano-Build" class="headerlink" title="5.1 Clone LicheeRV-Nano-Build"></a>5.1 Clone <a target="_blank" rel="noopener" href="https://github.com/sipeed/LicheeRV-Nano-Build">LicheeRV-Nano-Build</a></h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  git clone https://github.com/sipeed/LicheeRV-Nano-Build --depth=1</span><br><span class="line">➜  cd LicheeRV-Nano-Build</span><br><span class="line">➜  LicheeRV-Nano-Build git:(main)</span><br></pre></td></tr></table></figure>

<h2 id="5-2-Setup"><a href="#5-2-Setup" class="headerlink" title="5.2 Setup"></a>5.2 Setup</h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">➜  LicheeRV-Nano-Build git:(main) ✗ source build/cvisetup.sh</span><br><span class="line">/proc/self/fd/19:7: cv1800b_board_sel: assignment to invalid subscript range</span><br><span class="line">  -------------------------------------------------------------------------------------------------------</span><br><span class="line">    Usage:</span><br><span class="line">    (1) menuconfig - Use menu to configure your board.</span><br><span class="line">        ex: $ menuconfig</span><br><span class="line"></span><br><span class="line">    (2) defconfig $CHIP_ARCH - List EVB boards($BOARD) by CHIP_ARCH.</span><br><span class="line">       ** sg200x ** -&gt; [&#x27;sg2000&#x27;, &#x27;sg2002&#x27;]</span><br><span class="line">       ** cv181x ** -&gt; [&#x27;cv1812cp&#x27;, &#x27;cv1812h&#x27;, &#x27;cv1813h&#x27;]</span><br><span class="line">       ** cv180x ** -&gt; [&#x27;cv1800b&#x27;]</span><br><span class="line">        ex: $ defconfig cv181x</span><br><span class="line"></span><br><span class="line">    (3) defconfig $BOARD - Choose EVB board settings.</span><br><span class="line">        ex: $ defconfig cv1813h_wevb_0007a_spinor</span><br><span class="line">        ex: $ defconfig cv1812cp_wevb_0006a_spinor</span><br><span class="line">  -------------------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<h2 id="5-3-GUI-based-menuconfig"><a href="#5-3-GUI-based-menuconfig" class="headerlink" title="5.3 GUI-based menuconfig"></a>5.3 GUI-based <code>menuconfig</code></h2><p>I personally prefer the GUI-based configuration.</p>
<h3 id="5-3-1-Copy-menuconfig-py"><a href="#5-3-1-Copy-menuconfig-py" class="headerlink" title="5.3.1 Copy menuconfig.py"></a>5.3.1 Copy <code>menuconfig.py</code></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  LicheeRV-Nano-Build git:(main) ✗ cd build/scripts </span><br><span class="line">➜  scripts git:(main) ✗ cp menuconfig.py .py</span><br><span class="line">➜  scripts git:(main) ✗ </span><br></pre></td></tr></table></figure>

<h3 id="5-3-2-Modify-build-boards-sg200x-sg2002-licheervnano-sd-sg2002-licheervnano-sd-defconfig"><a href="#5-3-2-Modify-build-boards-sg200x-sg2002-licheervnano-sd-sg2002-licheervnano-sd-defconfig" class="headerlink" title="5.3.2 Modify ./build/boards/sg200x/sg2002_licheervnano_sd/sg2002_licheervnano_sd_defconfig"></a>5.3.2 Modify <code>./build/boards/sg200x/sg2002_licheervnano_sd/sg2002_licheervnano_sd_defconfig</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/build/boards/sg200x/sg2002_licheervnano_sd/sg2002_licheervnano_sd_defconfig b/build/boards/sg200x/sg2002_licheervnano_sd/sg2002_licheervnano_sd_defconfig</span><br><span class="line">index 4138f665b..58a5ea02d 100644</span><br><span class="line">--- a/build/boards/sg200x/sg2002_licheervnano_sd/sg2002_licheervnano_sd_defconfig</span><br><span class="line">+++ b/build/boards/sg200x/sg2002_licheervnano_sd/sg2002_licheervnano_sd_defconfig</span><br><span class="line">@@ -2,12 +2,12 @@ CONFIG_CHIP_sg2002=y</span><br><span class="line"> CONFIG_BOARD_licheervnano_sd=y</span><br><span class="line"> CONFIG_DDR_CFG_ddr3_1866_x16=y</span><br><span class="line"> CONFIG_ARCH=&quot;riscv&quot;</span><br><span class="line">-CONFIG_CROSS_COMPILE=&quot;riscv64-unknown-linux-musl-&quot;</span><br><span class="line">+CONFIG_CROSS_COMPILE=&quot;riscv64-linux-gnu-&quot;</span><br><span class="line"> CONFIG_CC_OPTIMIZE_FOR_SIZE=y</span><br><span class="line"> CONFIG_KERNEL_ENTRY_HACK=y</span><br><span class="line"> CONFIG_KERNEL_ENTRY_HACK_ADDR=&quot;0x80200000&quot;</span><br><span class="line"> CONFIG_TOOLCHAIN_MUSL_RISCV64=y</span><br><span class="line">-CONFIG_FLASH_SIZE_SHRINK=y</span><br><span class="line">+# CONFIG_FLASH_SIZE_SHRINK=y</span><br><span class="line"> CONFIG_BOOT_IMAGE_SINGLE_DTB=y</span><br><span class="line"> # CONFIG_FLASH_SIZE_SHRINK is not set</span><br><span class="line"> CONFIG_CP_EXT_WIRELESS=y</span><br><span class="line">@@ -16,7 +16,7 @@ CONFIG_MIPI_PANEL_ZCT2133V1=y</span><br><span class="line"> CONFIG_SENSOR_GCORE_GC4653=y</span><br><span class="line"> CONFIG_SENSOR_OV_OS04A10=y</span><br><span class="line"> CONFIG_UBOOT_2021_10=y</span><br><span class="line">-CONFIG_KERNEL_SRC_5.10=y</span><br><span class="line">+CONFIG_KERNEL_SRC=&quot;linux_5.10&quot;</span><br><span class="line"> CONFIG_KERNEL_UNCOMPRESSED=y</span><br><span class="line"> # CONFIG_SKIP_RAMDISK is not set</span><br><span class="line"> CONFIG_SENSOR_TUNING_PARAM_cv181x_src_gcore_gc4653=y</span><br></pre></td></tr></table></figure>

<p><strong><span style="color:red">By the way, even until now, I’ve got NO idea what the MIPI_PANEL should be?</span></strong>.</p>
<h3 id="5-3-3-Run-menuconfig"><a href="#5-3-3-Run-menuconfig" class="headerlink" title="5.3.3 Run menuconfig"></a>5.3.3 Run <code>menuconfig</code></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  LicheeRV-Nano-Build git:(main) ✗ menuconfig</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/LongerVision/Resource/master/Embedded/RISC-V/LicheeRV_Nano/LicheeRV-Nano-Build_menuconfig.png" alt="LicheeRV-Nano menuconfig"></p>
<h2 id="5-4-Build"><a href="#5-4-Build" class="headerlink" title="5.4 Build"></a>5.4 Build</h2><h3 id="5-4-1-Exports"><a href="#5-4-1-Exports" class="headerlink" title="5.4.1 Exports"></a>5.4.1 Exports</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  LicheeRV-Nano-Build git:(main) ✗ export IMGTOOL_PATH=tools/common/image_tool                      </span><br><span class="line">➜  LicheeRV-Nano-Build git:(main) ✗ export COMMON_TOOLS_PATH=tools/common                                 </span><br><span class="line">➜  LicheeRV-Nano-Build git:(main) ✗ export FLASH_PARTITION_XML=boards/default/partition/partition_none.xml</span><br></pre></td></tr></table></figure>





      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2023/12/19/SBCs/RISC-V/BeagleV-Fire-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/12/19/SBCs/RISC-V/BeagleV-Fire-1/" class="post-title-link" itemprop="url">BeagleV-Fire 1</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-12-19 13:29:33" itemprop="dateCreated datePublished" datetime="2023-12-19T13:29:33-08:00">2023-12-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-04-30 23:55:49" itemprop="dateModified" datetime="2024-04-30T23:55:49-07:00">2024-04-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/Risc-V/" itemprop="url" rel="index"><span itemprop="name">Risc-V</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>BeagleV®-Fire is a revolutionary single-board computer (SBC) powered by the Microchip’s PolarFire® MPFS025T 5x core RISC-V System on Chip (SoC) with FPGA fabric.</code> (Cited from <a target="_blank" rel="noopener" href="https://www.beagleboard.org/boards/beaglev-fire">BeagleV-Fire Board</a>).</p>
<h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h1><p>This <a target="_blank" rel="noopener" href="https://www.microchip.com/en-us/product/mpfs025t">MPFS025T</a> is actually a <a target="_blank" rel="noopener" href="https://www.microchip.com/en-us/products/fpgas-and-plds/fpgas/polarfire-fpgas">PolarFire Family FPGA SoC</a>, fabriced with both FPGA and RISC-V CPU. I’m saving my word in this part. Let’s just do it.</p>
<h1 id="2-Official-Ubuntu"><a href="#2-Official-Ubuntu" class="headerlink" title="2. Official Ubuntu"></a>2. Official Ubuntu</h1><p>Approximately 25 days ago, the official page for the <a target="_blank" rel="noopener" href="https://www.beagleboard.org/boards/beaglev-fire">BeagleV-Fire Board</a> announced its first-ever distribution, the <a target="_blank" rel="noopener" href="https://www.beagleboard.org/distros/beaglev-fire-ubuntu-2023-11-21">BeagleV-Fire Distro Ubuntu 2023-11-21</a>.</p>
<h1 id="3-Flash-BeagleV-Fire-Board"><a href="#3-Flash-BeagleV-Fire-Board" class="headerlink" title="3. Flash BeagleV-Fire Board"></a>3. Flash <a target="_blank" rel="noopener" href="https://www.beagleboard.org/boards/beaglev-fire">BeagleV-Fire Board</a></h1><p>In this section, we’re going to strictly follow <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/readme.md">BeagleV-Fire Ubuntu readme.md</a>, with trivial modifiations.</p>
<h2 id="3-1-Update-ALL-Packages-to-2023-09-in-01-git-sync-sh"><a href="#3-1-Update-ALL-Packages-to-2023-09-in-01-git-sync-sh" class="headerlink" title="3.1 Update ALL Packages to 2023.09 in 01_git_sync.sh"></a>3.1 Update ALL Packages to 2023.09 in <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/01_git_sync.sh">01_git_sync.sh</a></h2><p>After you checkout <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu">BeagleV-Fire Ubuntu</a>, modify <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/01_git_sync.sh">01_git_sync.sh</a> as:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ git diff 01_git_sync.sh </span><br><span class="line"></span><br><span class="line">diff --git a/01_git_sync.sh b/01_git_sync.sh</span><br><span class="line">index cf3e230..6ab34c1 100755</span><br><span class="line">--- a/01_git_sync.sh</span><br><span class="line">+++ b/01_git_sync.sh</span><br><span class="line">@@ -3,11 +3,11 @@</span><br><span class="line"> GIT_DEPTH=&quot;20&quot;</span><br><span class="line"> GCC_VERSION=&quot;11.4.0&quot;</span><br><span class="line"> </span><br><span class="line">-HSS_BRANCH=&quot;v2023.02&quot;</span><br><span class="line">+HSS_BRANCH=&quot;v2023.09&quot;</span><br><span class="line"> HSS_REPO=&quot;https://github.com/polarfire-soc/hart-software-services.git&quot;</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">UBOOT_BRANCH=<span class="string">&quot;mpfs-uboot-2022.01&quot;</span></span></span><br><span class="line">-UBOOT_BRANCH=&quot;linux4microchip+fpga-2023.02&quot;</span><br><span class="line">+UBOOT_BRANCH=&quot;linux4microchip+fpga-2023.09&quot;</span><br><span class="line"> UBOOT_REPO=&quot;https://github.com/polarfire-soc/u-boot.git&quot;</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">UBOOT_REPO=<span class="string">&quot;https://git.beagleboard.org/beaglev-fire/beaglev-fire-u-boot.git&quot;</span></span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">UBOOT_REPO=<span class="string">&quot;git@git.beagleboard.org:beaglev-fire/beaglev-fire-u-boot.git&quot;</span></span></span><br><span class="line">@@ -16,7 +16,7 @@ DT_BRANCH=&quot;v6.1.x-Beagle&quot;</span><br><span class="line"> DT_REPO=&quot;https://git.beagleboard.org/beagleboard/BeagleBoard-DeviceTrees.git&quot;</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">DT_REPO=<span class="string">&quot;git@git.beagleboard.org:beagleboard/BeagleBoard-DeviceTrees.git&quot;</span></span></span><br><span class="line"> </span><br><span class="line">-LINUX_BRANCH=&quot;linux4microchip+fpga-2023.06&quot;</span><br><span class="line">+LINUX_BRANCH=&quot;linux4microchip+fpga-2023.09&quot;</span><br><span class="line"> LINUX_REPO=&quot;https://github.com/linux4microchip/linux.git&quot;</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">LINUX_REPO=<span class="string">&quot;https://git.beagleboard.org/beaglev-fire/beaglev-fire-linux.git&quot;</span></span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">LINUX_REPO=<span class="string">&quot;git@git.beagleboard.org:beaglev-fire/beaglev-fire-linux.git&quot;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Namely, use <strong>ALL</strong> possible <strong>NEWEST</strong> or <strong>MOST UP-TO-DATE</strong> packages. As you can see, <strong>ALL</strong> branches that I’m using are of <strong>2023.09</strong>.</p>
<h2 id="3-2-Start-Building"><a href="#3-2-Start-Building" class="headerlink" title="3.2 Start Building"></a>3.2 Start Building</h2><h3 id="3-2-1-01-git-sync-sh"><a href="#3-2-1-01-git-sync-sh" class="headerlink" title="3.2.1 01_git_sync.sh"></a>3.2.1 <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/01_git_sync.sh">01_git_sync.sh</a></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./01_git_sync.sh </span><br><span class="line">git clone -b v2023.09 https://github.com/polarfire-soc/hart-software-services.git ./hart-software-services/ --depth=20</span><br><span class="line">Cloning into &#x27;./hart-software-services&#x27;...</span><br><span class="line">remote: Enumerating objects: 1609, done.</span><br><span class="line">remote: Counting objects: 100% (1609/1609), done.</span><br><span class="line">remote: Compressing objects: 100% (1194/1194), done.</span><br><span class="line">remote: Total 1609 (delta 513), reused 1014 (delta 361), pack-reused 0</span><br><span class="line">Receiving objects: 100% (1609/1609), 3.58 MiB | 8.44 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (513/513), done.</span><br><span class="line">Note: switching to &#x27;919a27fa692d356a8fa0d9a6c4b950d04bee41bf&#x27;.</span><br><span class="line"></span><br><span class="line">You are in &#x27;detached HEAD&#x27; state. You can look around, make experimental</span><br><span class="line">changes and commit them, and you can discard any commits you make in this</span><br><span class="line">state without impacting any branches by switching back to a branch.</span><br><span class="line"></span><br><span class="line">If you want to create a new branch to retain commits you create, you may</span><br><span class="line">do so (now or later) by using -c with the switch command. Example:</span><br><span class="line"></span><br><span class="line">  git switch -c &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line">Or undo this operation with:</span><br><span class="line"></span><br><span class="line">  git switch -</span><br><span class="line"></span><br><span class="line">Turn off this advice by setting config variable advice.detachedHead to false</span><br><span class="line"></span><br><span class="line">git clone -b linux4microchip+fpga-2023.09 https://github.com/polarfire-soc/u-boot.git ./u-boot/ --depth=20</span><br><span class="line">Cloning into &#x27;./u-boot&#x27;...</span><br><span class="line">remote: Enumerating objects: 21670, done.</span><br><span class="line">remote: Counting objects: 100% (21670/21670), done.</span><br><span class="line">remote: Compressing objects: 100% (18160/18160), done.</span><br><span class="line">remote: Total 21670 (delta 4173), reused 11080 (delta 3124), pack-reused 0</span><br><span class="line">Receiving objects: 100% (21670/21670), 27.91 MiB | 13.00 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (4173/4173), done.</span><br><span class="line">Note: switching to &#x27;8f5e331e3f09cdf469d528905f5d6a7139016634&#x27;.</span><br><span class="line"></span><br><span class="line">You are in &#x27;detached HEAD&#x27; state. You can look around, make experimental</span><br><span class="line">changes and commit them, and you can discard any commits you make in this</span><br><span class="line">state without impacting any branches by switching back to a branch.</span><br><span class="line"></span><br><span class="line">If you want to create a new branch to retain commits you create, you may</span><br><span class="line">do so (now or later) by using -c with the switch command. Example:</span><br><span class="line"></span><br><span class="line">  git switch -c &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line">Or undo this operation with:</span><br><span class="line"></span><br><span class="line">  git switch -</span><br><span class="line"></span><br><span class="line">Turn off this advice by setting config variable advice.detachedHead to false</span><br><span class="line"></span><br><span class="line">Updating files: 100% (19905/19905), done.</span><br><span class="line">git clone -b v6.1.x-Beagle https://git.beagleboard.org/beagleboard/BeagleBoard-DeviceTrees.git ./device-tree/ --depth=20</span><br><span class="line">Cloning into &#x27;./device-tree&#x27;...</span><br><span class="line">remote: Enumerating objects: 390, done.</span><br><span class="line">remote: Counting objects: 100% (390/390), done.</span><br><span class="line">remote: Compressing objects: 100% (251/251), done.</span><br><span class="line">remote: Total 390 (delta 191), reused 225 (delta 120), pack-reused 0</span><br><span class="line">Receiving objects: 100% (390/390), 368.83 KiB | 6.96 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (191/191), done.</span><br><span class="line">git clone -b linux4microchip+fpga-2023.09 https://github.com/linux4microchip/linux.git ./linux/ --depth=20</span><br><span class="line">Cloning into &#x27;./linux&#x27;...</span><br><span class="line">info: Could not add alternate for &#x27;/home/lvision/linux-src/&#x27;: path &#x27;/home/lvision/linux-src/&#x27; does not exist</span><br><span class="line">remote: Enumerating objects: 94584, done.</span><br><span class="line">remote: Counting objects: 100% (94584/94584), done.</span><br><span class="line">remote: Compressing objects: 100% (84459/84459), done.</span><br><span class="line">remote: Total 94584 (delta 12732), reused 88132 (delta 9251), pack-reused 0</span><br><span class="line">Receiving objects: 100% (94584/94584), 263.65 MiB | 19.75 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (12732/12732), done.</span><br><span class="line">Note: switching to &#x27;25e35c7c54ad853d03c14a02b189b408cb5b5eb3&#x27;.</span><br><span class="line"></span><br><span class="line">You are in &#x27;detached HEAD&#x27; state. You can look around, make experimental</span><br><span class="line">changes and commit them, and you can discard any commits you make in this</span><br><span class="line">state without impacting any branches by switching back to a branch.</span><br><span class="line"></span><br><span class="line">If you want to create a new branch to retain commits you create, you may</span><br><span class="line">do so (now or later) by using -c with the switch command. Example:</span><br><span class="line"></span><br><span class="line">  git switch -c &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line">Or undo this operation with:</span><br><span class="line"></span><br><span class="line">  git switch -</span><br><span class="line"></span><br><span class="line">Turn off this advice by setting config variable advice.detachedHead to false</span><br><span class="line"></span><br><span class="line">Updating files: 100% (78845/78845), done.</span><br></pre></td></tr></table></figure>

<h3 id="3-2-2-02-build-hss-sh"><a href="#3-2-2-02-build-hss-sh" class="headerlink" title="3.2.2 02_build_hss.sh"></a>3.2.2 <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/02_build_hss.sh">02_build_hss.sh</a></h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./02_build_hss.sh </span><br><span class="line">make: Entering directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator&#x27;</span><br><span class="line"> RM      /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/hss-payload-generator /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/main.o /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/yaml_parser.o /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/blob_handler.o /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/elf_parser.o /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/elf_strings.o /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/crc32.o /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/generate_payload.o /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/dump_payload.o /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/debug_printf.o</span><br><span class="line">make: Leaving directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator&#x27;</span><br><span class="line">make -C hart-software-services/tools/hss-payload-generator/</span><br><span class="line">make: Entering directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator&#x27;</span><br><span class="line"> CC        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/main.o</span><br><span class="line"> CC        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/yaml_parser.o</span><br><span class="line"> CC        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/blob_handler.o</span><br><span class="line"> CC        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/elf_parser.o</span><br><span class="line"> CC        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/elf_strings.o</span><br><span class="line"> CC        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/crc32.o</span><br><span class="line"> CC        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/generate_payload.o</span><br><span class="line"> CC        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/dump_payload.o</span><br><span class="line"> CC        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/debug_printf.o</span><br><span class="line"> LD        /home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator/hss-payload-generator</span><br><span class="line">make: Leaving directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/hart-software-services/tools/hss-payload-generator&#x27;</span><br><span class="line">&#x27;./hart-software-services/tools/hss-payload-generator/hss-payload-generator&#x27; -&gt; &#x27;./deploy/hss-payload-generator&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-3-03-build-u-boot-sh"><a href="#3-2-3-03-build-u-boot-sh" class="headerlink" title="3.2.3 03_build_u-boot.sh"></a>3.2.3 <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/03_build_u-boot.sh">03_build_u-boot.sh</a></h3><p><span style="color:red">An issue: </span><a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/issues/4">Error: illegal operands &#96;li t1,(CFG_SYS_INIT_RAM_ADDR+CFG_SYS_INIT_RAM_SIZE-400)’</a></p>
<p><span style="color:red">Solution: </span><br>Modifly line 98 of file <a target="_blank" rel="noopener" href="https://github.com/polarfire-soc/u-boot/blob/linux4microchip%2Bfpga-2023.09/arch/riscv/cpu/start.S">u-boot&#x2F;arch&#x2F;riscv&#x2F;cpu&#x2F;start.s</a> from <code>li	t1, SYS_INIT_SP_ADDR</code> to</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lui t1, %hi(0x80000000)</span><br><span class="line">addi t1, t1, %lo(0x80000000)</span><br></pre></td></tr></table></figure>

<p><span style="color:red">Then, start building: </span></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./03_build_u-boot.sh </span><br><span class="line">make: Entering directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">  CLEAN   dts/../arch/riscv/dts</span><br><span class="line">  CLEAN   dts</span><br><span class="line">  CLEAN   lib/efi_loader</span><br><span class="line">  CLEAN   tools</span><br><span class="line">  CLEAN   tools/lib tools/common</span><br><span class="line">  CLEAN   include/generated/env.in include/generated/env.txt u-boot u-boot.bin u-boot.cfg u-boot.dtb u-boot-dtb.bin u-boot.lds u-boot.map u-boot-nodtb.bin u-boot.srec u-boot.sym System.map defconfig</span><br><span class="line">  CLEAN   scripts/basic</span><br><span class="line">  CLEAN   scripts/dtc</span><br><span class="line">  CLEAN   scripts/kconfig</span><br><span class="line">  CLEAN   include/config include/generated</span><br><span class="line">  CLEAN   .config .config.old include/autoconf.mk include/autoconf.mk.dep include/config.h</span><br><span class="line">make: Leaving directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">&#x27;../patches/u-boot/beaglev-fire/microchip_mpfs_icicle.h&#x27; -&gt; &#x27;include/configs/microchip_mpfs_icicle.h&#x27;</span><br><span class="line">&#x27;../patches/u-boot/beaglev-fire/microchip-mpfs-icicle-kit.dts&#x27; -&gt; &#x27;arch/riscv/dts/microchip-mpfs-icicle-kit.dts&#x27;</span><br><span class="line">&#x27;../patches/u-boot/beaglev-fire/microchip_mpfs_icicle_defconfig&#x27; -&gt; &#x27;configs/microchip_mpfs_icicle_defconfig&#x27;</span><br><span class="line">make: Entering directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">  HOSTCC  scripts/basic/fixdep</span><br><span class="line">  HOSTCC  scripts/kconfig/conf.o</span><br><span class="line">  YACC    scripts/kconfig/zconf.tab.c</span><br><span class="line">  LEX     scripts/kconfig/zconf.lex.c</span><br><span class="line">  HOSTCC  scripts/kconfig/zconf.tab.o</span><br><span class="line">  HOSTLD  scripts/kconfig/conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># configuration written to .config</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">make: Leaving directory <span class="string">&#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span></span></span><br><span class="line">make: Entering directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">scripts/kconfig/conf  --olddefconfig Kconfig</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># configuration written to .config</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">make: Leaving directory <span class="string">&#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span></span></span><br><span class="line">make: Entering directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">scripts/kconfig/conf  --savedefconfig=defconfig Kconfig</span><br><span class="line">make: Leaving directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">&#x27;./u-boot/defconfig&#x27; -&gt; &#x27;./u-boot/configs/microchip_mpfs_icicle_defconfig&#x27;</span><br><span class="line">&#x27;./u-boot/defconfig&#x27; -&gt; &#x27;./patches/u-boot/beaglev-fire/microchip_mpfs_icicle_defconfig&#x27;</span><br><span class="line">make -C u-boot -j48 ARCH=riscv CROSS_COMPILE=riscv64-linux-gnu- all</span><br><span class="line">make: Entering directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">scripts/kconfig/conf  --syncconfig Kconfig</span><br><span class="line">  UPD     include/config.h</span><br><span class="line">  CFG     u-boot.cfg</span><br><span class="line">  GEN     include/autoconf.mk.dep</span><br><span class="line">......</span><br><span class="line">In file included from ././include/linux/kconfig.h:4,</span><br><span class="line">                 from &lt;command-line&gt;:</span><br><span class="line">include/generated/autoconf.h:142: note: this is the location of the previous definition</span><br><span class="line">  142 | #define CONFIG_SYS_BOOTM_LEN 0x800000</span><br><span class="line">      | </span><br><span class="line">  AR      drivers/core/built-in.o</span><br><span class="line">  AR      drivers/mtd/ubi/built-in.o</span><br><span class="line">  AR      lib/zlib/built-in.o</span><br><span class="line">  AR      drivers/mtd/built-in.o</span><br><span class="line">  AR      drivers/built-in.o</span><br><span class="line">  AR      fs/fat/built-in.o</span><br><span class="line">  AR      fs/ubifs/built-in.o</span><br><span class="line">  AR      fs/built-in.o</span><br><span class="line">  AR      lib/built-in.o</span><br><span class="line">  LD      u-boot</span><br><span class="line">  OBJCOPY u-boot.srec</span><br><span class="line">  OBJCOPY u-boot-nodtb.bin</span><br><span class="line">  SYM     u-boot.sym</span><br><span class="line">  DTC     arch/riscv/dts/microchip-mpfs-icicle-kit.dtb</span><br><span class="line">  DTC     arch/riscv/dts/microchip-mpfs-icicle-kit-amp.dtb</span><br><span class="line">  DTC     arch/riscv/dts/microchip-mpfs-icicle-kit-qspi-nor.dtb</span><br><span class="line">  SHIPPED dts/dt.dtb</span><br><span class="line">  CAT     u-boot-dtb.bin</span><br><span class="line">  COPY    u-boot.dtb</span><br><span class="line">  COPY    u-boot.bin</span><br><span class="line">  OFCHK   .config</span><br><span class="line">make: Leaving directory &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/u-boot&#x27;</span><br><span class="line">&#x27;./u-boot/u-boot.bin&#x27; -&gt; &#x27;./deploy/u-boot.bin&#x27;</span><br><span class="line">&#x27;./u-boot/u-boot.bin&#x27; -&gt; &#x27;./deploy/src.bin&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-4-04-build-linux-sh"><a href="#3-2-4-04-build-linux-sh" class="headerlink" title="3.2.4 04_build_linux.sh"></a>3.2.4 <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/04_build_linux.sh">04_build_linux.sh</a></h3><p><span style="color:red">Two issues: </span></p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://forum.beagleboard.org/t/kernel-successfully-built-for-beaglev-fire-but-still-obtain-error-messages/36806/2">cp: cannot stat ‘.&#x2F;arch&#x2F;riscv&#x2F;boot&#x2F;dts&#x2F;microchip&#x2F;mpfs-beaglev-fire.dtb’: No such file or directory</a><br><span style="color:red">Solution: adding <code>dtb-$(CONFIG_SOC_MICROCHIP_POLARFIRE) += mpfs-beaglev-fire.dtb</code> into file <code>/home/lvision/Desktop/BeagleV-Fire-ubuntu/linux/arch/riscv/boot/dts/microchip/Makefile</code>.</span></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/issues/2">No rule to make target ‘firmware&#x2F;regulatory.db’</a><br><span style="color:red">Solution: copy files <code>regulatory.db</code> and <code>regulatory.db.p7s</code> obtained from <a target="_blank" rel="noopener" href="https://git.kernel.org/pub/scm/linux/kernel/git/sforshee/wireless-regdb.git/">https://git.kernel.org/pub/scm/linux/kernel/git/sforshee/wireless-regdb.git/</a> under folder <code>/home/lvision/Desktop/BeagleV-Fire-ubuntu/linux/firmware`` (You may have to create such </code>firmware&#96; folder).</span></p>
</li>
</ul>
<p><span style="color:red">Then, start building: </span></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./04_build_linux.sh </span><br><span class="line">Applying: PCIe: Change controller and bridge base address.</span><br><span class="line">Applying: GPIO: Add Microchip CoreGPIO driver.</span><br><span class="line">Applying: ADC: Add Microchip MCP356X driver.</span><br><span class="line">error: patch failed: drivers/iio/adc/Makefile:68</span><br><span class="line">error: drivers/iio/adc/Makefile: patch does not apply</span><br><span class="line">Patch failed at 0001 ADC: Add Microchip MCP356X driver.</span><br><span class="line">hint: Use &#x27;git am --show-current-patch=diff&#x27; to see the failed patch</span><br><span class="line">When you have resolved this problem, run &quot;git am --continue&quot;.</span><br><span class="line">If you prefer to skip this patch, run &quot;git am --skip&quot; instead.</span><br><span class="line">To restore the original branch and stop patching, run &quot;git am --abort&quot;.</span><br><span class="line">fatal: previous rebase directory .git/rebase-apply still exists but mbox given.</span><br><span class="line">fatal: previous rebase directory .git/rebase-apply still exists but mbox given.</span><br><span class="line">fatal: previous rebase directory .git/rebase-apply still exists but mbox given.</span><br><span class="line">fatal: previous rebase directory .git/rebase-apply still exists but mbox given.</span><br><span class="line">fatal: previous rebase directory .git/rebase-apply still exists but mbox given.</span><br><span class="line">&#x27;../device-tree/src/microchip/mpfs-beaglev-fire.dts&#x27; -&gt; &#x27;arch/riscv/boot/dts/microchip/mpfs-beaglev-fire.dts&#x27;</span><br><span class="line">&#x27;../device-tree/src/microchip/mpfs-beaglev-fire-fabric.dtsi&#x27; -&gt; &#x27;arch/riscv/boot/dts/microchip/mpfs-beaglev-fire-fabric.dtsi&#x27;</span><br><span class="line">make ARCH=riscv CROSS_COMPILE=riscv64-linux-gnu- clean</span><br><span class="line">&#x27;../patches/linux/mpfs_defconfig&#x27; -&gt; &#x27;./arch/riscv/configs/mpfs_defconfig&#x27;</span><br><span class="line">make ARCH=riscv CROSS_COMPILE=riscv64-linux-gnu- mpfs_defconfig</span><br><span class="line">  HOSTCC  scripts/basic/fixdep</span><br><span class="line">  HOSTCC  scripts/kconfig/conf.o</span><br><span class="line">  HOSTCC  scripts/kconfig/confdata.o</span><br><span class="line">  HOSTCC  scripts/kconfig/expr.o</span><br><span class="line">  LEX     scripts/kconfig/lexer.lex.c</span><br><span class="line">  YACC    scripts/kconfig/parser.tab.[ch]</span><br><span class="line">  HOSTCC  scripts/kconfig/lexer.lex.o</span><br><span class="line">  HOSTCC  scripts/kconfig/menu.o</span><br><span class="line">  HOSTCC  scripts/kconfig/parser.tab.o</span><br><span class="line">  HOSTCC  scripts/kconfig/preprocess.o</span><br><span class="line">  HOSTCC  scripts/kconfig/symbol.o</span><br><span class="line">  HOSTCC  scripts/kconfig/util.o</span><br><span class="line">  HOSTLD  scripts/kconfig/conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># configuration written to .config</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">make -j48 ARCH=riscv CROSS_COMPILE=riscv64-linux-gnu- olddefconfig</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># No change to .config</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">make -j48 ARCH=riscv CROSS_COMPILE=riscv64-linux-gnu- Image modules dtbs</span></span><br><span class="line">  SYNC    include/config/auto.conf.cmd</span><br><span class="line">  WRAP    arch/riscv/include/generated/uapi/asm/errno.h</span><br><span class="line">  WRAP    arch/riscv/include/generated/uapi/asm/fcntl.h</span><br><span class="line">  WRAP    arch/riscv/include/generated/uapi/asm/ioctls.h</span><br><span class="line">  WRAP    arch/riscv/include/generated/uapi/asm/ioctl.h</span><br><span class="line">  WRAP    arch/riscv/include/generated/uapi/asm/ipcbuf.h</span><br><span class="line">  WRAP    arch/riscv/include/generated/uapi/asm/msgbuf.h</span><br><span class="line">  WRAP    arch/riscv/include/generated/uapi/asm/mman.h</span><br><span class="line">......</span><br><span class="line">  LD [M]  net/unix/unix_diag.ko</span><br><span class="line">  LD [M]  net/vmw_vsock/vmw_vsock_virtio_transport.ko</span><br><span class="line">  LD [M]  net/vmw_vsock/vsock.ko</span><br><span class="line">  LD [M]  net/vmw_vsock/vmw_vsock_virtio_transport_common.ko</span><br><span class="line">  LD [M]  net/vmw_vsock/vsock_diag.ko</span><br><span class="line">  LD [M]  net/vmw_vsock/vsock_loopback.ko</span><br><span class="line">  LD [M]  net/wireless/cfg80211.ko</span><br><span class="line">  LD [M]  net/wireless/lib80211.ko</span><br><span class="line">  LD [M]  net/wireless/lib80211_crypt_ccmp.ko</span><br><span class="line">  LD [M]  net/wireless/lib80211_crypt_tkip.ko</span><br><span class="line">  LD [M]  net/wireless/lib80211_crypt_wep.ko</span><br><span class="line">  LD [M]  net/xdp/xsk_diag.ko</span><br><span class="line">  LD [M]  net/xfrm/xfrm_algo.ko</span><br><span class="line">  LD [M]  net/xfrm/xfrm_interface.ko</span><br><span class="line">  LD [M]  net/xfrm/xfrm_ipcomp.ko</span><br><span class="line">  LD [M]  net/xfrm/xfrm_user.ko</span><br><span class="line">  NM      .tmp_vmlinux.kallsyms2.syms</span><br><span class="line">  KSYMS   .tmp_vmlinux.kallsyms2.S</span><br><span class="line">  AS      .tmp_vmlinux.kallsyms2.S</span><br><span class="line">  LD      vmlinux</span><br><span class="line">  NM      System.map</span><br><span class="line">  SORTTAB vmlinux</span><br><span class="line">  OBJCOPY arch/riscv/boot/Image</span><br><span class="line">  Kernel: arch/riscv/boot/Image is ready</span><br><span class="line">Compressing 6.1.43-linux4microchip+fpga-2023.09-20231219+-modules.tar.gz...</span><br><span class="line">&#x27;./.config&#x27; -&gt; &#x27;../patches/linux/mpfs_defconfig&#x27;</span><br><span class="line">&#x27;./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire.dts&#x27; -&gt; &#x27;../patches/linux/dts/mpfs-beaglev-fire.dts&#x27;</span><br><span class="line">&#x27;./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire-fabric.dtsi&#x27; -&gt; &#x27;../patches/linux/dts/mpfs-beaglev-fire-fabric.dtsi&#x27;</span><br><span class="line">&#x27;./arch/riscv/boot/Image&#x27; -&gt; &#x27;../deploy/input/Image&#x27;</span><br><span class="line">&#x27;./arch/riscv/boot/dts/microchip/mpfs-beaglev-fire.dtb&#x27; -&gt; &#x27;../deploy/input/mpfs-beaglev-fire.dtb&#x27;</span><br><span class="line">&#x27;./patches/linux/beaglev_fire.its&#x27; -&gt; &#x27;./deploy/input/beaglev_fire.its&#x27;</span><br><span class="line">FIT description: U-Boot fitImage for the BeagleV-Fire</span><br><span class="line">Created:         Tue Dec 19 12:58:17 2023</span><br><span class="line"> Image 0 (kernel)</span><br><span class="line">  Description:  Linux kernel</span><br><span class="line">  Created:      Tue Dec 19 12:58:17 2023</span><br><span class="line">  Type:         Kernel Image</span><br><span class="line">  Compression:  gzip compressed</span><br><span class="line">  Data Size:    8622322 Bytes = 8420.24 KiB = 8.22 MiB</span><br><span class="line">  Architecture: RISC-V</span><br><span class="line">  OS:           Linux</span><br><span class="line">  Load Address: 0x80200000</span><br><span class="line">  Entry Point:  0x80200000</span><br><span class="line">  Hash algo:    sha256</span><br><span class="line">  Hash value:   82f0ce932fe469cd5ea7aa4d3230f49560ed490d92ad2e9e555a488b10ae3dae</span><br><span class="line"> Image 1 (base_fdt)</span><br><span class="line">  Description:  Flattened Device Tree blob</span><br><span class="line">  Created:      Tue Dec 19 12:58:17 2023</span><br><span class="line">  Type:         Flat Device Tree</span><br><span class="line">  Compression:  uncompressed</span><br><span class="line">  Data Size:    20670 Bytes = 20.19 KiB = 0.02 MiB</span><br><span class="line">  Architecture: RISC-V</span><br><span class="line">  Load Address: 0x8a000000</span><br><span class="line">  Hash algo:    sha256</span><br><span class="line">  Hash value:   b8fcfe485d229df53d3f68d5db0372237c8754bc1e96822c4527362ce076d537</span><br><span class="line"> Default Configuration: &#x27;kernel_dtb&#x27;</span><br><span class="line"> Configuration 0 (kernel_dtb)</span><br><span class="line">  Description:  1 Linux kernel, FDT blob</span><br><span class="line">  Kernel:       kernel</span><br><span class="line">  FDT:          base_fdt</span><br><span class="line"> Configuration 1 (base_dtb)</span><br><span class="line">  Description:  Base FDT blob for BeagleV-Fire board</span><br><span class="line">  Kernel:       unavailable</span><br><span class="line">  FDT:          base_fdt</span><br></pre></td></tr></table></figure>


<h3 id="3-2-5-05-generate-payload-bin"><a href="#3-2-5-05-generate-payload-bin" class="headerlink" title="3.2.5 05_generate_payload.bin"></a>3.2.5 <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/05_generate_payload.bin">05_generate_payload.bin</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ./05_generate_payload.bin.sh </span><br><span class="line">Hart Software Service formatted boot image generator v0.99.37</span><br><span class="line">Copyright (c) 2021-2022 Microchip FPGA Embedded Systems Solutions.</span><br><span class="line"></span><br><span class="line">Parsing set-name</span><br><span class="line">Parsing hart entry points</span><br><span class="line">	Entry Point U54_1 is 0x80200000</span><br><span class="line">	Entry Point U54_2 is 0x80200000</span><br><span class="line">	Entry Point U54_3 is 0x80200000</span><br><span class="line">	Entry Point U54_4 is 0x80200000</span><br><span class="line">Parsing payload &gt;&gt;src.bin&lt;&lt;</span><br><span class="line">	exec_addr is 0x80200000</span><br><span class="line">	owner is 1</span><br><span class="line">	secondary is 2</span><br><span class="line">	secondary is 3</span><br><span class="line">	secondary is 4</span><br><span class="line">	priv_mode is 1</span><br><span class="line"></span><br><span class="line">Processing ELF &gt;&gt;src.bin&lt;&lt;</span><br><span class="line">&gt;&gt;src.bin&lt;&lt; is not an ELF object</span><br><span class="line"></span><br><span class="line">Processing blob &gt;&gt;src.bin&lt;&lt; - placing at 0x80200000</span><br><span class="line">lastChunk is 0, numChunks is 1</span><br><span class="line">Set-name is &gt;&gt;PolarFire-SoC-HSS::U-Boot&lt;&lt;</span><br><span class="line">Output filename is &gt;&gt;./input/payload.bin&lt;&lt;</span><br><span class="line">Outputting Payload Header</span><br><span class="line">Outputting Code/Data Chunks</span><br><span class="line">Outputting ZI Chunks</span><br><span class="line">Outputting Binary Data</span><br><span class="line">Outputting Payload Header</span><br><span class="line">Tue 19 Dec 2023 12:58:45 PM PST</span><br><span class="line">[u-boot.bin: U-Boot 2023.07.02-linux4microchip+fpga-2023.09-dirty (Dec 19 2023 - 12:53:03 -0800)]</span><br><span class="line">[src.bin:    U-Boot 2023.07.02-linux4microchip+fpga-2023.09-dirty (Dec 19 2023 - 12:53:03 -0800)]</span><br><span class="line">[payload.bin:U-Boot 2023.07.02-linux4microchip+fpga-2023.09-dirty (Dec 19 2023 - 12:53:03 -0800)]</span><br></pre></td></tr></table></figure>

<h3 id="3-2-6-06-generate-debian-console-root-sh"><a href="#3-2-6-06-generate-debian-console-root-sh" class="headerlink" title="3.2.6 06_generate_debian_console_root.sh"></a>3.2.6 <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/06_generate_debian_console_root.sh">06_generate_debian_console_root.sh</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ sudo ./06_generate_debian_console_root.sh</span><br><span class="line">--2023-12-19 12:59:30--  https://rcn-ee.net/rootfs/debian-riscv64-sid-minimal/2023-12-19/debian-sid-console-riscv64-2023-12-19.tar.xz</span><br><span class="line">Resolving rcn-ee.net (rcn-ee.net)... 2606:4700:3037::ac43:8616, 2606:4700:3037::6815:5fb, 172.67.134.22, ...</span><br><span class="line">Connecting to rcn-ee.net (rcn-ee.net)|2606:4700:3037::ac43:8616|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 397978580 (380M) [application/x-xz]</span><br><span class="line">Saving to: ‘./deploy/debian-sid-console-riscv64-2023-12-19.tar.xz’</span><br><span class="line"></span><br><span class="line">debian-sid-console-riscv64-2023-12-19.tar.xz                          100%[======================================================================================================================================================================&gt;] 379.54M  86.4MB/s    in 4.7s    </span><br><span class="line"></span><br><span class="line">2023-12-19 12:59:35 (80.9 MB/s) - ‘./deploy/debian-sid-console-riscv64-2023-12-19.tar.xz’ saved [397978580/397978580]</span><br><span class="line"></span><br><span class="line">Extracting: debian-sid-console-riscv64-2023-12-19/riscv64-rootfs-*.tar</span><br><span class="line">&#x27;./deploy/boot.scr&#x27; -&gt; &#x27;deploy/input/boot.scr&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/eth0-DHCP.network&#x27; -&gt; &#x27;./ignore/.root/etc/systemd/network/eth0.network&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/eth1-DHCP.network&#x27; -&gt; &#x27;./ignore/.root/etc/systemd/network/eth1.network&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/nginx/nginx-autoindex&#x27; -&gt; &#x27;./ignore/.root/etc/nginx/sites-enabled/default&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/nginx/Cockpit.html&#x27; -&gt; &#x27;./ignore/.root/var/www/html/Cockpit.html&#x27;</span><br><span class="line">&#x27;./ignore/.root/etc/bbb.io/templates/nginx/Docs-BeagleBoard.html&#x27; -&gt; &#x27;./ignore/.root/var/www/html/Docs-BeagleBoard.html&#x27;</span><br><span class="line">---------------------</span><br><span class="line">File Size</span><br><span class="line">1.4G	ignore/.root/</span><br><span class="line">---------------------</span><br><span class="line">0+0 records in</span><br><span class="line">0+0 records out</span><br><span class="line">0 bytes copied, 0.000160765 s, 0.0 kB/s</span><br><span class="line">mke2fs 1.46.5 (30-Dec-2021)</span><br><span class="line">Discarding device blocks: done                            </span><br><span class="line">Creating filesystem with 563200 4k blocks and 140832 inodes</span><br><span class="line">Filesystem UUID: 99243c2d-5c98-489f-a06f-719f691c31f1</span><br><span class="line">Superblock backups stored on blocks: </span><br><span class="line">	32768, 98304, 163840, 229376, 294912</span><br><span class="line"></span><br><span class="line">Allocating group tables: done                            </span><br><span class="line">Writing inode tables: done                            </span><br><span class="line">Creating journal (16384 blocks): done</span><br><span class="line">Copying files into the device: done</span><br><span class="line">Writing superblocks and filesystem accounting information: done  </span><br></pre></td></tr></table></figure>

<h3 id="3-2-7-07-create-sdcard-img-sh"><a href="#3-2-7-07-create-sdcard-img-sh" class="headerlink" title="3.2.7 07_create_sdcard_img.sh"></a>3.2.7 <a target="_blank" rel="noopener" href="https://git.beagleboard.org/beaglev-fire/BeagleV-Fire-ubuntu/-/blob/main/07_create_sdcard_img.sh">07_create_sdcard_img.sh</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ sudo ./07_create_sdcard_img.sh </span><br><span class="line">INFO: cmd: &quot;mkdir -p &quot;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/tmp&quot;&quot; (stderr):</span><br><span class="line">INFO: cmd: &quot;rm -rf &quot;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/tmp&quot;/*&quot; (stderr):</span><br><span class="line">INFO: cmd: &quot;mkdir -p &quot;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/tmp&quot;&quot; (stderr):</span><br><span class="line">INFO: cmd: &quot;cp -a &quot;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/root&quot; &quot;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/tmp/root&quot;&quot; (stderr):</span><br><span class="line">INFO: hdimage(sdcard.img): The option &#x27;gpt&#x27; is deprecated. Use &#x27;partition-table-type&#x27; instead</span><br><span class="line">INFO: cmd: &quot;mkdir -p &quot;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/images&quot;&quot; (stderr):</span><br><span class="line">INFO: vfat(boot.vfat): cmd: &quot;mkdosfs   &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/images/boot.vfat&#x27;&quot; (stderr):</span><br><span class="line">INFO: vfat(boot.vfat): adding file &#x27;beaglev_fire.itb&#x27; as &#x27;beaglev_fire.itb&#x27; ...</span><br><span class="line">INFO: vfat(boot.vfat): cmd: &quot;MTOOLS_SKIP_CHECK=1 mcopy -sp -i &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/images/boot.vfat&#x27; &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/input/beaglev_fire.itb&#x27; &#x27;::&#x27;&quot; (stderr):</span><br><span class="line">INFO: vfat(boot.vfat): adding file &#x27;boot.scr&#x27; as &#x27;boot.scr&#x27; ...</span><br><span class="line">INFO: vfat(boot.vfat): cmd: &quot;MTOOLS_SKIP_CHECK=1 mcopy -sp -i &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/images/boot.vfat&#x27; &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/input/boot.scr&#x27; &#x27;::&#x27;&quot; (stderr):</span><br><span class="line">INFO: vfat(boot.vfat): adding file &#x27;mpfs-beaglev-fire.dtb&#x27; as &#x27;mpfs-beaglev-fire.dtb&#x27; ...</span><br><span class="line">INFO: vfat(boot.vfat): cmd: &quot;MTOOLS_SKIP_CHECK=1 mcopy -sp -i &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/images/boot.vfat&#x27; &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/input/mpfs-beaglev-fire.dtb&#x27; &#x27;::&#x27;&quot; (stderr):</span><br><span class="line">INFO: vfat(boot.vfat): adding file &#x27;Image&#x27; as &#x27;Image&#x27; ...</span><br><span class="line">INFO: vfat(boot.vfat): cmd: &quot;MTOOLS_SKIP_CHECK=1 mcopy -sp -i &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/images/boot.vfat&#x27; &#x27;/home/lvision/Desktop/BeagleV-Fire-ubuntu/deploy/input/Image&#x27; &#x27;::&#x27;&quot; (stderr):</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;uboot&#x27; (in MBR) from &#x27;payload.bin&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;kernel&#x27; (in MBR) from &#x27;boot.vfat&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;root&#x27; (in MBR) from &#x27;root.ext4&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;[MBR]&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;[GPT header]&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;[GPT array]&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): adding partition &#x27;[GPT backup]&#x27; ...</span><br><span class="line">INFO: hdimage(sdcard.img): writing GPT</span><br><span class="line">INFO: hdimage(sdcard.img): writing protective MBR</span><br><span class="line">INFO: hdimage(sdcard.img): writing MBR</span><br><span class="line">bmaptool: debug: opened image &quot;./images/sdcard.img&quot;</span><br><span class="line">bmaptool: debug: block size 4096, blocks count 578750, image size 2370560000</span><br><span class="line">bmaptool: debug: FilemapFiemap: initializing</span><br><span class="line">bmaptool: debug: FilemapFiemap: block_is_mapped(0) returns True</span><br><span class="line">bmaptool: debug: FilemapFiemap: get_mapped_ranges(0,  578750(578749))</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (0, 8521)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (15545, 15833)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (15837, 15843)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (15853, 18412)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (23677, 48315)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (48589, 113851)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (114125, 179387)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (179661, 244923)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (245197, 310459)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (310733, 390634)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (539833, 539835)</span><br><span class="line">bmaptool: debug: FilemapFiemap: yielding range (578729, 578749)</span><br></pre></td></tr></table></figure>

<h3 id="3-2-8-Flash-SD-Card"><a href="#3-2-8-Flash-SD-Card" class="headerlink" title="3.2.8 Flash SD Card"></a>3.2.8 Flash SD Card</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  BeagleV-Fire-ubuntu git:(main) ✗ ll deploy/images </span><br><span class="line">total 1.5G</span><br><span class="line">-rw-r--r-- 1 root root  60M Dec 15 05:14 boot.vfat</span><br><span class="line">-rw-r--r-- 1 root root 3.5K Dec 15 05:14 sdcard.bmap</span><br><span class="line">-rw-r--r-- 1 root root 2.3G Dec 15 05:14 sdcard.img</span><br></pre></td></tr></table></figure>

<h1 id="4-Demonstration"><a href="#4-Demonstration" class="headerlink" title="4. Demonstration"></a>4. Demonstration</h1><h2 id="4-1-Initial-Look"><a href="#4-1-Initial-Look" class="headerlink" title="4.1 Initial Look"></a>4.1 Initial Look</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ssh beagle@192.168.1.17</span><br><span class="line">Ubuntu 23.04</span><br><span class="line"></span><br><span class="line">BeagleBoard.org Ubuntu 23.04 Console Image 2023-10-19</span><br><span class="line">Support: https://bbb.io/debian</span><br><span class="line">default username:password is [beagle:temppwd]</span><br><span class="line"></span><br><span class="line">beagle@192.168.1.17&#x27;s password: </span><br><span class="line">Last login: Fri Dec 15 12:12:31 2023 from 192.168.1.1</span><br><span class="line">beagle@BeagleV:~$ uname -a</span><br><span class="line">Linux BeagleV 6.1.33-linux4microchip+fpga-2023.06-20231019+ #1 SMP Thu Oct 19 16:01:29 UTC 2023 riscv64 riscv64 riscv64 GNU/Linux</span><br><span class="line">beagle@BeagleV:~$ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:	Ubuntu</span><br><span class="line">Description:	Ubuntu 23.04</span><br><span class="line">Release:	23.04</span><br><span class="line">Codename:	lunar</span><br><span class="line">➜  ~ df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/root        15G  4.0G  9.7G  30% /</span><br><span class="line">tmpfs           771M     0  771M   0% /dev/shm</span><br><span class="line">tmpfs           309M  1.6M  307M   1% /run</span><br><span class="line">tmpfs           5.0M     0  5.0M   0% /run/lock</span><br><span class="line">/dev/mmcblk0p2   60M   33M   28M  55% /boot/firmware</span><br><span class="line">tmpfs           155M     0  155M   0% /run/user/1000</span><br></pre></td></tr></table></figure>

<h2 id="4-2-After-Update-Upgrade-and-Installed-Neofetch"><a href="#4-2-After-Update-Upgrade-and-Installed-Neofetch" class="headerlink" title="4.2 After Update-Upgrade and Installed Neofetch"></a>4.2 After Update-Upgrade and Installed Neofetch</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ neofetch</span><br><span class="line">            .-/+oossssoo+/-.               beagle@BeagleV </span><br><span class="line">        `:+ssssssssssssssssss+:`           -------------- </span><br><span class="line">      -+ssssssssssssssssssyyssss+-         OS: Ubuntu 23.04 riscv64 </span><br><span class="line">    .ossssssssssssssssssdMMMNysssso.       Host: BeagleBoard BeagleV-Fire </span><br><span class="line">   /ssssssssssshdmmNNmmyNMMMMhssssss/      Kernel: 6.1.33-linux4microchip+fpga-2023.06-20231019+ </span><br><span class="line">  +ssssssssshmydMMMMMMMNddddyssssssss+     Uptime: 4 hours, 58 mins </span><br><span class="line"> /sssssssshNMMMyhhyyyyhmNMMMNhssssssss/    Packages: 898 (dpkg) </span><br><span class="line">.ssssssssdMMMNhsssssssssshNMMMdssssssss.   Shell: zsh 5.9 </span><br><span class="line">+sssshhhyNMMNyssssssssssssyNMMMysssssss+   Terminal: /dev/pts/0 </span><br><span class="line">ossyNMMMNyMMhsssssssssssssshmmmhssssssso   CPU: (4) </span><br><span class="line">ossyNMMMNyMMhsssssssssssssshmmmhssssssso   Memory: 137MiB / 1541MiB </span><br><span class="line">+sssshhhyNMMNyssssssssssssyNMMMysssssss+</span><br><span class="line">.ssssssssdMMMNhsssssssssshNMMMdssssssss.                           </span><br><span class="line"> /sssssssshNMMMyhhyyyyhdNMMMNhssssssss/                            </span><br><span class="line">  +sssssssssdmydMMMMMMMMddddyssssssss+</span><br><span class="line">   /ssssssssssshdmNNNNmyNMMMMhssssss/</span><br><span class="line">    .ossssssssssssssssssdMMMNysssso.</span><br><span class="line">      -+sssssssssssssssssyyyssss+-</span><br><span class="line">        `:+ssssssssssssssssss+:`</span><br><span class="line">            .-/+oossssoo+/-.</span><br><span class="line"></span><br><span class="line">➜  ~ </span><br></pre></td></tr></table></figure>

<h2 id="4-3-Weird"><a href="#4-3-Weird" class="headerlink" title="4.3 Weird"></a>4.3 Weird</h2><p><strong><span style="color:red">Did you find what’s weird?</span></strong></p>
<ul>
<li>In the above subsection <a href="#326-06_generate_debian_console_rootsh">3.2.6</a>, I clearly used <strong>debian rootfs</strong>. However, my <a target="_blank" rel="noopener" href="https://www.beagleboard.org/boards/beaglev-fire">BeagleV-Fire Board</a> is now running <strong>Ubuntu 23.04</strong>?????</li>
<li>I am using a SD card of size <strong>32G</strong>, why this one is detected as <strong>16G ONLY</strong>?????</li>
</ul>
<p>Some more investigation clearly shows that I do have 2 block devices:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsblk</span><br><span class="line">NAME         MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS</span><br><span class="line">mmcblk1      179:0    0  28.9G  0 disk </span><br><span class="line">├─mmcblk1p1  179:1    0 722.5K  0 part </span><br><span class="line">├─mmcblk1p2  179:2    0    60M  0 part </span><br><span class="line">└─mmcblk1p3  179:3    0  28.9G  0 part </span><br><span class="line">mmcblk0      179:8    0  14.6G  0 disk </span><br><span class="line">├─mmcblk0p1  179:9    0   684K  0 part </span><br><span class="line">├─mmcblk0p2  179:10   0    60M  0 part /boot/firmware</span><br><span class="line">└─mmcblk0p3  179:11   0  14.5G  0 part /</span><br><span class="line">mmcblk0boot0 179:16   0     4M  1 disk </span><br><span class="line">mmcblk0boot1 179:24   0     4M  1 disk </span><br></pre></td></tr></table></figure>

<ul>
<li><strong>mmcblk1</strong> is the SD card of size <strong>32G</strong></li>
<li><strong>mmcblk0</strong> is the on-board <strong>eMMC</strong> of size <strong>16G</strong></li>
</ul>
<p><strong><span style="color:red">Solution: refer to <a target="_blank" rel="noopener" href="https://docs.beagleboard.org/latest/boards/beaglev/fire/demos-and-tutorials/flashing-board.html">Beagleboard Official Documentation Flashing Board</a></span></strong></p>
<h2 id="4-4-Finally"><a href="#4-4-Finally" class="headerlink" title="4.4 Finally"></a>4.4 Finally</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">beagle@BeagleV:~$ cat /proc/cpuinfo</span><br><span class="line">processor	: 0</span><br><span class="line">hart		: 1</span><br><span class="line">isa		: rv64imafdc</span><br><span class="line">mmu		: sv39</span><br><span class="line">uarch		: sifive,u54-mc</span><br><span class="line">mvendorid	: 0x1cf</span><br><span class="line">marchid		: 0x1</span><br><span class="line">mimpid		: 0x0</span><br><span class="line"></span><br><span class="line">processor	: 1</span><br><span class="line">hart		: 2</span><br><span class="line">isa		: rv64imafdc</span><br><span class="line">mmu		: sv39</span><br><span class="line">uarch		: sifive,u54-mc</span><br><span class="line">mvendorid	: 0x1cf</span><br><span class="line">marchid		: 0x1</span><br><span class="line">mimpid		: 0x0</span><br><span class="line"></span><br><span class="line">processor	: 2</span><br><span class="line">hart		: 3</span><br><span class="line">isa		: rv64imafdc</span><br><span class="line">mmu		: sv39</span><br><span class="line">uarch		: sifive,u54-mc</span><br><span class="line">mvendorid	: 0x1cf</span><br><span class="line">marchid		: 0x1</span><br><span class="line">mimpid		: 0x0</span><br><span class="line"></span><br><span class="line">processor	: 3</span><br><span class="line">hart		: 4</span><br><span class="line">isa		: rv64imafdc</span><br><span class="line">mmu		: sv39</span><br><span class="line">uarch		: sifive,u54-mc</span><br><span class="line">mvendorid	: 0x1cf</span><br><span class="line">marchid		: 0x1</span><br><span class="line">mimpid		: 0x0</span><br><span class="line"></span><br><span class="line">beagle@BeagleV:~$ cat /proc/meminfo</span><br><span class="line">MemTotal:        1578744 kB</span><br><span class="line">MemFree:         1246916 kB</span><br><span class="line">MemAvailable:    1433180 kB</span><br><span class="line">Buffers:           12136 kB</span><br><span class="line">Cached:           181060 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:            46052 kB</span><br><span class="line">Inactive:         210292 kB</span><br><span class="line">Active(anon):       1460 kB</span><br><span class="line">Inactive(anon):    63260 kB</span><br><span class="line">Active(file):      44592 kB</span><br><span class="line">Inactive(file):   147032 kB</span><br><span class="line">Unevictable:           0 kB</span><br><span class="line">Mlocked:               0 kB</span><br><span class="line">SwapTotal:             0 kB</span><br><span class="line">SwapFree:              0 kB</span><br><span class="line">Zswap:                 0 kB</span><br><span class="line">Zswapped:              0 kB</span><br><span class="line">Dirty:                20 kB</span><br><span class="line">Writeback:             0 kB</span><br><span class="line">AnonPages:         63172 kB</span><br><span class="line">Mapped:            99268 kB</span><br><span class="line">Shmem:              1572 kB</span><br><span class="line">KReclaimable:      21992 kB</span><br><span class="line">Slab:              50108 kB</span><br><span class="line">SReclaimable:      21992 kB</span><br><span class="line">SUnreclaim:        28116 kB</span><br><span class="line">KernelStack:        2160 kB</span><br><span class="line">PageTables:         1892 kB</span><br><span class="line">SecPageTables:         0 kB</span><br><span class="line">NFS_Unstable:          0 kB</span><br><span class="line">Bounce:                0 kB</span><br><span class="line">WritebackTmp:          0 kB</span><br><span class="line">CommitLimit:      789372 kB</span><br><span class="line">Committed_AS:     424384 kB</span><br><span class="line">VmallocTotal:   67108864 kB</span><br><span class="line">VmallocUsed:        7684 kB</span><br><span class="line">VmallocChunk:          0 kB</span><br><span class="line">Percpu:             1152 kB</span><br><span class="line">HugePages_Total:       0</span><br><span class="line">HugePages_Free:        0</span><br><span class="line">HugePages_Rsvd:        0</span><br><span class="line">HugePages_Surp:        0</span><br><span class="line">Hugepagesize:       2048 kB</span><br><span class="line">Hugetlb:               0 kB</span><br></pre></td></tr></table></figure>

<p>Clearly, this <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Single-board_computer">Single-board computer</a> is using <a target="_blank" rel="noopener" href="https://www.sifive.com/risc-v-core-ip">SiFive Cores</a>. That is <strong>ALL</strong> for today. Temoparily. See you next time.</p>
<h2 id="4-5-Further-Demonstration"><a href="#4-5-Further-Demonstration" class="headerlink" title="4.5 Further Demonstration"></a>4.5 Further Demonstration</h2><ul>
<li><a target="_blank" rel="noopener" href="https://forum.beagleboard.org/t/beaglev-fire-microsd/36845">BeagleV-Fire microSD</a></li>
<li><a target="_blank" rel="noopener" href="https://forum.beagleboard.org/t/do-we-still-need-those-3-patches-for-u-boot-linux4microchip-fpga-2023-09-in-03-build-u-boot-sh/36866">Do we still need those 3 patches for u-boot linux4microchip+fpga-2023.09 in 03_build_u-boot.sh?</a></li>
</ul>
<p>This is truly a provisional milestone:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">[  OK  ] Finished systemd-user-sessions.service - Permit User Sessions.</span><br><span class="line">[   24.197143] imx219 1-0010: failed to read chip id 219</span><br><span class="line">[   24.202314] imx219: probe of 1-0010 failed with error -5</span><br><span class="line">[   24.667023] usb0: HOST MAC 00:04:a3:d5:1a:45</span><br><span class="line">[   24.671376] usb0: MAC 00:04:a3:d5:1a:46</span><br><span class="line">[   24.680189] configfs-gadget.g_multi gadget.0: unable to autoconfigure all endpoints</span><br><span class="line">[   24.693802] udc musb-hdrc.1.auto: failed to start g_multi: -524</span><br><span class="line">[   24.699874] configfs-gadget.g_multi: probe of gadget.0 failed with error -524</span><br><span class="line">[   24.707368] UDC core: g_multi: couldn&#x27;t find an available UDC or it&#x27;s busy</span><br><span class="line">[FAILED] Failed to start bb-usb-gadgets.service - BeagleBoard.org USB gadgets.</span><br><span class="line">See &#x27;systemctl status bb-usb-gadgets.service&#x27; for details.</span><br><span class="line">[  OK  ] Finished cockpit-motd.service - Cockpit motd updater service.</span><br><span class="line">[  OK  ] Started nginx.service - A high per… server and a reverse proxy server.</span><br><span class="line">[  OK  ] Started getty@tty1.service - Getty on tty1.</span><br><span class="line">[  OK  ] Started serial-getty@ttyGS0.service - Serial Getty on ttyGS0.</span><br><span class="line">[  OK  ] Started serial-getty@ttyS0.service - Serial Getty on ttyS0.</span><br><span class="line">[  OK  ] Reached target getty.target - Login Prompts.</span><br><span class="line">[  OK  ] Finished grow_partition.service - Grow Root Partition.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux trixie/sid BeagleV ttyS0</span><br><span class="line"></span><br><span class="line">BeagleBoard.org Debian Sid Console Image 2023-12-19</span><br><span class="line">Support: https://bbb.io/debian</span><br><span class="line">default username:password is [debian:temppwd]</span><br><span class="line"></span><br><span class="line">Web console: https://BeagleV.localdomain:9090/</span><br><span class="line"></span><br><span class="line">BeagleV login: debian</span><br><span class="line">Password: </span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms for each program are described in the</span><br><span class="line">individual files in /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">debian@BeagleV:~$ neofetch</span><br><span class="line">Command &#x27;neofetch&#x27; not found, but can be installed with:</span><br><span class="line">sudo apt install neofetch</span><br><span class="line">debian@BeagleV:~$ sudo apt install neofetch</span><br><span class="line">[sudo] password for debian: </span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree... Done</span><br><span class="line">Reading state information... Done</span><br><span class="line">E: Unable to locate package neofetch</span><br><span class="line">debian@BeagleV:~$ uname -a</span><br><span class="line">Linux BeagleV 6.1.43-linux4microchip+fpga-2023.09-20231219+ #1 SMP Tue Dec 19 12:57:20 PST 2023 riscv64 GNU/Linux</span><br><span class="line">debian@BeagleV:~$ </span><br></pre></td></tr></table></figure>

<p>Now, plug in Wired connection,</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ssh debian@192.168.1.17                                         </span><br><span class="line">The authenticity of host &#x27;192.168.1.17 (192.168.1.17)&#x27; can&#x27;t be established.</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">BeagleBoard.org Debian Sid Console Image 2023-12-19</span><br><span class="line">Support: https://bbb.io/debian</span><br><span class="line">default username:password is [debian:temppwd]</span><br><span class="line"></span><br><span class="line">debian@192.168.1.17&#x27;s password: </span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms for each program are described in the</span><br><span class="line">individual files in /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Tue Dec 19 08:27:24 2023</span><br><span class="line">debian@BeagleV:~$ sudo apt update</span><br><span class="line">[sudo] password for debian: </span><br><span class="line">Get:1 http://deb.debian.org/debian sid InRelease [198 kB]</span><br><span class="line">Get:3 http://repos.rcn-ee.com/debian-riscv64 sid InRelease [3083 B]                                                                    </span><br><span class="line">Get:2 https://debian.beagle.cc/riscv64 sid InRelease [3083 B]                                        </span><br><span class="line">Get:4 http://deb.debian.org/debian sid/main riscv64 Packages [9076 kB]</span><br><span class="line">Get:5 http://repos.rcn-ee.com/debian-riscv64 sid/main riscv64 Packages [13.0 kB]</span><br><span class="line">Get:6 https://debian.beagle.cc/riscv64 sid/main riscv64 Packages [13.0 kB]</span><br><span class="line">Get:7 http://deb.debian.org/debian sid/main riscv64 Components [4198 kB]</span><br><span class="line">Get:8 http://deb.debian.org/debian sid/main riscv64 Contents (deb) [10.3 MB]</span><br><span class="line">Get:9 http://deb.debian.org/debian sid/main all Contents (deb) [37.8 MB]</span><br><span class="line">Fetched 61.6 MB in 3min 0s (341 kB/s)</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree... Done</span><br><span class="line">Reading state information... Done</span><br><span class="line">6 packages can be upgraded. Run &#x27;apt list --upgradable&#x27; to see them.</span><br><span class="line">debian@BeagleV:~$ apt list --upgradable</span><br><span class="line">Listing... Done</span><br><span class="line">appstream/unstable 1.0.1-2 riscv64 [upgradable from: 1.0.1-1]</span><br><span class="line">libappstream5/unstable 1.0.1-2 riscv64 [upgradable from: 1.0.1-1]</span><br><span class="line">libjs-sphinxdoc/unstable 7.2.6-3 all [upgradable from: 7.2.6-2]</span><br><span class="line">openssh-client/unstable 1:9.6p1-1 riscv64 [upgradable from: 1:9.5p1-2]</span><br><span class="line">openssh-server/unstable 1:9.6p1-1 riscv64 [upgradable from: 1:9.5p1-2]</span><br><span class="line">openssh-sftp-server/unstable 1:9.6p1-1 riscv64 [upgradable from: 1:9.5p1-2]</span><br><span class="line">debian@BeagleV:~$ sudo apt upgrade</span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree... Done</span><br><span class="line">Reading state information... Done</span><br><span class="line">Calculating upgrade... Done</span><br><span class="line">The following packages will be upgraded:</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">debian@BeagleV:~$ neofetch</span><br><span class="line">       _,met$$$$$gg.          debian@BeagleV </span><br><span class="line">    ,g$$$$$$$$$$$$$$$P.       -------------- </span><br><span class="line">  ,g$$P&quot;     &quot;&quot;&quot;Y$$.&quot;.        OS: Debian GNU/Linux trixie/sid riscv64 </span><br><span class="line"> ,$$P&#x27;              `$$$.     Host: BeagleBoard BeagleV-Fire </span><br><span class="line">&#x27;,$$P       ,ggs.     `$$b:   Kernel: 6.1.43-linux4microchip+fpga-2023.09-20231219+ </span><br><span class="line">`d$$&#x27;     ,$P&quot;&#x27;   .    $$$    Uptime: 12 mins </span><br><span class="line"><span class="meta prompt_"> $</span><span class="language-bash"><span class="variable">$P</span>      d$<span class="string">&#x27;     ,    $$P    Packages: 587 (dpkg)</span></span> </span><br><span class="line"><span class="meta prompt_"> $</span><span class="language-bash"><span class="string">$:      $$.   -    ,d$$&#x27;</span>    Shell: bash 5.2.21</span> </span><br><span class="line"><span class="meta prompt_"> $</span><span class="language-bash">$;      Y<span class="variable">$b</span>._   _,d<span class="variable">$P</span><span class="string">&#x27;      Terminal: /dev/pts/0</span></span> </span><br><span class="line"><span class="meta prompt_"> Y$</span><span class="language-bash"><span class="string">$.    `.`&quot;Y$$$$P&quot;&#x27;</span>         CPU: (4)</span> </span><br><span class="line"> `$$b      &quot;-.__              Memory: 88MiB / 1541MiB </span><br><span class="line">  `Y$$</span><br><span class="line">   `Y$$.                                              </span><br><span class="line">     `$$b.                                            </span><br><span class="line">       `Y$$b.</span><br><span class="line">          `&quot;Y$b._</span><br><span class="line">              `&quot;&quot;&quot;</span><br></pre></td></tr></table></figure>

<p><strong><span style="color:red">Bingo!!! Debian!!! </span></strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2023/12/18/OperatingSystems/LinuxKenerl/riscv/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/12/18/OperatingSystems/LinuxKenerl/riscv/" class="post-title-link" itemprop="url">RISC-V</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-12-18 22:43:00" itemprop="dateCreated datePublished" datetime="2023-12-18T22:43:00-08:00">2023-12-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-05-30 00:39:57" itemprop="dateModified" datetime="2024-05-30T00:39:57-07:00">2024-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Operating-System/Linux-Kernel/" itemprop="url" rel="index"><span itemprop="name">Linux  Kernel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Today, I would disclose <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/RISC-V">RISC-V</a>. Let’s save my word and dive into it directly. As of today, December 18, 2023, <strong>MOST</strong> of <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/RISC-V">RISC-V</a> chips are designed and manufactured by Chinese companies.</p>
<h1 id="0-Related-Companies"><a href="#0-Related-Companies" class="headerlink" title="0. Related Companies"></a>0. Related Companies</h1><ul>
<li><a target="_blank" rel="noopener" href="https://www.andestech.com/">Andes Tech</a> - headquarter in Taiwan</li>
<li><a target="_blank" rel="noopener" href="https://www.sifive.com/">SiFive</a> - headquarter in Santa Clara, USA</li>
<li><a target="_blank" rel="noopener" href="https://www.starfivetech.com/">StarFive</a> - headquarter in Shanghai, China</li>
<li><a target="_blank" rel="noopener" href="https://www.canaan.io/">Canaan</a> - headquarter in Beijing, China</li>
<li><a target="_blank" rel="noopener" href="https://www.microchip.com/">Microchip</a> - headquarter in Arizona, USA</li>
<li><a target="_blank" rel="noopener" href="https://www.allwinnertech.com/">All Winner Tech</a> - headquarter in Zhuhai, China</li>
<li><a target="_blank" rel="noopener" href="https://www.t-head.cn/">T-Head</a> - headquarter in Hangzhou, China. An <a target="_blank" rel="noopener" href="https://www.alibaba.com/">Alibaba</a> company</li>
</ul>
<h1 id="1-U-Boot"><a href="#1-U-Boot" class="headerlink" title="1. U-Boot"></a>1. <a target="_blank" rel="noopener" href="https://github.com/u-boot/u-boot">U-Boot</a></h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">➜  u-boot git:(master) ✗ ls arch</span><br><span class="line">arc  arm  Kconfig  Kconfig.nxp  m68k  microblaze  mips  nios2  powerpc  riscv  sandbox  sh  u-boot-elf.lds  x86  xtensa</span><br><span class="line">➜  u-boot git:(master) ✗ cd arch/riscv </span><br><span class="line">➜  riscv git:(master) ✗ ls cpu</span><br><span class="line">andesv5     cpu.c  cpu.su  fu740    jh7110    mtrap.o  start.o  u-boot.lds</span><br><span class="line">built-in.o  cpu.o  fu540   generic  Makefile  mtrap.S  start.S  u-boot-spl.lds</span><br><span class="line">➜  riscv git:(master) ✗ ls dts</span><br><span class="line">ae350_32.dts                         hifive-unmatched-a00.dts                  mpfs-icicle-kit.dts</span><br><span class="line">ae350_64.dts                         hifive-unmatched-a00-u-boot.dtsi          mpfs-icicle-kit-fabric.dtsi</span><br><span class="line">ae350-u-boot.dtsi                    jh7110.dtsi                               mpfs-icicle-kit-u-boot.dtsi</span><br><span class="line">binman.dtsi                          jh7110-starfive-visionfive-2.dtb          openpiton-riscv64.dts</span><br><span class="line">fu540-c000.dtsi                      jh7110-starfive-visionfive-2.dts          qemu-virt32.dts</span><br><span class="line">fu540-c000-u-boot.dtsi               jh7110-starfive-visionfive-2.dtsi         qemu-virt64.dts</span><br><span class="line">fu540-hifive-unleashed-a00-ddr.dtsi  jh7110-starfive-visionfive-2-u-boot.dtsi  sunxi-d1s-t113.dtsi</span><br><span class="line">fu740-c000.dtsi                      jh7110-u-boot.dtsi                        sunxi-d1-t113.dtsi</span><br><span class="line">fu740-c000-u-boot.dtsi               k210.dtsi                                 th1520.dtsi</span><br><span class="line">fu740-hifive-unmatched-a00-ddr.dtsi  k210-maix-bit.dts                         th1520-lichee-module-4a.dtsi</span><br><span class="line">hifive-unleashed-a00.dts             Makefile                                  th1520-lichee-pi-4a.dts</span><br><span class="line">hifive-unleashed-a00-u-boot.dtsi     mpfs.dtsi</span><br><span class="line">➜  riscv git:(master) ✗ </span><br></pre></td></tr></table></figure>

<h2 id="1-1-CPU"><a href="#1-1-CPU" class="headerlink" title="1.1 CPU"></a>1.1 CPU</h2><p>Let’s simple analyze all 5 folders under subfolder <strong>cpu</strong>.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.andestech.com/en/2022/07/20/andes-technology-risc-v-processors-reveal-outstanding-performance-and-efficiency-in-mlperf-tiny/">andesv5</a> - designed by <a target="_blank" rel="noopener" href="https://www.andestech.com/">Andes Tech</a></li>
<li><a target="_blank" rel="noopener" href="https://static.dev.sifive.com/FU540-C000-v1.0.pdf">fu540</a> - designed by <a target="_blank" rel="noopener" href="https://www.sifive.com/">SiFive</a></li>
<li><a target="_blank" rel="noopener" href="https://www.sifive.com/boards/hifive-unmatched">fu740</a> - designed by <a target="_blank" rel="noopener" href="https://www.sifive.com/">SiFive</a></li>
<li><a target="_blank" rel="noopener" href="https://www.starfivetech.com/en/site/soc">jh7110</a> - designed by <a target="_blank" rel="noopener" href="https://www.starfivetech.com/">StarFive</a></li>
<li>generic</li>
</ul>
<h2 id="1-2-DTS"><a href="#1-2-DTS" class="headerlink" title="1.2 DTS"></a>1.2 DTS</h2><p>Let’s further analyze all device trees under subfolder <strong>dts</strong>.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.andestech.com/en/products-solutions/andeshape-platforms/ae350-axi-based-platform-pre-integrated-with-n25f-nx25f-a25-ax25/">ae350</a> - designed by <a target="_blank" rel="noopener" href="https://www.andestech.com/">Andes Tech</a></li>
<li><a target="_blank" rel="noopener" href="https://static.dev.sifive.com/FU540-C000-v1.0.pdf">fu540</a> - designed by <a target="_blank" rel="noopener" href="https://www.sifive.com/">SiFive</a></li>
<li><a target="_blank" rel="noopener" href="https://www.sifive.com/boards/hifive-unmatched">fu740</a> - designed by <a target="_blank" rel="noopener" href="https://www.sifive.com/">SiFive</a></li>
<li><a target="_blank" rel="noopener" href="https://www.sifive.com/boards/hifive1-rev-b">hifive</a> - designed by <a target="_blank" rel="noopener" href="https://www.sifive.com/">SiFive</a></li>
<li><a target="_blank" rel="noopener" href="https://www.starfivetech.com/en/site/soc">jh7110</a> - designed by <a target="_blank" rel="noopener" href="https://www.starfivetech.com/">StarFive</a></li>
<li><a target="_blank" rel="noopener" href="https://www.canaan.io/product/kendryteai">k210</a> - designed by <a target="_blank" rel="noopener" href="https://www.canaan.io/">Canaan</a></li>
<li><a target="_blank" rel="noopener" href="https://www.microchip.com/en-us/products/fpgas-and-plds/system-on-chip-fpgas/polarfire-soc-fpgas">mpfs</a> - designed by <a target="_blank" rel="noopener" href="https://www.microchip.com/">Microchip</a></li>
<li><a target="_blank" rel="noopener" href="https://parallel.princeton.edu/openpiton/">openpiton</a> - designed by <a target="_blank" rel="noopener" href="https://parallel.princeton.edu/openpiton/">Princeton OpenPiton</a></li>
<li><a target="_blank" rel="noopener" href="https://linux-sunxi.org/D1">sunxi</a> - designed by <a target="_blank" rel="noopener" href="https://www.allwinnertech.com/">All Winner Tech</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnx-software.com/2022/10/04/alibaba-t-head-th1520-risc-v-processor-to-power-the-roma-laptop/">th1520</a> - designed by <a target="_blank" rel="noopener" href="https://www.t-head.cn/">T-Head</a>, it’s just <a target="_blank" rel="noopener" href="https://www.t-head.cn/product/c910?lang=en">Xuantie C910</a></li>
</ul>
<h1 id="2-Linux-Kernel"><a href="#2-Linux-Kernel" class="headerlink" title="2. Linux Kernel"></a>2. <a target="_blank" rel="noopener" href="https://www.kernel.org/">Linux Kernel</a></h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  linux ls arch</span><br><span class="line">alpha  arm    csky     ia64     loongarch  microblaze  nios2     parisc   riscv  sh     um   xtensa</span><br><span class="line">arc    arm64  hexagon  Kconfig  m68k       mips        openrisc  powerpc  s390   sparc  x86</span><br><span class="line">➜  linux cd arch/riscv </span><br><span class="line">➜  riscv ls configs</span><br><span class="line">32-bit.config  defconfig             nommu_k210_sdcard_defconfig  rv32_defconfig</span><br><span class="line">64-bit.config  nommu_k210_defconfig  nommu_virt_defconfig</span><br><span class="line">➜  riscv ls boot/dts </span><br><span class="line">allwinner  canaan  Makefile  microchip  renesas  sifive  starfive  thead</span><br></pre></td></tr></table></figure>

<h2 id="2-1-DTS"><a href="#2-1-DTS" class="headerlink" title="2.1 DTS"></a>2.1 DTS</h2><p>Again, let’s analyze all 5 folders under subfolder <strong>dts</strong>.</p>
<ul>
<li>allwinner - <a target="_blank" rel="noopener" href="https://www.allwinnertech.com/">All Winner Tech</a></li>
<li>canaan - <a target="_blank" rel="noopener" href="https://www.canaan.io/">Canaan</a></li>
<li>microchip - <a target="_blank" rel="noopener" href="https://www.microchip.com/">Microchip</a></li>
<li>renesas - <a target="_blank" rel="noopener" href="https://www.renesas.com/">Renesas</a></li>
<li>sifive - <a target="_blank" rel="noopener" href="https://www.sifive.com/">SiFive</a></li>
<li>starfive - <a target="_blank" rel="noopener" href="https://www.starfivetech.com/">StarFive</a></li>
<li>thead - <a target="_blank" rel="noopener" href="https://www.t-head.cn/">T-Head</a></li>
</ul>
<p>By the way: recent <a target="_blank" rel="noopener" href="https://store-usa.arduino.cc/pages/uno-r4?selectedStore=us">Arduino UNO R4</a> uses a <a target="_blank" rel="noopener" href="https://www.renesas.com/us/en/products/microcontrollers-microprocessors/ra-cortex-m-mcus/ra4m1-32-bit-microcontrollers-48mhz-arm-cortex-m4-and-lcd-controller-and-cap-touch-hmi">Renesas RA4M1</a>, a <strong>32-bit Arm® Cortex®-M4</strong> MCU.</p>
<p><strong><span style="color:red">Conclusion: MOST of recent RISC-V chips are supported, designed, and manufactured by China.</span></strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://longervision.github.io/2023/12/13/SBCs/RISC-V/VisionFive2-03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Nobody">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Longer Vision Technology">
      <meta itemprop="description" content="Longer Vision Technology Github Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Longer Vision Technology">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/12/13/SBCs/RISC-V/VisionFive2-03/" class="post-title-link" itemprop="url">VisionFive2 - 03</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-12-13 00:00:00" itemprop="dateCreated datePublished" datetime="2023-12-13T00:00:00-08:00">2023-12-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-12-16 04:56:10" itemprop="dateModified" datetime="2023-12-16T04:56:10-08:00">2023-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/" itemprop="url" rel="index"><span itemprop="name">Single Board Computers</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Single-Board-Computers/Risc-V/" itemprop="url" rel="index"><span itemprop="name">Risc-V</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://www.kickstarter.com/projects/starfive/visionfive-2">VisionFive2</a> has been talked twice recently:</p>
<ul>
<li><a href="/2023/11/14/SBCs/RISC-V/VisionFive2-01/">VisionFive2 - 01</a></li>
<li><a href="/2023/12/08/SBCs/RISC-V/VisionFive2-02/">VisionFive2 - 02</a></li>
</ul>
<p>Today, we’re going to follow <a target="_blank" rel="noopener" href="https://docs.u-boot.org/en/latest/board/starfive/visionfive2.html">U-Boot VisionFive2</a> and demonstrate the <strong>MOST up-to-date</strong> <a target="_blank" rel="noopener" href="https://github.com/u-boot/u-boot">U-Boot</a>, <a target="_blank" rel="noopener" href="https://www.kernel.org/">Linux kernel</a>, and <a target="_blank" rel="noopener" href="https://github.com/riscv-software-src/opensbi">OpenSBI</a>.</p>
<h1 id="1-Building"><a href="#1-Building" class="headerlink" title="1. Building"></a>1. Building</h1><h2 id="1-1-OpenSBI"><a href="#1-1-OpenSBI" class="headerlink" title="1.1 OpenSBI"></a>1.1 <a target="_blank" rel="noopener" href="https://github.com/riscv-software-src/opensbi">OpenSBI</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">➜  opensbi git:(master) make PLATFORM=generic FW_TEXT_START=0x40000000 FW_OPTIONS=0</span><br><span class="line"> CC        lib/sbi/riscv_asm.o</span><br><span class="line"> CC        lib/sbi/riscv_atomic.o</span><br><span class="line"> AS        lib/sbi/riscv_hardfp.o</span><br><span class="line"> CC        lib/sbi/riscv_locks.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_exts.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_time.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_rfence.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_ipi.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_base.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_hsm.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_srst.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_susp.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_pmu.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_dbcn.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_cppc.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_legacy.o</span><br><span class="line"> CC        lib/sbi/sbi_ecall_vendor.o</span><br><span class="line"> CC        lib/sbi/sbi_bitmap.o</span><br><span class="line"> CC        lib/sbi/sbi_bitops.o</span><br><span class="line"> CC        lib/sbi/sbi_console.o</span><br><span class="line"> CC        lib/sbi/sbi_domain.o</span><br><span class="line"> CC        lib/sbi/sbi_emulate_csr.o</span><br><span class="line"> CC        lib/sbi/sbi_fifo.o</span><br><span class="line"> CC        lib/sbi/sbi_hart.o</span><br><span class="line"> CC        lib/sbi/sbi_heap.o</span><br><span class="line"> CC        lib/sbi/sbi_math.o</span><br><span class="line"> AS        lib/sbi/sbi_hfence.o</span><br><span class="line"> CC        lib/sbi/sbi_hsm.o</span><br><span class="line"> CC        lib/sbi/sbi_illegal_insn.o</span><br><span class="line"> CC        lib/sbi/sbi_init.o</span><br><span class="line"> CC        lib/sbi/sbi_ipi.o</span><br><span class="line"> CC        lib/sbi/sbi_irqchip.o</span><br><span class="line"> CC        lib/sbi/sbi_misaligned_ldst.o</span><br><span class="line"> CC        lib/sbi/sbi_platform.o</span><br><span class="line"> CC        lib/sbi/sbi_pmu.o</span><br><span class="line"> CC        lib/sbi/sbi_scratch.o</span><br><span class="line"> CC        lib/sbi/sbi_string.o</span><br><span class="line"> CC        lib/sbi/sbi_system.o</span><br><span class="line"> CC        lib/sbi/sbi_timer.o</span><br><span class="line"> CC        lib/sbi/sbi_tlb.o</span><br><span class="line"> CC        lib/sbi/sbi_trap.o</span><br><span class="line"> CC        lib/sbi/sbi_unpriv.o</span><br><span class="line"> AS        lib/sbi/sbi_expected_trap.o</span><br><span class="line"> CC        lib/sbi/sbi_cppc.o</span><br><span class="line"> AR        lib/libsbi.a</span><br><span class="line"> CC        platform/generic/lib/utils/timer/aclint_mtimer.o</span><br><span class="line"> CC        platform/generic/lib/utils/timer/andes_plmt.o</span><br><span class="line"> CC        platform/generic/lib/utils/timer/fdt_timer.o</span><br><span class="line"> CC        platform/generic/lib/utils/timer/fdt_timer_drivers.o</span><br><span class="line"> CC        platform/generic/lib/utils/timer/fdt_timer_mtimer.o</span><br><span class="line"> CC        platform/generic/lib/utils/timer/fdt_timer_plmt.o</span><br><span class="line"> CC        platform/generic/lib/utils/sys/htif.o</span><br><span class="line"> CC        platform/generic/lib/utils/sys/atcsmu.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_drivers.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_cadence.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_gaisler.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_htif.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_renesas_scif.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_shakti.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_sifive.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_litex.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_uart8250.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/fdt_serial_xlnx_uartlite.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/cadence-uart.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/gaisler-uart.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/renesas_scif.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/shakti-uart.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/sifive-uart.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/litex-uart.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/uart8250.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/xlnx-uartlite.o</span><br><span class="line"> CC        platform/generic/lib/utils/serial/semihosting.o</span><br><span class="line"> CC        platform/generic/lib/utils/reset/fdt_reset.o</span><br><span class="line"> CC        platform/generic/lib/utils/reset/fdt_reset_drivers.o</span><br><span class="line"> CC        platform/generic/lib/utils/reset/fdt_reset_atcwdt200.o</span><br><span class="line"> CC        platform/generic/lib/utils/reset/fdt_reset_gpio.o</span><br><span class="line"> CC        platform/generic/lib/utils/reset/fdt_reset_htif.o</span><br><span class="line"> CC        platform/generic/lib/utils/reset/fdt_reset_sunxi_wdt.o</span><br><span class="line"> CC        platform/generic/lib/utils/reset/fdt_reset_syscon.o</span><br><span class="line"> CC        platform/generic/lib/utils/regmap/fdt_regmap.o</span><br><span class="line"> CC        platform/generic/lib/utils/regmap/fdt_regmap_drivers.o</span><br><span class="line"> CC        platform/generic/lib/utils/regmap/fdt_regmap_syscon.o</span><br><span class="line"> CC        platform/generic/lib/utils/regmap/regmap.o</span><br><span class="line"> CC        platform/generic/lib/utils/libfdt/fdt.o</span><br><span class="line"> CC        platform/generic/lib/utils/libfdt/fdt_addresses.o</span><br><span class="line"> CC        platform/generic/lib/utils/libfdt/fdt_check.o</span><br><span class="line"> CC        platform/generic/lib/utils/libfdt/fdt_empty_tree.o</span><br><span class="line"> CC        platform/generic/lib/utils/libfdt/fdt_ro.o</span><br><span class="line"> CC        platform/generic/lib/utils/libfdt/fdt_rw.o</span><br><span class="line"> CC        platform/generic/lib/utils/libfdt/fdt_strerror.o</span><br><span class="line"> CC        platform/generic/lib/utils/libfdt/fdt_sw.o</span><br><span class="line"> CC        platform/generic/lib/utils/libfdt/fdt_wip.o</span><br><span class="line"> CC        platform/generic/lib/utils/irqchip/fdt_irqchip.o</span><br><span class="line"> CC        platform/generic/lib/utils/irqchip/fdt_irqchip_drivers.o</span><br><span class="line"> CC        platform/generic/lib/utils/irqchip/fdt_irqchip_aplic.o</span><br><span class="line"> CC        platform/generic/lib/utils/irqchip/fdt_irqchip_imsic.o</span><br><span class="line"> CC        platform/generic/lib/utils/irqchip/fdt_irqchip_plic.o</span><br><span class="line"> CC        platform/generic/lib/utils/irqchip/aplic.o</span><br><span class="line"> CC        platform/generic/lib/utils/irqchip/imsic.o</span><br><span class="line"> CC        platform/generic/lib/utils/irqchip/plic.o</span><br><span class="line"> CC        platform/generic/lib/utils/ipi/aclint_mswi.o</span><br><span class="line"> CC        platform/generic/lib/utils/ipi/andes_plicsw.o</span><br><span class="line"> CC        platform/generic/lib/utils/ipi/fdt_ipi.o</span><br><span class="line"> CC        platform/generic/lib/utils/ipi/fdt_ipi_drivers.o</span><br><span class="line"> CC        platform/generic/lib/utils/ipi/fdt_ipi_mswi.o</span><br><span class="line"> CC        platform/generic/lib/utils/ipi/fdt_ipi_plicsw.o</span><br><span class="line"> CC        platform/generic/lib/utils/i2c/i2c.o</span><br><span class="line"> CC        platform/generic/lib/utils/i2c/fdt_i2c.o</span><br><span class="line"> CC        platform/generic/lib/utils/i2c/fdt_i2c_adapter_drivers.o</span><br><span class="line"> CC        platform/generic/lib/utils/i2c/fdt_i2c_sifive.o</span><br><span class="line"> CC        platform/generic/lib/utils/i2c/fdt_i2c_dw.o</span><br><span class="line"> CC        platform/generic/lib/utils/i2c/dw_i2c.o</span><br><span class="line"> CC        platform/generic/lib/utils/gpio/fdt_gpio.o</span><br><span class="line"> CC        platform/generic/lib/utils/gpio/fdt_gpio_drivers.o</span><br><span class="line"> CC        platform/generic/lib/utils/gpio/fdt_gpio_designware.o</span><br><span class="line"> CC        platform/generic/lib/utils/gpio/fdt_gpio_sifive.o</span><br><span class="line"> CC        platform/generic/lib/utils/gpio/fdt_gpio_starfive.o</span><br><span class="line"> CC        platform/generic/lib/utils/gpio/gpio.o</span><br><span class="line"> CC        platform/generic/lib/utils/fdt/fdt_domain.o</span><br><span class="line"> CC        platform/generic/lib/utils/fdt/fdt_pmu.o</span><br><span class="line"> CC        platform/generic/lib/utils/fdt/fdt_helper.o</span><br><span class="line"> CC        platform/generic/lib/utils/fdt/fdt_fixup.o</span><br><span class="line"> CC        platform/generic/thead/thead_c9xx_pmu.o</span><br><span class="line"> AS        platform/generic/thead/thead_c9xx_tlb_trap_handler.o</span><br><span class="line"> CC        platform/generic/thead/thead_c9xx_errata_tlb_flush.o</span><br><span class="line"> CC        platform/generic/thead/thead-generic.o</span><br><span class="line"> CC        platform/generic/starfive/jh7110.o</span><br><span class="line"> CC        platform/generic/sophgo/sg2042.o</span><br><span class="line"> CC        platform/generic/sifive/fu540.o</span><br><span class="line"> CC        platform/generic/sifive/fu740.o</span><br><span class="line"> CC        platform/generic/renesas/rzfive/rzfive.o</span><br><span class="line"> CC        platform/generic/platform.o</span><br><span class="line"> CC        platform/generic/platform_override_modules.o</span><br><span class="line"> CC        platform/generic/andes/ae350.o</span><br><span class="line"> AS        platform/generic/andes/sleep.o</span><br><span class="line"> CC        platform/generic/andes/andes45-pma.o</span><br><span class="line"> CC        platform/generic/andes/andes_sbi.o</span><br><span class="line"> CC        platform/generic/andes/andes_pmu.o</span><br><span class="line"> CC        platform/generic/allwinner/sun20i-d1.o</span><br><span class="line"> AR        platform/generic/lib/libplatsbi.a</span><br><span class="line"> AS        platform/generic/firmware/payloads/test_head.o</span><br><span class="line"> CC        platform/generic/firmware/payloads/test_main.o</span><br><span class="line"> MERGE     platform/generic/firmware/payloads/test.o</span><br><span class="line"> ELF       platform/generic/firmware/payloads/test.elf</span><br><span class="line"> OBJCOPY   platform/generic/firmware/payloads/test.bin</span><br><span class="line"> AS        platform/generic/firmware/fw_dynamic.o</span><br><span class="line"> ELF       platform/generic/firmware/fw_dynamic.elf</span><br><span class="line"> OBJCOPY   platform/generic/firmware/fw_dynamic.bin</span><br><span class="line"> AS        platform/generic/firmware/fw_jump.o</span><br><span class="line"> ELF       platform/generic/firmware/fw_jump.elf</span><br><span class="line"> OBJCOPY   platform/generic/firmware/fw_jump.bin</span><br><span class="line"> AS        platform/generic/firmware/fw_payload.o</span><br><span class="line"> ELF       platform/generic/firmware/fw_payload.elf</span><br><span class="line"> OBJCOPY   platform/generic/firmware/fw_payload.bin</span><br></pre></td></tr></table></figure>

<h2 id="1-2-U-Boot"><a href="#1-2-U-Boot" class="headerlink" title="1.2 U-Boot"></a>1.2 <a target="_blank" rel="noopener" href="https://github.com/u-boot/u-boot">U-Boot</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  u-boot git:(master) ✗ make starfive_visionfive2_defconfig</span><br><span class="line">  HOSTCC  scripts/basic/fixdep</span><br><span class="line">  HOSTCC  scripts/kconfig/conf.o</span><br><span class="line">  YACC    scripts/kconfig/zconf.tab.c</span><br><span class="line">  LEX     scripts/kconfig/zconf.lex.c</span><br><span class="line">  HOSTCC  scripts/kconfig/zconf.tab.o</span><br><span class="line">  HOSTLD  scripts/kconfig/conf</span><br><span class="line">#</span><br><span class="line"># configuration written to .config</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">➜  u-boot git:(master) ✗ make OPENSBI=$OPENSBI</span><br><span class="line">scripts/kconfig/conf  --syncconfig Kconfig</span><br><span class="line">  UPD     include/config.h</span><br><span class="line">  CFG     spl/u-boot.cfg</span><br><span class="line">  GEN     spl/include/autoconf.mk</span><br><span class="line">  CFG     u-boot.cfg</span><br><span class="line">  GEN     include/autoconf.mk</span><br><span class="line">  GEN     include/autoconf.mk.dep</span><br><span class="line">  UPD     include/generated/timestamp_autogenerated.h</span><br><span class="line">  ENVC    include/generated/env.txt</span><br><span class="line">  ENVP    include/generated/env.in</span><br><span class="line">  ENVT    include/generated/environment.h</span><br><span class="line">  CC      lib/asm-offsets.s</span><br><span class="line">  CC      arch/riscv/lib/asm-offsets.s</span><br><span class="line">  PYMOD   rebuild</span><br><span class="line">/home/lvision/Desktop/VisionFive/u-boot/scripts/dtc/pylibfdt/setup.py:40: SyntaxWarning: invalid escape sequence &#x27;\w&#x27;</span><br><span class="line">  RE_KEY_VALUE = re.compile(&#x27;(?P&lt;key&gt;\w+) *(?P&lt;plus&gt;[+])?= *(?P&lt;value&gt;.*)$&#x27;)</span><br><span class="line">  HOSTCC  scripts/dtc/dtc.o</span><br><span class="line">  HOSTCC  scripts/dtc/flattree.o</span><br><span class="line">......</span><br><span class="line">  AR      spl/drivers/spi/built-in.o</span><br><span class="line">  CC      spl/drivers/timer/timer-uclass.o</span><br><span class="line">  CC      spl/drivers/timer/riscv_timer.o</span><br><span class="line">  CC      spl/drivers/timer/riscv_aclint_timer.o</span><br><span class="line">  AR      spl/drivers/timer/built-in.o</span><br><span class="line">  AR      spl/drivers/built-in.o</span><br><span class="line">  AR      spl/dts/built-in.o</span><br><span class="line">  CC      spl/fs/fs_internal.o</span><br><span class="line">  AR      spl/fs/built-in.o</span><br><span class="line">  LDS     spl/u-boot-spl.lds</span><br><span class="line">  LD      spl/u-boot-spl</span><br><span class="line">  OBJCOPY spl/u-boot-spl-nodtb.bin</span><br><span class="line">mkdir -p spl/dts/</span><br><span class="line">  FDTGREP spl/dts/dt-spl.dtb</span><br><span class="line">  COPY    spl/u-boot-spl.dtb</span><br><span class="line">  CAT     spl/u-boot-spl-dtb.bin</span><br><span class="line">  COPY    spl/u-boot-spl.bin</span><br><span class="line">  SYM     spl/u-boot-spl.sym</span><br><span class="line">  MKIMAGE u-boot.img</span><br><span class="line">  COPY    u-boot.dtb</span><br><span class="line">  MKIMAGE u-boot-dtb.img</span><br><span class="line">  BINMAN  .binman_stamp</span><br><span class="line">  OFCHK   .config</span><br><span class="line">➜  u-boot git:(master) ✗ </span><br></pre></td></tr></table></figure>

<h2 id="1-3-Linux-Kernel"><a href="#1-3-Linux-Kernel" class="headerlink" title="1.3 Linux Kernel"></a>1.3 <a target="_blank" rel="noopener" href="https://www.kernel.org/">Linux Kernel</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">➜  linux make defconfig</span><br><span class="line">  HOSTCC  scripts/basic/fixdep</span><br><span class="line">  HOSTCC  scripts/kconfig/conf.o</span><br><span class="line">  HOSTCC  scripts/kconfig/confdata.o</span><br><span class="line">  HOSTCC  scripts/kconfig/expr.o</span><br><span class="line">  LEX     scripts/kconfig/lexer.lex.c</span><br><span class="line">  YACC    scripts/kconfig/parser.tab.[ch]</span><br><span class="line">  HOSTCC  scripts/kconfig/lexer.lex.o</span><br><span class="line">  HOSTCC  scripts/kconfig/menu.o</span><br><span class="line">  HOSTCC  scripts/kconfig/parser.tab.o</span><br><span class="line">  HOSTCC  scripts/kconfig/preprocess.o</span><br><span class="line">  HOSTCC  scripts/kconfig/symbol.o</span><br><span class="line">  HOSTCC  scripts/kconfig/util.o</span><br><span class="line">  HOSTLD  scripts/kconfig/conf</span><br><span class="line">*** Default configuration is based on &#x27;defconfig&#x27;</span><br><span class="line">#</span><br><span class="line"># No change to .config</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">➜  linux make menuconfig</span><br><span class="line">  HOSTCC  scripts/kconfig/mconf.o</span><br><span class="line">  HOSTCC  scripts/kconfig/lxdialog/checklist.o</span><br><span class="line">  HOSTCC  scripts/kconfig/lxdialog/inputbox.o</span><br><span class="line">  HOSTCC  scripts/kconfig/lxdialog/menubox.o</span><br><span class="line">  HOSTCC  scripts/kconfig/lxdialog/textbox.o</span><br><span class="line">  HOSTCC  scripts/kconfig/lxdialog/util.o</span><br><span class="line">  HOSTCC  scripts/kconfig/lxdialog/yesno.o</span><br><span class="line">  HOSTLD  scripts/kconfig/mconf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*** End of the configuration.</span><br><span class="line">*** Execute &#x27;make&#x27; to start the build or try &#x27;make help&#x27;.</span><br></pre></td></tr></table></figure>

<p>By configuring <strong>menuconfig</strong>, we ignore building <strong>ALL other</strong> SoCs but tick <strong>VisionFive ONLY</strong>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">➜  linux make -j16</span><br><span class="line">  HOSTCC  scripts/basic/fixdep</span><br><span class="line">  HOSTCC  scripts/dtc/flattree.o</span><br><span class="line">  HOSTCC  scripts/dtc/dtc.o</span><br><span class="line">  HOSTCC  scripts/dtc/fstree.o</span><br><span class="line">  HOSTCC  scripts/dtc/livetree.o</span><br><span class="line">  HOSTCC  scripts/dtc/data.o</span><br><span class="line">  HOSTCC  scripts/dtc/treesource.o</span><br><span class="line">  HOSTCC  scripts/dtc/srcpos.o</span><br><span class="line">  HOSTCC  scripts/dtc/util.o</span><br><span class="line">  HOSTCC  scripts/dtc/checks.o</span><br><span class="line">  YACC    scripts/dtc/dtc-parser.tab.[ch]</span><br><span class="line">  LEX     scripts/dtc/dtc-lexer.lex.c</span><br><span class="line">  HOSTCC  scripts/dtc/libfdt/fdt.o</span><br><span class="line">  HOSTCC  scripts/dtc/libfdt/fdt_ro.o</span><br><span class="line">  HOSTCC  scripts/dtc/libfdt/fdt_wip.o</span><br><span class="line">  HOSTCC  scripts/dtc/libfdt/fdt_sw.o</span><br><span class="line">  HOSTCC  scripts/dtc/libfdt/fdt_rw.o</span><br><span class="line">  HOSTCC  scripts/dtc/libfdt/fdt_strerror.o</span><br><span class="line">  HOSTCC  scripts/dtc/libfdt/fdt_empty_tree.o</span><br><span class="line">  HOSTCC  scripts/dtc/libfdt/fdt_addresses.o</span><br><span class="line">  HOSTCC  scripts/dtc/libfdt/fdt_overlay.o</span><br><span class="line">  HOSTCC  scripts/dtc/fdtoverlay.o</span><br><span class="line">  HOSTCC  scripts/dtc/dtc-lexer.lex.o</span><br><span class="line">  HOSTCC  scripts/dtc/dtc-parser.tab.o</span><br><span class="line">  HOSTLD  scripts/dtc/fdtoverlay</span><br><span class="line">  HOSTLD  scripts/dtc/dtc</span><br><span class="line">......</span><br><span class="line">  LD [M]  net/8021q/8021q.ko</span><br><span class="line">  LD [M]  net/bridge/br_netfilter.ko</span><br><span class="line">  LD [M]  net/llc/llc.ko</span><br><span class="line">  LD [M]  net/bridge/bridge.ko</span><br><span class="line">  NM      .tmp_vmlinux.kallsyms1.syms</span><br><span class="line">  KSYMS   .tmp_vmlinux.kallsyms1.S</span><br><span class="line">  AS      .tmp_vmlinux.kallsyms1.S</span><br><span class="line">  LD      .tmp_vmlinux.kallsyms2</span><br><span class="line">  NM      .tmp_vmlinux.kallsyms2.syms</span><br><span class="line">  KSYMS   .tmp_vmlinux.kallsyms2.S</span><br><span class="line">  AS      .tmp_vmlinux.kallsyms2.S</span><br><span class="line">  LD      vmlinux</span><br><span class="line">  NM      System.map</span><br><span class="line">  SORTTAB vmlinux</span><br><span class="line">  OBJCOPY arch/riscv/boot/Image</span><br><span class="line">  GZIP    arch/riscv/boot/Image.gz</span><br><span class="line">  Kernel: arch/riscv/boot/Image.gz is ready</span><br></pre></td></tr></table></figure>


<h2 id="1-4-Busybox"><a href="#1-4-Busybox" class="headerlink" title="1.4 Busybox"></a>1.4 <a target="_blank" rel="noopener" href="https://busybox.net/">Busybox</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">➜  busybox make CROSS_COMPILE=riscv64-linux-gnu- ARCH=riscv defconfig</span><br><span class="line">scripts/kconfig/conf -d Config.in</span><br><span class="line">*</span><br><span class="line">* Busybox Configuration</span><br><span class="line">*</span><br><span class="line">*</span><br><span class="line">* Settings</span><br><span class="line">*</span><br><span class="line">Enable compatibility for full-blown desktop systems (8kb) (DESKTOP) [Y/n/?] (NEW) y</span><br><span class="line">Provide compatible behavior for rare corner cases (bigger code) (EXTRA_COMPAT) [N/y/?] (NEW) n</span><br><span class="line">Building for Fedora distribution (FEDORA_COMPAT) [N/y/?] (NEW) n</span><br><span class="line">Enable obsolete features removed before SUSv3 (INCLUDE_SUSv2) [Y/n/?] (NEW) y</span><br><span class="line">Support --long-options (LONG_OPTS) [Y/?] (NEW) y</span><br><span class="line">Show applet usage messages (SHOW_USAGE) [Y/n/?] (NEW) y</span><br><span class="line">  Show verbose applet usage messages (FEATURE_VERBOSE_USAGE) [Y/n/?] (NEW) y</span><br><span class="line">  Store applet usage messages in compressed form (FEATURE_COMPRESS_USAGE) [Y/n/?] (NEW) y</span><br><span class="line">Support files &gt; 2 GB (LFS) [Y/n/?] (NEW) y</span><br><span class="line">  Support 64bit wide time types (TIME64) [Y/n/?] (NEW) y</span><br><span class="line">Support PAM (Pluggable Authentication Modules) (PAM) [N/y/?] (NEW) n</span><br><span class="line">Use the devpts filesystem for Unix98 PTYs (FEATURE_DEVPTS) [Y/n/?] (NEW) y</span><br><span class="line">Support utmp file (FEATURE_UTMP) [Y/n/?] (NEW) y</span><br><span class="line">  Support wtmp file (FEATURE_WTMP) [Y/n/?] (NEW) y</span><br><span class="line">Support writing pidfiles (FEATURE_PIDFILE) [Y/n/?] (NEW) y</span><br><span class="line">  Directory for pidfiles (PID_FILE_PATH) [/var/run] (NEW) /var/run</span><br><span class="line">Include busybox applet (BUSYBOX) [Y/n/?] (NEW) y</span><br><span class="line">  Support --show SCRIPT (FEATURE_SHOW_SCRIPT) [Y/n] (NEW) y</span><br><span class="line">  Support --install [-s] to install applet links at runtime (FEATURE_INSTALLER) [Y/n/?] (NEW) y</span><br><span class="line">Don&#x27;t use /usr (INSTALL_NO_USR) [N/y/?] (NEW) n</span><br><span class="line">Drop SUID state for most applets (FEATURE_SUID) [Y/n/?] (NEW) y</span><br><span class="line">  Enable SUID configuration via /etc/busybox.conf (FEATURE_SUID_CONFIG) [Y/n/?] (NEW) y</span><br><span class="line">    Suppress warning message if /etc/busybox.conf is not readable (FEATURE_SUID_CONFIG_QUIET) [Y/n/?] (NEW) y</span><br><span class="line">exec prefers applets (FEATURE_PREFER_APPLETS) [N/y/?] (NEW) n</span><br><span class="line">Path to busybox executable (BUSYBOX_EXEC_PATH) [/proc/self/exe] (NEW) /proc/self/exe</span><br><span class="line">Support NSA Security Enhanced Linux (SELINUX) [N/y/?] (NEW) n</span><br><span class="line">Clean up all memory before exiting (usually not needed) (FEATURE_CLEAN_UP) [N/y/?] (NEW) n</span><br><span class="line">Support LOG_INFO level syslog messages (FEATURE_SYSLOG_INFO) [Y/n/?] (NEW) y</span><br><span class="line">*</span><br><span class="line">*</span><br><span class="line">* Build Options</span><br><span class="line">*</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">*</span><br><span class="line">* Options common to all shells</span><br><span class="line">*</span><br><span class="line">POSIX math support (FEATURE_SH_MATH) [Y/n/?] (NEW) y</span><br><span class="line">  Extend POSIX math support to 64 bit (FEATURE_SH_MATH_64) [Y/n/?] (NEW) y</span><br><span class="line">  Support BASE#nnnn literals (FEATURE_SH_MATH_BASE) [Y/n] (NEW) y</span><br><span class="line">Hide message on interactive shell startup (FEATURE_SH_EXTRA_QUIET) [Y/n/?] (NEW) y</span><br><span class="line">Standalone shell (FEATURE_SH_STANDALONE) [N/y/?] (NEW) n</span><br><span class="line">Run &#x27;nofork&#x27; applets directly (FEATURE_SH_NOFORK) [N/y/?] (NEW) n</span><br><span class="line">read -t N.NNN support (+110 bytes) (FEATURE_SH_READ_FRAC) [Y/n/?] (NEW) y</span><br><span class="line">Use $HISTFILESIZE (FEATURE_SH_HISTFILESIZE) [Y/n/?] (NEW) y</span><br><span class="line">Embed scripts in the binary (FEATURE_SH_EMBEDDED_SCRIPTS) [Y/n/?] (NEW) y</span><br><span class="line">*</span><br><span class="line">* System Logging Utilities</span><br><span class="line">*</span><br><span class="line">klogd (6.2 kb) (KLOGD) [Y/n/?] (NEW) y</span><br><span class="line">  *</span><br><span class="line">  * klogd should not be used together with syslog to kernel printk buffer</span><br><span class="line">  *</span><br><span class="line">  Use the klogctl() interface (FEATURE_KLOGD_KLOGCTL) [Y/n/?] (NEW) y</span><br><span class="line">logger (6.5 kb) (LOGGER) [Y/n/?] (NEW) y</span><br><span class="line">logread (5 kb) (LOGREAD) [Y/n/?] (NEW) y</span><br><span class="line">  Double buffering (FEATURE_LOGREAD_REDUCED_LOCKING) [Y/n/?] (NEW) y</span><br><span class="line">syslogd (14 kb) (SYSLOGD) [Y/n/?] (NEW) y</span><br><span class="line">  Rotate message files (FEATURE_ROTATE_LOGFILE) [Y/n/?] (NEW) y</span><br><span class="line">  Remote Log support (FEATURE_REMOTE_LOG) [Y/n/?] (NEW) y</span><br><span class="line">  Support -D (drop dups) option (FEATURE_SYSLOGD_DUP) [Y/n/?] (NEW) y</span><br><span class="line">  Support syslog.conf (FEATURE_SYSLOGD_CFG) [Y/n/?] (NEW) y</span><br><span class="line">  Include milliseconds in timestamps (FEATURE_SYSLOGD_PRECISE_TIMESTAMPS) [N/y/?] (NEW) n</span><br><span class="line">  Read buffer size in bytes (FEATURE_SYSLOGD_READ_BUFFER_SIZE) [256] (NEW) 256</span><br><span class="line">  Circular Buffer support (FEATURE_IPC_SYSLOG) [Y/n/?] (NEW) y</span><br><span class="line">    Circular buffer size in Kbytes (minimum 4KB) (FEATURE_IPC_SYSLOG_BUFFER_SIZE) [16] (NEW) 16</span><br><span class="line">  Linux kernel printk buffer support (FEATURE_KMSG_SYSLOG) [Y/n/?] (NEW) y</span><br><span class="line">➜  busybox </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  busybox make CROSS_COMPILE=riscv64-linux-gnu- ARCH=riscv menuconfig</span><br><span class="line">scripts/kconfig/mconf Config.in</span><br><span class="line">#</span><br><span class="line"># using defaults found in .config</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*** End of configuration.</span><br><span class="line">*** Execute &#x27;make&#x27; to build the project or try &#x27;make help&#x27;.</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">➜  busybox make CROSS_COMPILE=riscv64-linux-gnu- ARCH=riscv -j8       </span><br><span class="line">  LD      archival/built-in.o</span><br><span class="line">  CC      archival/bzip2.o</span><br><span class="line">  CC      archival/bbunzip.o</span><br><span class="line">  CC      archival/chksum_and_xwrite_tar_header.o</span><br><span class="line">  CC      archival/dpkg.o</span><br><span class="line">  CC      archival/cpio.o</span><br><span class="line">  CC      archival/dpkg_deb.o</span><br><span class="line">  LD      archival/libarchive/built-in.o</span><br><span class="line">  CC      archival/gzip.o</span><br><span class="line">  CC      archival/libarchive/common.o</span><br><span class="line">  CC      archival/lzop.o</span><br><span class="line">  CC      archival/libarchive/data_align.o</span><br><span class="line">  LD      console-tools/built-in.o</span><br><span class="line">  CC      console-tools/chvt.o</span><br><span class="line">  CC      console-tools/clear.o</span><br><span class="line">  CC      console-tools/deallocvt.o</span><br><span class="line">  CC      archival/libarchive/data_extract_all.o</span><br><span class="line">  LD      coreutils/built-in.o</span><br><span class="line">  CC      coreutils/basename.o</span><br><span class="line">  CC      coreutils/cat.o</span><br><span class="line">  CC      console-tools/dumpkmap.o</span><br><span class="line">archival/libarchive/data_extract_all.c: In function ‘data_extract_all’:</span><br><span class="line">archival/libarchive/data_extract_all.c:235:25: warning: ignoring return value of ‘chown’ declared with attribute ‘warn_unused_result’ [-Wunused-result]</span><br><span class="line">  235 |                         chown(dst_name, uid, gid);</span><br><span class="line">      |                         ^~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">  LD      coreutils/libcoreutils/built-in.o</span><br><span class="line">  CC      archival/libarchive/data_extract_to_command.o</span><br><span class="line">  CC      archival/libarchive/data_extract_to_stdout.o</span><br><span class="line">  CC      coreutils/libcoreutils/cp_mv_stat.o</span><br><span class="line">  LD      debianutils/built-in.o</span><br><span class="line">  CC      debianutils/pipe_progress.o</span><br><span class="line">console-tools/dumpkmap.c: In function ‘dumpkmap_main’:</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">  CC      libbb/verror_msg.o</span><br><span class="line">util-linux/mkfs_minix.c: In function ‘get_list_blocks’:</span><br><span class="line">util-linux/mkfs_minix.c:532:17: warning: ignoring return value of ‘fscanf’ declared with attribute ‘warn_unused_result’ [-Wunused-result]</span><br><span class="line">  532 |                 fscanf(listfile, &quot;%lu\n&quot;, &amp;blockno);</span><br><span class="line">      |                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">  CC      libbb/vfork_daemon_rexec.o</span><br><span class="line">  CC      libbb/warn_ignoring_args.o</span><br><span class="line">  CC      util-linux/mkswap.o</span><br><span class="line">  CC      util-linux/more.o</span><br><span class="line">  CC      libbb/wfopen.o</span><br><span class="line">  CC      util-linux/mount.o</span><br><span class="line">  CC      libbb/wfopen_input.o</span><br><span class="line">  CC      libbb/write.o</span><br><span class="line">  CC      util-linux/mountpoint.o</span><br><span class="line">  CC      libbb/xatonum.o</span><br><span class="line">  CC      util-linux/nsenter.o</span><br><span class="line">  CC      util-linux/pivot_root.o</span><br><span class="line">  CC      util-linux/rdate.o</span><br><span class="line">  CC      libbb/xconnect.o</span><br><span class="line">  CC      util-linux/rdev.o</span><br><span class="line">  CC      libbb/xfunc_die.o</span><br><span class="line">  CC      util-linux/readprofile.o</span><br><span class="line">  CC      libbb/xfuncs.o</span><br><span class="line">  CC      util-linux/renice.o</span><br><span class="line">  CC      libbb/xfuncs_printf.o</span><br><span class="line">  CC      util-linux/rev.o</span><br><span class="line">  CC      libbb/xgetcwd.o</span><br><span class="line">  CC      util-linux/rtcwake.o</span><br><span class="line">  CC      util-linux/script.o</span><br><span class="line">  CC      libbb/xgethostbyname.o</span><br><span class="line">  CC      libbb/xreadlink.o</span><br><span class="line">  CC      libbb/xrealloc_vector.o</span><br><span class="line">  CC      util-linux/scriptreplay.o</span><br><span class="line">  CC      util-linux/setarch.o</span><br><span class="line">  CC      libbb/xregcomp.o</span><br><span class="line">  CC      util-linux/setpriv.o</span><br><span class="line">  CC      util-linux/setsid.o</span><br><span class="line">  CC      util-linux/swaponoff.o</span><br><span class="line">  CC      util-linux/switch_root.o</span><br><span class="line">  CC      util-linux/taskset.o</span><br><span class="line">  CC      util-linux/uevent.o</span><br><span class="line">  CC      util-linux/umount.o</span><br><span class="line">  AR      libbb/lib.a</span><br><span class="line">  CC      util-linux/unshare.o</span><br><span class="line">  CC      util-linux/wall.o</span><br><span class="line">util-linux/unshare.c: In function ‘unshare_main’:</span><br><span class="line">util-linux/unshare.c:295:25: warning: ignoring return value of ‘read’ declared with attribute ‘warn_unused_result’ [-Wunused-result]</span><br><span class="line">  295 |                         read(fdp.rd, ns_ctx_list, 1); /* ...using bogus buffer */</span><br><span class="line">      |                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">  AR      util-linux/lib.a</span><br><span class="line">  LINK    busybox_unstripped</span><br><span class="line">Trying libraries: m resolv rt</span><br><span class="line"> Library m is needed, can&#x27;t exclude it (yet)</span><br><span class="line"> Library resolv is needed, can&#x27;t exclude it (yet)</span><br><span class="line"> Library rt is not needed, excluding it</span><br><span class="line"> Library m is needed, can&#x27;t exclude it (yet)</span><br><span class="line"> Library resolv is needed, can&#x27;t exclude it (yet)</span><br><span class="line">Final link with: m resolv</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">➜  busybox make CONFIG_PREFIX=./../busybox_rootfs install</span><br><span class="line">  ./../busybox_rootfs//bin/arch -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/ash -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/base32 -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/base64 -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/cat -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/chattr -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/chgrp -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/chmod -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/chown -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/conspy -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/cp -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/cpio -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/cttyhack -&gt; busybox</span><br><span class="line">  ./../busybox_rootfs//bin/date -&gt; busybox</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">  ./../busybox_rootfs//usr/sbin/ubirmvol -&gt; ../../bin/busybox</span><br><span class="line">  ./../busybox_rootfs//usr/sbin/ubirsvol -&gt; ../../bin/busybox</span><br><span class="line">  ./../busybox_rootfs//usr/sbin/ubiupdatevol -&gt; ../../bin/busybox</span><br><span class="line">  ./../busybox_rootfs//usr/sbin/udhcpd -&gt; ../../bin/busybox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--------------------------------------------------</span><br><span class="line">You will probably need to make your busybox binary</span><br><span class="line">setuid root to ensure all configured applets will</span><br><span class="line">work properly.</span><br><span class="line">--------------------------------------------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">➜  busybox mkdir -p initramfs/&#123;bin,dev,etc,home,mnt,proc,sys,usr&#125;</span><br><span class="line">➜  busybox cd initramfs/dev</span><br><span class="line">➜  dev sudo mknod sda b 8 0 </span><br><span class="line">[sudo] password for lvision: </span><br><span class="line">mknod: sda: File exists</span><br><span class="line">➜  dev sudo mknod console c 5 1</span><br><span class="line">mknod: console: File exists</span><br><span class="line">➜  dev cd ..</span><br><span class="line">➜  initramfs cp -r ../../busybox_rootfs/* ./</span><br><span class="line">➜  initramfs ll</span><br><span class="line">total 2.3M</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:59 bin</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:57 dev</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 etc</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 home</span><br><span class="line">-rwxrwxr-x 1 lvision lvision   73 Dec 16 03:00 init</span><br><span class="line">lrwxrwxrwx 1 lvision lvision   11 Dec 16 02:59 linuxrc -&gt; bin/busybox</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 mnt</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 proc</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:59 sbin</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 sys</span><br><span class="line">drwxrwxr-x 4 lvision lvision 4.0K Dec 16 02:59 usr</span><br><span class="line">➜  initramfs </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  initramfs vim init</span><br></pre></td></tr></table></figure>
<p>and put </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">mount -t proc none /proc</span><br><span class="line">mount -t sysfs none /sys</span><br><span class="line">exec /bin/sh</span><br></pre></td></tr></table></figure>
<p>in file <strong>init</strong>.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  initramfs cat init </span><br><span class="line">#!/bin/sh</span><br><span class="line">mount -t proc none /proc</span><br><span class="line">mount -t sysfs none /sys</span><br><span class="line">exec /bin/sh</span><br><span class="line">➜  initramfs chmod +x init </span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">➜  initramfs find . -print0 | cpio --null -ov --format=newc &gt; initramfs.cpio </span><br><span class="line">.</span><br><span class="line">./etc</span><br><span class="line">./init</span><br><span class="line">./busybox_rootfs</span><br><span class="line">./busybox_rootfs/bin</span><br><span class="line">./busybox_rootfs/bin/cpio</span><br><span class="line">./busybox_rootfs/bin/ln</span><br><span class="line">./busybox_rootfs/bin/su</span><br><span class="line">./busybox_rootfs/bin/pwd</span><br><span class="line">./busybox_rootfs/bin/gzip</span><br><span class="line">./busybox_rootfs/bin/link</span><br><span class="line">./busybox_rootfs/bin/lzop</span><br><span class="line">./busybox_rootfs/bin/nice</span><br><span class="line">./busybox_rootfs/bin/makemime</span><br><span class="line">./busybox_rootfs/bin/fatattr</span><br><span class="line">./busybox_rootfs/bin/busybox</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">./usr/sbin/sendmail</span><br><span class="line">./usr/sbin/rtcwake</span><br><span class="line">./usr/sbin/ftpd</span><br><span class="line">./usr/sbin/adduser</span><br><span class="line">./usr/sbin/nbd-client</span><br><span class="line">./usr/sbin/dhcprelay</span><br><span class="line">./usr/sbin/brctl</span><br><span class="line">./usr/sbin/mim</span><br><span class="line">./usr/sbin/udhcpd</span><br><span class="line">./usr/sbin/nologin</span><br><span class="line">./usr/sbin/ubidetach</span><br><span class="line">./usr/sbin/addgroup</span><br><span class="line">./usr/sbin/fdformat</span><br><span class="line">./usr/sbin/crond</span><br><span class="line">./sys</span><br><span class="line">11511 blocks</span><br><span class="line">➜  initramfs gzip ./initramfs.cpio</span><br><span class="line">➜  initramfs ll</span><br><span class="line">total 1.4M</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 03:58 bin</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:57 dev</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 etc</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 home</span><br><span class="line">-rwxrwxr-x 1 lvision lvision   73 Dec 16 03:55 init</span><br><span class="line">-rw-rw-r-- 1 lvision lvision 1.4M Dec 16 04:01 initramfs.cpio.gz</span><br><span class="line">lrwxrwxrwx 1 lvision lvision   11 Dec 16 03:58 linuxrc -&gt; bin/busybox</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 mnt</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 proc</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 03:58 sbin</span><br><span class="line">drwxrwxr-x 2 lvision lvision 4.0K Dec 16 02:56 sys</span><br><span class="line">drwxrwxr-x 4 lvision lvision 4.0K Dec 16 02:59 usr</span><br></pre></td></tr></table></figure>

<h1 id="2-Flashing"><a href="#2-Flashing" class="headerlink" title="2. Flashing"></a>2. Flashing</h1><h2 id="2-1-Prepare-SD-Disk"><a href="#2-1-Prepare-SD-Disk" class="headerlink" title="2.1 Prepare SD Disk"></a>2.1 Prepare SD Disk</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">➜  VisionFive sudo sgdisk --clear \</span><br><span class="line">  --set-alignment=2 \</span><br><span class="line">  --new=1:4096:8191 --change-name=1:spl --typecode=1:2E54B353-1271-4842-806F-E436D6AF6985\</span><br><span class="line">  --new=2:8192:16383 --change-name=2:uboot --typecode=2:BC13C2FF-59E6-4262-A352-B275FD6F7172  \</span><br><span class="line">  --new=3:16384:1654784 --change-name=3:system --typecode=3:EBD0A0A2-B9E5-4433-87C0-68B6B72699C7 \</span><br><span class="line">  /dev/sdb</span><br><span class="line"></span><br><span class="line">Setting name!</span><br><span class="line">partNum is 0</span><br><span class="line">Setting name!</span><br><span class="line">partNum is 1</span><br><span class="line">Setting name!</span><br><span class="line">partNum is 2</span><br><span class="line">The operation has completed successfully.</span><br></pre></td></tr></table></figure>

<h2 id="2-2-Flash-the-SD-Card"><a href="#2-2-Flash-the-SD-Card" class="headerlink" title="2.2 Flash the SD Card"></a>2.2 Flash the SD Card</h2><p>Including <strong>ALL</strong> the above, say:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/u-boot/u-boot">U-Boot</a></li>
<li><a target="_blank" rel="noopener" href="https://www.kernel.org/">Linux Kernel</a></li>
<li><a target="_blank" rel="noopener" href="https://busybox.net/">Busybox</a></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">➜  VisionFive sudo dd if=./u-boot/spl/u-boot-spl.bin.normal.out of=/dev/sdb1</span><br><span class="line">275+1 records in</span><br><span class="line">275+1 records out</span><br><span class="line">140919 bytes (141 kB, 138 KiB) copied, 0.111194 s, 1.3 MB/s</span><br><span class="line">➜  VisionFive sudo dd if=./u-boot/u-boot.itb of=/dev/sdb2</span><br><span class="line">1994+1 records in</span><br><span class="line">1994+1 records out</span><br><span class="line">1020947 bytes (1.0 MB, 997 KiB) copied, 0.0101341 s, 101 MB/s</span><br><span class="line">➜  VisionFive sudo mount /dev/sdb3 /mnt/</span><br><span class="line">➜  VisionFive sudo cp ./u-boot/spl/u-boot-spl.bin.normal.out /mnt</span><br><span class="line">➜  VisionFive sudo cp ./u-boot/u-boot.itb /mnt</span><br><span class="line">➜  VisionFive sudo cp ./linux/arch/riscv/boot/Image.gz /mnt</span><br><span class="line">➜  VisionFive sudo cp ./busybox/initramfs/initramfs.cpio.gz /mnt</span><br><span class="line">➜  VisionFive sudo cp ./linux/arch/riscv/boot/dts/starfive/jh7110-starfive-visionfive-2-v1.3b.dtb /mnt</span><br></pre></td></tr></table></figure>

<p>Then, we take a look at our built system currently under folder <code>/mnt</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">➜  VisionFive ll /mnt</span><br><span class="line">total 9.2M</span><br><span class="line">lrwxrwxrwx  1 root root    7 Dec 15 00:10 bin -&gt; usr/bin</span><br><span class="line">drwxr-xr-x  3 root root 4.0K Dec 15 03:38 boot</span><br><span class="line">drwxr-xr-x  4 root root 4.0K Dec 15 00:10 dev</span><br><span class="line">drwxr-xr-x 84 root root 4.0K Dec 15 00:26 etc</span><br><span class="line">drwxr-xr-x  3 root root 4.0K Dec 15 00:26 home</span><br><span class="line">-rw-r--r--  1 root root 6.6M Dec 16 04:12 Image.gz</span><br><span class="line">-rw-r--r--  1 root root 1.4M Dec 16 04:13 initramfs.cpio.gz</span><br><span class="line">-rw-r--r--  1 root root  30K Dec 16 04:14 jh7110-starfive-visionfive-2-v1.3b.dtb</span><br><span class="line">lrwxrwxrwx  1 root root    7 Dec 15 00:10 lib -&gt; usr/lib</span><br><span class="line">drwx------  2 root root  16K Dec 15 03:38 lost+found</span><br><span class="line">drwxr-xr-x  2 root root 4.0K Dec 15 00:10 media</span><br><span class="line">drwxr-xr-x  2 root root 4.0K Dec 15 00:10 mnt</span><br><span class="line">drwxr-xr-x  3 root root 4.0K Dec 15 00:26 opt</span><br><span class="line">drwxr-xr-x  2 root root 4.0K Jul 27 22:43 proc</span><br><span class="line">drwx------  3 root root 4.0K Dec 15 00:12 root</span><br><span class="line">drwxr-xr-x  2 root root 4.0K Jul 27 22:43 run</span><br><span class="line">lrwxrwxrwx  1 root root    8 Dec 15 00:10 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x  2 root root 4.0K Dec 15 00:10 srv</span><br><span class="line">drwxr-xr-x  2 root root 4.0K Jul 27 22:43 sys</span><br><span class="line">drwxrwxrwt  2 root root 4.0K Dec 15 00:25 tmp</span><br><span class="line">-rw-r--r--  1 root root 998K Dec 16 04:11 u-boot.itb</span><br><span class="line">-rw-r--r--  1 root root 138K Dec 16 04:11 u-boot-spl.bin.normal.out</span><br><span class="line">drwxr-xr-x 11 root root 4.0K Dec 15 00:10 usr</span><br><span class="line">drwxr-xr-x 12 root root 4.0K Dec 15 00:21 var</span><br></pre></td></tr></table></figure>



      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Nobody</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
